(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[374],{3338:function(e,t,a){Promise.resolve().then(a.bind(a,4935))},4935:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var s=a(7437),r=a(2265),n=a(1642),l=a(5236),c=a(9842),d=a(9854),i=a(1169),o=a(4865),u=a(5566);let m={apiKey:u.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:u.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:u.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:u.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:u.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:u.env.NEXT_PUBLIC_FIREBASE_APP_ID},x=(0,l.C6)().length?(0,l.C6)()[0]:(0,l.ZF)(m),p=(0,c.ad)(x),h=(0,d.cF)(x);function g(){let[e,t]=(0,r.useState)(!1),[a,l]=(0,r.useState)(!1),[i,o]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[x,g]=(0,r.useState)(!1),[b,j]=(0,r.useState)(null),[v,N]=(0,r.useState)(null),_=async e=>{if(e.preventDefault(),j(null),N(null),!i.trim()||!u.trim()){N("Project ID and Name are required.");return}try{g(!0);let e=i.trim(),t=u.trim(),a=(0,c.JU)(p,"interoperable-canvas",e);await (0,c.pl)(a,{name:t,slug:e,createdAt:(0,c.Bt)(),ownerWallet:"admin"},{merge:!0});let s=(0,c.JU)(p,"interoperable-canvas",e,"canvases","root");await (0,c.pl)(s,{name:"Root Canvas",createdAt:(0,c.Bt)(),aspect:"16:9"},{merge:!0});try{let t="interoperable-canvas/assets/".concat(e,"/.keep"),a=new Blob(["placeholder"],{type:"text/plain"});await (0,d.KV)((0,d.iH)(h,t),a,{cacheControl:"no-store"})}catch(e){}j("Project created successfully."),o(""),m("")}catch(e){var t;N(null!==(t=null==e?void 0:e.message)&&void 0!==t?t:"Failed to create project")}finally{g(!1)}};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-100 py-10 px-4",children:(0,s.jsxs)("div",{className:"max-w-2xl mx-auto bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Interoperable Canvas — Projects"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Create and manage projects. This homepage does not edit canvases."}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(n.Z,{})}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 mb-4",children:[(0,s.jsx)("p",{children:"For demo purposes, project creation is enabled for all users."}),(0,s.jsx)("p",{children:"In production, implement proper admin authentication."})]}),(0,s.jsxs)("form",{onSubmit:_,className:"mt-6 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Project ID (slug)"}),(0,s.jsx)("input",{value:i,onChange:e=>o(e.target.value),className:"mt-1 w-full border rounded px-3 py-2 text-black",placeholder:"e.g., gardens-fund"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Storage: interoperable-canvas/assets/",i||"your-id","/"]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["Firestore: interoperable-canvas/",i||"your-id"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Project Name"}),(0,s.jsx)("input",{value:u,onChange:e=>m(e.target.value),className:"mt-1 w-full border rounded px-3 py-2 text-black",placeholder:"e.g., PGF Gardens"})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)("button",{type:"submit",disabled:x,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded disabled:opacity-50",children:x?"Creating…":"Create Project"})}),b&&(0,s.jsx)("div",{className:"text-green-700 bg-green-50 border border-green-200 rounded p-2 text-sm",children:b}),v&&(0,s.jsx)("div",{className:"text-red-700 bg-red-50 border border-red-200 rounded p-2 text-sm",children:v})]})]})]})})}function b(){return(0,s.jsx)(r.Suspense,{fallback:(0,s.jsx)("div",{className:"min-h-screen bg-gray-100 text-gray-700 p-6",children:"Loading…"}),children:(0,s.jsx)(j,{})})}function j(){let e=(0,i.useSearchParams)(),t=(null==e?void 0:e.get("projectId"))||null;return t?(0,s.jsx)("div",{className:"min-h-screen bg-gray-900",children:(0,s.jsx)(o.s,{projectId:t})}):(0,s.jsx)(g,{})}}},function(e){e.O(0,[358,354,865,971,23,744],function(){return e(e.s=3338)}),_N_E=e.O()}]);