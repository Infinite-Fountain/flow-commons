(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[374],{3338:function(e,t,a){Promise.resolve().then(a.bind(a,4935))},4935:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var r=a(7437),n=a(2265),s=a(1642),l=a(5236),c=a(9842),i=a(9854),o=a(1169),d=a(5265),u=a(5566);let m={apiKey:u.env.NEXT_PUBLIC_FIREBASE_API_KEY,authDomain:u.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,projectId:u.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,storageBucket:u.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,messagingSenderId:u.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,appId:u.env.NEXT_PUBLIC_FIREBASE_APP_ID},p=(0,l.C6)().length?(0,l.C6)()[0]:(0,l.ZF)(m),x=(0,c.ad)(p),h=(0,i.cF)(p);function g(){let[e,t]=(0,n.useState)(!1),[a,l]=(0,n.useState)(!1),[o,d]=(0,n.useState)(""),[u,m]=(0,n.useState)(""),[p,g]=(0,n.useState)(!1),[b,j]=(0,n.useState)(null),[v,N]=(0,n.useState)(null),_=async e=>{if(e.preventDefault(),j(null),N(null),!o.trim()||!u.trim()){N("Project ID and Name are required.");return}try{g(!0);let e=o.trim(),t=u.trim(),a=(0,c.JU)(x,"interoperable-canvas",e);await (0,c.pl)(a,{name:t,slug:e,createdAt:(0,c.Bt)(),ownerWallet:"admin"},{merge:!0});let r=(0,c.JU)(x,"interoperable-canvas",e,"canvases","root");await (0,c.pl)(r,{name:"Root Canvas",createdAt:(0,c.Bt)(),aspect:"16:9"},{merge:!0});try{let t="interoperable-canvas/assets/".concat(e,"/.keep"),a=new Blob(["placeholder"],{type:"text/plain"});await (0,i.KV)((0,i.iH)(h,t),a,{cacheControl:"no-store"})}catch(e){}j("Project created successfully."),d(""),m("")}catch(e){var t;N(null!==(t=null==e?void 0:e.message)&&void 0!==t?t:"Failed to create project")}finally{g(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-100 py-10 px-4",children:(0,r.jsxs)("div",{className:"max-w-2xl mx-auto bg-white rounded-lg shadow p-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Interoperable Canvas — Projects"}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Create and manage projects. This homepage does not edit canvases."}),(0,r.jsxs)("div",{className:"mt-6",children:[(0,r.jsx)("div",{className:"mb-4",children:(0,r.jsx)(s.Z,{})}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 mb-4",children:[(0,r.jsx)("p",{children:"For demo purposes, project creation is enabled for all users."}),(0,r.jsx)("p",{children:"In production, implement proper admin authentication."})]}),(0,r.jsxs)("form",{onSubmit:_,className:"mt-6 space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Project ID (slug)"}),(0,r.jsx)("input",{value:o,onChange:e=>d(e.target.value),className:"mt-1 w-full border rounded px-3 py-2 text-black",placeholder:"e.g., gardens-fund"}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Storage: interoperable-canvas/assets/",o||"your-id","/"]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Firestore: interoperable-canvas/",o||"your-id"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Project Name"}),(0,r.jsx)("input",{value:u,onChange:e=>m(e.target.value),className:"mt-1 w-full border rounded px-3 py-2 text-black",placeholder:"e.g., PGF Gardens"})]}),(0,r.jsx)("div",{className:"flex items-center gap-2",children:(0,r.jsx)("button",{type:"submit",disabled:p,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded disabled:opacity-50",children:p?"Creating…":"Create Project"})}),b&&(0,r.jsx)("div",{className:"text-green-700 bg-green-50 border border-green-200 rounded p-2 text-sm",children:b}),v&&(0,r.jsx)("div",{className:"text-red-700 bg-red-50 border border-red-200 rounded p-2 text-sm",children:v})]})]})]})})}function b(){return(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)("div",{className:"min-h-screen bg-gray-100 text-gray-700 p-6",children:"Loading…"}),children:(0,r.jsx)(j,{})})}function j(){let e=(0,o.useSearchParams)(),t=(null==e?void 0:e.get("projectId"))||null,a=(null==e?void 0:e.get("childId"))||null;return((0,n.useEffect)(()=>{if(!a)return;let e=new URLSearchParams(window.location.search),t=window.innerWidth<=850,r=a.includes("-desktop"),n=a.includes("-mobile");if(t&&r){let t=a.replace("-desktop","-mobile");e.set("childId",t),window.location.replace("".concat(window.location.pathname,"?").concat(e.toString()));return}if(!t&&n){let t=a.replace("-mobile","-desktop");e.set("childId",t),window.location.replace("".concat(window.location.pathname,"?").concat(e.toString()));return}},[a]),t)?(0,r.jsx)("div",{className:"min-h-screen bg-gray-900",children:(0,r.jsx)(d.s,{projectId:t,scope:a?{type:"child",childId:a}:{type:"root"}})}):(0,r.jsx)(g,{})}}},function(e){e.O(0,[358,705,561,265,971,23,744],function(){return e(e.s=3338)}),_N_E=e.O()}]);