exports.id=364,exports.ids=[364],exports.modules={7749:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addAdminServicesToServer=t.registerAdminService=void 0;let r=[];function i(e,t){r.push({getServiceDefinition:e,getHandlers:t})}function n(e){for(let{getServiceDefinition:t,getHandlers:i}of r)e.addService(t(),i())}t.registerAdminService=i,t.addAdminServicesToServer=n},1742:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackoffTimeout=void 0;let r=1e3,i=1.6,n=12e4,s=.2;function a(e,t){return Math.random()*(t-e)+e}class o{constructor(e,t){this.callback=e,this.initialDelay=r,this.multiplier=i,this.maxDelay=n,this.jitter=s,this.running=!1,this.hasRef=!0,this.startTime=new Date,this.endTime=new Date,t&&(t.initialDelay&&(this.initialDelay=t.initialDelay),t.multiplier&&(this.multiplier=t.multiplier),t.jitter&&(this.jitter=t.jitter),t.maxDelay&&(this.maxDelay=t.maxDelay)),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}runTimer(e){var t,r;this.endTime=this.startTime,this.endTime.setMilliseconds(this.endTime.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.callback(),this.running=!1},e),this.hasRef||null===(r=(t=this.timerId).unref)||void 0===r||r.call(t)}runOnce(){this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);let e=Math.min(this.nextDelay*this.multiplier,this.maxDelay),t=e*this.jitter;this.nextDelay=e+a(-t,t)}stop(){clearTimeout(this.timerId),this.running=!1}reset(){if(this.nextDelay=this.initialDelay,this.running){let e=new Date,t=this.startTime;t.setMilliseconds(t.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),e<t?this.runTimer(t.getTime()-e.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var e,t;this.hasRef=!0,null===(t=(e=this.timerId).ref)||void 0===t||t.call(e)}unref(){var e,t;this.hasRef=!1,null===(t=(e=this.timerId).unref)||void 0===t||t.call(e)}getEndTime(){return this.endTime}}t.BackoffTimeout=o},5402:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CallCredentials=void 0;let i=r(6281);function n(e){return"getRequestHeaders"in e&&"function"==typeof e.getRequestHeaders}class s{static createFromMetadataGenerator(e){return new o(e)}static createFromGoogleCredential(e){return s.createFromMetadataGenerator((t,r)=>{let s;(s=n(e)?e.getRequestHeaders(t.service_url):new Promise((r,i)=>{e.getRequestMetadata(t.service_url,(e,t)=>{if(e){i(e);return}if(!t){i(Error("Headers not set by metadata plugin"));return}r(t)})})).then(e=>{let t=new i.Metadata;for(let r of Object.keys(e))t.add(r,e[r]);r(null,t)},e=>{r(e)})})}static createEmpty(){return new l}}t.CallCredentials=s;class a extends s{constructor(e){super(),this.creds=e}async generateMetadata(e){let t=new i.Metadata;for(let r of(await Promise.all(this.creds.map(t=>t.generateMetadata(e)))))t.merge(r);return t}compose(e){return new a(this.creds.concat([e]))}_equals(e){return this===e||e instanceof a&&this.creds.every((t,r)=>t._equals(e.creds[r]))}}class o extends s{constructor(e){super(),this.metadataGenerator=e}generateMetadata(e){return new Promise((t,r)=>{this.metadataGenerator(e,(e,i)=>{void 0!==i?t(i):r(e)})})}compose(e){return new a([this,e])}_equals(e){return this===e||e instanceof o&&this.metadataGenerator===e.metadataGenerator}}class l extends s{generateMetadata(e){return Promise.resolve(new i.Metadata)}compose(e){return e}_equals(e){return e instanceof l}}},1218:(e,t)=>{"use strict";function r(e){return void 0!==e.onReceiveMetadata&&1===e.onReceiveMetadata.length}Object.defineProperty(t,"__esModule",{value:!0}),t.InterceptingListenerImpl=t.isInterceptingListener=void 0,t.isInterceptingListener=r;class i{constructor(e,t){this.listener=e,this.nextListener=t,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(e){this.processingMetadata=!0,this.listener.onReceiveMetadata(e,e=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(e),this.processPendingMessage(),this.processPendingStatus()})}onReceiveMessage(e){this.processingMessage=!0,this.listener.onReceiveMessage(e,e=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=e,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(e),this.processPendingStatus())})}onReceiveStatus(e){this.listener.onReceiveStatus(e,e=>{this.processingMetadata||this.processingMessage?this.pendingStatus=e:this.nextListener.onReceiveStatus(e)})}}t.InterceptingListenerImpl=i},1801:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNextCallNumber=void 0;let r=0;function i(){return r++}t.getNextCallNumber=i},7639:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientDuplexStreamImpl=t.ClientWritableStreamImpl=t.ClientReadableStreamImpl=t.ClientUnaryCallImpl=t.callErrorFromStatus=void 0;let i=r(2361),n=r(2781),s=r(9572);function a(e,t){let r=`${e.code} ${s.Status[e.code]}: ${e.details}`,i=Error(r),n=`${i.stack}
for call at
${t}`;return Object.assign(Error(r),e,{stack:n})}t.callErrorFromStatus=a;class o extends i.EventEmitter{constructor(){super()}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}}t.ClientUnaryCallImpl=o;class l extends n.Readable{constructor(e){super({objectMode:!0}),this.deserialize=e}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}_read(e){var t;null===(t=this.call)||void 0===t||t.startRead()}}t.ClientReadableStreamImpl=l;class h extends n.Writable{constructor(e){super({objectMode:!0}),this.serialize=e}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}_write(e,t,r){var i;let n={callback:r},s=Number(t);Number.isNaN(s)||(n.flags=s),null===(i=this.call)||void 0===i||i.sendMessageWithContext(n,e)}_final(e){var t;null===(t=this.call)||void 0===t||t.halfClose(),e()}}t.ClientWritableStreamImpl=h;class u extends n.Duplex{constructor(e,t){super({objectMode:!0}),this.serialize=e,this.deserialize=t}cancel(){var e;null===(e=this.call)||void 0===e||e.cancelWithStatus(s.Status.CANCELLED,"Cancelled on client")}getPeer(){var e,t;return null!==(t=null===(e=this.call)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:"unknown"}_read(e){var t;null===(t=this.call)||void 0===t||t.startRead()}_write(e,t,r){var i;let n={callback:r},s=Number(t);Number.isNaN(s)||(n.flags=s),null===(i=this.call)||void 0===i||i.sendMessageWithContext(n,e)}_final(e){var t;null===(t=this.call)||void 0===t||t.halfClose(),e()}}t.ClientDuplexStreamImpl=u},499:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelCredentials=void 0;let i=r(4404),n=r(5402),s=r(606);function a(e,t){if(e&&!(e instanceof Buffer))throw TypeError(`${t}, if provided, must be a Buffer.`)}class o{constructor(e){this.callCredentials=e||n.CallCredentials.createEmpty()}_getCallCredentials(){return this.callCredentials}static createSsl(e,t,r,n){var o;if(a(e,"Root certificate"),a(t,"Private key"),a(r,"Certificate chain"),t&&!r)throw Error("Private key must be given with accompanying certificate chain");if(!t&&r)throw Error("Certificate chain must be given with accompanying private key");return new h((0,i.createSecureContext)({ca:null!==(o=null!=e?e:(0,s.getDefaultRootsData)())&&void 0!==o?o:void 0,key:null!=t?t:void 0,cert:null!=r?r:void 0,ciphers:s.CIPHER_SUITES}),null!=n?n:{})}static createFromSecureContext(e,t){return new h(e,null!=t?t:{})}static createInsecure(){return new l}}t.ChannelCredentials=o;class l extends o{constructor(e){super(e)}compose(e){throw Error("Cannot compose insecure credentials")}_getConnectionOptions(){return null}_isSecure(){return!1}_equals(e){return e instanceof l}}class h extends o{constructor(e,t){super(),this.secureContext=e,this.verifyOptions=t,this.connectionOptions={secureContext:e},(null==t?void 0:t.checkServerIdentity)&&(this.connectionOptions.checkServerIdentity=t.checkServerIdentity)}compose(e){return new u(this,this.callCredentials.compose(e))}_getConnectionOptions(){return Object.assign({},this.connectionOptions)}_isSecure(){return!0}_equals(e){return this===e||e instanceof h&&this.secureContext===e.secureContext&&this.verifyOptions.checkServerIdentity===e.verifyOptions.checkServerIdentity}}class u extends o{constructor(e,t){super(t),this.channelCredentials=e}compose(e){let t=this.callCredentials.compose(e);return new u(this.channelCredentials,t)}_getConnectionOptions(){return this.channelCredentials._getConnectionOptions()}_isSecure(){return!0}_equals(e){return this===e||e instanceof u&&this.channelCredentials._equals(e.channelCredentials)&&this.callCredentials._equals(e.callCredentials)}}},9455:(e,t)=>{"use strict";function r(e,t){let r=Object.keys(e).sort(),i=Object.keys(t).sort();if(r.length!==i.length)return!1;for(let n=0;n<r.length;n+=1)if(r[n]!==i[n]||e[r[n]]!==t[i[n]])return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.channelOptionsEqual=t.recognizedOptions=void 0,t.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0,"grpc.client_idle_timeout_ms":!0,"grpc-node.tls_enable_trace":!0},t.channelOptionsEqual=r},9452:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelImplementation=void 0;let i=r(499),n=r(9359);class s{constructor(e,t,r){if("string"!=typeof e)throw TypeError("Channel target must be a string");if(!(t instanceof i.ChannelCredentials))throw TypeError("Channel credentials must be a ChannelCredentials object");if(r&&"object"!=typeof r)throw TypeError("Channel options must be an object");this.internalChannel=new n.InternalChannel(e,t,r)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(e){return this.internalChannel.getConnectivityState(e)}watchConnectivityState(e,t,r){this.internalChannel.watchConnectivityState(e,t,r)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(e,t,r,i,n){if("string"!=typeof e)throw TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(e,t,r,i,n)}}t.ChannelImplementation=s},5962:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.getChannelzServiceDefinition=t.getChannelzHandlers=t.unregisterChannelzRef=t.registerChannelzSocket=t.registerChannelzServer=t.registerChannelzSubchannel=t.registerChannelzChannel=t.ChannelzCallTracker=t.ChannelzChildrenTracker=t.ChannelzTrace=void 0;let i=r(1808),n=r(2409),s=r(9572),a=r(4955),o=r(7749),l=r(4529);function h(e){return{channel_id:e.id,name:e.name}}function u(e){return{subchannel_id:e.id,name:e.name}}function c(e){return{server_id:e.id}}function d(e){return{socket_id:e.id,name:e.name}}let p=32;class f{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(e,t,r){let i=new Date;this.events.push({description:t,severity:e,timestamp:i,childChannel:(null==r?void 0:r.kind)==="channel"?r:void 0,childSubchannel:(null==r?void 0:r.kind)==="subchannel"?r:void 0}),this.events.length>=2*p&&(this.events=this.events.slice(p)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:R(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map(e=>({description:e.description,severity:e.severity,timestamp:R(e.timestamp),channel_ref:e.childChannel?h(e.childChannel):null,subchannel_ref:e.childSubchannel?u(e.childSubchannel):null}))}}}t.ChannelzTrace=f;class m{constructor(){this.channelChildren=new Map,this.subchannelChildren=new Map,this.socketChildren=new Map}refChild(e){var t,r,i;switch(e.kind){case"channel":{let r=null!==(t=this.channelChildren.get(e.id))&&void 0!==t?t:{ref:e,count:0};r.count+=1,this.channelChildren.set(e.id,r);break}case"subchannel":{let t=null!==(r=this.subchannelChildren.get(e.id))&&void 0!==r?r:{ref:e,count:0};t.count+=1,this.subchannelChildren.set(e.id,t);break}case"socket":{let t=null!==(i=this.socketChildren.get(e.id))&&void 0!==i?i:{ref:e,count:0};t.count+=1,this.socketChildren.set(e.id,t)}}}unrefChild(e){switch(e.kind){case"channel":{let t=this.channelChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.channelChildren.delete(e.id):this.channelChildren.set(e.id,t));break}case"subchannel":{let t=this.subchannelChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.subchannelChildren.delete(e.id):this.subchannelChildren.set(e.id,t));break}case"socket":{let t=this.socketChildren.get(e.id);void 0!==t&&(t.count-=1,0===t.count?this.socketChildren.delete(e.id):this.socketChildren.set(e.id,t))}}}getChildLists(){let e=[];for(let{ref:t}of this.channelChildren.values())e.push(t);let t=[];for(let{ref:e}of this.subchannelChildren.values())t.push(e);let r=[];for(let{ref:e}of this.socketChildren.values())r.push(e);return{channels:e,subchannels:t,sockets:r}}}t.ChannelzChildrenTracker=m;class g{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}}t.ChannelzCallTracker=g;let y=1;function v(){return y++}let b=[],w=[],E=[],S=[];function T(e,t,r){let i=v(),n={id:i,name:e,kind:"channel"};return r&&(b[i]={ref:n,getInfo:t}),n}function C(e,t,r){let i=v(),n={id:i,name:e,kind:"subchannel"};return r&&(w[i]={ref:n,getInfo:t}),n}function A(e,t){let r=v(),i={id:r,kind:"server"};return t&&(E[r]={ref:i,getInfo:e}),i}function _(e,t,r){let i=v(),n={id:i,name:e,kind:"socket"};return r&&(S[i]={ref:n,getInfo:t}),n}function x(e){switch(e.kind){case"channel":delete b[e.id];return;case"subchannel":delete w[e.id];return;case"server":delete E[e.id];return;case"socket":delete S[e.id];return}}function k(e){let t=Number.parseInt(e,16);return[t/256|0,t%256]}function I(e){return""===e?[]:[].concat(...e.split(":").map(e=>k(e)))}function D(e){if((0,i.isIPv4)(e))return Buffer.from(Uint8Array.from(e.split(".").map(e=>Number.parseInt(e))));if(!(0,i.isIPv6)(e))return null;{let t,r;let i=e.indexOf("::");-1===i?(t=e,r=""):(t=e.substring(0,i),r=e.substring(i+2));let n=Buffer.from(I(t)),s=Buffer.from(I(r)),a=Buffer.alloc(16-n.length-s.length,0);return Buffer.concat([n,a,s])}}function P(e){switch(e){case n.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case n.ConnectivityState.IDLE:return{state:"IDLE"};case n.ConnectivityState.READY:return{state:"READY"};case n.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case n.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function R(e){if(!e)return null;let t=e.getTime();return{seconds:t/1e3|0,nanos:t%1e3*1e6}}function N(e){let t=e.getInfo();return{ref:h(e.ref),data:{target:t.target,state:P(t.state),calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:R(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},channel_ref:t.children.channels.map(e=>h(e)),subchannel_ref:t.children.subchannels.map(e=>u(e))}}function O(e,t){let r=Number.parseInt(e.request.channel_id),i=b[r];if(void 0===i){t({code:s.Status.NOT_FOUND,details:"No channel data found for id "+r});return}t(null,{channel:N(i)})}function M(e,t){let r=Number.parseInt(e.request.max_results),i=[],n=Number.parseInt(e.request.start_channel_id);for(;n<b.length;n++){let e=b[n];if(void 0!==e&&(i.push(N(e)),i.length>=r))break}t(null,{channel:i,end:n>=E.length})}function L(e){let t=e.getInfo();return{ref:c(e.ref),data:{calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:R(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},listen_socket:t.listenerChildren.sockets.map(e=>d(e))}}function F(e,t){let r=Number.parseInt(e.request.server_id),i=E[r];if(void 0===i){t({code:s.Status.NOT_FOUND,details:"No server data found for id "+r});return}t(null,{server:L(i)})}function B(e,t){let r=Number.parseInt(e.request.max_results),i=[],n=Number.parseInt(e.request.start_server_id);for(;n<E.length;n++){let e=E[n];if(void 0!==e&&(i.push(L(e)),i.length>=r))break}t(null,{server:i,end:n>=E.length})}function U(e,t){let r=Number.parseInt(e.request.subchannel_id),i=w[r];if(void 0===i){t({code:s.Status.NOT_FOUND,details:"No subchannel data found for id "+r});return}let n=i.getInfo();t(null,{subchannel:{ref:u(i.ref),data:{target:n.target,state:P(n.state),calls_started:n.callTracker.callsStarted,calls_succeeded:n.callTracker.callsSucceeded,calls_failed:n.callTracker.callsFailed,last_call_started_timestamp:R(n.callTracker.lastCallStartedTimestamp),trace:n.trace.getTraceMessage()},socket_ref:n.children.sockets.map(e=>d(e))}})}function z(e){var t;return(0,a.isTcpSubchannelAddress)(e)?{address:"tcpip_address",tcpip_address:{ip_address:null!==(t=D(e.host))&&void 0!==t?t:void 0,port:e.port}}:{address:"uds_address",uds_address:{filename:e.path}}}function V(e,t){var r,i,n,a,o;let l=Number.parseInt(e.request.socket_id),h=S[l];if(void 0===h){t({code:s.Status.NOT_FOUND,details:"No socket data found for id "+l});return}let u=h.getInfo(),c=u.security?{model:"tls",tls:{cipher_suite:u.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:null!==(r=u.security.cipherSuiteStandardName)&&void 0!==r?r:void 0,other_name:null!==(i=u.security.cipherSuiteOtherName)&&void 0!==i?i:void 0,local_certificate:null!==(n=u.security.localCertificate)&&void 0!==n?n:void 0,remote_certificate:null!==(a=u.security.remoteCertificate)&&void 0!==a?a:void 0}}:null;t(null,{socket:{ref:d(h.ref),local:u.localAddress?z(u.localAddress):null,remote:u.remoteAddress?z(u.remoteAddress):null,remote_name:null!==(o=u.remoteName)&&void 0!==o?o:void 0,security:c,data:{keep_alives_sent:u.keepAlivesSent,streams_started:u.streamsStarted,streams_succeeded:u.streamsSucceeded,streams_failed:u.streamsFailed,last_local_stream_created_timestamp:R(u.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:R(u.lastRemoteStreamCreatedTimestamp),messages_received:u.messagesReceived,messages_sent:u.messagesSent,last_message_received_timestamp:R(u.lastMessageReceivedTimestamp),last_message_sent_timestamp:R(u.lastMessageSentTimestamp),local_flow_control_window:u.localFlowControlWindow?{value:u.localFlowControlWindow}:null,remote_flow_control_window:u.remoteFlowControlWindow?{value:u.remoteFlowControlWindow}:null}}})}function j(e,t){let r=Number.parseInt(e.request.server_id),i=E[r];if(void 0===i){t({code:s.Status.NOT_FOUND,details:"No server data found for id "+r});return}let n=Number.parseInt(e.request.start_socket_id),a=Number.parseInt(e.request.max_results),o=i.getInfo().sessionChildren.sockets.sort((e,t)=>e.id-t.id),l=[],h=0;for(;h<o.length&&(!(o[h].id>=n)||(l.push(d(o[h])),!(l.length>=a)));h++);t(null,{socket_ref:l,end:h>=o.length})}function G(){return{GetChannel:O,GetTopChannels:M,GetServer:F,GetServers:B,GetSubchannel:U,GetSocket:V,GetServerSockets:j}}t.registerChannelzChannel=T,t.registerChannelzSubchannel=C,t.registerChannelzServer=A,t.registerChannelzSocket=_,t.unregisterChannelzRef=x,t.getChannelzHandlers=G;let q=null;function H(){if(q)return q;let e=(0,r(3716).J_)("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]});return q=(0,l.loadPackageDefinition)(e).grpc.channelz.v1.Channelz.service}function W(){(0,o.registerAdminService)(H,G)}t.getChannelzServiceDefinition=H,t.setup=W},1809:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInterceptingCall=t.InterceptingCall=t.RequesterBuilder=t.ListenerBuilder=t.InterceptorConfigurationError=void 0;let i=r(6281),n=r(1218),s=r(9572),a=r(6027);class o extends Error{constructor(e){super(e),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,o)}}t.InterceptorConfigurationError=o;class l{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(e){return this.metadata=e,this}withOnReceiveMessage(e){return this.message=e,this}withOnReceiveStatus(e){return this.status=e,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}}t.ListenerBuilder=l;class h{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(e){return this.start=e,this}withSendMessage(e){return this.message=e,this}withHalfClose(e){return this.halfClose=e,this}withCancel(e){return this.cancel=e,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}}t.RequesterBuilder=h;let u={onReceiveMetadata:(e,t)=>{t(e)},onReceiveMessage:(e,t)=>{t(e)},onReceiveStatus:(e,t)=>{t(e)}},c={start:(e,t,r)=>{r(e,t)},sendMessage:(e,t)=>{t(e)},halfClose:e=>{e()},cancel:e=>{e()}};class d{constructor(e,t){var r,i,n,s;this.nextCall=e,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,t?this.requester={start:null!==(r=t.start)&&void 0!==r?r:c.start,sendMessage:null!==(i=t.sendMessage)&&void 0!==i?i:c.sendMessage,halfClose:null!==(n=t.halfClose)&&void 0!==n?n:c.halfClose,cancel:null!==(s=t.cancel)&&void 0!==s?s:c.cancel}:this.requester=c}cancelWithStatus(e,t){this.requester.cancel(()=>{this.nextCall.cancelWithStatus(e,t)})}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(e,t){var r,i,s,a,o,l;let h={onReceiveMetadata:null!==(i=null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r?void 0:r.bind(t))&&void 0!==i?i:e=>{},onReceiveMessage:null!==(a=null===(s=null==t?void 0:t.onReceiveMessage)||void 0===s?void 0:s.bind(t))&&void 0!==a?a:e=>{},onReceiveStatus:null!==(l=null===(o=null==t?void 0:t.onReceiveStatus)||void 0===o?void 0:o.bind(t))&&void 0!==l?l:e=>{}};this.processingMetadata=!0,this.requester.start(e,h,(e,t)=>{var r,i,s;let a;if(this.processingMetadata=!1,(0,n.isInterceptingListener)(t))a=t;else{let e={onReceiveMetadata:null!==(r=t.onReceiveMetadata)&&void 0!==r?r:u.onReceiveMetadata,onReceiveMessage:null!==(i=t.onReceiveMessage)&&void 0!==i?i:u.onReceiveMessage,onReceiveStatus:null!==(s=t.onReceiveStatus)&&void 0!==s?s:u.onReceiveStatus};a=new n.InterceptingListenerImpl(e,h)}this.nextCall.start(e,a),this.processPendingMessage(),this.processPendingHalfClose()})}sendMessageWithContext(e,t){this.processingMessage=!0,this.requester.sendMessage(t,r=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=e,this.pendingMessage=t):(this.nextCall.sendMessageWithContext(e,r),this.processPendingHalfClose())})}sendMessage(e){this.sendMessageWithContext({},e)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()})}}function p(e,t,r){var i,n;let s=null!==(i=r.deadline)&&void 0!==i?i:1/0,a=r.host,o=null!==(n=r.parent)&&void 0!==n?n:null,l=r.propagate_flags,h=r.credentials,u=e.createCall(t,s,a,o,l);return h&&u.setCredentials(h),u}t.InterceptingCall=d;class f{constructor(e,t){this.call=e,this.methodDefinition=t}cancelWithStatus(e,t){this.call.cancelWithStatus(e,t)}getPeer(){return this.call.getPeer()}sendMessageWithContext(e,t){let r;try{r=this.methodDefinition.requestSerialize(t)}catch(e){this.call.cancelWithStatus(s.Status.INTERNAL,`Request message serialization failure: ${(0,a.getErrorMessage)(e)}`);return}this.call.sendMessageWithContext(e,r)}sendMessage(e){this.sendMessageWithContext({},e)}start(e,t){let r=null;this.call.start(e,{onReceiveMetadata:e=>{var r;null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r||r.call(t,e)},onReceiveMessage:e=>{var n;let o;try{o=this.methodDefinition.responseDeserialize(e)}catch(e){r={code:s.Status.INTERNAL,details:`Response message parsing error: ${(0,a.getErrorMessage)(e)}`,metadata:new i.Metadata},this.call.cancelWithStatus(r.code,r.details);return}null===(n=null==t?void 0:t.onReceiveMessage)||void 0===n||n.call(t,o)},onReceiveStatus:e=>{var i,n;r?null===(i=null==t?void 0:t.onReceiveStatus)||void 0===i||i.call(t,r):null===(n=null==t?void 0:t.onReceiveStatus)||void 0===n||n.call(t,e)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}}class m extends f{constructor(e,t){super(e,t)}start(e,t){var r,i;let n=!1,s={onReceiveMetadata:null!==(i=null===(r=null==t?void 0:t.onReceiveMetadata)||void 0===r?void 0:r.bind(t))&&void 0!==i?i:e=>{},onReceiveMessage:e=>{var r;n=!0,null===(r=null==t?void 0:t.onReceiveMessage)||void 0===r||r.call(t,e)},onReceiveStatus:e=>{var r,i;n||null===(r=null==t?void 0:t.onReceiveMessage)||void 0===r||r.call(t,null),null===(i=null==t?void 0:t.onReceiveStatus)||void 0===i||i.call(t,e)}};super.start(e,s),this.call.startRead()}}class g extends f{}function y(e,t,r){let i=p(e,r.path,t);return r.responseStream?new g(i,r):new m(i,r)}function v(e,t,r,i){if(e.clientInterceptors.length>0&&e.clientInterceptorProviders.length>0)throw new o("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(e.callInterceptors.length>0&&e.callInterceptorProviders.length>0)throw new o("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let n=[];n=e.callInterceptors.length>0||e.callInterceptorProviders.length>0?[].concat(e.callInterceptors,e.callInterceptorProviders.map(e=>e(t))).filter(e=>e):[].concat(e.clientInterceptors,e.clientInterceptorProviders.map(e=>e(t))).filter(e=>e);let s=Object.assign({},r,{method_definition:t});return n.reduceRight((e,t)=>r=>t(r,e),e=>y(i,e,t))(s)}t.getInterceptingCall=v},1865:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;let i=r(7639),n=r(9452),s=r(2409),a=r(9572),o=r(6281),l=r(1809),h=Symbol(),u=Symbol(),c=Symbol(),d=Symbol();function p(e){return"function"==typeof e}function f(e){return e.stack.split("\n").slice(1).join("\n")}class m{constructor(e,t,r={}){var i,s;if(r=Object.assign({},r),this[u]=null!==(i=r.interceptors)&&void 0!==i?i:[],delete r.interceptors,this[c]=null!==(s=r.interceptor_providers)&&void 0!==s?s:[],delete r.interceptor_providers,this[u].length>0&&this[c].length>0)throw Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[d]=r.callInvocationTransformer,delete r.callInvocationTransformer,r.channelOverride)this[h]=r.channelOverride;else if(r.channelFactoryOverride){let i=r.channelFactoryOverride;delete r.channelFactoryOverride,this[h]=i(e,t,r)}else this[h]=new n.ChannelImplementation(e,t,r)}close(){this[h].close()}getChannel(){return this[h]}waitForReady(e,t){let r=i=>{let n;if(i){t(Error("Failed to connect before the deadline"));return}try{n=this[h].getConnectivityState(!0)}catch(e){t(Error("The channel has been closed"));return}if(n===s.ConnectivityState.READY)t();else try{this[h].watchConnectivityState(n,e,r)}catch(e){t(Error("The channel has been closed"))}};setImmediate(r)}checkOptionalUnaryResponseArguments(e,t,r){if(p(e))return{metadata:new o.Metadata,options:{},callback:e};if(p(t))return e instanceof o.Metadata?{metadata:e,options:{},callback:t}:{metadata:new o.Metadata,options:e,callback:t};if(!(e instanceof o.Metadata&&t instanceof Object&&p(r)))throw Error("Incorrect arguments passed");return{metadata:e,options:t,callback:r}}makeUnaryRequest(e,t,r,n,s,o,p){var m,g;let y=this.checkOptionalUnaryResponseArguments(s,o,p),v={path:e,requestStream:!1,responseStream:!1,requestSerialize:t,responseDeserialize:r},b={argument:n,metadata:y.metadata,call:new i.ClientUnaryCallImpl,channel:this[h],methodDefinition:v,callOptions:y.options,callback:y.callback};this[d]&&(b=this[d](b));let w=b.call,E={clientInterceptors:this[u],clientInterceptorProviders:this[c],callInterceptors:null!==(m=b.callOptions.interceptors)&&void 0!==m?m:[],callInterceptorProviders:null!==(g=b.callOptions.interceptor_providers)&&void 0!==g?g:[]},S=(0,l.getInterceptingCall)(E,b.methodDefinition,b.callOptions,b.channel);w.call=S;let T=null,C=!1,A=Error();return S.start(b.metadata,{onReceiveMetadata:e=>{w.emit("metadata",e)},onReceiveMessage(e){null!==T&&S.cancelWithStatus(a.Status.INTERNAL,"Too many responses received"),T=e},onReceiveStatus(e){if(!C){if(C=!0,e.code===a.Status.OK){if(null===T){let t=f(A);b.callback((0,i.callErrorFromStatus)({code:a.Status.INTERNAL,details:"No message received",metadata:e.metadata},t))}else b.callback(null,T)}else{let t=f(A);b.callback((0,i.callErrorFromStatus)(e,t))}A=null,w.emit("status",e)}}}),S.sendMessage(n),S.halfClose(),w}makeClientStreamRequest(e,t,r,n,s,o){var p,m;let g=this.checkOptionalUnaryResponseArguments(n,s,o),y={path:e,requestStream:!0,responseStream:!1,requestSerialize:t,responseDeserialize:r},v={metadata:g.metadata,call:new i.ClientWritableStreamImpl(t),channel:this[h],methodDefinition:y,callOptions:g.options,callback:g.callback};this[d]&&(v=this[d](v));let b=v.call,w={clientInterceptors:this[u],clientInterceptorProviders:this[c],callInterceptors:null!==(p=v.callOptions.interceptors)&&void 0!==p?p:[],callInterceptorProviders:null!==(m=v.callOptions.interceptor_providers)&&void 0!==m?m:[]},E=(0,l.getInterceptingCall)(w,v.methodDefinition,v.callOptions,v.channel);b.call=E;let S=null,T=!1,C=Error();return E.start(v.metadata,{onReceiveMetadata:e=>{b.emit("metadata",e)},onReceiveMessage(e){null!==S&&E.cancelWithStatus(a.Status.INTERNAL,"Too many responses received"),S=e},onReceiveStatus(e){if(!T){if(T=!0,e.code===a.Status.OK){if(null===S){let t=f(C);v.callback((0,i.callErrorFromStatus)({code:a.Status.INTERNAL,details:"No message received",metadata:e.metadata},t))}else v.callback(null,S)}else{let t=f(C);v.callback((0,i.callErrorFromStatus)(e,t))}C=null,b.emit("status",e)}}}),b}checkMetadataAndOptions(e,t){let r,i;return e instanceof o.Metadata?(r=e,i=t||{}):(i=e||{},r=new o.Metadata),{metadata:r,options:i}}makeServerStreamRequest(e,t,r,n,s,o){var p,m;let g=this.checkMetadataAndOptions(s,o),y={path:e,requestStream:!1,responseStream:!0,requestSerialize:t,responseDeserialize:r},v={argument:n,metadata:g.metadata,call:new i.ClientReadableStreamImpl(r),channel:this[h],methodDefinition:y,callOptions:g.options};this[d]&&(v=this[d](v));let b=v.call,w={clientInterceptors:this[u],clientInterceptorProviders:this[c],callInterceptors:null!==(p=v.callOptions.interceptors)&&void 0!==p?p:[],callInterceptorProviders:null!==(m=v.callOptions.interceptor_providers)&&void 0!==m?m:[]},E=(0,l.getInterceptingCall)(w,v.methodDefinition,v.callOptions,v.channel);b.call=E;let S=!1,T=Error();return E.start(v.metadata,{onReceiveMetadata(e){b.emit("metadata",e)},onReceiveMessage(e){b.push(e)},onReceiveStatus(e){if(!S){if(S=!0,b.push(null),e.code!==a.Status.OK){let t=f(T);b.emit("error",(0,i.callErrorFromStatus)(e,t))}T=null,b.emit("status",e)}}}),E.sendMessage(n),E.halfClose(),b}makeBidiStreamRequest(e,t,r,n,s){var o,p;let m=this.checkMetadataAndOptions(n,s),g={path:e,requestStream:!0,responseStream:!0,requestSerialize:t,responseDeserialize:r},y={metadata:m.metadata,call:new i.ClientDuplexStreamImpl(t,r),channel:this[h],methodDefinition:g,callOptions:m.options};this[d]&&(y=this[d](y));let v=y.call,b={clientInterceptors:this[u],clientInterceptorProviders:this[c],callInterceptors:null!==(o=y.callOptions.interceptors)&&void 0!==o?o:[],callInterceptorProviders:null!==(p=y.callOptions.interceptor_providers)&&void 0!==p?p:[]},w=(0,l.getInterceptingCall)(b,y.methodDefinition,y.callOptions,y.channel);v.call=w;let E=!1,S=Error();return w.start(y.metadata,{onReceiveMetadata(e){v.emit("metadata",e)},onReceiveMessage(e){v.push(e)},onReceiveStatus(e){if(!E){if(E=!0,v.push(null),e.code!==a.Status.OK){let t=f(S);v.emit("error",(0,i.callErrorFromStatus)(e,t))}S=null,v.emit("status",e)}}}),v}}t.Client=m},4334:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionAlgorithms=void 0,function(e){e[e.identity=0]="identity",e[e.deflate=1]="deflate",e[e.gzip=2]="gzip"}(r||(t.CompressionAlgorithms=r={}))},6289:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompressionFilterFactory=t.CompressionFilter=void 0;let i=r(9796),n=r(4334),s=r(9572),a=r(3223),o=r(5792),l=e=>"number"==typeof e&&"string"==typeof n.CompressionAlgorithms[e];class h{async writeMessage(e,t){let r=e;t&&(r=await this.compressMessage(r));let i=Buffer.allocUnsafe(r.length+5);return i.writeUInt8(t?1:0,0),i.writeUInt32BE(r.length,1),r.copy(i,5),i}async readMessage(e){let t=1===e.readUInt8(0),r=e.slice(5);return t&&(r=await this.decompressMessage(r)),r}}class u extends h{async compressMessage(e){return e}async writeMessage(e,t){let r=Buffer.allocUnsafe(e.length+5);return r.writeUInt8(0,0),r.writeUInt32BE(e.length,1),e.copy(r,5),r}decompressMessage(e){return Promise.reject(Error('Received compressed message but "grpc-encoding" header was identity'))}}class c extends h{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,r)=>{i.deflate(e,(e,i)=>{e?r(e):t(i)})})}decompressMessage(e){return new Promise((t,r)=>{let n=0,a=[],o=i.createInflate();o.on("data",e=>{a.push(e),n+=e.byteLength,-1!==this.maxRecvMessageLength&&n>this.maxRecvMessageLength&&(o.destroy(),r({code:s.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{t(Buffer.concat(a))}),o.write(e),o.end()})}}class d extends h{constructor(e){super(),this.maxRecvMessageLength=e}compressMessage(e){return new Promise((t,r)=>{i.gzip(e,(e,i)=>{e?r(e):t(i)})})}decompressMessage(e){return new Promise((t,r)=>{let n=0,a=[],o=i.createGunzip();o.on("data",e=>{a.push(e),n+=e.byteLength,-1!==this.maxRecvMessageLength&&n>this.maxRecvMessageLength&&(o.destroy(),r({code:s.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{t(Buffer.concat(a))}),o.write(e),o.end()})}}class p extends h{constructor(e){super(),this.compressionName=e}compressMessage(e){return Promise.reject(Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(e){return Promise.reject(Error(`Compression method not supported: ${this.compressionName}`))}}function f(e,t){switch(e){case"identity":return new u;case"deflate":return new c(t);case"gzip":return new d(t);default:return new p(e)}}class m extends a.BaseFilter{constructor(e,t){var r,i;super(),this.sharedFilterConfig=t,this.sendCompression=new u,this.receiveCompression=new u,this.currentCompressionAlgorithm="identity";let a=e["grpc.default_compression_algorithm"];if(this.maxReceiveMessageLength=null!==(r=e["grpc.max_receive_message_length"])&&void 0!==r?r:s.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,void 0!==a){if(l(a)){let e=n.CompressionAlgorithms[a],r=null===(i=t.serverSupportedEncodingHeader)||void 0===i?void 0:i.split(",");(!r||r.includes(e))&&(this.currentCompressionAlgorithm=e,this.sendCompression=f(this.currentCompressionAlgorithm,-1))}else o.log(s.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${a}`)}}async sendMetadata(e){let t=await e;return t.set("grpc-accept-encoding","identity,deflate,gzip"),t.set("accept-encoding","identity"),"identity"===this.currentCompressionAlgorithm?t.remove("grpc-encoding"):t.set("grpc-encoding",this.currentCompressionAlgorithm),t}receiveMetadata(e){let t=e.get("grpc-encoding");if(t.length>0){let e=t[0];"string"==typeof e&&(this.receiveCompression=f(e,this.maxReceiveMessageLength))}e.remove("grpc-encoding");let r=e.get("grpc-accept-encoding")[0];return r&&(this.sharedFilterConfig.serverSupportedEncodingHeader=r,r.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new u,this.currentCompressionAlgorithm="identity")),e.remove("grpc-accept-encoding"),e}async sendMessage(e){var t;let r;let i=await e;return r=!(this.sendCompression instanceof u)&&((null!==(t=i.flags)&&void 0!==t?t:0)&2)==0,{message:await this.sendCompression.writeMessage(i.message,r),flags:i.flags}}async receiveMessage(e){return this.receiveCompression.readMessage(await e)}}t.CompressionFilter=m;class g{constructor(e,t){this.options=t,this.sharedFilterConfig={}}createFilter(){return new m(this.options,this.sharedFilterConfig)}}t.CompressionFilterFactory=g},2409:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ConnectivityState=void 0,function(e){e[e.IDLE=0]="IDLE",e[e.CONNECTING=1]="CONNECTING",e[e.READY=2]="READY",e[e.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",e[e.SHUTDOWN=4]="SHUTDOWN"}(r||(t.ConnectivityState=r={}))},9572:(e,t)=>{"use strict";var r,i,n;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=t.Propagate=t.LogVerbosity=t.Status=void 0,function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"}(r||(t.Status=r={})),function(e){e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.ERROR=2]="ERROR",e[e.NONE=3]="NONE"}(i||(t.LogVerbosity=i={})),function(e){e[e.DEADLINE=1]="DEADLINE",e[e.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",e[e.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",e[e.CANCELLATION=8]="CANCELLATION",e[e.DEFAULTS=65535]="DEFAULTS"}(n||(t.Propagate=n={})),t.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1,t.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4194304},5607:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restrictControlPlaneStatusCode=void 0;let i=r(9572),n=[i.Status.OK,i.Status.INVALID_ARGUMENT,i.Status.NOT_FOUND,i.Status.ALREADY_EXISTS,i.Status.FAILED_PRECONDITION,i.Status.ABORTED,i.Status.OUT_OF_RANGE,i.Status.DATA_LOSS];function s(e,t){return n.includes(e)?{code:i.Status.INTERNAL,details:`Invalid status from control plane: ${e} ${i.Status[e]} ${t}`}:{code:e,details:t}}t.restrictControlPlaneStatusCode=s},7360:(e,t)=>{"use strict";function r(...e){let t=1/0;for(let r of e){let e=r instanceof Date?r.getTime():r;e<t&&(t=e)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.deadlineToString=t.getRelativeTimeout=t.getDeadlineTimeoutString=t.minDeadline=void 0,t.minDeadline=r;let i=[["m",1],["S",1e3],["M",6e4],["H",36e5]];function n(e){let t=new Date().getTime();e instanceof Date&&(e=e.getTime());let r=Math.max(e-t,0);for(let[e,t]of i){let i=r/t;if(i<1e8)return String(Math.ceil(i))+e}throw Error("Deadline is too far in the future")}t.getDeadlineTimeoutString=n;let s=2147483647;function a(e){let t=(e instanceof Date?e.getTime():e)-new Date().getTime();return t<0?0:t>s?1/0:t}function o(e){if(e instanceof Date)return e.toISOString();{let t=new Date(e);return Number.isNaN(t.getTime())?""+e:t.toISOString()}}t.getRelativeTimeout=a,t.deadlineToString=o},7974:(e,t)=>{"use strict";function r(e){return{seconds:e/1e3|0,nanos:e%1e3*1e6|0}}function i(e){return 1e3*e.seconds+e.nanos/1e6|0}function n(e){return"number"==typeof e.seconds&&"number"==typeof e.nanos}Object.defineProperty(t,"__esModule",{value:!0}),t.isDuration=t.durationToMs=t.msToDuration=void 0,t.msToDuration=r,t.durationToMs=i,t.isDuration=n},6027:(e,t)=>{"use strict";function r(e){return e instanceof Error?e.message:String(e)}function i(e){return"object"==typeof e&&null!==e&&"code"in e&&"number"==typeof e.code?e.code:null}Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorCode=t.getErrorMessage=void 0,t.getErrorMessage=r,t.getErrorCode=i},8779:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutlierDetectionLoadBalancingConfig=t.BaseSubchannelWrapper=t.registerAdminService=t.FilterStackFactory=t.BaseFilter=t.PickResultType=t.QueuePicker=t.UnavailablePicker=t.ChildLoadBalancerHandler=t.subchannelAddressToString=t.validateLoadBalancingConfig=t.getFirstUsableConfig=t.registerLoadBalancerType=t.createChildChannelControlHelper=t.BackoffTimeout=t.durationToMs=t.uriToString=t.createResolver=t.registerResolver=t.log=t.trace=void 0;var i=r(5792);Object.defineProperty(t,"trace",{enumerable:!0,get:function(){return i.trace}}),Object.defineProperty(t,"log",{enumerable:!0,get:function(){return i.log}});var n=r(4063);Object.defineProperty(t,"registerResolver",{enumerable:!0,get:function(){return n.registerResolver}}),Object.defineProperty(t,"createResolver",{enumerable:!0,get:function(){return n.createResolver}});var s=r(5541);Object.defineProperty(t,"uriToString",{enumerable:!0,get:function(){return s.uriToString}});var a=r(7974);Object.defineProperty(t,"durationToMs",{enumerable:!0,get:function(){return a.durationToMs}});var o=r(1742);Object.defineProperty(t,"BackoffTimeout",{enumerable:!0,get:function(){return o.BackoffTimeout}});var l=r(9884);Object.defineProperty(t,"createChildChannelControlHelper",{enumerable:!0,get:function(){return l.createChildChannelControlHelper}}),Object.defineProperty(t,"registerLoadBalancerType",{enumerable:!0,get:function(){return l.registerLoadBalancerType}}),Object.defineProperty(t,"getFirstUsableConfig",{enumerable:!0,get:function(){return l.getFirstUsableConfig}}),Object.defineProperty(t,"validateLoadBalancingConfig",{enumerable:!0,get:function(){return l.validateLoadBalancingConfig}});var h=r(4955);Object.defineProperty(t,"subchannelAddressToString",{enumerable:!0,get:function(){return h.subchannelAddressToString}});var u=r(6372);Object.defineProperty(t,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return u.ChildLoadBalancerHandler}});var c=r(2352);Object.defineProperty(t,"UnavailablePicker",{enumerable:!0,get:function(){return c.UnavailablePicker}}),Object.defineProperty(t,"QueuePicker",{enumerable:!0,get:function(){return c.QueuePicker}}),Object.defineProperty(t,"PickResultType",{enumerable:!0,get:function(){return c.PickResultType}});var d=r(3223);Object.defineProperty(t,"BaseFilter",{enumerable:!0,get:function(){return d.BaseFilter}});var p=r(9386);Object.defineProperty(t,"FilterStackFactory",{enumerable:!0,get:function(){return p.FilterStackFactory}});var f=r(7749);Object.defineProperty(t,"registerAdminService",{enumerable:!0,get:function(){return f.registerAdminService}});var m=r(487);Object.defineProperty(t,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return m.BaseSubchannelWrapper}});var g=r(7542);Object.defineProperty(t,"OutlierDetectionLoadBalancingConfig",{enumerable:!0,get:function(){return g.OutlierDetectionLoadBalancingConfig}})},9386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterStackFactory=t.FilterStack=void 0;class r{constructor(e){this.filters=e}sendMetadata(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMetadata(t);return t}receiveMetadata(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMetadata(t);return t}sendMessage(e){let t=e;for(let e=0;e<this.filters.length;e++)t=this.filters[e].sendMessage(t);return t}receiveMessage(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveMessage(t);return t}receiveTrailers(e){let t=e;for(let e=this.filters.length-1;e>=0;e--)t=this.filters[e].receiveTrailers(t);return t}push(e){this.filters.unshift(...e)}getFilters(){return this.filters}}t.FilterStack=r;class i{constructor(e){this.factories=e}push(e){this.factories.unshift(...e)}clone(){return new i([...this.factories])}createFilter(){return new r(this.factories.map(e=>e.createFilter()))}}t.FilterStackFactory=i},3223:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseFilter=void 0;class r{async sendMetadata(e){return e}receiveMetadata(e){return e}async sendMessage(e){return e}async receiveMessage(e){return e}receiveTrailers(e){return e}}t.BaseFilter=r},5242:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProxiedConnection=t.mapProxyName=void 0;let i=r(5792),n=r(9572),s=r(4063),a=r(3685),o=r(4404),l=r(5792),h=r(4955),u=r(5541),c=r(7310),d=r(8501),p="proxy";function f(e){l.trace(n.LogVerbosity.DEBUG,p,e)}function m(){let e,t="",r="";if(process.env.grpc_proxy)r="grpc_proxy",t=process.env.grpc_proxy;else if(process.env.https_proxy)r="https_proxy",t=process.env.https_proxy;else{if(!process.env.http_proxy)return{};r="http_proxy",t=process.env.http_proxy}try{e=new c.URL(t)}catch(e){return(0,i.log)(n.LogVerbosity.ERROR,`cannot parse value of "${r}" env var`),{}}if("http:"!==e.protocol)return(0,i.log)(n.LogVerbosity.ERROR,`"${e.protocol}" scheme not supported in proxy URI`),{};let s=null;e.username&&(e.password?((0,i.log)(n.LogVerbosity.INFO,"userinfo found in proxy URI"),s=`${e.username}:${e.password}`):s=e.username);let a=e.hostname,o=e.port;""===o&&(o="80");let l={address:`${a}:${o}`};return s&&(l.creds=s),f("Proxy server "+l.address+" set by environment variable "+r),l}function g(){let e=process.env.no_grpc_proxy,t="no_grpc_proxy";return(e||(e=process.env.no_proxy,t="no_proxy"),e)?(f("No proxy server list set by environment variable "+t),e.split(",")):[]}function y(e,t){var r;let i={target:e,extraOptions:{}};if((null!==(r=t["grpc.enable_http_proxy"])&&void 0!==r?r:1)===0||"unix"===e.scheme)return i;let n=m();if(!n.address)return i;let s=(0,u.splitHostPort)(e.path);if(!s)return i;let a=s.host;for(let t of g())if(t===a)return f("Not using proxy for target in no_proxy list: "+(0,u.uriToString)(e)),i;let o={"grpc.http_connect_target":(0,u.uriToString)(e)};return n.creds&&(o["grpc.http_connect_creds"]=n.creds),{target:{scheme:"dns",path:n.address},extraOptions:o}}function v(e,t,r){var l;if(!("grpc.http_connect_target"in t))return Promise.resolve({});let c=t["grpc.http_connect_target"],p=(0,u.parseUri)(c);if(null===p)return Promise.resolve({});let m=(0,u.splitHostPort)(p.path);if(null===m)return Promise.resolve({});let g=`${m.host}:${null!==(l=m.port)&&void 0!==l?l:d.DEFAULT_PORT}`,y={method:"CONNECT",path:g},v={Host:g};(0,h.isTcpSubchannelAddress)(e)?(y.host=e.host,y.port=e.port):y.socketPath=e.path,"grpc.http_connect_creds"in t&&(v["Proxy-Authorization"]="Basic "+Buffer.from(t["grpc.http_connect_creds"]).toString("base64")),y.headers=v;let b=(0,h.subchannelAddressToString)(e);return f("Using proxy "+b+" to connect to "+y.path),new Promise((e,t)=>{let l=a.request(y);l.once("connect",(a,h,c)=>{var d;if(l.removeAllListeners(),h.removeAllListeners(),200===a.statusCode){if(f("Successfully connected to "+y.path+" through proxy "+b),"secureContext"in r){let i=(0,s.getDefaultAuthority)(p),n=(0,u.splitHostPort)(i),a=null!==(d=null==n?void 0:n.host)&&void 0!==d?d:i,l=o.connect(Object.assign({host:a,servername:a,socket:h},r),()=>{f("Successfully established a TLS connection to "+y.path+" through proxy "+b),e({socket:l,realTarget:p})});l.on("error",e=>{f("Failed to establish a TLS connection to "+y.path+" through proxy "+b+" with error "+e.message),t()})}else f("Successfully established a plaintext connection to "+y.path+" through proxy "+b),e({socket:h,realTarget:p})}else(0,i.log)(n.LogVerbosity.ERROR,"Failed to connect to "+y.path+" through proxy "+b+" with status "+a.statusCode),t()}),l.once("error",e=>{l.removeAllListeners(),(0,i.log)(n.LogVerbosity.ERROR,"Failed to connect to proxy "+b+" with error "+e.message),t()}),l.end()})}t.mapProxyName=y,t.getProxiedConnection=v},1968:(e,t,r)=>{"use strict";g={value:!0},g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=g=t.Rz=g=g=g=g=g=g=t.SF=t.K9=void 0;let i=r(5402);g={enumerable:!0,get:function(){return i.CallCredentials}};let n=r(9452);g={enumerable:!0,get:function(){return n.ChannelImplementation}};let s=r(4334);g={enumerable:!0,get:function(){return s.CompressionAlgorithms}};let a=r(2409);g={enumerable:!0,get:function(){return a.ConnectivityState}};let o=r(499);g={enumerable:!0,get:function(){return o.ChannelCredentials}};let l=r(1865);g={enumerable:!0,get:function(){return l.Client}};let h=r(9572);g={enumerable:!0,get:function(){return h.LogVerbosity}},g={enumerable:!0,get:function(){return h.Status}},g={enumerable:!0,get:function(){return h.Propagate}};let u=r(5792),c=r(4529);Object.defineProperty(t,"Rz",{enumerable:!0,get:function(){return c.loadPackageDefinition}}),g={enumerable:!0,get:function(){return c.makeClientConstructor}},g={enumerable:!0,get:function(){return c.makeClientConstructor}};let d=r(6281);Object.defineProperty(t,"SF",{enumerable:!0,get:function(){return d.Metadata}});let p=r(6418);g={enumerable:!0,get:function(){return p.Server}};let f=r(3783);g={enumerable:!0,get:function(){return f.ServerCredentials}};let m=r(4339);g={enumerable:!0,get:function(){return m.StatusBuilder}},t.K9={combineChannelCredentials:(e,...t)=>t.reduce((e,t)=>e.compose(t),e),combineCallCredentials:(e,...t)=>t.reduce((e,t)=>e.compose(t),e),createInsecure:o.ChannelCredentials.createInsecure,createSsl:o.ChannelCredentials.createSsl,createFromSecureContext:o.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:i.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:i.CallCredentials.createFromGoogleCredential,createEmpty:i.CallCredentials.createEmpty},g=e=>e.close(),g=(e,t,r)=>e.waitForReady(t,r),g=(e,t)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},g=(e,t,r)=>{throw Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")},g=e=>{u.setLogger(e)},g=e=>{u.setLoggerVerbosity(e)},g=e=>l.Client.prototype.getChannel.call(e);var g,y=r(1809);g={enumerable:!0,get:function(){return y.ListenerBuilder}},g={enumerable:!0,get:function(){return y.RequesterBuilder}},g={enumerable:!0,get:function(){return y.InterceptingCall}},g={enumerable:!0,get:function(){return y.InterceptorConfigurationError}};var v=r(5962);g={enumerable:!0,get:function(){return v.getChannelzServiceDefinition}},g={enumerable:!0,get:function(){return v.getChannelzHandlers}};var b=r(7749);g={enumerable:!0,get:function(){return b.addAdminServicesToServer}},g=r(8779);let w=r(8501),E=r(7255),S=r(3988),T=r(5102),C=r(4556),A=r(7542),_=r(5962);(()=>{w.setup(),E.setup(),S.setup(),T.setup(),C.setup(),A.setup(),_.setup()})()},9359:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InternalChannel=void 0;let i=r(499),n=r(7661),s=r(7328),a=r(2352),o=r(9572),l=r(9386),h=r(6289),u=r(4063),c=r(5792),d=r(5242),p=r(5541),f=r(2409),m=r(5962),g=r(1690),y=r(7360),v=r(80),b=r(1801),w=r(5607),E=r(5627),S=r(487),T=2147483647,C=1e3,A=18e5,_=new Map,x=16777216,k=1048576;class I extends S.BaseSubchannelWrapper{constructor(e,t){super(e),this.channel=t,this.refCount=0,this.subchannelStateListener=(e,r,i,n)=>{t.throttleKeepalive(n)},e.addConnectivityStateListener(this.subchannelStateListener)}ref(){this.child.ref(),this.refCount+=1}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&(this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this))}}class D{constructor(e,t,r){var g,y,v,b,S,D,P,R;if(this.credentials=t,this.options=r,this.connectivityState=f.ConnectivityState.IDLE,this.currentPicker=new a.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.callCount=0,this.idleTimer=null,this.channelzEnabled=!0,this.callTracker=new m.ChannelzCallTracker,this.childrenTracker=new m.ChannelzChildrenTracker,"string"!=typeof e)throw TypeError("Channel target must be a string");if(!(t instanceof i.ChannelCredentials))throw TypeError("Channel credentials must be a ChannelCredentials object");if(r&&"object"!=typeof r)throw TypeError("Channel options must be an object");this.originalTarget=e;let N=(0,p.parseUri)(e);if(null===N)throw Error(`Could not parse target name "${e}"`);let O=(0,u.mapUriDefaultScheme)(N);if(null===O)throw Error(`Could not find a default scheme for target name "${e}"`);this.callRefTimer=setInterval(()=>{},T),null===(y=(g=this.callRefTimer).unref)||void 0===y||y.call(g),0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new m.ChannelzTrace,this.channelzRef=(0,m.registerChannelzChannel)(e,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0,u.getDefaultAuthority)(O);let M=(0,d.mapProxyName)(O,r);this.target=M.target,this.options=Object.assign({},this.options,M.extraOptions),this.subchannelPool=(0,s.getSubchannelPool)((null!==(v=r["grpc.use_local_subchannel_pool"])&&void 0!==v?v:0)===0),this.retryBufferTracker=new E.MessageBufferTracker(null!==(b=r["grpc.retry_buffer_size"])&&void 0!==b?b:x,null!==(S=r["grpc.per_rpc_retry_buffer_size"])&&void 0!==S?S:k),this.keepaliveTime=null!==(D=r["grpc.keepalive_time_ms"])&&void 0!==D?D:-1,this.idleTimeoutMs=Math.max(null!==(P=r["grpc.client_idle_timeout_ms"])&&void 0!==P?P:A,C);let L={createSubchannel:(e,t)=>{let r=this.subchannelPool.getOrCreateSubchannel(this.target,e,Object.assign({},this.options,t),this.credentials);r.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Created subchannel or used existing subchannel",r.getChannelzRef());let i=new I(r,this);return this.wrappedSubchannels.add(i),i},updateState:(e,t)=>{this.currentPicker=t;let r=this.pickQueue.slice();for(let e of(this.pickQueue=[],r.length>0&&this.callRefTimerUnref(),r))e.doPick();this.updateState(e)},requestReresolution:()=>{throw Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:e=>{this.channelzEnabled&&this.childrenTracker.refChild(e)},removeChannelzChild:e=>{this.channelzEnabled&&this.childrenTracker.unrefChild(e)}};this.resolvingLoadBalancer=new n.ResolvingLoadBalancer(this.target,L,r,(e,t)=>{e.retryThrottling?_.set(this.getTarget(),new E.RetryThrottler(e.retryThrottling.maxTokens,e.retryThrottling.tokenRatio,_.get(this.getTarget()))):_.delete(this.getTarget()),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Address resolution succeeded"),this.configSelector=t,this.currentResolutionError=null,process.nextTick(()=>{let e=this.configSelectionQueue;for(let t of(this.configSelectionQueue=[],e.length>0&&this.callRefTimerUnref(),e))t.getConfig()})},e=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_WARNING","Address resolution failed with code "+e.code+' and details "'+e.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),null===this.configSelector&&(this.currentResolutionError=Object.assign(Object.assign({},(0,w.restrictControlPlaneStatusCode)(e.code,e.details)),{metadata:e.metadata}));let t=this.configSelectionQueue;for(let r of(this.configSelectionQueue=[],t.length>0&&this.callRefTimerUnref(),t))r.reportResolverError(e)}),this.filterStackFactory=new l.FilterStackFactory([new h.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(r,void 0,2));let F=Error();(0,c.trace)(o.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+") Channel constructed \n"+(null===(R=F.stack)||void 0===R?void 0:R.substring(F.stack.indexOf("\n")+1))),this.lastActivityTimestamp=new Date}getChannelzInfo(){return{target:this.originalTarget,state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}trace(e,t){(0,c.trace)(null!=t?t:o.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,p.uriToString)(this.target)+" "+e)}callRefTimerRef(){var e,t,r,i;(null===(t=(e=this.callRefTimer).hasRef)||void 0===t?void 0:t.call(e))||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(i=(r=this.callRefTimer).ref)||void 0===i||i.call(r))}callRefTimerUnref(){var e,t;(!this.callRefTimer.hasRef||this.callRefTimer.hasRef())&&(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),null===(t=(e=this.callRefTimer).unref)||void 0===t||t.call(e))}removeConnectivityStateWatcher(e){let t=this.connectivityStateWatchers.findIndex(t=>t===e);t>=0&&this.connectivityStateWatchers.splice(t,1)}updateState(e){for(let t of((0,c.trace)(o.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,p.uriToString)(this.target)+" "+f.ConnectivityState[this.connectivityState]+" -> "+f.ConnectivityState[e]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+f.ConnectivityState[e]),this.connectivityState=e,this.connectivityStateWatchers.slice()))e!==t.currentState&&(t.timer&&clearTimeout(t.timer),this.removeConnectivityStateWatcher(t),t.callback());e!==f.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}throttleKeepalive(e){if(e>this.keepaliveTime)for(let t of(this.keepaliveTime=e,this.wrappedSubchannels))t.throttleKeepalive(e)}removeWrappedSubchannel(e){this.wrappedSubchannels.delete(e)}doPick(e,t){return this.currentPicker.pick({metadata:e,extraPickInfo:t})}queueCallForPick(e){this.pickQueue.push(e),this.callRefTimerRef()}getConfig(e,t){return(this.resolvingLoadBalancer.exitIdle(),this.configSelector)?{type:"SUCCESS",config:this.configSelector(e,t)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig(e){this.configSelectionQueue.push(e),this.callRefTimerRef()}enterIdle(){this.resolvingLoadBalancer.destroy(),this.updateState(f.ConnectivityState.IDLE),this.currentPicker=new a.QueuePicker(this.resolvingLoadBalancer),this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null)}startIdleTimeout(e){var t,r;this.idleTimer=setTimeout(()=>{if(this.callCount>0){this.startIdleTimeout(this.idleTimeoutMs);return}let e=new Date().valueOf()-this.lastActivityTimestamp.valueOf();e>=this.idleTimeoutMs?(this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity"),this.enterIdle()):this.startIdleTimeout(this.idleTimeoutMs-e)},e),null===(r=(t=this.idleTimer).unref)||void 0===r||r.call(t)}maybeStartIdleTimer(){this.connectivityState===f.ConnectivityState.SHUTDOWN||this.idleTimer||this.startIdleTimeout(this.idleTimeoutMs)}onCallStart(){this.channelzEnabled&&this.callTracker.addCallStarted(),this.callCount+=1}onCallEnd(e){this.channelzEnabled&&(e.code===o.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()),this.callCount-=1,this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()}createLoadBalancingCall(e,t,r,i,n){let s=(0,b.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+s+'] method="'+t+'"'),new g.LoadBalancingCall(this,e,t,r,i,n,s)}createRetryingCall(e,t,r,i,n){let s=(0,b.getNextCallNumber)();return this.trace("createRetryingCall ["+s+'] method="'+t+'"'),new E.RetryingCall(this,e,t,r,i,n,s,this.retryBufferTracker,_.get(this.getTarget()))}createInnerCall(e,t,r,i,n){return 0===this.options["grpc.enable_retries"]?this.createLoadBalancingCall(e,t,r,i,n):this.createRetryingCall(e,t,r,i,n)}createResolvingCall(e,t,r,i,n){let s=(0,b.getNextCallNumber)();this.trace("createResolvingCall ["+s+'] method="'+e+'", deadline='+(0,y.deadlineToString)(t));let a={deadline:t,flags:null!=n?n:o.Propagate.DEFAULTS,host:null!=r?r:this.defaultAuthority,parentCall:i},l=new v.ResolvingCall(this,e,a,this.filterStackFactory.clone(),this.credentials._getCallCredentials(),s);return this.onCallStart(),l.addStatusWatcher(e=>{this.onCallEnd(e)}),l}close(){this.resolvingLoadBalancer.destroy(),this.updateState(f.ConnectivityState.SHUTDOWN),clearInterval(this.callRefTimer),this.idleTimer&&clearTimeout(this.idleTimer),this.channelzEnabled&&(0,m.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels()}getTarget(){return(0,p.uriToString)(this.target)}getConnectivityState(e){let t=this.connectivityState;return e&&(this.resolvingLoadBalancer.exitIdle(),this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()),t}watchConnectivityState(e,t,r){if(this.connectivityState===f.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");let i=null;if(t!==1/0){let e=t instanceof Date?t:new Date(t),s=new Date;if(t===-1/0||e<=s){process.nextTick(r,Error("Deadline passed without connectivity state change"));return}i=setTimeout(()=>{this.removeConnectivityStateWatcher(n),r(Error("Deadline passed without connectivity state change"))},e.getTime()-s.getTime())}let n={currentState:e,callback:r,timer:i};this.connectivityStateWatchers.push(n)}getChannelzRef(){return this.channelzRef}createCall(e,t,r,i,n){if("string"!=typeof e)throw TypeError("Channel#createCall: method must be a string");if(!("number"==typeof t||t instanceof Date))throw TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===f.ConnectivityState.SHUTDOWN)throw Error("Channel has been shut down");return this.createResolvingCall(e,t,r,i,n)}}t.InternalChannel=D},6372:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChildLoadBalancerHandler=void 0;let i=r(9884),n=r(2409),s="child_load_balancer_helper";class a{constructor(e){this.channelControlHelper=e,this.currentChild=null,this.pendingChild=null,this.latestConfig=null,this.ChildPolicyHelper=class{constructor(e){this.parent=e,this.child=null}createSubchannel(e,t){return this.parent.channelControlHelper.createSubchannel(e,t)}updateState(e,t){var r;if(this.calledByPendingChild()){if(e===n.ConnectivityState.CONNECTING)return;null===(r=this.parent.currentChild)||void 0===r||r.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(e,t)}requestReresolution(){var e;let t=null!==(e=this.parent.pendingChild)&&void 0!==e?e:this.parent.currentChild;this.child===t&&this.parent.channelControlHelper.requestReresolution()}setChild(e){this.child=e}addChannelzChild(e){this.parent.channelControlHelper.addChannelzChild(e)}removeChannelzChild(e){this.parent.channelControlHelper.removeChannelzChild(e)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}configUpdateRequiresNewPolicyInstance(e,t){return e.getLoadBalancerName()!==t.getLoadBalancerName()}updateAddressList(e,t,r){let n;if(null===this.currentChild||null===this.latestConfig||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,t)){let e=new this.ChildPolicyHelper(this),r=(0,i.createLoadBalancer)(t,e);e.setChild(r),null===this.currentChild?(this.currentChild=r,n=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=r,n=this.pendingChild)}else n=null===this.pendingChild?this.currentChild:this.pendingChild;this.latestConfig=t,n.updateAddressList(e,t,r)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return s}}t.ChildLoadBalancerHandler=a},7542:(e,t,r)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.OutlierDetectionLoadBalancer=t.OutlierDetectionLoadBalancingConfig=void 0;let n=r(2409),s=r(9572),a=r(7974),o=r(8779),l=r(9884),h=r(6372),u=r(2352),c=r(4955),d=r(487),p=r(5792),f="outlier_detection";function m(e){p.trace(s.LogVerbosity.DEBUG,f,e)}let g="outlier_detection",y=(null!==(i=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)&&void 0!==i?i:"true")==="true",v={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},b={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function w(e,t,r,i){if(t in e&&typeof e[t]!==r){let n=i?`${i}.${t}`:t;throw Error(`outlier detection config ${n} parse error: expected ${r}, got ${typeof e[t]}`)}}function E(e,t,r){let i=r?`${r}.${t}`:t;if(t in e){if(!(0,a.isDuration)(e[t]))throw Error(`outlier detection config ${i} parse error: expected Duration, got ${typeof e[t]}`);if(!(e[t].seconds>=0&&e[t].seconds<=315576e6&&e[t].nanos>=0&&e[t].nanos<=999999999))throw Error(`outlier detection config ${i} parse error: values out of range for non-negative Duaration`)}}function S(e,t,r){let i=r?`${r}.${t}`:t;if(w(e,t,"number",r),t in e&&!(e[t]>=0&&e[t]<=100))throw Error(`outlier detection config ${i} parse error: value out of range for percentage (0-100)`)}class T{constructor(e,t,r,i,n,s,a){if(this.childPolicy=a,a.length>0&&"pick_first"===a[0].getLoadBalancerName())throw Error("outlier_detection LB policy cannot have a pick_first child policy");this.intervalMs=null!=e?e:1e4,this.baseEjectionTimeMs=null!=t?t:3e4,this.maxEjectionTimeMs=null!=r?r:3e5,this.maxEjectionPercent=null!=i?i:10,this.successRateEjection=n?Object.assign(Object.assign({},v),n):null,this.failurePercentageEjection=s?Object.assign(Object.assign({},b),s):null}getLoadBalancerName(){return g}toJsonObject(){return{interval:(0,a.msToDuration)(this.intervalMs),base_ejection_time:(0,a.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,a.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:this.successRateEjection,failure_percentage_ejection:this.failurePercentageEjection,child_policy:this.childPolicy.map(e=>e.toJsonObject())}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}copyWithChildPolicy(e){return new T(this.intervalMs,this.baseEjectionTimeMs,this.maxEjectionTimeMs,this.maxEjectionPercent,this.successRateEjection,this.failurePercentageEjection,e)}static createFromJson(e){var t;if(E(e,"interval"),E(e,"base_ejection_time"),E(e,"max_ejection_time"),S(e,"max_ejection_percent"),"success_rate_ejection"in e){if("object"!=typeof e.success_rate_ejection)throw Error("outlier detection config success_rate_ejection must be an object");w(e.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),S(e.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),w(e.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),w(e.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in e){if("object"!=typeof e.failure_percentage_ejection)throw Error("outlier detection config failure_percentage_ejection must be an object");S(e.failure_percentage_ejection,"threshold","failure_percentage_ejection"),S(e.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),w(e.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),w(e.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}return new T(e.interval?(0,a.durationToMs)(e.interval):null,e.base_ejection_time?(0,a.durationToMs)(e.base_ejection_time):null,e.max_ejection_time?(0,a.durationToMs)(e.max_ejection_time):null,null!==(t=e.max_ejection_percent)&&void 0!==t?t:null,e.success_rate_ejection,e.failure_percentage_ejection,e.child_policy.map(l.validateLoadBalancingConfig))}}t.OutlierDetectionLoadBalancingConfig=T;class C extends d.BaseSubchannelWrapper{constructor(e,t){super(e),this.mapEntry=t,this.stateListeners=[],this.ejected=!1,this.refCount=0,this.childSubchannelState=e.getConnectivityState(),e.addConnectivityStateListener((e,t,r,i)=>{if(this.childSubchannelState=r,!this.ejected)for(let e of this.stateListeners)e(this,t,r,i)})}getConnectivityState(){return this.ejected?n.ConnectivityState.TRANSIENT_FAILURE:this.childSubchannelState}addConnectivityStateListener(e){this.stateListeners.push(e)}removeConnectivityStateListener(e){let t=this.stateListeners.indexOf(e);t>-1&&this.stateListeners.splice(t,1)}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){let e=this.mapEntry.subchannelWrappers.indexOf(this);e>=0&&this.mapEntry.subchannelWrappers.splice(e,1)}}eject(){for(let e of(this.ejected=!0,this.stateListeners))e(this,this.childSubchannelState,n.ConnectivityState.TRANSIENT_FAILURE,-1)}uneject(){for(let e of(this.ejected=!1,this.stateListeners))e(this,n.ConnectivityState.TRANSIENT_FAILURE,this.childSubchannelState,-1)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}}function A(){return{success:0,failure:0}}class _{constructor(){this.activeBucket=A(),this.inactiveBucket=A()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket=A()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}}class x{constructor(e,t){this.wrappedPicker=e,this.countCalls=t}pick(e){let t=this.wrappedPicker.pick(e);if(t.pickResultType!==u.PickResultType.COMPLETE)return t;{let e=t.subchannel,r=e.getMapEntry();if(!r)return Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel()});{let i=t.onCallEnded;return this.countCalls&&(i=e=>{var i;e===s.Status.OK?r.counter.addSuccess():r.counter.addFailure(),null===(i=t.onCallEnded)||void 0===i||i.call(t,e)}),Object.assign(Object.assign({},t),{subchannel:e.getWrappedSubchannel(),onCallEnded:i})}}}}class k{constructor(e){this.addressMap=new Map,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new h.ChildLoadBalancerHandler((0,o.createChildChannelControlHelper)(e,{createSubchannel:(t,r)=>{let i=e.createSubchannel(t,r),n=this.addressMap.get((0,c.subchannelAddressToString)(t)),s=new C(i,n);return(null==n?void 0:n.currentEjectionTimestamp)!==null&&s.eject(),null==n||n.subchannelWrappers.push(s),s},updateState:(t,r)=>{t===n.ConnectivityState.READY?e.updateState(t,new x(r,this.isCountingEnabled())):e.updateState(t,r)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return null!==this.latestConfig&&(null!==this.latestConfig.getSuccessRateEjectionConfig()||null!==this.latestConfig.getFailurePercentageEjectionConfig())}getCurrentEjectionPercent(){let e=0;for(let t of this.addressMap.values())null!==t.currentEjectionTimestamp&&(e+=1);return 100*e/this.addressMap.size}runSuccessRateCheck(e){if(!this.latestConfig)return;let t=this.latestConfig.getSuccessRateEjectionConfig();if(!t)return;m("Running success rate check");let r=t.request_volume,i=0,n=[];for(let[e,t]of this.addressMap){let s=t.counter.getLastSuccesses(),a=t.counter.getLastFailures();m("Stats for "+e+": successes="+s+" failures="+a+" targetRequestVolume="+r),s+a>=r&&(i+=1,n.push(s/(s+a)))}if(m("Found "+i+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+n+"]"),i<t.minimum_hosts)return;let s=n.reduce((e,t)=>e+t)/n.length,a=0;for(let e of n){let t=e-s;a+=t*t}let o=Math.sqrt(a/n.length),l=s-t.stdev_factor/1e3*o;for(let[i,n]of(m("stdev="+o+" ejectionThreshold="+l),this.addressMap.entries())){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let s=n.counter.getLastSuccesses(),a=n.counter.getLastFailures();if(s+a<r)continue;let o=s/(s+a);if(m("Checking candidate "+i+" successRate="+o),o<l){let r=100*Math.random();m("Candidate "+i+" randomNumber="+r+" enforcement_percentage="+t.enforcement_percentage),r<t.enforcement_percentage&&(m("Ejecting candidate "+i),this.eject(n,e))}}}runFailurePercentageCheck(e){if(!this.latestConfig)return;let t=this.latestConfig.getFailurePercentageEjectionConfig();if(!t)return;m("Running failure percentage check. threshold="+t.threshold+" request volume threshold="+t.request_volume);let r=0;for(let e of this.addressMap.values())e.counter.getLastSuccesses()+e.counter.getLastFailures()>=t.request_volume&&(r+=1);if(!(r<t.minimum_hosts))for(let[r,i]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let n=i.counter.getLastSuccesses(),s=i.counter.getLastFailures();if(m("Candidate successes="+n+" failures="+s),!(n+s<t.request_volume)&&100*s/(s+n)>t.threshold){let n=100*Math.random();m("Candidate "+r+" randomNumber="+n+" enforcement_percentage="+t.enforcement_percentage),n<t.enforcement_percentage&&(m("Ejecting candidate "+r),this.eject(i,e))}}}eject(e,t){for(let t of(e.currentEjectionTimestamp=new Date,e.ejectionTimeMultiplier+=1,e.subchannelWrappers))t.eject()}uneject(e){for(let t of(e.currentEjectionTimestamp=null,e.subchannelWrappers))t.uneject()}switchAllBuckets(){for(let e of this.addressMap.values())e.counter.switchBuckets()}startTimer(e){var t,r;this.ejectionTimer=setTimeout(()=>this.runChecks(),e),null===(r=(t=this.ejectionTimer).unref)||void 0===r||r.call(t)}runChecks(){let e=new Date;if(m("Ejection timer running"),this.switchAllBuckets(),this.latestConfig)for(let[t,r]of(this.timerStartTime=e,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(e),this.runFailurePercentageCheck(e),this.addressMap.entries()))if(null===r.currentEjectionTimestamp)r.ejectionTimeMultiplier>0&&(r.ejectionTimeMultiplier-=1);else{let e=this.latestConfig.getBaseEjectionTimeMs(),i=this.latestConfig.getMaxEjectionTimeMs(),n=new Date(r.currentEjectionTimestamp.getTime());n.setMilliseconds(n.getMilliseconds()+Math.min(e*r.ejectionTimeMultiplier,Math.max(e,i))),n<new Date&&(m("Unejecting "+t),this.uneject(r))}}updateAddressList(e,t,r){if(!(t instanceof T))return;let i=new Set;for(let t of e)i.add((0,c.subchannelAddressToString)(t));for(let e of i)this.addressMap.has(e)||(m("Adding map entry for "+e),this.addressMap.set(e,{counter:new _,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));for(let e of this.addressMap.keys())i.has(e)||(m("Removing map entry for "+e),this.addressMap.delete(e));let n=(0,l.getFirstUsableConfig)(t.getChildPolicy(),!0);if(this.childBalancer.updateAddressList(e,n,r),t.getSuccessRateEjectionConfig()||t.getFailurePercentageEjectionConfig()){if(this.timerStartTime){m("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);let e=t.getIntervalMs()-(new Date().getTime()-this.timerStartTime.getTime());this.startTimer(e)}else m("Starting new timer"),this.timerStartTime=new Date,this.startTimer(t.getIntervalMs()),this.switchAllBuckets()}else for(let e of(m("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer),this.addressMap.values()))this.uneject(e),e.ejectionTimeMultiplier=0;this.latestConfig=t}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return g}}function I(){y&&(0,o.registerLoadBalancerType)(g,k,T)}t.OutlierDetectionLoadBalancer=k,t.setup=I},5102:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.PickFirstLoadBalancer=t.shuffled=t.PickFirstLoadBalancingConfig=void 0;let i=r(9884),n=r(2409),s=r(2352),a=r(5792),o=r(9572),l="pick_first";function h(e){a.trace(o.LogVerbosity.DEBUG,l,e)}let u="pick_first",c=250;class d{constructor(e){this.shuffleAddressList=e}getLoadBalancerName(){return u}toJsonObject(){return{[u]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(e){if("shuffleAddressList"in e&&"boolean"!=typeof e.shuffleAddressList)throw Error("pick_first config field shuffleAddressList must be a boolean if provided");return new d(!0===e.shuffleAddressList)}}t.PickFirstLoadBalancingConfig=d;class p{constructor(e){this.subchannel=e}pick(e){return{pickResultType:s.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}}function f(e){let t=e.slice();for(let e=t.length-1;e>1;e--){let r=Math.floor(Math.random()*(e+1)),i=t[e];t[e]=t[r],t[r]=i}return t}t.shuffled=f;class m{constructor(e){this.channelControlHelper=e,this.children=[],this.currentState=n.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=(e,t,r,i,n)=>{this.onSubchannelStateUpdate(e,t,r,n)},this.triedAllSubchannels=!1,this.stickyTransientFailureMode=!1,this.requestedResolutionSinceLastUpdate=!1,this.lastError=null,this.latestAddressList=null,this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every(e=>e.hasReportedTransientFailure)}calculateAndReportNewState(){this.currentPick?this.updateState(n.ConnectivityState.READY,new p(this.currentPick)):0===this.children.length?this.updateState(n.ConnectivityState.IDLE,new s.QueuePicker(this)):this.stickyTransientFailureMode?this.updateState(n.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(n.ConnectivityState.CONNECTING,new s.QueuePicker(this))}requestReresolution(){this.requestedResolutionSinceLastUpdate=!0,this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(this.allChildrenHaveReportedTF()&&(this.requestedResolutionSinceLastUpdate||this.requestReresolution(),!this.stickyTransientFailureMode)){for(let{subchannel:e}of(this.stickyTransientFailureMode=!0,this.children))e.startConnecting();this.calculateAndReportNewState()}}removeCurrentPick(){if(null!==this.currentPick){let e=this.currentPick;this.currentPick=null,e.unref(),e.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild(e.getChannelzRef())}}onSubchannelStateUpdate(e,t,r,i){var s;if(null===(s=this.currentPick)||void 0===s?void 0:s.realSubchannelEquals(e)){r!==n.ConnectivityState.READY&&(this.removeCurrentPick(),this.calculateAndReportNewState(),this.requestReresolution());return}for(let[t,s]of this.children.entries())if(e.realSubchannelEquals(s.subchannel)){r===n.ConnectivityState.READY&&this.pickSubchannel(s.subchannel),r===n.ConnectivityState.TRANSIENT_FAILURE&&(s.hasReportedTransientFailure=!0,i&&(this.lastError=i),this.maybeEnterStickyTransientFailureMode(),t===this.currentSubchannelIndex&&this.startNextSubchannelConnecting(t+1)),s.subchannel.startConnecting();return}}startNextSubchannelConnecting(e){if(clearTimeout(this.connectionDelayTimeout),!this.triedAllSubchannels){for(let[t,r]of this.children.entries())if(t>=e){let e=r.subchannel.getConnectivityState();if(e===n.ConnectivityState.IDLE||e===n.ConnectivityState.CONNECTING){this.startConnecting(t);return}}this.triedAllSubchannels=!0,this.maybeEnterStickyTransientFailureMode()}}startConnecting(e){var t,r;clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=e,this.children[e].subchannel.getConnectivityState()===n.ConnectivityState.IDLE&&(h("Start connecting to subchannel with address "+this.children[e].subchannel.getAddress()),process.nextTick(()=>{var t;null===(t=this.children[e])||void 0===t||t.subchannel.startConnecting()})),this.connectionDelayTimeout=null===(r=(t=setTimeout(()=>{this.startNextSubchannelConnecting(e+1)},c)).unref)||void 0===r?void 0:r.call(t)}pickSubchannel(e){this.currentPick&&e.realSubchannelEquals(this.currentPick)||(h("Pick subchannel with address "+e.getAddress()),this.stickyTransientFailureMode=!1,null!==this.currentPick&&(this.currentPick.unref(),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeConnectivityStateListener(this.subchannelStateListener)),this.currentPick=e,e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef()),this.resetSubchannelList(),clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState())}updateState(e,t){h(n.ConnectivityState[this.currentState]+" -> "+n.ConnectivityState[e]),this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(let e of this.children)this.currentPick&&e.subchannel.realSubchannelEquals(this.currentPick)||e.subchannel.removeConnectivityStateListener(this.subchannelStateListener),e.subchannel.unref(),this.channelControlHelper.removeChannelzChild(e.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[],this.triedAllSubchannels=!1,this.requestedResolutionSinceLastUpdate=!1}connectToAddressList(e){let t=e.map(e=>({subchannel:this.channelControlHelper.createSubchannel(e,{}),hasReportedTransientFailure:!1}));for(let{subchannel:e}of t)e.ref(),this.channelControlHelper.addChannelzChild(e.getChannelzRef());for(let{subchannel:e}of(this.resetSubchannelList(),this.children=t,this.children))if(e.addConnectivityStateListener(this.subchannelStateListener),e.getConnectivityState()===n.ConnectivityState.READY){this.pickSubchannel(e);return}for(let e of this.children)e.subchannel.getConnectivityState()===n.ConnectivityState.TRANSIENT_FAILURE&&(e.hasReportedTransientFailure=!0);this.startNextSubchannelConnecting(0),this.calculateAndReportNewState()}updateAddressList(e,t){t instanceof d&&(t.getShuffleAddressList()&&(e=f(e)),this.latestAddressList=e,this.connectToAddressList(e))}exitIdle(){this.currentState===n.ConnectivityState.IDLE&&this.latestAddressList&&this.connectToAddressList(this.latestAddressList)}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick()}getTypeName(){return u}}function g(){(0,i.registerLoadBalancerType)(u,m,d),(0,i.registerDefaultLoadBalancerType)(u)}t.PickFirstLoadBalancer=m,t.setup=g},4556:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.RoundRobinLoadBalancer=void 0;let i=r(9884),n=r(2409),s=r(2352),a=r(4955),o=r(5792),l=r(9572),h="round_robin";function u(e){o.trace(l.LogVerbosity.DEBUG,h,e)}let c="round_robin";class d{getLoadBalancerName(){return c}constructor(){}toJsonObject(){return{[c]:{}}}static createFromJson(e){return new d}}class p{constructor(e,t=0){this.subchannelList=e,this.nextIndex=t}pick(e){let t=this.subchannelList[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.subchannelList.length,{pickResultType:s.PickResultType.COMPLETE,subchannel:t,status:null,onCallStarted:null,onCallEnded:null}}peekNextSubchannel(){return this.subchannelList[this.nextIndex]}}class f{constructor(e){this.channelControlHelper=e,this.subchannels=[],this.currentState=n.ConnectivityState.IDLE,this.currentReadyPicker=null,this.lastError=null,this.subchannelStateListener=(e,t,r,i,s)=>{this.calculateAndUpdateState(),(r===n.ConnectivityState.TRANSIENT_FAILURE||r===n.ConnectivityState.IDLE)&&(s&&(this.lastError=s),this.channelControlHelper.requestReresolution(),e.startConnecting())}}countSubchannelsWithState(e){return this.subchannels.filter(t=>t.getConnectivityState()===e).length}calculateAndUpdateState(){if(this.countSubchannelsWithState(n.ConnectivityState.READY)>0){let e=this.subchannels.filter(e=>e.getConnectivityState()===n.ConnectivityState.READY),t=0;null!==this.currentReadyPicker&&(t=e.indexOf(this.currentReadyPicker.peekNextSubchannel()))<0&&(t=0),this.updateState(n.ConnectivityState.READY,new p(e,t))}else this.countSubchannelsWithState(n.ConnectivityState.CONNECTING)>0?this.updateState(n.ConnectivityState.CONNECTING,new s.QueuePicker(this)):this.countSubchannelsWithState(n.ConnectivityState.TRANSIENT_FAILURE)>0?this.updateState(n.ConnectivityState.TRANSIENT_FAILURE,new s.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(n.ConnectivityState.IDLE,new s.QueuePicker(this))}updateState(e,t){u(n.ConnectivityState[this.currentState]+" -> "+n.ConnectivityState[e]),e===n.ConnectivityState.READY?this.currentReadyPicker=t:this.currentReadyPicker=null,this.currentState=e,this.channelControlHelper.updateState(e,t)}resetSubchannelList(){for(let e of this.subchannels)e.removeConnectivityStateListener(this.subchannelStateListener),e.unref(),this.channelControlHelper.removeChannelzChild(e.getChannelzRef());this.subchannels=[]}updateAddressList(e,t){for(let t of(this.resetSubchannelList(),u("Connect to address list "+e.map(e=>(0,a.subchannelAddressToString)(e))),this.subchannels=e.map(e=>this.channelControlHelper.createSubchannel(e,{})),this.subchannels)){t.ref(),t.addConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.addChannelzChild(t.getChannelzRef());let e=t.getConnectivityState();(e===n.ConnectivityState.IDLE||e===n.ConnectivityState.TRANSIENT_FAILURE)&&t.startConnecting()}this.calculateAndUpdateState()}exitIdle(){for(let e of this.subchannels)e.startConnecting()}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return c}}function m(){(0,i.registerLoadBalancerType)(c,f,d)}t.RoundRobinLoadBalancer=f,t.setup=m},9884:(e,t)=>{"use strict";function r(e,t){var r,i,n,s,a,o,l,h,u,c;return{createSubchannel:null!==(i=null===(r=t.createSubchannel)||void 0===r?void 0:r.bind(t))&&void 0!==i?i:e.createSubchannel.bind(e),updateState:null!==(s=null===(n=t.updateState)||void 0===n?void 0:n.bind(t))&&void 0!==s?s:e.updateState.bind(e),requestReresolution:null!==(o=null===(a=t.requestReresolution)||void 0===a?void 0:a.bind(t))&&void 0!==o?o:e.requestReresolution.bind(e),addChannelzChild:null!==(h=null===(l=t.addChannelzChild)||void 0===l?void 0:l.bind(t))&&void 0!==h?h:e.addChannelzChild.bind(e),removeChannelzChild:null!==(c=null===(u=t.removeChannelzChild)||void 0===u?void 0:u.bind(t))&&void 0!==c?c:e.removeChannelzChild.bind(e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.validateLoadBalancingConfig=t.getFirstUsableConfig=t.isLoadBalancerNameRegistered=t.createLoadBalancer=t.registerDefaultLoadBalancerType=t.registerLoadBalancerType=t.createChildChannelControlHelper=void 0,t.createChildChannelControlHelper=r;let i={},n=null;function s(e,t,r){i[e]={LoadBalancer:t,LoadBalancingConfig:r}}function a(e){n=e}function o(e,t){let r=e.getLoadBalancerName();return r in i?new i[r].LoadBalancer(t):null}function l(e){return e in i}function h(e,t=!1){for(let t of e)if(t.getLoadBalancerName() in i)return t;return t&&n?new i[n].LoadBalancingConfig:null}function u(e){if(!(null!==e&&"object"==typeof e))throw Error("Load balancing config must be an object");let t=Object.keys(e);if(1!==t.length)throw Error("Provided load balancing config has multiple conflicting entries");let r=t[0];if(r in i)return i[r].LoadBalancingConfig.createFromJson(e[r]);throw Error(`Unrecognized load balancing config name ${r}`)}t.registerLoadBalancerType=s,t.registerDefaultLoadBalancerType=a,t.createLoadBalancer=o,t.isLoadBalancerNameRegistered=l,t.getFirstUsableConfig=h,t.validateLoadBalancingConfig=u},1690:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoadBalancingCall=void 0;let i=r(2409),n=r(9572),s=r(7360),a=r(6281),o=r(2352),l=r(5541),h=r(5792),u=r(5607),c=r(5158),d="load_balancing_call";class p{constructor(e,t,r,i,n,s,a){var o,h;this.channel=e,this.callConfig=t,this.methodName=r,this.host=i,this.credentials=n,this.deadline=s,this.callNumber=a,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null;let u=this.methodName.split("/"),c="";u.length>=2&&(c=u[1]);let d=null!==(h=null===(o=(0,l.splitHostPort)(this.host))||void 0===o?void 0:o.host)&&void 0!==h?h:"localhost";this.serviceUrl=`https://${d}/${c}`}trace(e){h.trace(n.LogVerbosity.DEBUG,d,"["+this.callNumber+"] "+e)}outputStatus(e,t){var r,i;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+e.code+' details="'+e.details+'"');let n=Object.assign(Object.assign({},e),{progress:t});null===(r=this.listener)||void 0===r||r.onReceiveStatus(n),null===(i=this.onCallEnded)||void 0===i||i.call(this,n.code)}}doPick(){var e,t;if(this.ended)return;if(!this.metadata)throw Error("doPick called before start");this.trace("Pick called");let r=this.channel.doPick(this.metadata,this.callConfig.pickInformation),l=r.subchannel?"("+r.subchannel.getChannelzRef().id+") "+r.subchannel.getAddress():""+r.subchannel;switch(this.trace("Pick result: "+o.PickResultType[r.pickResultType]+" subchannel: "+l+" status: "+(null===(e=r.status)||void 0===e?void 0:e.code)+" "+(null===(t=r.status)||void 0===t?void 0:t.details)),r.pickResultType){case o.PickResultType.COMPLETE:this.credentials.generateMetadata({service_url:this.serviceUrl}).then(e=>{var t,o,h;if(this.ended){this.trace("Credentials metadata generation finished after call ended");return}let u=this.metadata.clone();if(u.merge(e),u.get("authorization").length>1&&this.outputStatus({code:n.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new a.Metadata},"PROCESSED"),r.subchannel.getConnectivityState()!==i.ConnectivityState.READY){this.trace("Picked subchannel "+l+" has state "+i.ConnectivityState[r.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),this.doPick();return}this.deadline!==1/0&&u.set("grpc-timeout",(0,s.getDeadlineTimeoutString)(this.deadline));try{this.child=r.subchannel.getRealSubchannel().createCall(u,this.host,this.methodName,{onReceiveMetadata:e=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(e)},onReceiveMessage:e=>{this.trace("Received message"),this.listener.onReceiveMessage(e)},onReceiveStatus:e=>{this.trace("Received status"),e.rstCode===c.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus(e,"REFUSED"):this.outputStatus(e,"PROCESSED")}})}catch(e){this.trace("Failed to start call on picked subchannel "+l+" with error "+e.message),this.outputStatus({code:n.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+e.message,metadata:new a.Metadata},"NOT_STARTED");return}null===(o=(t=this.callConfig).onCommitted)||void 0===o||o.call(t),null===(h=r.onCallStarted)||void 0===h||h.call(r),this.onCallEnded=r.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose()},e=>{let{code:t,details:r}=(0,u.restrictControlPlaneStatusCode)("number"==typeof e.code?e.code:n.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${e.message}`);this.outputStatus({code:t,details:r,metadata:new a.Metadata},"PROCESSED")});break;case o.PickResultType.DROP:let{code:h,details:d}=(0,u.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:h,details:d,metadata:r.status.metadata},"DROP")});break;case o.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{let{code:e,details:t}=(0,u.restrictControlPlaneStatusCode)(r.status.code,r.status.details);setImmediate(()=>{this.outputStatus({code:e,details:t,metadata:r.status.metadata},"PROCESSED")})}break;case o.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null===(r=this.child)||void 0===r||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new a.Metadata},"PROCESSED")}getPeer(){var e,t;return null!==(t=null===(e=this.child)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.listener=t,this.metadata=e,this.doPick()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.child.sendMessageWithContext(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){throw Error("Method not implemented.")}getCallNumber(){return this.callNumber}}t.LoadBalancingCall=p},5792:(e,t,r)=>{"use strict";var i,n,s,a;Object.defineProperty(t,"__esModule",{value:!0}),t.isTracerEnabled=t.trace=t.log=t.setLoggerVerbosity=t.setLogger=t.getLogger=void 0;let o=r(9572),l=r(7282),h=r(1513).i8,u={error:(e,...t)=>{console.error("E "+e,...t)},info:(e,...t)=>{console.error("I "+e,...t)},debug:(e,...t)=>{console.error("D "+e,...t)}},c=o.LogVerbosity.ERROR;switch((null!==(n=null!==(i=process.env.GRPC_NODE_VERBOSITY)&&void 0!==i?i:process.env.GRPC_VERBOSITY)&&void 0!==n?n:"").toUpperCase()){case"DEBUG":c=o.LogVerbosity.DEBUG;break;case"INFO":c=o.LogVerbosity.INFO;break;case"ERROR":c=o.LogVerbosity.ERROR;break;case"NONE":c=o.LogVerbosity.NONE}let d=()=>u;t.getLogger=d;let p=e=>{u=e};t.setLogger=p;let f=e=>{c=e};t.setLoggerVerbosity=f;let m=(e,...t)=>{let r;if(e>=c){switch(e){case o.LogVerbosity.DEBUG:r=u.debug;break;case o.LogVerbosity.INFO:r=u.info;break;case o.LogVerbosity.ERROR:r=u.error}r||(r=u.error),r&&r.bind(u)(...t)}};t.log=m;let g=null!==(a=null!==(s=process.env.GRPC_NODE_TRACE)&&void 0!==s?s:process.env.GRPC_TRACE)&&void 0!==a?a:"",y=new Set,v=new Set;for(let e of g.split(","))e.startsWith("-")?v.add(e.substring(1)):y.add(e);let b=y.has("all");function w(e,r,i){E(r)&&(0,t.log)(e,new Date().toISOString()+" | v"+h+" "+l.pid+" | "+r+" | "+i)}function E(e){return!v.has(e)&&(b||y.has(e))}t.trace=w,t.isTracerEnabled=E},4529:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadPackageDefinition=t.makeClientConstructor=void 0;let i=r(1865),n={unary:i.Client.prototype.makeUnaryRequest,server_stream:i.Client.prototype.makeServerStreamRequest,client_stream:i.Client.prototype.makeClientStreamRequest,bidi:i.Client.prototype.makeBidiStreamRequest};function s(e){return["__proto__","prototype","constructor"].includes(e)}function a(e,t,r){r||(r={});class a extends i.Client{}return Object.keys(e).forEach(t=>{let r;if(s(t))return;let i=e[t];if("string"==typeof t&&"$"===t.charAt(0))throw Error("Method names cannot start with $");r=i.requestStream?i.responseStream?"bidi":"client_stream":i.responseStream?"server_stream":"unary";let l=i.requestSerialize,h=i.responseDeserialize,u=o(n[r],i.path,l,h);a.prototype[t]=u,Object.assign(a.prototype[t],i),i.originalName&&!s(i.originalName)&&(a.prototype[i.originalName]=a.prototype[t])}),a.service=e,a.serviceName=t,a}function o(e,t,r,i){return function(...n){return e.call(this,t,r,i,...n)}}function l(e){return"format"in e}function h(e){let t={};for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)){let i=e[r],n=r.split(".");if(n.some(e=>s(e)))continue;let o=n[n.length-1],h=t;for(let e of n.slice(0,-1))h[e]||(h[e]={}),h=h[e];l(i)?h[o]=i:h[o]=a(i,o,{})}return t}t.makeClientConstructor=a,t.loadPackageDefinition=h},6281:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;let i=r(5792),n=r(9572),s=r(6027),a=/^[0-9a-z_.-]+$/,o=/^[ -~]*$/;function l(e){return a.test(e)}function h(e){return o.test(e)}function u(e){return e.endsWith("-bin")}function c(e){return!e.startsWith("grpc-")}function d(e){return e.toLowerCase()}function p(e,t){if(!l(e))throw Error('Metadata key "'+e+'" contains illegal characters');if(null!=t){if(u(e)){if(!Buffer.isBuffer(t))throw Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(t))throw Error("keys that don't end with '-bin' must have String values");if(!h(t))throw Error('Metadata string value "'+t+'" contains illegal characters')}}}class f{constructor(e={}){this.internalRepr=new Map,this.options=e}set(e,t){p(e=d(e),t),this.internalRepr.set(e,[t])}add(e,t){p(e=d(e),t);let r=this.internalRepr.get(e);void 0===r?this.internalRepr.set(e,[t]):r.push(t)}remove(e){e=d(e),this.internalRepr.delete(e)}get(e){return e=d(e),this.internalRepr.get(e)||[]}getMap(){let e={};for(let[t,r]of this.internalRepr)if(r.length>0){let i=r[0];e[t]=Buffer.isBuffer(i)?Buffer.from(i):i}return e}clone(){let e=new f(this.options),t=e.internalRepr;for(let[e,r]of this.internalRepr){let i=r.map(e=>Buffer.isBuffer(e)?Buffer.from(e):e);t.set(e,i)}return e}merge(e){for(let[t,r]of e.internalRepr){let e=(this.internalRepr.get(t)||[]).concat(r);this.internalRepr.set(t,e)}}setOptions(e){this.options=e}getOptions(){return this.options}toHttp2Headers(){let e={};for(let[t,r]of this.internalRepr)e[t]=r.map(m);return e}toJSON(){let e={};for(let[t,r]of this.internalRepr)e[t]=r;return e}static fromHttp2Headers(e){let t=new f;for(let r of Object.keys(e)){if(":"===r.charAt(0))continue;let a=e[r];try{u(r)?Array.isArray(a)?a.forEach(e=>{t.add(r,Buffer.from(e,"base64"))}):void 0!==a&&(c(r)?a.split(",").forEach(e=>{t.add(r,Buffer.from(e.trim(),"base64"))}):t.add(r,Buffer.from(a,"base64"))):Array.isArray(a)?a.forEach(e=>{t.add(r,e)}):void 0!==a&&t.add(r,a)}catch(t){let e=`Failed to add metadata entry ${r}: ${a}. ${(0,s.getErrorMessage)(t)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,i.log)(n.LogVerbosity.ERROR,e)}}return t}}t.Metadata=f;let m=e=>Buffer.isBuffer(e)?e.toString("base64"):e},2352:(e,t,r)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.QueuePicker=t.UnavailablePicker=t.PickResultType=void 0;let n=r(6281),s=r(9572);!function(e){e[e.COMPLETE=0]="COMPLETE",e[e.QUEUE=1]="QUEUE",e[e.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",e[e.DROP=3]="DROP"}(i||(t.PickResultType=i={}));class a{constructor(e){this.status=Object.assign({code:s.Status.UNAVAILABLE,details:"No connection established",metadata:new n.Metadata},e)}pick(e){return{pickResultType:i.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}}t.UnavailablePicker=a;class o{constructor(e){this.loadBalancer=e,this.calledExitIdle=!1}pick(e){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0),{pickResultType:i.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}}t.QueuePicker=o},8501:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.DEFAULT_PORT=void 0;let i=r(4063),n=r(9523),s=r(3837),a=r(4298),o=r(9572),l=r(6281),h=r(5792),u=r(9572),c=r(5541),d=r(1808),p=r(1742),f="dns_resolver";function m(e){h.trace(u.LogVerbosity.DEBUG,f,e)}t.DEFAULT_PORT=443;let g=3e4,y=s.promisify(n.resolveTxt),v=s.promisify(n.lookup);function b(...e){let t=[];for(let r=0;r<Math.max.apply(null,e.map(e=>e.length));r++)for(let i of e)r<i.length&&t.push(i[r]);return t}class w{constructor(e,r,i){var n,s,a;this.target=e,this.listener=r,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,this.isServiceConfigEnabled=!0,this.returnedIpResult=!1,m("Resolver constructed for target "+(0,c.uriToString)(e));let h=(0,c.splitHostPort)(e.path);null===h?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0,d.isIPv4)(h.host)||(0,d.isIPv6)(h.host)?(this.ipResult=[{host:h.host,port:null!==(n=h.port)&&void 0!==n?n:t.DEFAULT_PORT}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=h.host,this.port=null!==(s=h.port)&&void 0!==s?s:t.DEFAULT_PORT),this.percentage=100*Math.random(),1===i["grpc.service_config_disable_resolution"]&&(this.isServiceConfigEnabled=!1),this.defaultResolutionError={code:o.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,c.uriToString)(this.target)}`,metadata:new l.Metadata};let u={initialDelay:i["grpc.initial_reconnect_backoff_ms"],maxDelay:i["grpc.max_reconnect_backoff_ms"]};this.backoff=new p.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff()},u),this.backoff.unref(),this.minTimeBetweenResolutionsMs=null!==(a=i["grpc.dns_min_time_between_resolutions_ms"])&&void 0!==a?a:g,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(null!==this.ipResult){this.returnedIpResult||(m("Returning IP address for target "+(0,c.uriToString)(this.target)),setImmediate(()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})}),this.returnedIpResult=!0),this.backoff.stop(),this.backoff.reset(),this.stopNextResolutionTimer();return}if(null===this.dnsHostname)m("Failed to parse DNS address "+(0,c.uriToString)(this.target)),setImmediate(()=>{this.listener.onError({code:o.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,c.uriToString)(this.target)}`,metadata:new l.Metadata})}),this.stopNextResolutionTimer();else{if(null!==this.pendingLookupPromise)return;m("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;let e=this.dnsHostname;this.pendingLookupPromise=v(e,{all:!0}),this.pendingLookupPromise.then(e=>{if(null===this.pendingLookupPromise)return;this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop();let t=e.filter(e=>4===e.family),r=e.filter(e=>6===e.family);this.latestLookupResult=b(r,t).map(e=>({host:e.address,port:+this.port}));let i="["+this.latestLookupResult.map(e=>e.host+":"+e.port).join(",")+"]";if(m("Resolved addresses for target "+(0,c.uriToString)(this.target)+": "+i),0===this.latestLookupResult.length){this.listener.onError(this.defaultResolutionError);return}this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})},e=>{null!==this.pendingLookupPromise&&(m("Resolution error for target "+(0,c.uriToString)(this.target)+": "+e.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError))}),this.isServiceConfigEnabled&&null===this.pendingTxtPromise&&(this.pendingTxtPromise=y(e),this.pendingTxtPromise.then(e=>{if(null!==this.pendingTxtPromise){this.pendingTxtPromise=null;try{this.latestServiceConfig=(0,a.extractAndSelectServiceConfig)(e,this.percentage)}catch(e){this.latestServiceConfigError={code:o.Status.UNAVAILABLE,details:`Parsing service config failed with error ${e.message}`,metadata:new l.Metadata}}null!==this.latestLookupResult&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}},e=>{}))}}startNextResolutionTimer(){var e,t;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=null===(t=(e=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()},this.minTimeBetweenResolutionsMs)).unref)||void 0===t?void 0:t.call(e),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){null===this.pendingLookupPromise&&(this.continueResolving=!1,this.backoff.runOnce(),this.startNextResolutionTimer(),this.startResolution())}updateResolution(){null===this.pendingLookupPromise&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?(this.isNextResolutionTimerRunning?m('resolution update delayed by "min time between resolutions" rate limit'):m("resolution update delayed by backoff timer until "+this.backoff.getEndTime().toISOString()),this.continueResolving=!0):this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.reset(),this.backoff.stop(),this.stopNextResolutionTimer(),this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.returnedIpResult=!1}static getDefaultAuthority(e){return e.path}}function E(){(0,i.registerResolver)("dns",w),(0,i.registerDefaultScheme)("dns")}t.setup=E},3988:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;let i=r(1808),n=r(9572),s=r(6281),a=r(4063),o=r(5541),l=r(5792),h="ip_resolver";function u(e){l.trace(n.LogVerbosity.DEBUG,h,e)}let c="ipv4",d="ipv6",p=443;class f{constructor(e,t,r){var a;this.listener=t,this.addresses=[],this.error=null,this.hasReturnedResult=!1,u("Resolver constructed for target "+(0,o.uriToString)(e));let l=[];if(!(e.scheme===c||e.scheme===d)){this.error={code:n.Status.UNAVAILABLE,details:`Unrecognized scheme ${e.scheme} in IP resolver`,metadata:new s.Metadata};return}for(let t of e.path.split(",")){let r=(0,o.splitHostPort)(t);if(null===r||e.scheme===c&&!(0,i.isIPv4)(r.host)||e.scheme===d&&!(0,i.isIPv6)(r.host)){this.error={code:n.Status.UNAVAILABLE,details:`Failed to parse ${e.scheme} address ${t}`,metadata:new s.Metadata};return}l.push({host:r.host,port:null!==(a=r.port)&&void 0!==a?a:p})}this.addresses=l,u("Parsed "+e.scheme+" address list "+this.addresses)}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.addresses,null,null,null,{})}))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(e){return e.path.split(",")[0]}}function m(){(0,a.registerResolver)(c,f),(0,a.registerResolver)(d,f)}t.setup=m},7255:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setup=void 0;let i=r(4063);class n{constructor(e,t,r){let i;this.listener=t,this.addresses=[],this.hasReturnedResult=!1,i=""===e.authority?"/"+e.path:e.path,this.addresses=[{path:i}]}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(this.listener.onSuccessfulResolution,this.addresses,null,null,null,{}))}destroy(){}static getDefaultAuthority(e){return"localhost"}}function s(){(0,i.registerResolver)("unix",n)}t.setup=s},4063:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapUriDefaultScheme=t.getDefaultAuthority=t.createResolver=t.registerDefaultScheme=t.registerResolver=void 0;let i=r(5541),n={},s=null;function a(e,t){n[e]=t}function o(e){s=e}function l(e,t,r){if(void 0!==e.scheme&&e.scheme in n)return new n[e.scheme](e,t,r);throw Error(`No resolver could be created for target ${(0,i.uriToString)(e)}`)}function h(e){if(void 0!==e.scheme&&e.scheme in n)return n[e.scheme].getDefaultAuthority(e);throw Error(`Invalid target ${(0,i.uriToString)(e)}`)}function u(e){return void 0!==e.scheme&&e.scheme in n?e:null!==s?{scheme:s,authority:void 0,path:(0,i.uriToString)(e)}:null}t.registerResolver=a,t.registerDefaultScheme=o,t.createResolver=l,t.getDefaultAuthority=h,t.mapUriDefaultScheme=u},80:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingCall=void 0;let i=r(9572),n=r(7360),s=r(6281),a=r(5792),o=r(5607),l="resolving_call";class h{constructor(e,t,r,s,a,o){this.channel=e,this.method=t,this.filterStackFactory=s,this.credentials=a,this.callNumber=o,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout(()=>{},0),this.filterStack=null,this.deadline=r.deadline,this.host=r.host,r.parentCall&&(r.flags&i.Propagate.CANCELLATION&&r.parentCall.on("cancelled",()=>{this.cancelWithStatus(i.Status.CANCELLED,"Cancelled by parent call")}),r.flags&i.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+r.parentCall.getDeadline()),this.deadline=(0,n.minDeadline)(this.deadline,r.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer()}trace(e){a.trace(i.LogVerbosity.DEBUG,l,"["+this.callNumber+"] "+e)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.trace("Deadline: "+(0,n.deadlineToString)(this.deadline));let e=(0,n.getRelativeTimeout)(this.deadline);if(e!==1/0){this.trace("Deadline will be reached in "+e+"ms");let t=()=>{this.cancelWithStatus(i.Status.DEADLINE_EXCEEDED,"Deadline exceeded")};e<=0?process.nextTick(t):this.deadlineTimer=setTimeout(t,e)}}outputStatus(e){if(!this.ended){this.ended=!0,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);let t=this.filterStack.receiveTrailers(e);this.trace("ended with status: code="+t.code+' details="'+t.details+'"'),this.statusWatchers.forEach(e=>e(t)),process.nextTick(()=>{var e;null===(e=this.listener)||void 0===e||e.onReceiveStatus(t)})}}sendMessageOnChild(e,t){if(!this.child)throw Error("sendMessageonChild called with child not populated");let r=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:t,flags:e.flags})).then(t=>{this.writeFilterPending=!1,r.sendMessageWithContext(e,t.message),this.pendingHalfClose&&r.halfClose()},e=>{this.cancelWithStatus(e.code,e.details)})}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw Error("getConfig called before start");let e=this.channel.getConfig(this.method,this.metadata);if("NONE"===e.type){this.channel.queueCallForConfig(this);return}if("ERROR"===e.type){this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(e.error);return}let t=e.config;if(t.status!==i.Status.OK){let{code:e,details:r}=(0,o.restrictControlPlaneStatusCode)(t.status,"Failed to route call to method "+this.method);this.outputStatus({code:e,details:r,metadata:new s.Metadata});return}if(t.methodConfig.timeout){let e=new Date;e.setSeconds(e.getSeconds()+t.methodConfig.timeout.seconds),e.setMilliseconds(e.getMilliseconds()+t.methodConfig.timeout.nanos/1e6),this.deadline=(0,n.minDeadline)(this.deadline,e),this.runDeadlineTimer()}this.filterStackFactory.push(t.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then(e=>{this.child=this.channel.createInnerCall(t,this.method,this.host,this.credentials,this.deadline),this.trace("Created child ["+this.child.getCallNumber()+"]"),this.child.start(e,{onReceiveMetadata:e=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(e))},onReceiveMessage:e=>{this.trace("Received message"),this.readFilterPending=!0,this.filterStack.receiveMessage(e).then(e=>{this.trace("Finished filtering received message"),this.readFilterPending=!1,this.listener.onReceiveMessage(e),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus)},e=>{this.cancelWithStatus(e.code,e.details)})},onReceiveStatus:e=>{this.trace("Received status"),this.readFilterPending?this.pendingChildStatus=e:this.outputStatus(e)}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose()},e=>{this.outputStatus(e)})}reportResolverError(e){var t;(null===(t=this.metadata)||void 0===t?void 0:t.getOptions().waitForReady)?this.channel.queueCallForConfig(this):this.outputStatus(e)}cancelWithStatus(e,t){var r;this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),null===(r=this.child)||void 0===r||r.cancelWithStatus(e,t),this.outputStatus({code:e,details:t,metadata:new s.Metadata})}getPeer(){var e,t;return null!==(t=null===(e=this.child)||void 0===e?void 0:e.getPeer())&&void 0!==t?t:this.channel.getTarget()}start(e,t){this.trace("start called"),this.metadata=e.clone(),this.listener=t,this.getConfig()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length),this.child?this.sendMessageOnChild(e,t):this.pendingMessage={context:e,message:t}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(e){this.credentials=this.credentials.compose(e)}addStatusWatcher(e){this.statusWatchers.push(e)}getCallNumber(){return this.callNumber}}t.ResolvingCall=h},7661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ResolvingLoadBalancer=void 0;let i=r(9884),n=r(4298),s=r(2409),a=r(4063),o=r(2352),l=r(1742),h=r(9572),u=r(6281),c=r(5792),d=r(9572),p=r(5541),f=r(6372),m="resolving_load_balancer";function g(e){c.trace(d.LogVerbosity.DEBUG,m,e)}let y=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function v(e,t,r,i){for(let n of r.name)switch(i){case"EMPTY":if(!n.service&&!n.method)return!0;break;case"SERVICE":if(n.service===e&&!n.method)return!0;break;case"SERVICE_AND_METHOD":if(n.service===e&&n.method===t)return!0}return!1}function b(e,t,r,i){for(let n of r)if(v(e,t,n,i))return n;return null}function w(e){return function(t,r){var i,n;let s=t.split("/").filter(e=>e.length>0),a=null!==(i=s[0])&&void 0!==i?i:"",o=null!==(n=s[1])&&void 0!==n?n:"";if(e&&e.methodConfig)for(let t of y){let r=b(a,o,e.methodConfig,t);if(r)return{methodConfig:r,pickInformation:{},status:h.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:h.Status.OK,dynamicFilterFactories:[]}}}class E{constructor(e,t,r,c,d){this.target=e,this.channelControlHelper=t,this.onSuccessfulResolution=c,this.onFailedResolution=d,this.latestChildState=s.ConnectivityState.IDLE,this.latestChildPicker=new o.QueuePicker(this),this.currentState=s.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,r["grpc.service_config"]?this.defaultServiceConfig=(0,n.validateServiceConfig)(JSON.parse(r["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(s.ConnectivityState.IDLE,new o.QueuePicker(this)),this.childLoadBalancer=new f.ChildLoadBalancerHandler({createSubchannel:t.createSubchannel.bind(t),requestReresolution:()=>{this.backoffTimeout.isRunning()?(g("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString()),this.continueResolving=!0):this.updateResolution()},updateState:(e,t)=>{this.latestChildState=e,this.latestChildPicker=t,this.updateState(e,t)},addChannelzChild:t.addChannelzChild.bind(t),removeChannelzChild:t.removeChannelzChild.bind(t)}),this.innerResolver=(0,a.createResolver)(e,{onSuccessfulResolution:(e,t,r,n,s)=>{var a;this.backoffTimeout.stop(),this.backoffTimeout.reset();let o=null;null===t?null===r?(this.previousServiceConfig=null,o=this.defaultServiceConfig):null===this.previousServiceConfig?this.handleResolutionFailure(r):o=this.previousServiceConfig:(o=t,this.previousServiceConfig=t);let l=null!==(a=null==o?void 0:o.loadBalancingConfig)&&void 0!==a?a:[],c=(0,i.getFirstUsableConfig)(l,!0);if(null===c){this.handleResolutionFailure({code:h.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new u.Metadata});return}this.childLoadBalancer.updateAddressList(e,c,s);let d=null!=o?o:this.defaultServiceConfig;this.onSuccessfulResolution(d,null!=n?n:w(d))},onError:e=>{this.handleResolutionFailure(e)}},r);let p={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new l.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker)},p),this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution(),this.currentState===s.ConnectivityState.IDLE&&this.updateState(s.ConnectivityState.CONNECTING,new o.QueuePicker(this)),this.backoffTimeout.runOnce()}updateState(e,t){g((0,p.uriToString)(this.target)+" "+s.ConnectivityState[this.currentState]+" -> "+s.ConnectivityState[e]),e===s.ConnectivityState.IDLE&&(t=new o.QueuePicker(this)),this.currentState=e,this.channelControlHelper.updateState(e,t)}handleResolutionFailure(e){this.latestChildState===s.ConnectivityState.IDLE&&(this.updateState(s.ConnectivityState.TRANSIENT_FAILURE,new o.UnavailablePicker(e)),this.onFailedResolution(e))}exitIdle(){(this.currentState===s.ConnectivityState.IDLE||this.currentState===s.ConnectivityState.TRANSIENT_FAILURE)&&(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(e,t){throw Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.backoffTimeout.reset(),this.backoffTimeout.stop(),this.latestChildState=s.ConnectivityState.IDLE,this.latestChildPicker=new o.QueuePicker(this),this.currentState=s.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1}getTypeName(){return"resolving_load_balancer"}}t.ResolvingLoadBalancer=E},5627:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RetryingCall=t.MessageBufferTracker=t.RetryThrottler=void 0;let i=r(9572),n=r(6281),s=r(5792),a="retrying_call";class o{constructor(e,t,r){this.maxTokens=e,this.tokenRatio=t,r?this.tokens=r.tokens*(e/r.maxTokens):this.tokens=e}addCallSucceeded(){this.tokens=Math.max(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.min(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}}t.RetryThrottler=o;class l{constructor(e,t){this.totalLimit=e,this.limitPerCall=t,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate(e,t){var r;let i=null!==(r=this.allocatedPerCall.get(t))&&void 0!==r?r:0;return!(this.limitPerCall-i<e)&&!(this.totalLimit-this.totalAllocated<e)&&(this.allocatedPerCall.set(t,i+e),this.totalAllocated+=e,!0)}free(e,t){var r;if(this.totalAllocated<e)throw Error(`Invalid buffer allocation state: call ${t} freed ${e} > total allocated ${this.totalAllocated}`);this.totalAllocated-=e;let i=null!==(r=this.allocatedPerCall.get(t))&&void 0!==r?r:0;if(i<e)throw Error(`Invalid buffer allocation state: call ${t} freed ${e} > allocated for call ${i}`);this.allocatedPerCall.set(t,i-e)}freeAll(e){var t;let r=null!==(t=this.allocatedPerCall.get(e))&&void 0!==t?t:0;if(this.totalAllocated<r)throw Error(`Invalid buffer allocation state: call ${e} allocated ${r} > total allocated ${this.totalAllocated}`);this.totalAllocated-=r,this.allocatedPerCall.delete(e)}}t.MessageBufferTracker=l;let h="grpc-previous-rpc-attempts";class u{constructor(e,t,r,i,n,s,a,o,l){if(this.channel=e,this.callConfig=t,this.methodName=r,this.host=i,this.credentials=n,this.deadline=s,this.callNumber=a,this.bufferTracker=o,this.retryThrottler=l,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0,t.methodConfig.retryPolicy){this.state="RETRY";let e=t.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(e.initialBackoff.substring(0,e.initialBackoff.length-1))}else t.methodConfig.hedgingPolicy?this.state="HEDGING":this.state="TRANSPARENT_ONLY"}getCallNumber(){return this.callNumber}trace(e){s.trace(i.LogVerbosity.DEBUG,a,"["+this.callNumber+"] "+e)}reportStatus(e){this.trace("ended with status: code="+e.code+' details="'+e.details+'"'),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick(()=>{var t;null===(t=this.listener)||void 0===t||t.onReceiveStatus({code:e.code,details:e.details,metadata:e.metadata})})}cancelWithStatus(e,t){for(let{call:r}of(this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.reportStatus({code:e,details:t,metadata:new n.Metadata}),this.underlyingCalls))r.cancelWithStatus(e,t)}getPeer(){return null!==this.committedCallIndex?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}getBufferEntry(e){var t;return null!==(t=this.writeBuffer[e-this.writeBufferOffset])&&void 0!==t?t:{entryType:"FREED",allocated:!1}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if("COMMITTED"!==this.state)return;let e=this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let t=this.writeBufferOffset;t<e;t++){let e=this.getBufferEntry(t);e.allocated&&this.bufferTracker.free(e.message.message.length,this.callNumber)}this.writeBuffer=this.writeBuffer.slice(e-this.writeBufferOffset),this.writeBufferOffset=e}commitCall(e){if("COMMITTED"!==this.state&&"COMPLETED"!==this.underlyingCalls[e].state){this.trace("Committing call ["+this.underlyingCalls[e].call.getCallNumber()+"] at index "+e),this.state="COMMITTED",this.committedCallIndex=e;for(let t=0;t<this.underlyingCalls.length;t++)t!==e&&"COMPLETED"!==this.underlyingCalls[t].state&&(this.underlyingCalls[t].state="COMPLETED",this.underlyingCalls[t].call.cancelWithStatus(i.Status.CANCELLED,"Discarded in favor of other hedged attempt"));this.clearSentMessages()}}commitCallWithMostMessages(){if("COMMITTED"===this.state)return;let e=-1,t=-1;for(let[r,i]of this.underlyingCalls.entries())"ACTIVE"===i.state&&i.nextMessageToSend>e&&(e=i.nextMessageToSend,t=r);-1===t?this.state="TRANSPARENT_ONLY":this.commitCall(t)}isStatusCodeInList(e,t){return e.some(e=>e===t||e.toString().toLowerCase()===i.Status[t].toLowerCase())}getNextRetryBackoffMs(){var e;let t=null===(e=this.callConfig)||void 0===e?void 0:e.methodConfig.retryPolicy;if(!t)return 0;let r=Math.random()*this.nextRetryBackoffSec*1e3,i=Number(t.maxBackoff.substring(0,t.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*t.backoffMultiplier,i),r}maybeRetryCall(e,t){let r;if("RETRY"!==this.state){t(!1);return}let i=this.callConfig.methodConfig.retryPolicy;if(this.attempts>=Math.min(i.maxAttempts,5)){t(!1);return}if(null===e)r=this.getNextRetryBackoffMs();else if(e<0){this.state="TRANSPARENT_ONLY",t(!1);return}else r=e,this.nextRetryBackoffSec=this.initialRetryBackoffSec;setTimeout(()=>{var e,r;if("RETRY"!==this.state){t(!1);return}(null===(r=null===(e=this.retryThrottler)||void 0===e?void 0:e.canRetryCall())||void 0===r||r)&&(t(!0),this.attempts+=1,this.startNewAttempt())},r)}countActiveCalls(){let e=0;for(let t of this.underlyingCalls)(null==t?void 0:t.state)==="ACTIVE"&&(e+=1);return e}handleProcessedStatus(e,t,r){var i,n,s;switch(this.state){case"COMMITTED":case"TRANSPARENT_ONLY":this.commitCall(t),this.reportStatus(e);break;case"HEDGING":if(this.isStatusCodeInList(null!==(i=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)&&void 0!==i?i:[],e.code)){let i;if(null===(n=this.retryThrottler)||void 0===n||n.addCallFailed(),null===r)i=0;else if(r<0){this.state="TRANSPARENT_ONLY",this.commitCall(t),this.reportStatus(e);return}else i=r;setTimeout(()=>{this.maybeStartHedgingAttempt(),0===this.countActiveCalls()&&(this.commitCall(t),this.reportStatus(e))},i)}else this.commitCall(t),this.reportStatus(e);break;case"RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,e.code)?(null===(s=this.retryThrottler)||void 0===s||s.addCallFailed(),this.maybeRetryCall(r,r=>{r||(this.commitCall(t),this.reportStatus(e))})):(this.commitCall(t),this.reportStatus(e))}}getPushback(e){let t=e.get("grpc-retry-pushback-ms");if(0===t.length)return null;try{return parseInt(t[0])}catch(e){return -1}}handleChildStatus(e,t){var r;if("COMPLETED"===this.underlyingCalls[t].state)return;if(this.trace("state="+this.state+" handling status with progress "+e.progress+" from child ["+this.underlyingCalls[t].call.getCallNumber()+"] in state "+this.underlyingCalls[t].state),this.underlyingCalls[t].state="COMPLETED",e.code===i.Status.OK){null===(r=this.retryThrottler)||void 0===r||r.addCallSucceeded(),this.commitCall(t),this.reportStatus(e);return}if("COMMITTED"===this.state){this.reportStatus(e);return}let n=this.getPushback(e.metadata);switch(e.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":this.transparentRetryUsed?this.handleProcessedStatus(e,t,n):(this.transparentRetryUsed=!0,this.startNewAttempt());break;case"DROP":this.commitCall(t),this.reportStatus(e);break;case"PROCESSED":this.handleProcessedStatus(e,t,n)}}maybeStartHedgingAttempt(){if("HEDGING"!==this.state||!this.callConfig.methodConfig.hedgingPolicy)return;let e=this.callConfig.methodConfig.hedgingPolicy;this.attempts>=Math.min(e.maxAttempts,5)||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer())}maybeStartHedgingTimer(){var e,t,r;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),"HEDGING"!==this.state||!this.callConfig.methodConfig.hedgingPolicy)return;let i=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=Math.min(i.maxAttempts,5))return;let n=null!==(e=i.hedgingDelay)&&void 0!==e?e:"0s",s=Number(n.substring(0,n.length-1));this.hedgingTimer=setTimeout(()=>{this.maybeStartHedgingAttempt()},1e3*s),null===(r=(t=this.hedgingTimer).unref)||void 0===r||r.call(t)}startNewAttempt(){let e=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+e.getCallNumber()+"] for attempt "+this.attempts);let t=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:e,nextMessageToSend:0});let r=this.attempts-1,i=this.initialMetadata.clone();r>0&&i.set(h,`${r}`);let n=!1;e.start(i,{onReceiveMetadata:i=>{this.trace("Received metadata from child ["+e.getCallNumber()+"]"),this.commitCall(t),n=!0,r>0&&i.set(h,`${r}`),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMetadata(i)},onReceiveMessage:r=>{this.trace("Received message from child ["+e.getCallNumber()+"]"),this.commitCall(t),"ACTIVE"===this.underlyingCalls[t].state&&this.listener.onReceiveMessage(r)},onReceiveStatus:i=>{this.trace("Received status from child ["+e.getCallNumber()+"]"),!n&&r>0&&i.metadata.set(h,`${r}`),this.handleChildStatus(i,t)}}),this.sendNextChildMessage(t),this.readStarted&&e.startRead()}start(e,t){this.trace("start called"),this.listener=t,this.initialMetadata=e,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted(e){var t,r;let i=this.underlyingCalls[e],n=i.nextMessageToSend;null===(r=(t=this.getBufferEntry(n)).callback)||void 0===r||r.call(t),this.clearSentMessages(),i.nextMessageToSend+=1,this.sendNextChildMessage(e)}sendNextChildMessage(e){let t=this.underlyingCalls[e];if("COMPLETED"!==t.state&&this.getBufferEntry(t.nextMessageToSend)){let r=this.getBufferEntry(t.nextMessageToSend);switch(r.entryType){case"MESSAGE":t.call.sendMessageWithContext({callback:t=>{this.handleChildWriteCompleted(e)}},r.message.message);break;case"HALF_CLOSE":t.nextMessageToSend+=1,t.call.halfClose()}}}sendMessageWithContext(e,t){var r;this.trace("write() called with message of length "+t.length);let i={message:t,flags:e.flags},n=this.getNextBufferIndex(),s={entryType:"MESSAGE",message:i,allocated:this.bufferTracker.allocate(t.length,this.callNumber)};if(this.writeBuffer.push(s),s.allocated)for(let[i,s]of(null===(r=e.callback)||void 0===r||r.call(e),this.underlyingCalls.entries()))"ACTIVE"===s.state&&s.nextMessageToSend===n&&s.call.sendMessageWithContext({callback:e=>{this.handleChildWriteCompleted(i)}},t);else{if(this.commitCallWithMostMessages(),null===this.committedCallIndex)return;let r=this.underlyingCalls[this.committedCallIndex];s.callback=e.callback,"ACTIVE"===r.state&&r.nextMessageToSend===n&&r.call.sendMessageWithContext({callback:e=>{this.handleChildWriteCompleted(this.committedCallIndex)}},t)}}startRead(){for(let e of(this.trace("startRead called"),this.readStarted=!0,this.underlyingCalls))(null==e?void 0:e.state)==="ACTIVE"&&e.call.startRead()}halfClose(){this.trace("halfClose called");let e=this.getNextBufferIndex();for(let t of(this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:!1}),this.underlyingCalls))(null==t?void 0:t.state)==="ACTIVE"&&t.nextMessageToSend===e&&(t.nextMessageToSend+=1,t.call.halfClose())}setCredentials(e){throw Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}}t.RetryingCall=u},2025:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2ServerCallStream=t.ServerDuplexStreamImpl=t.ServerWritableStreamImpl=t.ServerReadableStreamImpl=t.ServerUnaryCallImpl=void 0;let i=r(2361),n=r(5158),s=r(2781),a=r(9796),o=r(9572),l=r(6281),h=r(615),u=r(5792),c=r(6027),d="server_call";function p(e){u.trace(o.LogVerbosity.DEBUG,d,e)}let f="grpc-message",m="grpc-status",g="grpc-timeout",y=/(\d{1,8})\s*([HMSmun])/,v={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},b={"grpc-accept-encoding":"identity,deflate,gzip","grpc-encoding":"identity"},w={[n.constants.HTTP2_HEADER_STATUS]:n.constants.HTTP_STATUS_OK,[n.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},E={waitForTrailers:!0};class S extends i.EventEmitter{constructor(e,t,r){super(),this.call=e,this.metadata=t,this.request=r,this.cancelled=!1,this.call.setupSurfaceCall(this)}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}t.ServerUnaryCallImpl=S;class T extends s.Readable{constructor(e,t,r,i){super({objectMode:!0}),this.call=e,this.metadata=t,this.deserialize=r,this.cancelled=!1,this.call.setupSurfaceCall(this),this.call.setupReadable(this,i)}_read(e){this.call.consumeUnpushedMessages(this)&&this.call.resume()}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}}t.ServerReadableStreamImpl=T;class C extends s.Writable{constructor(e,t,r,i){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.request=i,this.cancelled=!1,this.trailingMetadata=new l.Metadata,this.call.setupSurfaceCall(this),this.on("error",e=>{this.call.sendError(e),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}_write(e,t,r){try{let t=this.call.serializeMessage(e);if(!this.call.write(t)){this.call.once("drain",r);return}}catch(e){this.emit("error",{details:(0,c.getErrorMessage)(e),code:o.Status.INTERNAL})}r()}_final(e){this.call.sendStatus({code:o.Status.OK,details:"OK",metadata:this.trailingMetadata}),e(null)}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerWritableStreamImpl=C;class A extends s.Duplex{constructor(e,t,r,i,n){super({objectMode:!0}),this.call=e,this.metadata=t,this.serialize=r,this.deserialize=i,this.cancelled=!1,this.trailingMetadata=new l.Metadata,this.call.setupSurfaceCall(this),this.call.setupReadable(this,n),this.on("error",e=>{this.call.sendError(e),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(e){this.call.sendMetadata(e)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}end(e){return e&&(this.trailingMetadata=e),super.end()}}t.ServerDuplexStreamImpl=A,A.prototype._read=T.prototype._read,A.prototype._write=C.prototype._write,A.prototype._final=C.prototype._final;class _ extends i.EventEmitter{constructor(e,t,r){super(),this.stream=e,this.handler=t,this.cancelled=!1,this.deadlineTimer=null,this.statusSent=!1,this.deadline=1/0,this.wantTrailers=!1,this.metadataSent=!1,this.canPush=!1,this.isPushPending=!1,this.bufferedMessages=[],this.messagesToPush=[],this.maxSendMessageSize=o.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=o.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.stream.once("error",e=>{}),this.stream.once("close",()=>{var e;p("Request to method "+(null===(e=this.handler)||void 0===e?void 0:e.path)+" stream closed with rstCode "+this.stream.rstCode),!this.statusSent&&(this.cancelled=!0,this.emit("cancelled","cancelled"),this.emit("streamEnd",!1),this.sendStatus({code:o.Status.CANCELLED,details:"Cancelled by client",metadata:null}),this.deadlineTimer&&clearTimeout(this.deadlineTimer))}),this.stream.on("drain",()=>{this.emit("drain")}),"grpc.max_send_message_length"in r&&(this.maxSendMessageSize=r["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in r&&(this.maxReceiveMessageSize=r["grpc.max_receive_message_length"])}checkCancelled(){return(this.stream.destroyed||this.stream.closed)&&(this.cancelled=!0),this.cancelled}getDecompressedMessage(e,t){let r=e.subarray(5);if("identity"===t)return r;if("deflate"!==t&&"gzip"!==t)return Promise.reject({code:o.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${t}"`});{let e;return e="deflate"===t?a.createInflate():a.createGunzip(),new Promise((t,i)=>{let n=0,s=[];e.on("data",t=>{s.push(t),n+=t.byteLength,-1!==this.maxReceiveMessageSize&&n>this.maxReceiveMessageSize&&(e.destroy(),i({code:o.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxReceiveMessageSize}`}))}),e.on("end",()=>{t(Buffer.concat(s))}),e.write(r),e.end()})}}sendMetadata(e){if(this.checkCancelled()||this.metadataSent)return;this.metadataSent=!0;let t=e?e.toHttp2Headers():null,r=Object.assign(Object.assign(Object.assign({},w),b),t);this.stream.respond(r,E)}receiveMetadata(e){let t=l.Metadata.fromHttp2Headers(e);u.isTracerEnabled(d)&&p("Request to "+this.handler.path+" received headers "+JSON.stringify(t.toJSON()));let r=t.get(g);if(r.length>0){let e=r[0].toString().match(y);if(null===e){let e=Error("Invalid deadline");return e.code=o.Status.OUT_OF_RANGE,this.sendError(e),t}let i=+e[1]*v[e[2]]|0,n=new Date;this.deadline=n.setMilliseconds(n.getMilliseconds()+i),this.deadlineTimer=setTimeout(x,i,this),t.remove(g)}return t.remove(n.constants.HTTP2_HEADER_ACCEPT_ENCODING),t.remove(n.constants.HTTP2_HEADER_TE),t.remove(n.constants.HTTP2_HEADER_CONTENT_TYPE),t.remove("grpc-accept-encoding"),t}receiveUnaryMessage(e){return new Promise((t,r)=>{let{stream:i}=this,n=0,s=this,a=[],l=this.maxReceiveMessageSize;function h(e){if(n+=e.byteLength,-1!==l&&n>l){i.removeListener("data",h),i.removeListener("end",u),i.removeListener("error",u),r({code:o.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${n} vs. ${l})`});return}a.push(e)}function u(l){if(i.removeListener("data",h),i.removeListener("end",u),i.removeListener("error",u),void 0!==l){r({code:o.Status.INTERNAL,details:l.message});return}if(0===n){r({code:o.Status.INTERNAL,details:"received empty unary message"});return}s.emit("receiveMessage");let c=Buffer.concat(a,n),d=1===c.readUInt8(0)?e:"identity",p=s.getDecompressedMessage(c,d);if(Buffer.isBuffer(p)){t(s.deserializeMessageWithInternalError(p));return}p.then(e=>t(s.deserializeMessageWithInternalError(e)),t=>r(t.code?t:{code:o.Status.INTERNAL,details:`Received "grpc-encoding" header "${e}" but ${e} decompression failed`}))}this.stream.on("data",h),this.stream.on("end",u),this.stream.on("error",u)})}async deserializeMessageWithInternalError(e){try{return this.deserializeMessage(e)}catch(e){throw{details:(0,c.getErrorMessage)(e),code:o.Status.INTERNAL}}}serializeMessage(e){let t=this.handler.serialize(e),r=t.byteLength,i=Buffer.allocUnsafe(r+5);return i.writeUInt8(0,0),i.writeUInt32BE(r,1),t.copy(i,5),i}deserializeMessage(e){return this.handler.deserialize(e)}async sendUnaryMessage(e,t,r,i){if(!this.checkCancelled()){if(void 0===r&&(r=null),e){!Object.prototype.hasOwnProperty.call(e,"metadata")&&r&&(e.metadata=r),this.sendError(e);return}try{let e=this.serializeMessage(t);this.write(e),this.sendStatus({code:o.Status.OK,details:"OK",metadata:r})}catch(e){this.sendError({details:(0,c.getErrorMessage)(e),code:o.Status.INTERNAL})}}}sendStatus(e){var t,r;if(this.emit("callEnd",e.code),this.emit("streamEnd",e.code===o.Status.OK),!this.checkCancelled()){if(p("Request to method "+(null===(t=this.handler)||void 0===t?void 0:t.path)+" ended with status code: "+o.Status[e.code]+" details: "+e.details),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.headersSent)this.wantTrailers||(this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{var t;let r=Object.assign({[m]:e.code,[f]:encodeURI(e.details)},null===(t=e.metadata)||void 0===t?void 0:t.toHttp2Headers());this.stream.sendTrailers(r),this.statusSent=!0}),this.stream.end());else{let t=Object.assign(Object.assign({[m]:e.code,[f]:encodeURI(e.details)},w),null===(r=e.metadata)||void 0===r?void 0:r.toHttp2Headers());this.stream.respond(t,{endStream:!0}),this.statusSent=!0}}}sendError(e){let t={code:o.Status.UNKNOWN,details:"message"in e?e.message:"Unknown Error",metadata:"metadata"in e&&void 0!==e.metadata?e.metadata:null};"code"in e&&"number"==typeof e.code&&Number.isInteger(e.code)&&(t.code=e.code,"details"in e&&"string"==typeof e.details&&(t.details=e.details)),this.sendStatus(t)}write(e){if(!this.checkCancelled()){if(-1!==this.maxSendMessageSize&&e.length>this.maxSendMessageSize){this.sendError({code:o.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${e.length} vs. ${this.maxSendMessageSize})`});return}return this.sendMetadata(),this.emit("sendMessage"),this.stream.write(e)}}resume(){this.stream.resume()}setupSurfaceCall(e){this.once("cancelled",t=>{e.cancelled=!0,e.emit("cancelled",t)}),this.once("callEnd",t=>e.emit("callEnd",t))}setupReadable(e,t){let r=new h.StreamDecoder(this.maxReceiveMessageSize),i=!1,n=!1,s=!1,a=async()=>{s||!i||n||(s=!0,await this.pushOrBufferMessage(e,null))};this.stream.on("data",async i=>{let s;try{s=r.write(i)}catch(e){this.sendError({code:o.Status.RESOURCE_EXHAUSTED,details:e.message});return}for(let r of(n=!0,this.stream.pause(),s)){let i;this.emit("receiveMessage");let n=1===r.readUInt8(0)?t:"identity";try{i=await this.getDecompressedMessage(r,n)}catch(e){this.sendError(e);return}if(!i)return;await this.pushOrBufferMessage(e,i)}n=!1,this.stream.resume(),await a()}),this.stream.once("end",async()=>{i=!0,await a()})}consumeUnpushedMessages(e){for(this.canPush=!0;this.messagesToPush.length>0;){let t=this.messagesToPush.shift(),r=e.push(t);if(null===t||!1===r){this.canPush=!1;break}}return this.canPush}async pushOrBufferMessage(e,t){this.isPushPending?this.bufferedMessages.push(t):await this.pushMessage(e,t)}async pushMessage(e,t){if(null===t){p("Received end of stream"),this.canPush?e.push(null):this.messagesToPush.push(null);return}p("Received message of length "+t.length),this.isPushPending=!0;try{let r=await this.deserializeMessage(t);this.canPush?e.push(r)||(this.canPush=!1,this.stream.pause()):this.messagesToPush.push(r)}catch(r){this.bufferedMessages.length=0;let t=(0,c.getErrorCode)(r);(null===t||t<o.Status.OK||t>o.Status.UNAUTHENTICATED)&&(t=o.Status.INTERNAL),e.emit("error",{details:(0,c.getErrorMessage)(r),code:t})}this.isPushPending=!1,this.bufferedMessages.length>0&&await this.pushMessage(e,this.bufferedMessages.shift())}getPeer(){var e;let t=null===(e=this.stream.session)||void 0===e?void 0:e.socket;return null!=t&&t.remoteAddress?t.remotePort?`${t.remoteAddress}:${t.remotePort}`:t.remoteAddress:"unknown"}getDeadline(){return this.deadline}getPath(){return this.handler.path}}function x(e){let t=Error("Deadline exceeded");t.code=o.Status.DEADLINE_EXCEEDED,e.sendError(t),e.cancelled=!0,e.emit("cancelled","deadline")}t.Http2ServerCallStream=_},3783:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerCredentials=void 0;let i=r(606);class n{static createInsecure(){return new s}static createSsl(e,t,r=!1){if(null!==e&&!Buffer.isBuffer(e))throw TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(t))throw TypeError("keyCertPairs must be an array");if("boolean"!=typeof r)throw TypeError("checkClientCertificate must be a boolean");let n=[],s=[];for(let e=0;e<t.length;e++){let r=t[e];if(null===r||"object"!=typeof r)throw TypeError(`keyCertPair[${e}] must be an object`);if(!Buffer.isBuffer(r.private_key))throw TypeError(`keyCertPair[${e}].private_key must be a Buffer`);if(!Buffer.isBuffer(r.cert_chain))throw TypeError(`keyCertPair[${e}].cert_chain must be a Buffer`);n.push(r.cert_chain),s.push(r.private_key)}return new a({ca:e||(0,i.getDefaultRootsData)()||void 0,cert:n,key:s,requestCert:r,ciphers:i.CIPHER_SUITES})}}t.ServerCredentials=n;class s extends n{_isSecure(){return!1}_getSettings(){return null}}class a extends n{constructor(e){super(),this.options=e}_isSecure(){return!0}_getSettings(){return this.options}}},6418:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;let i=r(5158),n=r(9572),s=r(2025),a=r(3783),o=r(4063),l=r(5792),h=r(4955),u=r(5541),c=r(5962),d=2147483647,p=2147483647,f=2e4,{HTTP2_HEADER_PATH:m}=i.constants,g="server";function y(){}function v(e){return{code:n.Status.UNIMPLEMENTED,details:`The server does not implement the method ${e}`}}function b(e,t){let r=v(t);switch(e){case"unary":return(e,t)=>{t(r,null)};case"clientStream":return(e,t)=>{t(r,null)};case"serverStream":return e=>{e.emit("error",r)};case"bidi":return e=>{e.emit("error",r)};default:throw Error(`Invalid handlerType ${e}`)}}class w{constructor(e){var t,r,i,n;this.http2ServerList=[],this.handlers=new Map,this.sessions=new Map,this.started=!1,this.shutdown=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.channelzTrace=new c.ChannelzTrace,this.callTracker=new c.ChannelzCallTracker,this.listenerChildrenTracker=new c.ChannelzChildrenTracker,this.sessionChildrenTracker=new c.ChannelzChildrenTracker,this.options=null!=e?e:{},0===this.options["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=(0,c.registerChannelzServer)(()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=null!==(t=this.options["grpc.max_connection_age_ms"])&&void 0!==t?t:d,this.maxConnectionAgeGraceMs=null!==(r=this.options["grpc.max_connection_age_grace_ms"])&&void 0!==r?r:d,this.keepaliveTimeMs=null!==(i=this.options["grpc.keepalive_time_ms"])&&void 0!==i?i:p,this.keepaliveTimeoutMs=null!==(n=this.options["grpc.keepalive_timeout_ms"])&&void 0!==n?n:f,this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfoGetter(e){return()=>{var t,r,i;let n;let s=this.sessions.get(e),a=e.socket,o=a.remoteAddress?(0,h.stringToSubchannelAddress)(a.remoteAddress,a.remotePort):null,l=a.localAddress?(0,h.stringToSubchannelAddress)(a.localAddress,a.localPort):null;if(e.encrypted){let e=a,r=e.getCipher(),i=e.getCertificate(),s=e.getPeerCertificate();n={cipherSuiteStandardName:null!==(t=r.standardName)&&void 0!==t?t:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:i&&"raw"in i?i.raw:null,remoteCertificate:s&&"raw"in s?s.raw:null}}else n=null;return{remoteAddress:o,localAddress:l,security:n,remoteName:null,streamsStarted:s.streamTracker.callsStarted,streamsSucceeded:s.streamTracker.callsSucceeded,streamsFailed:s.streamTracker.callsFailed,messagesSent:s.messagesSent,messagesReceived:s.messagesReceived,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:s.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:s.lastMessageSentTimestamp,lastMessageReceivedTimestamp:s.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(r=e.state.localWindowSize)&&void 0!==r?r:null,remoteFlowControlWindow:null!==(i=e.state.remoteWindowSize)&&void 0!==i?i:null}}}trace(e){l.trace(n.LogVerbosity.DEBUG,g,"("+this.channelzRef.id+") "+e)}addProtoService(){throw Error("Not implemented. Use addService() instead")}addService(e,t){if(null===e||"object"!=typeof e||null===t||"object"!=typeof t)throw Error("addService() requires two objects as arguments");let r=Object.keys(e);if(0===r.length)throw Error("Cannot add an empty service to a server");r.forEach(r=>{let i,n;let s=e[r];i=s.requestStream?s.responseStream?"bidi":"clientStream":s.responseStream?"serverStream":"unary";let a=t[r];if(void 0===a&&"string"==typeof s.originalName&&(a=t[s.originalName]),n=void 0!==a?a.bind(t):b(i,r),!1===this.register(s.path,n,s.responseSerialize,s.requestDeserialize,i))throw Error(`Method handler for ${s.path} already provided.`)})}removeService(e){if(null===e||"object"!=typeof e)throw Error("removeService() requires object as argument");Object.keys(e).forEach(t=>{let r=e[t];this.unregister(r.path)})}bind(e,t){throw Error("Not implemented. Use bindAsync() instead")}bindAsync(e,t,r){if(!0===this.started)throw Error("server is already started");if(this.shutdown)throw Error("bindAsync called after shutdown");if("string"!=typeof e)throw TypeError("port must be a string");if(null===t||!(t instanceof a.ServerCredentials))throw TypeError("creds must be a ServerCredentials object");if("function"!=typeof r)throw TypeError("callback must be a function");let s=(0,u.parseUri)(e);if(null===s)throw Error(`Could not parse port "${e}"`);let d=(0,o.mapUriDefaultScheme)(s);if(null===d)throw Error(`Could not get a default scheme for port "${e}"`);let p={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};"grpc-node.max_session_memory"in this.options?p.maxSessionMemory=this.options["grpc-node.max_session_memory"]:p.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(p.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]});let f=(e,t)=>{process.nextTick(()=>r(e,t))},m=()=>{let e;if(t._isSecure()){let r=Object.assign(p,t._getSettings());r.enableTrace=1===this.options["grpc-node.tls_enable_trace"],(e=i.createSecureServer(r)).on("secureConnection",e=>{e.on("error",e=>{this.trace("An incoming TLS connection closed with error: "+e.message)})})}else e=i.createServer(p);return e.setTimeout(0,y),this._setupHandlers(e),e},g=(e,t,r)=>0===e.length?Promise.resolve({port:t,count:r}):Promise.all(e.map(e=>{let r;this.trace("Attempting to bind "+(0,h.subchannelAddressToString)(e)),r=(0,h.isTcpSubchannelAddress)(e)?{host:e.host,port:t}:e;let i=m();return new Promise((n,s)=>{let a=t=>{this.trace("Failed to bind "+(0,h.subchannelAddressToString)(e)+" with error "+t.message),n(t)};i.once("error",a),i.listen(r,()=>{let e;if(this.shutdown){i.close(),n(Error("bindAsync failed because server is shutdown"));return}let r=i.address();e="string"==typeof r?{path:r}:{host:r.address,port:r.port};let s=(0,c.registerChannelzSocket)((0,h.subchannelAddressToString)(e),()=>({localAddress:e,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(s),this.http2ServerList.push({server:i,channelzRef:s}),this.trace("Successfully bound "+(0,h.subchannelAddressToString)(e)),n("port"in e?e.port:t),i.removeListener("error",a)})})})).then(e=>{let i=0;for(let r of e)if("number"==typeof r&&(i+=1,r!==t))throw Error("Invalid state: multiple port numbers added from single address");return{port:t,count:i+r}}),v=e=>{if(0===e.length)return Promise.resolve({port:0,count:0});let t=e[0],r=m();return new Promise((i,n)=>{let s=r=>{this.trace("Failed to bind "+(0,h.subchannelAddressToString)(t)+" with error "+r.message),i(v(e.slice(1)))};r.once("error",s),r.listen(t,()=>{if(this.shutdown){r.close(),i({port:0,count:0});return}let t=r.address(),n={host:t.address,port:t.port},a=(0,c.registerChannelzSocket)((0,h.subchannelAddressToString)(n),()=>({localAddress:n,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(a),this.http2ServerList.push({server:r,channelzRef:a}),this.trace("Successfully bound "+(0,h.subchannelAddressToString)(n)),i(g(e.slice(1),t.port,1)),r.removeListener("error",s)})})},b={onSuccessfulResolution:(t,r,i)=>{let s;if(b.onSuccessfulResolution=()=>{},this.shutdown&&f(Error("bindAsync failed because server is shutdown"),0),0===t.length){f(Error(`No addresses resolved for port ${e}`),0);return}(s=(0,h.isTcpSubchannelAddress)(t[0])?0===t[0].port?v(t):g(t,t[0].port,0):g(t,1,0)).then(e=>{if(0===e.count){let e=`No address added out of total ${t.length} resolved`;l.log(n.LogVerbosity.ERROR,e),f(Error(e),0)}else e.count<t.length&&l.log(n.LogVerbosity.INFO,`WARNING Only ${e.count} addresses added out of total ${t.length} resolved`),f(null,e.port)},e=>{let r=`No address added out of total ${t.length} resolved`;l.log(n.LogVerbosity.ERROR,r),f(Error(r),0)})},onError:e=>{f(Error(e.details),0)}};(0,o.createResolver)(d,b,this.options).updateResolution()}forceShutdown(){for(let{server:e,channelzRef:t}of this.http2ServerList)e.listening&&e.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(t),(0,c.unregisterChannelzRef)(t))});this.started=!1,this.shutdown=!0,this.sessions.forEach((e,t)=>{t.destroy(i.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),this.channelzEnabled&&(0,c.unregisterChannelzRef)(this.channelzRef)}register(e,t,r,i,n){return!this.handlers.has(e)&&(this.handlers.set(e,{func:t,serialize:r,deserialize:i,type:n,path:e}),!0)}unregister(e){return this.handlers.delete(e)}start(){if(0===this.http2ServerList.length||this.http2ServerList.every(({server:e})=>!0!==e.listening))throw Error("server must be bound in order to start");if(!0===this.started)throw Error("server is already started");this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Starting"),this.started=!0}tryShutdown(e){let t=t=>{this.channelzEnabled&&(0,c.unregisterChannelzRef)(this.channelzRef),e(t)},r=0;function i(){0==--r&&t()}for(let{server:e,channelzRef:t}of(this.started=!1,this.shutdown=!0,this.http2ServerList))e.listening&&(r++,e.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(t),(0,c.unregisterChannelzRef)(t)),i()}));this.sessions.forEach((e,t)=>{t.closed||(r+=1,t.close(i))}),0===r&&t()}addHttp2Port(){throw Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(e,t){let r=t[i.constants.HTTP2_HEADER_CONTENT_TYPE];return!!("string"==typeof r&&r.startsWith("application/grpc"))||(e.respond({[i.constants.HTTP2_HEADER_STATUS]:i.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1)}_retrieveHandler(e){this.trace("Received call to method "+e+" at address "+this.serverAddressString);let t=this.handlers.get(e);return void 0===t?(this.trace("No handler registered for method "+e+". Sending UNIMPLEMENTED status."),null):t}_respondWithError(e,t,r=null){let i=new s.Http2ServerCallStream(t,null,this.options);void 0===e.code&&(e.code=n.Status.INTERNAL),this.channelzEnabled&&(this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed()),i.sendError(e)}_channelzHandler(e,t){let r=this.sessions.get(e.session);if(this.callTracker.addCallStarted(),null==r||r.streamTracker.addCallStarted(),!this._verifyContentType(e,t)){this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed();return}let i=t[m],a=this._retrieveHandler(i);if(!a){this._respondWithError(v(i),e,r);return}let o=new s.Http2ServerCallStream(e,a,this.options);o.once("callEnd",e=>{e===n.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}),r&&(o.once("streamEnd",e=>{e?r.streamTracker.addCallSucceeded():r.streamTracker.addCallFailed()}),o.on("sendMessage",()=>{r.messagesSent+=1,r.lastMessageSentTimestamp=new Date}),o.on("receiveMessage",()=>{r.messagesReceived+=1,r.lastMessageReceivedTimestamp=new Date})),this._runHandlerForCall(o,a,t)||(this.callTracker.addCallFailed(),null==r||r.streamTracker.addCallFailed(),o.sendError({code:n.Status.INTERNAL,details:`Unknown handler type: ${a.type}`}))}_streamHandler(e,t){if(!0!==this._verifyContentType(e,t))return;let r=t[m],i=this._retrieveHandler(r);if(!i){this._respondWithError(v(r),e,null);return}let a=new s.Http2ServerCallStream(e,i,this.options);this._runHandlerForCall(a,i,t)||a.sendError({code:n.Status.INTERNAL,details:`Unknown handler type: ${i.type}`})}_runHandlerForCall(e,t,r){var i;let n=e.receiveMetadata(r),s=null!==(i=n.get("grpc-encoding")[0])&&void 0!==i?i:"identity";n.remove("grpc-encoding");let{type:a}=t;if("unary"===a)E(e,t,n,s);else if("clientStream"===a)S(e,t,n,s);else if("serverStream"===a)T(e,t,n,s);else{if("bidi"!==a)return!1;C(e,t,n,s)}return!0}_setupHandlers(e){if(null===e)return;let t=e.address(),r="null";t&&(r="string"==typeof t?t:t.address+":"+t.port),this.serverAddressString=r;let n=this.channelzEnabled?this._channelzHandler:this._streamHandler;e.on("stream",n.bind(this)),e.on("session",e=>{var t,r,n,s,a;if(!this.started){e.destroy();return}let o=(0,c.registerChannelzSocket)(null!==(t=e.socket.remoteAddress)&&void 0!==t?t:"unknown",this.getChannelzSessionInfoGetter(e),this.channelzEnabled),l={ref:o,streamTracker:new c.ChannelzCallTracker,messagesSent:0,messagesReceived:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};this.sessions.set(e,l);let h=e.socket.remoteAddress;this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection established by client "+h),this.sessionChildrenTracker.refChild(o));let u=null,p=null,f=!1;if(this.maxConnectionAgeMs!==d){let t=this.maxConnectionAgeMs/10,s=Math.random()*t*2-t;u=null===(n=(r=setTimeout(()=>{var t,r;f=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+h);try{e.goaway(i.constants.NGHTTP2_NO_ERROR,2147483647,Buffer.from("max_age"))}catch(t){e.destroy();return}e.close(),this.maxConnectionAgeGraceMs!==d&&(p=null===(r=(t=setTimeout(()=>{e.destroy()},this.maxConnectionAgeGraceMs)).unref)||void 0===r?void 0:r.call(t))},this.maxConnectionAgeMs+s)).unref)||void 0===n?void 0:n.call(r)}let m=null===(a=(s=setInterval(()=>{var t,r;let i=null===(r=(t=setTimeout(()=>{f=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+h),e.close()},this.keepaliveTimeoutMs)).unref)||void 0===r?void 0:r.call(t);try{e.ping((e,t,r)=>{clearTimeout(i)})}catch(t){e.destroy()}},this.keepaliveTimeMs)).unref)||void 0===a?void 0:a.call(s);e.on("close",()=>{this.channelzEnabled&&(f||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+h),this.sessionChildrenTracker.unrefChild(o),(0,c.unregisterChannelzRef)(o)),u&&clearTimeout(u),p&&clearTimeout(p),m&&clearTimeout(m),this.sessions.delete(e)})})}}async function E(e,t,r,i){try{let n=await e.receiveUnaryMessage(i);if(void 0===n||e.cancelled)return;let a=new s.ServerUnaryCallImpl(e,r,n);t.func(a,(t,r,i,n)=>{e.sendUnaryMessage(t,r,i,n)})}catch(t){e.sendError(t)}}function S(e,t,r,i){let n=new s.ServerReadableStreamImpl(e,r,t.deserialize,i);function a(t,r,i,s){n.destroy(),e.sendUnaryMessage(t,r,i,s)}e.cancelled||(n.on("error",a),t.func(n,a))}async function T(e,t,r,i){try{let n=await e.receiveUnaryMessage(i);if(void 0===n||e.cancelled)return;let a=new s.ServerWritableStreamImpl(e,r,t.serialize,n);t.func(a)}catch(t){e.sendError(t)}}function C(e,t,r,i){let n=new s.ServerDuplexStreamImpl(e,r,t.serialize,t.deserialize,i);e.cancelled||t.func(n)}t.Server=w},4298:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractAndSelectServiceConfig=t.validateServiceConfig=t.validateRetryThrottling=void 0;let i=r(2037),n=r(9572),s=r(9884),a=/^\d+(\.\d{1,9})?s$/,o="node";function l(e){if("service"in e&&""!==e.service){if("string"!=typeof e.service)throw Error(`Invalid method config name: invalid service: expected type string, got ${typeof e.service}`);if(!("method"in e)||""===e.method)return{service:e.service};if("string"!=typeof e.method)throw Error(`Invalid method config name: invalid method: expected type string, got ${typeof e.service}`);return{service:e.service,method:e.method}}if("method"in e&&void 0!==e.method)throw Error("Invalid method config name: method set with empty or unset service");return{}}function h(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in e)||"string"!=typeof e.initialBackoff||!a.test(e.initialBackoff))throw Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer followed by s");if(!("maxBackoff"in e)||"string"!=typeof e.maxBackoff||!a.test(e.maxBackoff))throw Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer followed by s");if(!("backoffMultiplier"in e)||"number"!=typeof e.backoffMultiplier||e.backoffMultiplier<=0)throw Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in e&&Array.isArray(e.retryableStatusCodes)))throw Error("Invalid method config retry policy: retryableStatusCodes is required");if(0===e.retryableStatusCodes.length)throw Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(let t of e.retryableStatusCodes)if("number"==typeof t){if(!Object.values(n.Status).includes(t))throw Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else if("string"==typeof t){if(!Object.values(n.Status).includes(t.toUpperCase()))throw Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}else throw Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");return{maxAttempts:e.maxAttempts,initialBackoff:e.initialBackoff,maxBackoff:e.maxBackoff,backoffMultiplier:e.backoffMultiplier,retryableStatusCodes:e.retryableStatusCodes}}function u(e){if(!("maxAttempts"in e)||!Number.isInteger(e.maxAttempts)||e.maxAttempts<2)throw Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in e&&("string"!=typeof e.hedgingDelay||!a.test(e.hedgingDelay)))throw Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in e&&Array.isArray(e.nonFatalStatusCodes))for(let t of e.nonFatalStatusCodes)if("number"==typeof t){if(!Object.values(n.Status).includes(t))throw Error("Invlid method config hedging policy: nonFatalStatusCodes value not in status code range")}else if("string"==typeof t){if(!Object.values(n.Status).includes(t.toUpperCase()))throw Error("Invlid method config hedging policy: nonFatalStatusCodes value not a status code name")}else throw Error("Invlid method config hedging policy: nonFatalStatusCodes value must be a string or number");let t={maxAttempts:e.maxAttempts};return e.hedgingDelay&&(t.hedgingDelay=e.hedgingDelay),e.nonFatalStatusCodes&&(t.nonFatalStatusCodes=e.nonFatalStatusCodes),t}function c(e){var t;let r={name:[]};if(!("name"in e)||!Array.isArray(e.name))throw Error("Invalid method config: invalid name array");for(let t of e.name)r.name.push(l(t));if("waitForReady"in e){if("boolean"!=typeof e.waitForReady)throw Error("Invalid method config: invalid waitForReady");r.waitForReady=e.waitForReady}if("timeout"in e){if("object"==typeof e.timeout){if(!("seconds"in e.timeout)||"number"!=typeof e.timeout.seconds)throw Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in e.timeout)||"number"!=typeof e.timeout.nanos)throw Error("Invalid method config: invalid timeout.nanos");r.timeout=e.timeout}else if("string"==typeof e.timeout&&a.test(e.timeout)){let i=e.timeout.substring(0,e.timeout.length-1).split(".");r.timeout={seconds:0|i[0],nanos:(null!==(t=i[1])&&void 0!==t?t:0)|0}}else throw Error("Invalid method config: invalid timeout")}if("maxRequestBytes"in e){if("number"!=typeof e.maxRequestBytes)throw Error("Invalid method config: invalid maxRequestBytes");r.maxRequestBytes=e.maxRequestBytes}if("maxResponseBytes"in e){if("number"!=typeof e.maxResponseBytes)throw Error("Invalid method config: invalid maxRequestBytes");r.maxResponseBytes=e.maxResponseBytes}if("retryPolicy"in e){if("hedgingPolicy"in e)throw Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");r.retryPolicy=h(e.retryPolicy)}else"hedgingPolicy"in e&&(r.hedgingPolicy=u(e.hedgingPolicy));return r}function d(e){if(!("maxTokens"in e)||"number"!=typeof e.maxTokens||e.maxTokens<=0||e.maxTokens>1e3)throw Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in e)||"number"!=typeof e.tokenRatio||e.tokenRatio<=0)throw Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+e.maxTokens.toFixed(3),tokenRatio:+e.tokenRatio.toFixed(3)}}function p(e){let t={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in e){if("string"==typeof e.loadBalancingPolicy)t.loadBalancingPolicy=e.loadBalancingPolicy;else throw Error("Invalid service config: invalid loadBalancingPolicy")}if("loadBalancingConfig"in e){if(Array.isArray(e.loadBalancingConfig))for(let r of e.loadBalancingConfig)t.loadBalancingConfig.push((0,s.validateLoadBalancingConfig)(r));else throw Error("Invalid service config: invalid loadBalancingConfig")}if("methodConfig"in e&&Array.isArray(e.methodConfig))for(let r of e.methodConfig)t.methodConfig.push(c(r));"retryThrottling"in e&&(t.retryThrottling=d(e.retryThrottling));let r=[];for(let e of t.methodConfig)for(let t of e.name){for(let e of r)if(t.service===e.service&&t.method===e.method)throw Error(`Invalid service config: duplicate name ${t.service}/${t.method}`);r.push(t)}return t}function f(e){if(!("serviceConfig"in e))throw Error("Invalid service config choice: missing service config");let t={serviceConfig:p(e.serviceConfig)};if("clientLanguage"in e){if(Array.isArray(e.clientLanguage))for(let r of(t.clientLanguage=[],e.clientLanguage))if("string"==typeof r)t.clientLanguage.push(r);else throw Error("Invalid service config choice: invalid clientLanguage");else throw Error("Invalid service config choice: invalid clientLanguage")}if("clientHostname"in e){if(Array.isArray(e.clientHostname))for(let r of(t.clientHostname=[],e.clientHostname))if("string"==typeof r)t.clientHostname.push(r);else throw Error("Invalid service config choice: invalid clientHostname");else throw Error("Invalid service config choice: invalid clientHostname")}if("percentage"in e){if("number"==typeof e.percentage&&0<=e.percentage&&e.percentage<=100)t.percentage=e.percentage;else throw Error("Invalid service config choice: invalid percentage")}let r=["clientLanguage","percentage","clientHostname","serviceConfig"];for(let t in e)if(!r.includes(t))throw Error(`Invalid service config choice: unexpected field ${t}`);return t}function m(e,t){if(!Array.isArray(e))throw Error("Invalid service config list");for(let r of e){let e=f(r);if("number"!=typeof e.percentage||!(t>e.percentage)){if(Array.isArray(e.clientHostname)){let t=!1;for(let r of e.clientHostname)r===i.hostname()&&(t=!0);if(!t)continue}if(Array.isArray(e.clientLanguage)){let t=!1;for(let r of e.clientLanguage)r===o&&(t=!0);if(!t)continue}return e.serviceConfig}}throw Error("No matching service config found")}function g(e,t){for(let r of e)if(r.length>0&&r[0].startsWith("grpc_config="))return m(JSON.parse(r.join("").substring(12)),t);return null}t.validateRetryThrottling=d,t.validateServiceConfig=p,t.extractAndSelectServiceConfig=g},4339:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StatusBuilder=void 0;class r{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(e){return this.code=e,this}withDetails(e){return this.details=e,this}withMetadata(e){return this.metadata=e,this}build(){let e={};return null!==this.code&&(e.code=this.code),null!==this.details&&(e.details=this.details),null!==this.metadata&&(e.metadata=this.metadata),e}}t.StatusBuilder=r},615:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamDecoder=void 0,function(e){e[e.NO_DATA=0]="NO_DATA",e[e.READING_SIZE=1]="READING_SIZE",e[e.READING_MESSAGE=2]="READING_MESSAGE"}(r||(r={}));class i{constructor(e){this.maxReadMessageLength=e,this.readState=r.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(e){let t,i=0,n=[];for(;i<e.length;)switch(this.readState){case r.NO_DATA:this.readCompressFlag=e.slice(i,i+1),i+=1,this.readState=r.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case r.READING_SIZE:if(t=Math.min(e.length-i,this.readSizeRemaining),e.copy(this.readPartialSize,4-this.readSizeRemaining,i,i+t),this.readSizeRemaining-=t,i+=t,0===this.readSizeRemaining){if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),-1!==this.maxReadMessageLength&&this.readMessageSize>this.maxReadMessageLength)throw Error(`Received message larger than max (${this.readMessageSize} vs ${this.maxReadMessageLength})`);if(this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=r.READING_MESSAGE;else{let e=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=r.NO_DATA,n.push(e)}}break;case r.READING_MESSAGE:if(t=Math.min(e.length-i,this.readMessageRemaining),this.readPartialMessage.push(e.slice(i,i+t)),this.readMessageRemaining-=t,i+=t,0===this.readMessageRemaining){let e=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),t=Buffer.concat(e,this.readMessageSize+5);this.readState=r.NO_DATA,n.push(t)}break;default:throw Error("Unexpected read state")}return n}}t.StreamDecoder=i},4955:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringToSubchannelAddress=t.subchannelAddressToString=t.subchannelAddressEqual=t.isTcpSubchannelAddress=void 0;let i=r(1808);function n(e){return"port"in e}function s(e,t){return!e&&!t||!!e&&!!t&&(n(e)?n(t)&&e.host===t.host&&e.port===t.port:!n(t)&&e.path===t.path)}function a(e){return n(e)?e.host+":"+e.port:e.path}t.isTcpSubchannelAddress=n,t.subchannelAddressEqual=s,t.subchannelAddressToString=a;let o=443;function l(e,t){return(0,i.isIP)(e)?{host:e,port:null!=t?t:o}:{path:e}}t.stringToSubchannelAddress=l},4354:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelCall=void 0;let i=r(5158),n=r(2037),s=r(9572),a=r(6281),o=r(615),l=r(5792),h=r(9572),u="subchannel_call";function c(e){for(let[t,r]of Object.entries(n.constants.errno))if(r===e)return t;return"Unknown system error "+e}class d{constructor(e,t,r,n,l){var h;this.http2Stream=e,this.callEventTracker=t,this.listener=r,this.transport=n,this.callId=l,this.isReadFilterPending=!1,this.isPushPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.mappedStatusCode=s.Status.UNKNOWN,this.finalStatus=null,this.internalError=null;let u=null!==(h=n.getOptions()["grpc.max_receive_message_length"])&&void 0!==h?h:s.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;this.decoder=new o.StreamDecoder(u),e.on("response",(e,t)=>{let r="";for(let t of Object.keys(e))r+="		"+t+": "+e[t]+"\n";switch(this.trace("Received server headers:\n"+r),e[":status"]){case 400:this.mappedStatusCode=s.Status.INTERNAL;break;case 401:this.mappedStatusCode=s.Status.UNAUTHENTICATED;break;case 403:this.mappedStatusCode=s.Status.PERMISSION_DENIED;break;case 404:this.mappedStatusCode=s.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:this.mappedStatusCode=s.Status.UNAVAILABLE;break;default:this.mappedStatusCode=s.Status.UNKNOWN}if(t&i.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(e);else{let t;try{t=a.Metadata.fromHttp2Headers(e)}catch(e){this.endCall({code:s.Status.UNKNOWN,details:e.message,metadata:new a.Metadata});return}this.listener.onReceiveMetadata(t)}}),e.on("trailers",e=>{this.handleTrailers(e)}),e.on("data",e=>{let t;if(!this.statusOutput){this.trace("receive HTTP/2 data frame of length "+e.length);try{t=this.decoder.write(e)}catch(e){this.cancelWithStatus(s.Status.RESOURCE_EXHAUSTED,e.message);return}for(let e of t)this.trace("parsed message of length "+e.length),this.callEventTracker.addMessageReceived(),this.tryPush(e)}}),e.on("end",()=>{this.readsClosed=!0,this.maybeOutputStatus()}),e.on("close",()=>{process.nextTick(()=>{var t;let r;if(this.trace("HTTP/2 stream closed with code "+e.rstCode),(null===(t=this.finalStatus)||void 0===t?void 0:t.code)===s.Status.OK)return;let n="";switch(e.rstCode){case i.constants.NGHTTP2_NO_ERROR:if(null!==this.finalStatus)return;r=s.Status.INTERNAL,n=`Received RST_STREAM with code ${e.rstCode}`;break;case i.constants.NGHTTP2_REFUSED_STREAM:r=s.Status.UNAVAILABLE,n="Stream refused by server";break;case i.constants.NGHTTP2_CANCEL:r=s.Status.CANCELLED,n="Call cancelled";break;case i.constants.NGHTTP2_ENHANCE_YOUR_CALM:r=s.Status.RESOURCE_EXHAUSTED,n="Bandwidth exhausted or memory limit exceeded";break;case i.constants.NGHTTP2_INADEQUATE_SECURITY:r=s.Status.PERMISSION_DENIED,n="Protocol not secure enough";break;case i.constants.NGHTTP2_INTERNAL_ERROR:r=s.Status.INTERNAL,null===this.internalError?n=`Received RST_STREAM with code ${e.rstCode} (Internal server error)`:"ECONNRESET"===this.internalError.code||"ETIMEDOUT"===this.internalError.code?(r=s.Status.UNAVAILABLE,n=this.internalError.message):n=`Received RST_STREAM with code ${e.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:r=s.Status.INTERNAL,n=`Received RST_STREAM with code ${e.rstCode}`}this.endCall({code:r,details:n,metadata:new a.Metadata,rstCode:e.rstCode})})}),e.on("error",e=>{"ERR_HTTP2_STREAM_ERROR"!==e.code&&(this.trace("Node error event: message="+e.message+" code="+e.code+" errno="+c(e.errno)+" syscall="+e.syscall),this.internalError=e),this.callEventTracker.onStreamEnd(!1)})}onDisconnect(){this.endCall({code:s.Status.UNAVAILABLE,details:"Connection dropped",metadata:new a.Metadata})}outputStatus(){this.statusOutput||(this.statusOutput=!0,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick(()=>{this.listener.onReceiveStatus(this.finalStatus)}),this.http2Stream.resume())}trace(e){l.trace(h.LogVerbosity.DEBUG,u,"["+this.callId+"] "+e)}endCall(e){(null===this.finalStatus||this.finalStatus.code===s.Status.OK)&&(this.finalStatus=e,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){null===this.finalStatus||this.finalStatus.code===s.Status.OK&&(!this.readsClosed||0!==this.unpushedReadMessages.length||this.isReadFilterPending||this.isPushPending)||this.outputStatus()}push(e){this.trace("pushing to reader message of length "+(e instanceof Buffer?e.length:null)),this.canPush=!1,this.isPushPending=!0,process.nextTick(()=>{this.isPushPending=!1,this.statusOutput||(this.listener.onReceiveMessage(e),this.maybeOutputStatus())})}tryPush(e){this.canPush?(this.http2Stream.pause(),this.push(e)):(this.trace("unpushedReadMessages.push message of length "+e.length),this.unpushedReadMessages.push(e))}handleTrailers(e){let t;this.callEventTracker.onStreamEnd(!0);let r="";for(let t of Object.keys(e))r+="		"+t+": "+e[t]+"\n";this.trace("Received server trailers:\n"+r);try{t=a.Metadata.fromHttp2Headers(e)}catch(e){t=new a.Metadata}let i=t.getMap(),n=this.mappedStatusCode;if(n===s.Status.UNKNOWN&&"string"==typeof i["grpc-status"]){let e=Number(i["grpc-status"]);e in s.Status&&(n=e,this.trace("received status code "+e+" from server")),t.remove("grpc-status")}let o="";if("string"==typeof i["grpc-message"]){try{o=decodeURI(i["grpc-message"])}catch(e){o=i["grpc-message"]}t.remove("grpc-message"),this.trace('received status details string "'+o+'" from server')}let l={code:n,details:o,metadata:t};this.endCall(l)}destroyHttp2Stream(){var e;if(!this.http2Stream.destroyed){let t;t=(null===(e=this.finalStatus)||void 0===e?void 0:e.code)===s.Status.OK?i.constants.NGHTTP2_NO_ERROR:i.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+t),this.http2Stream.close(t)}}cancelWithStatus(e,t){this.trace("cancelWithStatus code: "+e+' details: "'+t+'"'),this.endCall({code:e,details:t,metadata:new a.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}startRead(){if(null!==this.finalStatus&&this.finalStatus.code!==s.Status.OK){this.readsClosed=!0,this.maybeOutputStatus();return}if(this.canPush=!0,this.unpushedReadMessages.length>0){let e=this.unpushedReadMessages.shift();this.push(e);return}this.http2Stream.resume()}sendMessageWithContext(e,t){this.trace("write() called with message of length "+t.length);let r=t=>{process.nextTick(()=>{var r;let i=s.Status.UNAVAILABLE;(null==t?void 0:t.code)==="ERR_STREAM_WRITE_AFTER_END"&&(i=s.Status.INTERNAL),t&&this.cancelWithStatus(i,`Write error: ${t.message}`),null===(r=e.callback)||void 0===r||r.call(e)})};this.trace("sending data chunk of length "+t.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(t,r)}catch(e){this.endCall({code:s.Status.UNAVAILABLE,details:`Write failed with error ${e.message}`,metadata:new a.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}}t.Http2SubchannelCall=d},487:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseSubchannelWrapper=void 0;class r{constructor(e){this.child=e}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(e){this.child.addConnectivityStateListener(e)}removeConnectivityStateListener(e){this.child.removeConnectivityStateListener(e)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(e){this.child.throttleKeepalive(e)}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals(e){return this.getRealSubchannel()===e.getRealSubchannel()}}t.BaseSubchannelWrapper=r},7328:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSubchannelPool=t.SubchannelPool=void 0;let i=r(9455),n=r(389),s=r(4955),a=r(5541),o=r(6983),l=1e4;class h{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let e=!0;for(let t in this.pool){let r=this.pool[t].filter(e=>!e.subchannel.unrefIfOneRef());r.length>0&&(e=!1),this.pool[t]=r}e&&null!==this.cleanupTimer&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var e,t;null===this.cleanupTimer&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},l),null===(t=(e=this.cleanupTimer).unref)||void 0===t||t.call(e))}getOrCreateSubchannel(e,t,r,l){this.ensureCleanupTask();let h=(0,a.uriToString)(e);if(h in this.pool){for(let e of this.pool[h])if((0,s.subchannelAddressEqual)(t,e.subchannelAddress)&&(0,i.channelOptionsEqual)(r,e.channelArguments)&&l._equals(e.channelCredentials))return e.subchannel}let u=new n.Subchannel(e,t,r,l,new o.Http2SubchannelConnector(e));return h in this.pool||(this.pool[h]=[]),this.pool[h].push({subchannelAddress:t,channelArguments:r,channelCredentials:l,subchannel:u}),u.ref(),u}}t.SubchannelPool=h;let u=new h;function c(e){return e?u:new h}t.getSubchannelPool=c},389:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Subchannel=void 0;let i=r(2409),n=r(1742),s=r(5792),a=r(9572),o=r(5541),l=r(4955),h=r(5962),u="subchannel",c=2147483647;class d{constructor(e,t,r,s,a){var o;this.channelTarget=e,this.subchannelAddress=t,this.options=r,this.credentials=s,this.connector=a,this.connectivityState=i.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=!1,this.stateListeners=new Set,this.refcount=0,this.channelzEnabled=!0,this.callTracker=new h.ChannelzCallTracker,this.childrenTracker=new h.ChannelzChildrenTracker,this.streamTracker=new h.ChannelzCallTracker;let u={initialDelay:r["grpc.initial_reconnect_backoff_ms"],maxDelay:r["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new n.BackoffTimeout(()=>{this.handleBackoffTimer()},u),this.backoffTimeout.unref(),this.subchannelAddressString=(0,l.subchannelAddressToString)(t),this.keepaliveTime=null!==(o=r["grpc.keepalive_time_ms"])&&void 0!==o?o:-1,0===r["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzTrace=new h.ChannelzTrace,this.channelzRef=(0,h.registerChannelzSubchannel)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(r,void 0,2))}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(e){s.trace(a.LogVerbosity.DEBUG,u,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}refTrace(e){s.trace(a.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([i.ConnectivityState.TRANSIENT_FAILURE],i.ConnectivityState.CONNECTING):this.transitionToState([i.ConnectivityState.TRANSIENT_FAILURE],i.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}startConnectingInternal(){let e=this.options;if(e["grpc.keepalive_time_ms"]){let t=Math.min(this.keepaliveTime,c);e=Object.assign(Object.assign({},e),{"grpc.keepalive_time_ms":t})}this.connector.connect(this.subchannelAddress,this.credentials,e).then(e=>{this.transitionToState([i.ConnectivityState.CONNECTING],i.ConnectivityState.READY)?(this.transport=e,this.channelzEnabled&&this.childrenTracker.refChild(e.getChannelzRef()),e.addDisconnectListener(e=>{this.transitionToState([i.ConnectivityState.READY],i.ConnectivityState.IDLE),e&&this.keepaliveTime>0&&(this.keepaliveTime*=2,s.log(a.LogVerbosity.ERROR,`Connection to ${(0,o.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`))})):e.shutdown()},e=>{this.transitionToState([i.ConnectivityState.CONNECTING],i.ConnectivityState.TRANSIENT_FAILURE,`${e}`)})}transitionToState(e,t,r){var n,s;if(-1===e.indexOf(this.connectivityState))return!1;this.trace(i.ConnectivityState[this.connectivityState]+" -> "+i.ConnectivityState[t]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+i.ConnectivityState[t]);let a=this.connectivityState;switch(this.connectivityState=t,t){case i.ConnectivityState.READY:this.stopBackoff();break;case i.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case i.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null===(n=this.transport)||void 0===n||n.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer()});break;case i.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),null===(s=this.transport)||void 0===s||s.shutdown(),this.transport=null;break;default:throw Error(`Invalid state: unknown ConnectivityState ${t}`)}for(let e of this.stateListeners)e(this,a,t,this.keepaliveTime,r);return!0}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,0===this.refcount&&(this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Shutting down"),this.channelzEnabled&&(0,h.unregisterChannelzRef)(this.channelzRef),process.nextTick(()=>{this.transitionToState([i.ConnectivityState.CONNECTING,i.ConnectivityState.READY],i.ConnectivityState.IDLE)}))}unrefIfOneRef(){return 1===this.refcount&&(this.unref(),!0)}createCall(e,t,r,i){let n;if(!this.transport)throw Error("Cannot create call, subchannel not READY");return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),n={onCallEnd:e=>{e.code===a.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}}):n={},this.transport.createCall(e,t,r,i,n)}startConnecting(){process.nextTick(()=>{this.transitionToState([i.ConnectivityState.IDLE],i.ConnectivityState.CONNECTING)||this.connectivityState!==i.ConnectivityState.TRANSIENT_FAILURE||(this.continueConnecting=!0)})}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(e){this.stateListeners.add(e)}removeConnectivityStateListener(e){this.stateListeners.delete(e)}resetBackoff(){process.nextTick(()=>{this.backoffTimeout.reset(),this.transitionToState([i.ConnectivityState.TRANSIENT_FAILURE],i.ConnectivityState.CONNECTING)})}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}getRealSubchannel(){return this}realSubchannelEquals(e){return e.getRealSubchannel()===this}throttleKeepalive(e){e>this.keepaliveTime&&(this.keepaliveTime=e)}}t.Subchannel=d},606:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultRootsData=t.CIPHER_SUITES=void 0;let i=r(7147);t.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;let n=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH,s=null;function a(){return n?(null===s&&(s=i.readFileSync(n)),s):null}t.getDefaultRootsData=a},6983:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Http2SubchannelConnector=void 0;let i=r(5158),n=r(4404),s=r(5962),a=r(9572),o=r(5242),l=r(5792),h=r(4063),u=r(4955),c=r(5541),d=r(1808),p=r(4354),f=r(1801),m="transport",g="transport_flowctrl",y=r(1513).i8,{HTTP2_HEADER_AUTHORITY:v,HTTP2_HEADER_CONTENT_TYPE:b,HTTP2_HEADER_METHOD:w,HTTP2_HEADER_PATH:E,HTTP2_HEADER_TE:S,HTTP2_HEADER_USER_AGENT:T}=i.constants,C=2e4,A=Buffer.from("too_many_pings","ascii");class _{constructor(e,t,r,n){this.session=e,this.options=r,this.remoteName=n,this.keepaliveTimeMs=-1,this.keepaliveTimeoutMs=C,this.keepaliveTimerId=null,this.pendingSendKeepalivePing=!1,this.keepaliveTimeoutId=null,this.keepaliveWithoutCalls=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.streamTracker=new s.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.subchannelAddressString=(0,u.subchannelAddressToString)(t),0===r["grpc.enable_channelz"]&&(this.channelzEnabled=!1),this.channelzRef=(0,s.registerChannelzSocket)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.userAgent=[r["grpc.primary_user_agent"],`grpc-node-js/${y}`,r["grpc.secondary_user_agent"]].filter(e=>e).join(" "),"grpc.keepalive_time_ms"in r&&(this.keepaliveTimeMs=r["grpc.keepalive_time_ms"]),"grpc.keepalive_timeout_ms"in r&&(this.keepaliveTimeoutMs=r["grpc.keepalive_timeout_ms"]),"grpc.keepalive_permit_without_calls"in r?this.keepaliveWithoutCalls=1===r["grpc.keepalive_permit_without_calls"]:this.keepaliveWithoutCalls=!1,e.once("close",()=>{this.trace("session closed"),this.stopKeepalivePings(),this.handleDisconnect()}),e.once("goaway",(e,t,r)=>{let n=!1;e===i.constants.NGHTTP2_ENHANCE_YOUR_CALM&&r&&r.equals(A)&&(n=!0),this.trace("connection closed by GOAWAY with code "+e+" and data "+(null==r?void 0:r.toString())),this.reportDisconnectToOwner(n)}),e.once("error",e=>{this.trace("connection closed with error "+e.message)}),l.isTracerEnabled(m)&&(e.on("remoteSettings",t=>{this.trace("new settings received"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))}),e.on("localSettings",t=>{this.trace("local settings acknowledged by remote"+(this.session!==e?" on the old connection":"")+": "+JSON.stringify(t))})),this.keepaliveWithoutCalls&&this.maybeStartKeepalivePingTimer()}getChannelzInfo(){var e,t,r;let i;let n=this.session.socket,s=n.remoteAddress?(0,u.stringToSubchannelAddress)(n.remoteAddress,n.remotePort):null,a=n.localAddress?(0,u.stringToSubchannelAddress)(n.localAddress,n.localPort):null;if(this.session.encrypted){let t=n,r=t.getCipher(),s=t.getCertificate(),a=t.getPeerCertificate();i={cipherSuiteStandardName:null!==(e=r.standardName)&&void 0!==e?e:null,cipherSuiteOtherName:r.standardName?null:r.name,localCertificate:s&&"raw"in s?s.raw:null,remoteCertificate:a&&"raw"in a?a.raw:null}}else i=null;return{remoteAddress:s,localAddress:a,security:i,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:null!==(t=this.session.state.localWindowSize)&&void 0!==t?t:null,remoteFlowControlWindow:null!==(r=this.session.state.remoteWindowSize)&&void 0!==r?r:null}}trace(e){l.trace(a.LogVerbosity.DEBUG,m,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}keepaliveTrace(e){l.trace(a.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}flowControlTrace(e){l.trace(a.LogVerbosity.DEBUG,g,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}internalsTrace(e){l.trace(a.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+e)}reportDisconnectToOwner(e){this.disconnectHandled||(this.disconnectHandled=!0,this.disconnectListeners.forEach(t=>t(e)))}handleDisconnect(){this.reportDisconnectToOwner(!1),setImmediate(()=>{for(let e of this.activeCalls)e.onDisconnect()})}addDisconnectListener(e){this.disconnectListeners.push(e)}clearKeepaliveTimer(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null)}clearKeepaliveTimeout(){this.keepaliveTimeoutId&&(clearTimeout(this.keepaliveTimeoutId),this.keepaliveTimeoutId=null)}canSendPing(){return this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var e,t;if(this.clearKeepaliveTimer(),!this.canSendPing()){this.pendingSendKeepalivePing=!0;return}this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimeoutId||(this.keepaliveTimeoutId=setTimeout(()=>{this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),null===(t=(e=this.keepaliveTimeoutId).unref)||void 0===t||t.call(e));try{this.session.ping((e,t,r)=>{e&&(this.keepaliveTrace("Ping failed with error "+e.message),this.handleDisconnect()),this.keepaliveTrace("Received ping response"),this.clearKeepaliveTimeout(),this.maybeStartKeepalivePingTimer()})}catch(e){this.handleDisconnect()}}maybeStartKeepalivePingTimer(){var e,t;this.canSendPing()&&(this.pendingSendKeepalivePing?(this.pendingSendKeepalivePing=!1,this.maybeSendPing()):this.keepaliveTimerId||this.keepaliveTimeoutId||(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),this.keepaliveTimerId=null===(t=(e=setTimeout(()=>{this.maybeSendPing()},this.keepaliveTimeMs)).unref)||void 0===t?void 0:t.call(e)))}stopKeepalivePings(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null),this.clearKeepaliveTimeout()}removeActiveCall(e){this.activeCalls.delete(e),0===this.activeCalls.size&&this.session.unref()}addActiveCall(e){this.activeCalls.add(e),1!==this.activeCalls.size||(this.session.ref(),this.keepaliveWithoutCalls||this.maybeStartKeepalivePingTimer())}createCall(e,t,r,i,n){let s,a,o;let l=e.toHttp2Headers();l[v]=t,l[T]=this.userAgent,l[b]="application/grpc",l[w]="POST",l[E]=r,l[S]="trailers";try{s=this.session.request(l)}catch(e){throw this.handleDisconnect(),e}return this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed),this.channelzEnabled?(this.streamTracker.addCallStarted(),a={addMessageSent:()=>{var e;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,null===(e=n.addMessageSent)||void 0===e||e.call(n)},addMessageReceived:()=>{var e;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,null===(e=n.addMessageReceived)||void 0===e||e.call(n)},onCallEnd:e=>{var t;null===(t=n.onCallEnd)||void 0===t||t.call(n,e),this.removeActiveCall(o)},onStreamEnd:e=>{var t;e?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),null===(t=n.onStreamEnd)||void 0===t||t.call(n,e)}}):a={addMessageSent:()=>{var e;null===(e=n.addMessageSent)||void 0===e||e.call(n)},addMessageReceived:()=>{var e;null===(e=n.addMessageReceived)||void 0===e||e.call(n)},onCallEnd:e=>{var t;null===(t=n.onCallEnd)||void 0===t||t.call(n,e),this.removeActiveCall(o)},onStreamEnd:e=>{var t;null===(t=n.onStreamEnd)||void 0===t||t.call(n,e)}},o=new p.Http2SubchannelCall(s,a,i,this,(0,f.getNextCallNumber)()),this.addActiveCall(o),o}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}getOptions(){return this.options}shutdown(){this.session.close(),(0,s.unregisterChannelzRef)(this.channelzRef)}}class x{constructor(e){this.channelTarget=e,this.session=null,this.isShutdown=!1}trace(e){l.trace(a.LogVerbosity.DEBUG,m,(0,c.uriToString)(this.channelTarget)+" "+e)}createSession(e,t,r,s){return this.isShutdown?Promise.reject():new Promise((a,o)=>{var l,p,f;let m;s.realTarget?(m=(0,c.uriToString)(s.realTarget),this.trace("creating HTTP/2 session through proxy to "+(0,c.uriToString)(s.realTarget))):(m=null,this.trace("creating HTTP/2 session to "+(0,u.subchannelAddressToString)(e)));let g=(0,h.getDefaultAuthority)(null!==(l=s.realTarget)&&void 0!==l?l:this.channelTarget),y=t._getConnectionOptions()||{};y.maxSendHeaderBlockLength=Number.MAX_SAFE_INTEGER,"grpc-node.max_session_memory"in r?y.maxSessionMemory=r["grpc-node.max_session_memory"]:y.maxSessionMemory=Number.MAX_SAFE_INTEGER;let v="http://";if("secureContext"in y){if(v="https://",r["grpc.ssl_target_name_override"]){let e=r["grpc.ssl_target_name_override"];y.checkServerIdentity=(t,r)=>(0,n.checkServerIdentity)(e,r),y.servername=e}else{let e=null!==(f=null===(p=(0,c.splitHostPort)(g))||void 0===p?void 0:p.host)&&void 0!==f?f:"localhost";y.servername=e}s.socket&&(y.createConnection=(e,t)=>s.socket)}else y.createConnection=(t,r)=>s.socket?s.socket:d.connect(e);y=Object.assign(Object.assign(Object.assign({},y),e),{enableTrace:1===r["grpc-node.tls_enable_trace"]});let b=i.connect(v+g,y);this.session=b;let w="Failed to connect";b.unref(),b.once("connect",()=>{b.removeAllListeners(),a(new _(b,e,r,m)),this.session=null}),b.once("close",()=>{this.session=null,setImmediate(()=>{o(`${w} (${new Date().toISOString()})`)})}),b.once("error",e=>{w=e.message,this.trace("connection failed with error "+w)})})}connect(e,t,r){var i,s;if(this.isShutdown)return Promise.reject();let a=t._getConnectionOptions()||{};if("secureContext"in a){if(a.ALPNProtocols=["h2"],r["grpc.ssl_target_name_override"]){let e=r["grpc.ssl_target_name_override"];a.checkServerIdentity=(t,r)=>(0,n.checkServerIdentity)(e,r),a.servername=e}else if("grpc.http_connect_target"in r){let e=(0,h.getDefaultAuthority)(null!==(i=(0,c.parseUri)(r["grpc.http_connect_target"]))&&void 0!==i?i:{path:"localhost"}),t=(0,c.splitHostPort)(e);a.servername=null!==(s=null==t?void 0:t.host)&&void 0!==s?s:e}r["grpc-node.tls_enable_trace"]&&(a.enableTrace=!0)}return(0,o.getProxiedConnection)(e,r,a).then(i=>this.createSession(e,t,r,i))}shutdown(){var e;this.isShutdown=!0,null===(e=this.session)||void 0===e||e.close(),this.session=null}}t.Http2SubchannelConnector=x},5541:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uriToString=t.splitHostPort=t.parseUri=void 0;let r=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;function i(e){let t=r.exec(e);return null===t?null:{scheme:t[1],authority:t[2],path:t[3]}}t.parseUri=i;let n=/^\d+$/;function s(e){if(e.startsWith("[")){let t=e.indexOf("]");if(-1===t)return null;let r=e.substring(1,t);if(-1===r.indexOf(":"))return null;if(!(e.length>t+1))return{host:r};if(":"!==e[t+1])return null;{let i=e.substring(t+2);return n.test(i)?{host:r,port:+i}:null}}{let t=e.split(":");return 2!==t.length?{host:e}:n.test(t[1])?{host:t[0],port:+t[1]}:null}}function a(e){let t="";return void 0!==e.scheme&&(t+=e.scheme+":"),void 0!==e.authority&&(t+="//"+e.authority+"/"),t+=e.path}t.splitHostPort=s,t.uriToString=a},3716:(e,t,r)=>{"use strict";var i,n;/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */i={value:!0},i=i=t.im=t.J_=i=t.Cp=i=i=void 0;let s=r(9739),a=r(1101),o=r(2607),l=r(8720);i=r(29),i=function(e){return"@type"in e&&"string"==typeof e["@type"]},function(e){e.IDEMPOTENCY_UNKNOWN="IDEMPOTENCY_UNKNOWN",e.NO_SIDE_EFFECTS="NO_SIDE_EFFECTS",e.IDEMPOTENT="IDEMPOTENT"}(n=t.Cp||(t.Cp={}));let h={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function u(e,t){return""===e?t:e+"."+t}function c(e){return e instanceof a.Service||e instanceof a.Type||e instanceof a.Enum}function d(e){return e instanceof a.Namespace||e instanceof a.Root}function p(e,t){let r=u(t,e.name);return c(e)?[[r,e]]:d(e)&&void 0!==e.nested?Object.keys(e.nested).map(t=>p(e.nested[t],r)).reduce((e,t)=>e.concat(t),[]):[]}function f(e,t){return function(r){return e.toObject(e.decode(r),t)}}function m(e){return function(t){if(Array.isArray(t))throw Error(`Failed to serialize message: expected object with ${e.name} structure, got array instead`);let r=e.fromObject(t);return e.encode(r).finish()}}function g(e){return(e||[]).reduce((e,t)=>{for(let[r,i]of Object.entries(t))"uninterpreted_option"===r?e.uninterpreted_option.push(t.uninterpreted_option):e[r]=i;return e},{deprecated:!1,idempotency_level:n.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function y(e,t,r,i){let n=e.resolvedRequestType,a=e.resolvedResponseType;return{path:"/"+t+"/"+e.name,requestStream:!!e.requestStream,responseStream:!!e.responseStream,requestSerialize:m(n),requestDeserialize:f(n,r),responseSerialize:m(a),responseDeserialize:f(a,r),originalName:s(e.name),requestType:b(n,i),responseType:b(a,i),options:g(e.parsedOptions)}}function v(e,t,r,i){let n={};for(let s of e.methodsArray)n[s.name]=y(s,t,r,i);return n}function b(e,t){let r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:r.$type.toObject(r,h),fileDescriptorProtos:t}}function w(e,t){let r=e.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:r.$type.toObject(r,h),fileDescriptorProtos:t}}function E(e,t,r,i){if(e instanceof a.Service)return v(e,t,r,i);if(e instanceof a.Type)return b(e,i);if(e instanceof a.Enum)return w(e,i);throw Error("Type mismatch in reflection object handling")}function S(e,t){let r={};e.resolveAll();let i=e.toDescriptor("proto3").file.map(e=>Buffer.from(o.FileDescriptorProto.encode(e).finish()));for(let[n,s]of p(e,""))r[n]=E(s,n,t,i);return r}function T(e,t){t=t||{};let r=a.Root.fromDescriptor(e);return r.resolveAll(),S(r,t)}function C(e,t){return S((0,l.loadProtosWithOptionsSync)(e,t),t)}function A(e,t){t=t||{};let r=a.Root.fromJSON(e);return r.resolveAll(),S(r,t)}i=function(e,t){return(0,l.loadProtosWithOptions)(e,t).then(e=>S(e,t))},t.J_=C,t.im=A,i=function(e,t){return T(o.FileDescriptorSet.decode(e),t)},i=function(e,t){return T(o.FileDescriptorSet.fromObject(e),t)},(0,l.addCommonProtos)()},8720:(e,t,r)=>{"use strict";/**
 * @license
 * Copyright 2018 gRPC authors.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */Object.defineProperty(t,"__esModule",{value:!0}),t.addCommonProtos=t.loadProtosWithOptionsSync=t.loadProtosWithOptions=void 0;let i=r(7147),n=r(1017),s=r(1101);function a(e,t){let r=e.resolvePath;e.resolvePath=(e,s)=>{if(n.isAbsolute(s))return s;for(let e of t){let t=n.join(e,s);try{return i.accessSync(t,i.constants.R_OK),t}catch(e){continue}}return process.emitWarning(`${s} not found in any of the include paths ${t}`),r(e,s)}}async function o(e,t){let r=new s.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))return Promise.reject(Error("The includeDirs option must be an array"));a(r,t.includeDirs)}let i=await r.load(e,t);return i.resolveAll(),i}function l(e,t){let r=new s.Root;if((t=t||{}).includeDirs){if(!Array.isArray(t.includeDirs))throw Error("The includeDirs option must be an array");a(r,t.includeDirs)}let i=r.loadSync(e,t);return i.resolveAll(),i}function h(){let e=r(6541),t=r(9987),i=r(7674),n=r(3795);s.common("api",e.nested.google.nested.protobuf.nested),s.common("descriptor",t.nested.google.nested.protobuf.nested),s.common("source_context",i.nested.google.nested.protobuf.nested),s.common("type",n.nested.google.nested.protobuf.nested)}t.loadProtosWithOptions=o,t.loadProtosWithOptionsSync=l,t.addCommonProtos=h},1417:e=>{"use strict";function t(e,t){for(var r=Array(arguments.length-1),i=0,n=2,s=!0;n<arguments.length;)r[i++]=arguments[n++];return new Promise(function(n,a){r[i]=function(e){if(s){if(s=!1,e)a(e);else{for(var t=Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];n.apply(null,t)}}};try{e.apply(t||null,r)}catch(e){s&&(s=!1,a(e))}})}e.exports=t},5386:(e,t)=>{"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var i=Array(64),n=Array(123),s=0;s<64;)n[i[s]=s<26?s+65:s<52?s+71:s<62?s-4:s-59|43]=s++;r.encode=function(e,t,r){for(var n,s=null,a=[],o=0,l=0;t<r;){var h=e[t++];switch(l){case 0:a[o++]=i[h>>2],n=(3&h)<<4,l=1;break;case 1:a[o++]=i[n|h>>4],n=(15&h)<<2,l=2;break;case 2:a[o++]=i[n|h>>6],a[o++]=i[63&h],l=0}o>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,a)),o=0)}return(l&&(a[o++]=i[n],a[o++]=61,1===l&&(a[o++]=61)),s)?(o&&s.push(String.fromCharCode.apply(String,a.slice(0,o))),s.join("")):String.fromCharCode.apply(String,a.slice(0,o))};var a="invalid encoding";r.decode=function(e,t,r){for(var i,s=r,o=0,l=0;l<e.length;){var h=e.charCodeAt(l++);if(61===h&&o>1)break;if(void 0===(h=n[h]))throw Error(a);switch(o){case 0:i=h,o=1;break;case 1:t[r++]=i<<2|(48&h)>>4,i=h,o=2;break;case 2:t[r++]=(15&i)<<4|(60&h)>>2,i=h,o=3;break;case 3:t[r++]=(3&i)<<6|h,o=0}}if(1===o)throw Error(a);return r-s},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},696:e=>{"use strict";function t(e,r){"string"==typeof e&&(r=e,e=void 0);var i=[];function n(e){if("string"!=typeof e){var r=s();if(t.verbose&&console.log("codegen: "+r),r="return "+r,e){for(var a=Object.keys(e),o=Array(a.length+1),l=Array(a.length),h=0;h<a.length;)o[h]=a[h],l[h]=e[a[h++]];return o[h]=r,Function.apply(null,o).apply(null,l)}return Function(r)()}for(var u=Array(arguments.length-1),c=0;c<u.length;)u[c]=arguments[++c];if(c=0,e=e.replace(/%([%dfijs])/g,function(e,t){var r=u[c++];switch(t){case"d":case"f":return String(Number(r));case"i":return String(Math.floor(r));case"j":return JSON.stringify(r);case"s":return String(r)}return"%"}),c!==u.length)throw Error("parameter count mismatch");return i.push(e),n}function s(t){return"function "+(t||r||"")+"("+(e&&e.join(",")||"")+"){\n  "+i.join("\n  ")+"\n}"}return n.toString=s,n}e.exports=t,t.verbose=!1},3478:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],i=0;i<r.length;)r[i].fn===t?r.splice(i,1):++i;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],i=1;i<arguments.length;)r.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,r)}return this}},7828:(e,t,r)=>{"use strict";e.exports=s;var i=r(1417),n=r(1374)("fs");function s(e,t,r){return("function"==typeof t?(r=t,t={}):t||(t={}),r)?!t.xhr&&n&&n.readFile?n.readFile(e,function(i,n){return i&&"undefined"!=typeof XMLHttpRequest?s.xhr(e,t,r):i?r(i):r(null,t.binary?n:n.toString("utf8"))}):s.xhr(e,t,r):i(s,this,e,t)}s.xhr=function(e,t,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState){if(0!==i.status&&200!==i.status)return r(Error("status "+i.status));if(t.binary){var e=i.response;if(!e){e=[];for(var n=0;n<i.responseText.length;++n)e.push(255&i.responseText.charCodeAt(n))}return r(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return r(null,i.responseText)}},t.binary&&("overrideMimeType"in i&&i.overrideMimeType("text/plain; charset=x-user-defined"),i.responseType="arraybuffer"),i.open("GET",e),i.send()}},5256:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),i=128===r[3];function n(e,i,n){t[0]=e,i[n]=r[0],i[n+1]=r[1],i[n+2]=r[2],i[n+3]=r[3]}function s(e,i,n){t[0]=e,i[n]=r[3],i[n+1]=r[2],i[n+2]=r[1],i[n+3]=r[0]}function a(e,i){return r[0]=e[i],r[1]=e[i+1],r[2]=e[i+2],r[3]=e[i+3],t[0]}function o(e,i){return r[3]=e[i],r[2]=e[i+1],r[1]=e[i+2],r[0]=e[i+3],t[0]}e.writeFloatLE=i?n:s,e.writeFloatBE=i?s:n,e.readFloatLE=i?a:o,e.readFloatBE=i?o:a}():function(){function t(e,t,r,i){var n=t<0?1:0;if(n&&(t=-t),0===t)e(1/t>0?0:2147483648,r,i);else if(isNaN(t))e(2143289344,r,i);else if(t>34028234663852886e22)e((n<<31|2139095040)>>>0,r,i);else if(t<11754943508222875e-54)e((n<<31|Math.round(t/1401298464324817e-60))>>>0,r,i);else{var s=Math.floor(Math.log(t)/Math.LN2),a=8388607&Math.round(t*Math.pow(2,-s)*8388608);e((n<<31|s+127<<23|a)>>>0,r,i)}}function a(e,t,r){var i=e(t,r),n=(i>>31)*2+1,s=i>>>23&255,a=8388607&i;return 255===s?a?NaN:1/0*n:0===s?1401298464324817e-60*n*a:n*Math.pow(2,s-150)*(a+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,i),e.readFloatLE=a.bind(null,n),e.readFloatBE=a.bind(null,s)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),i=128===r[7];function n(e,i,n){t[0]=e,i[n]=r[0],i[n+1]=r[1],i[n+2]=r[2],i[n+3]=r[3],i[n+4]=r[4],i[n+5]=r[5],i[n+6]=r[6],i[n+7]=r[7]}function s(e,i,n){t[0]=e,i[n]=r[7],i[n+1]=r[6],i[n+2]=r[5],i[n+3]=r[4],i[n+4]=r[3],i[n+5]=r[2],i[n+6]=r[1],i[n+7]=r[0]}function a(e,i){return r[0]=e[i],r[1]=e[i+1],r[2]=e[i+2],r[3]=e[i+3],r[4]=e[i+4],r[5]=e[i+5],r[6]=e[i+6],r[7]=e[i+7],t[0]}function o(e,i){return r[7]=e[i],r[6]=e[i+1],r[5]=e[i+2],r[4]=e[i+3],r[3]=e[i+4],r[2]=e[i+5],r[1]=e[i+6],r[0]=e[i+7],t[0]}e.writeDoubleLE=i?n:s,e.writeDoubleBE=i?s:n,e.readDoubleLE=i?a:o,e.readDoubleBE=i?o:a}():function(){function t(e,t,r,i,n,s){var a,o=i<0?1:0;if(o&&(i=-i),0===i)e(0,n,s+t),e(1/i>0?0:2147483648,n,s+r);else if(isNaN(i))e(0,n,s+t),e(2146959360,n,s+r);else if(i>17976931348623157e292)e(0,n,s+t),e((o<<31|2146435072)>>>0,n,s+r);else if(i<22250738585072014e-324)e((a=i/5e-324)>>>0,n,s+t),e((o<<31|a/4294967296)>>>0,n,s+r);else{var l=Math.floor(Math.log(i)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(a=i*Math.pow(2,-l))>>>0,n,s+t),e((o<<31|l+1023<<20|1048576*a&1048575)>>>0,n,s+r)}}function a(e,t,r,i,n){var s=e(i,n+t),a=e(i,n+r),o=(a>>31)*2+1,l=a>>>20&2047,h=4294967296*(1048575&a)+s;return 2047===l?h?NaN:1/0*o:0===l?5e-324*o*h:o*Math.pow(2,l-1075)*(h+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=a.bind(null,n,0,4),e.readDoubleBE=a.bind(null,s,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function i(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function n(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function s(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},1374:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},2727:(e,t)=>{"use strict";var r=t,i=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},n=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),r=i(e),n="";r&&(n=t.shift()+"/");for(var s=0;s<t.length;)".."===t[s]?s>0&&".."!==t[s-1]?t.splice(--s,2):r?t.splice(s,1):++s:"."===t[s]?t.splice(s,1):++s;return n+t.join("/")};r.resolve=function(e,t,r){return(r||(t=n(t)),i(t))?t:(r||(e=n(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?n(e+"/"+t):t)}},6733:e=>{"use strict";function t(e,t,r){var i=r||8192,n=i>>>1,s=null,a=i;return function(r){if(r<1||r>n)return e(r);a+r>i&&(s=e(i),a=0);var o=t.call(s,a,a+=r);return 7&a&&(a=(7|a)+1),o}}e.exports=t},3670:(e,t)=>{"use strict";var r=t;r.length=function(e){for(var t=0,r=0,i=0;i<e.length;++i)(r=e.charCodeAt(i))<128?t+=1:r<2048?t+=2:(64512&r)==55296&&(64512&e.charCodeAt(i+1))==56320?(++i,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var i,n=null,s=[],a=0;t<r;)(i=e[t++])<128?s[a++]=i:i>191&&i<224?s[a++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,s[a++]=55296+(i>>10),s[a++]=56320+(1023&i)):s[a++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,s)),a=0);return n?(a&&n.push(String.fromCharCode.apply(String,s.slice(0,a))),n.join("")):String.fromCharCode.apply(String,s.slice(0,a))},r.write=function(e,t,r){for(var i,n,s=r,a=0;a<e.length;++a)(i=e.charCodeAt(a))<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:((64512&i)==55296&&(64512&(n=e.charCodeAt(a+1)))==56320?(i=65536+((1023&i)<<10)+(1023&n),++a,t[r++]=i>>18|240,t[r++]=i>>12&63|128):t[r++]=i>>12|224,t[r++]=i>>6&63|128),t[r++]=63&i|128);return r-s}},7214:(e,t,r)=>{"use strict";function i(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e){if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=i(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t)}return n}function n(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=i(e))&&(n&&(n+=" "),n+=t);return n}r.r(t),r.d(t,{clsx:()=>n,default:()=>s});let s=n},9739:e=>{var t=1/0,r="[object Symbol]",i=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,n=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,s="\ud800-\udfff",a="\\u0300-\\u036f\\ufe20-\\ufe23",o="\\u20d0-\\u20f0",l="\\u2700-\\u27bf",h="a-z\\xdf-\\xf6\\xf8-\\xff",u="A-Z\\xc0-\\xd6\\xd8-\\xde",c="\\ufe0e\\ufe0f",d="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",p="[']",f="["+s+"]",m="["+d+"]",g="["+a+o+"]",y="\\d+",v="["+l+"]",b="["+h+"]",w="[^"+s+d+y+l+h+u+"]",E="\ud83c[\udffb-\udfff]",S="[^"+s+"]",T="(?:\ud83c[\udde6-\uddff]){2}",C="[\ud800-\udbff][\udc00-\udfff]",A="["+u+"]",_="\\u200d",x="(?:"+b+"|"+w+")",k="(?:"+A+"|"+w+")",I="(?:"+p+"(?:d|ll|m|re|s|t|ve))?",D="(?:"+p+"(?:D|LL|M|RE|S|T|VE))?",P="(?:"+g+"|"+E+")?",R="["+c+"]?",N="(?:"+_+"(?:"+[S,T,C].join("|")+")"+R+P+")*",O=R+P+N,M="(?:"+[v,T,C].join("|")+")"+O,L="(?:"+[S+g+"?",g,T,C,f].join("|")+")",F=RegExp(p,"g"),B=RegExp(g,"g"),U=RegExp(E+"(?="+E+")|"+L+O,"g"),z=RegExp([A+"?"+b+"+"+I+"(?="+[m,A,"$"].join("|")+")",k+"+"+D+"(?="+[m,A+x,"$"].join("|")+")",A+"?"+x+"+"+I,A+"+"+D,y,M].join("|"),"g"),V=RegExp("["+_+s+a+o+c+"]"),j=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,G={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"ss"},q="object"==typeof global&&global&&global.Object===Object&&global,H="object"==typeof self&&self&&self.Object===Object&&self,W=q||H||Function("return this")();function K(e,t,r,i){var n=-1,s=e?e.length:0;for(i&&s&&(r=e[++n]);++n<s;)r=t(r,e[n],n,e);return r}function Q(e){return e.split("")}function $(e){return e.match(i)||[]}var J=function(e){return function(t){return null==e?void 0:e[t]}}(G);function Y(e){return V.test(e)}function X(e){return j.test(e)}function Z(e){return Y(e)?ee(e):Q(e)}function ee(e){return e.match(U)||[]}function et(e){return e.match(z)||[]}var er=Object.prototype.toString,ei=W.Symbol,en=ei?ei.prototype:void 0,es=en?en.toString:void 0;function ea(e,t,r){var i=-1,n=e.length;t<0&&(t=-t>n?0:n+t),(r=r>n?n:r)<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(n);++i<n;)s[i]=e[i+t];return s}function eo(e){if("string"==typeof e)return e;if(ec(e))return es?es.call(e):"";var r=e+"";return"0"==r&&1/e==-t?"-0":r}function el(e,t,r){var i=e.length;return r=void 0===r?i:r,!t&&r>=i?e:ea(e,t,r)}function eh(e){return function(t){var r=Y(t=ed(t))?Z(t):void 0,i=r?r[0]:t.charAt(0),n=r?el(r,1).join(""):t.slice(1);return i[e]()+n}}function eu(e){return!!e&&"object"==typeof e}function ec(e){return"symbol"==typeof e||eu(e)&&er.call(e)==r}function ed(e){return null==e?"":eo(e)}var ep=function(e){return function(t){return K(ey(em(t).replace(F,"")),e,"")}}(function(e,t,r){return t=t.toLowerCase(),e+(r?ef(t):t)});function ef(e){return eg(ed(e).toLowerCase())}function em(e){return(e=ed(e))&&e.replace(n,J).replace(B,"")}var eg=eh("toUpperCase");function ey(e,t,r){return(e=ed(e),void 0===(t=r?void 0:t))?X(e)?et(e):$(e):e.match(t)||[]}e.exports=ep},9245:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>x});var i=r(496),n=r.n(i),s=r(7577),a=r.n(s);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=Array(t);r<t;r++)i[r]=e[r];return i}function l(e){if(Array.isArray(e))return e}function h(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,s,a,o=[],l=!0,h=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(i=s.call(r)).done)&&(o.push(i.value),o.length!==t);l=!0);}catch(e){h=!0,n=e}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(h)throw n}}return o}}function c(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,i)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){h(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function f(e,t){if(null==e)return{};var r,i,n=m(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],t.includes(r)||({}).propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function m(e,t){if(null==e)return{};var r={};for(var i in e)if(({}).hasOwnProperty.call(e,i)){if(t.includes(i))continue;r[i]=e[i]}return r}function g(e,t){return l(e)||u(e,t)||b(e,t)||c()}function y(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function v(e){var t=y(e,"string");return"symbol"==typeof t?t:t+""}function b(e,t){if(e){if("string"==typeof e)return o(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}var w=["animationData","loop","autoplay","initialSegment","onComplete","onLoopComplete","onEnterFrame","onSegmentStart","onConfigReady","onDataReady","onDataFailed","onLoadedImages","onDOMLoaded","onDestroy","lottieRef","renderer","name","assetsPath","rendererSettings"],E=function(e,t){var r=e.animationData,i=e.loop,o=e.autoplay,l=e.initialSegment,h=e.onComplete,u=e.onLoopComplete,c=e.onEnterFrame,d=e.onSegmentStart,m=e.onConfigReady,y=e.onDataReady,v=e.onDataFailed,b=e.onLoadedImages,E=e.onDOMLoaded,S=e.onDestroy;e.lottieRef,e.renderer,e.name,e.assetsPath,e.rendererSettings;var T=f(e,w),C=g((0,s.useState)(!1),2),A=C[0],_=C[1],x=(0,s.useRef)(),k=(0,s.useRef)(null),I=function(){var e;null===(e=x.current)||void 0===e||e.play()},D=function(){var e;null===(e=x.current)||void 0===e||e.stop()},P=function(){var e;null===(e=x.current)||void 0===e||e.pause()},R=function(e){var t;null===(t=x.current)||void 0===t||t.setSpeed(e)},N=function(e,t){var r;null===(r=x.current)||void 0===r||r.goToAndPlay(e,t)},O=function(e,t){var r;null===(r=x.current)||void 0===r||r.goToAndStop(e,t)},M=function(e){var t;null===(t=x.current)||void 0===t||t.setDirection(e)},L=function(e,t){var r;null===(r=x.current)||void 0===r||r.playSegments(e,t)},F=function(e){var t;null===(t=x.current)||void 0===t||t.setSubframe(e)},B=function(e){var t;return null===(t=x.current)||void 0===t?void 0:t.getDuration(e)},U=function(){var e;null===(e=x.current)||void 0===e||e.destroy(),x.current=void 0},z=function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(k.current){null===(t=x.current)||void 0===t||t.destroy();var i=p(p(p({},e),r),{},{container:k.current});return x.current=n().loadAnimation(i),_(!!x.current),function(){var e;null===(e=x.current)||void 0===e||e.destroy(),x.current=void 0}}};return(0,s.useEffect)(function(){var e=z();return function(){return null==e?void 0:e()}},[r,i]),(0,s.useEffect)(function(){x.current&&(x.current.autoplay=!!o)},[o]),(0,s.useEffect)(function(){if(x.current){if(!l){x.current.resetSegments(!0);return}Array.isArray(l)&&l.length&&((x.current.currentRawFrame<l[0]||x.current.currentRawFrame>l[1])&&(x.current.currentRawFrame=l[0]),x.current.setSegment(l[0],l[1]))}},[l]),(0,s.useEffect)(function(){var e=[{name:"complete",handler:h},{name:"loopComplete",handler:u},{name:"enterFrame",handler:c},{name:"segmentStart",handler:d},{name:"config_ready",handler:m},{name:"data_ready",handler:y},{name:"data_failed",handler:v},{name:"loaded_images",handler:b},{name:"DOMLoaded",handler:E},{name:"destroy",handler:S}].filter(function(e){return null!=e.handler});if(e.length){var t=e.map(function(e){var t;return null===(t=x.current)||void 0===t||t.addEventListener(e.name,e.handler),function(){var t;null===(t=x.current)||void 0===t||t.removeEventListener(e.name,e.handler)}});return function(){t.forEach(function(e){return e()})}}},[h,u,c,d,m,y,v,b,E,S]),{View:a().createElement("div",p({style:t,ref:k},T)),play:I,stop:D,pause:P,setSpeed:R,goToAndStop:O,goToAndPlay:N,setDirection:M,playSegments:L,setSubframe:F,getDuration:B,destroy:U,animationContainerRef:k,animationLoaded:A,animationItem:x.current}};function S(e){var t=e.getBoundingClientRect(),r=t.top,i=t.height;return(window.innerHeight-r)/(window.innerHeight+i)}function T(e,t,r){var i=e.getBoundingClientRect(),n=i.top;return{x:(t-i.left)/i.width,y:(r-n)/i.height}}var C=function(e){var t=e.wrapperRef,r=e.animationItem,i=e.mode,n=e.actions;(0,s.useEffect)(function(){var e=t.current;if(e&&r&&n.length){r.stop();var s=function(){var t=null,i=function(){var i=S(e),s=n.find(function(e){var t=e.visibility;return t&&i>=t[0]&&i<=t[1]});if(s){if("seek"===s.type&&s.visibility&&2===s.frames.length){var a=s.frames[0]+Math.ceil((i-s.visibility[0])/(s.visibility[1]-s.visibility[0])*s.frames[1]);r.goToAndStop(a-r.firstFrame-1,!0)}"loop"===s.type&&(null===t?(r.playSegments(s.frames,!0),t=s.frames):t!==s.frames?(r.playSegments(s.frames,!0),t=s.frames):r.isPaused&&(r.playSegments(s.frames,!0),t=s.frames)),"play"===s.type&&r.isPaused&&(r.resetSegments(!0),r.play()),"stop"===s.type&&r.goToAndStop(s.frames[0]-r.firstFrame-1,!0)}};return document.addEventListener("scroll",i),function(){document.removeEventListener("scroll",i)}},a=function(){var t=function(t,i){var s=t,a=i;if(-1!==s&&-1!==a){var o=T(e,s,a);s=o.x,a=o.y}var l=n.find(function(e){var t=e.position;return t&&Array.isArray(t.x)&&Array.isArray(t.y)?s>=t.x[0]&&s<=t.x[1]&&a>=t.y[0]&&a<=t.y[1]:!(!t||Number.isNaN(t.x)||Number.isNaN(t.y))&&s===t.x&&a===t.y});if(l){if("seek"===l.type&&l.position&&Array.isArray(l.position.x)&&Array.isArray(l.position.y)&&2===l.frames.length){var h=(s-l.position.x[0])/(l.position.x[1]-l.position.x[0]),u=(a-l.position.y[0])/(l.position.y[1]-l.position.y[0]);r.playSegments(l.frames,!0),r.goToAndStop(Math.ceil((h+u)/2*(l.frames[1]-l.frames[0])),!0)}"loop"===l.type&&r.playSegments(l.frames,!0),"play"===l.type&&(r.isPaused&&r.resetSegments(!1),r.playSegments(l.frames)),"stop"===l.type&&r.goToAndStop(l.frames[0],!0)}},i=function(e){t(e.clientX,e.clientY)},s=function(){t(-1,-1)};return e.addEventListener("mousemove",i),e.addEventListener("mouseout",s),function(){e.removeEventListener("mousemove",i),e.removeEventListener("mouseout",s)}};switch(i){case"scroll":return s();case"cursor":return a()}}},[i,r])},A=function(e){var t=e.actions,r=e.mode,i=e.lottieObj,n=i.animationItem,s=i.View;return C({actions:t,animationItem:n,mode:r,wrapperRef:i.animationContainerRef}),s},_=["style","interactivity"],x=function(e){var t,r,i,n=e.style,a=e.interactivity,o=E(f(e,_),n),l=o.View,h=o.play,u=o.stop,c=o.pause,d=o.setSpeed,p=o.goToAndStop,m=o.goToAndPlay,g=o.setDirection,y=o.playSegments,v=o.setSubframe,b=o.getDuration,w=o.destroy,S=o.animationContainerRef,T=o.animationLoaded,C=o.animationItem;return(0,s.useEffect)(function(){e.lottieRef&&(e.lottieRef.current={play:h,stop:u,pause:c,setSpeed:d,goToAndPlay:m,goToAndStop:p,setDirection:g,playSegments:y,setSubframe:v,getDuration:b,destroy:w,animationContainerRef:S,animationLoaded:T,animationItem:C})},[null===(t=e.lottieRef)||void 0===t?void 0:t.current]),A({lottieObj:{View:l,play:h,stop:u,pause:c,setSpeed:d,goToAndStop:p,goToAndPlay:m,setDirection:g,playSegments:y,setSubframe:v,getDuration:b,destroy:w,animationContainerRef:S,animationLoaded:T,animationItem:C},actions:null!==(r=null==a?void 0:a.actions)&&void 0!==r?r:[],mode:null!==(i=null==a?void 0:a.mode)&&void 0!==i?i:"scroll"})}},496:function(module,exports,__webpack_require__){"undefined"!=typeof document&&"undefined"!=typeof navigator&&function(e,t){module.exports=t()}(0,function(){"use strict";var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(e){_useWebWorker=!!e},getWebWorker=function(){return _useWebWorker},setLocationHref=function(e){locationHref=e},getLocationHref=function(){return locationHref};function createTag(e){return document.createElement(e)}function extendPrototype(e,t){var r,i,n=e.length;for(r=0;r<n;r+=1)for(var s in i=e[r].prototype)Object.prototype.hasOwnProperty.call(i,s)&&(t.prototype[s]=i[s])}function getDescriptor(e,t){return Object.getOwnPropertyDescriptor(e,t)}function createProxyFunction(e){function t(){}return t.prototype=e,t}var audioControllerFactory=function(){function e(e){this.audios=[],this.audioFactory=e,this._volume=1,this._isMuted=!1}return e.prototype={addAudio:function(e){this.audios.push(e)},pause:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].pause()},resume:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].resume()},setRate:function(e){var t,r=this.audios.length;for(t=0;t<r;t+=1)this.audios[t].setRate(e)},createAudio:function(e){return this.audioFactory?this.audioFactory(e):window.Howl?new window.Howl({src:[e]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(e){this.audioFactory=e},setVolume:function(e){this._volume=e,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var e,t=this.audios.length;for(e=0;e<t;e+=1)this.audios[e].volume(this._volume*(this._isMuted?0:1))}},function(){return new e}}(),createTypedArray=function(){function e(e,t){var r,i=0,n=[];switch(e){case"int16":case"uint8c":r=1;break;default:r=1.1}for(i=0;i<t;i+=1)n.push(r);return n}function t(t,r){return"float32"===t?new Float32Array(r):"int16"===t?new Int16Array(r):"uint8c"===t?new Uint8ClampedArray(r):e(t,r)}return"function"==typeof Uint8ClampedArray&&"function"==typeof Float32Array?t:e}();function createSizedArray(e){return Array.apply(null,{length:e})}function _typeof$6(e){return(_typeof$6="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),_shouldRoundValues=!1,bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};function ProjectInterface$1(){return{}}(function(){var e,t=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],r=t.length;for(e=0;e<r;e+=1)BMMath[t[e]]=Math[t[e]]})(),BMMath.random=Math.random,BMMath.abs=function(e){if("object"===_typeof$6(e)&&e.length){var t,r=createSizedArray(e.length),i=e.length;for(t=0;t<i;t+=1)r[t]=Math.abs(e[t]);return r}return Math.abs(e)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function roundValues(e){_shouldRoundValues=!!e}function bmRnd(e){return _shouldRoundValues?Math.round(e):e}function styleDiv(e){e.style.position="absolute",e.style.top=0,e.style.left=0,e.style.display="block",e.style.transformOrigin="0 0",e.style.webkitTransformOrigin="0 0",e.style.backfaceVisibility="visible",e.style.webkitBackfaceVisibility="visible",e.style.transformStyle="preserve-3d",e.style.webkitTransformStyle="preserve-3d",e.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(e,t,r,i){this.type=e,this.currentTime=t,this.totalTime=r,this.direction=i<0?-1:1}function BMCompleteEvent(e,t){this.type=e,this.direction=t<0?-1:1}function BMCompleteLoopEvent(e,t,r,i){this.type=e,this.currentLoop=r,this.totalLoops=t,this.direction=i<0?-1:1}function BMSegmentStartEvent(e,t,r){this.type=e,this.firstFrame=t,this.totalFrames=r}function BMDestroyEvent(e,t){this.type=e,this.target=t}function BMRenderFrameErrorEvent(e,t){this.type="renderFrameError",this.nativeError=e,this.currentTime=t}function BMConfigErrorEvent(e){this.type="configError",this.nativeError=e}function BMAnimationConfigErrorEvent(e,t){this.type=e,this.nativeError=t}var createElementID=function(){var e=0;return function(){return e+=1,idPrefix$1+"__lottie_element_"+e}}();function HSVtoRGB(e,t,r){var i,n,s,a,o,l,h,u;switch(a=Math.floor(6*e),o=6*e-a,l=r*(1-t),h=r*(1-o*t),u=r*(1-(1-o)*t),a%6){case 0:i=r,n=u,s=l;break;case 1:i=h,n=r,s=l;break;case 2:i=l,n=r,s=u;break;case 3:i=l,n=h,s=r;break;case 4:i=u,n=l,s=r;break;case 5:i=r,n=l,s=h}return[i,n,s]}function RGBtoHSV(e,t,r){var i,n=Math.max(e,t,r),s=Math.min(e,t,r),a=n-s,o=0===n?0:a/n,l=n/255;switch(n){case s:i=0;break;case e:i=(t-r+a*(t<r?6:0))/(6*a);break;case t:i=(r-e+2*a)/(6*a);break;case r:i=(e-t+4*a)/(6*a)}return[i,o,l]}function addSaturationToRGB(e,t){var r=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return r[1]+=t,r[1]>1?r[1]=1:r[1]<=0&&(r[1]=0),HSVtoRGB(r[0],r[1],r[2])}function addBrightnessToRGB(e,t){var r=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return r[2]+=t,r[2]>1?r[2]=1:r[2]<0&&(r[2]=0),HSVtoRGB(r[0],r[1],r[2])}function addHueToRGB(e,t){var r=RGBtoHSV(255*e[0],255*e[1],255*e[2]);return r[0]+=t/360,r[0]>1?r[0]-=1:r[0]<0&&(r[0]+=1),HSVtoRGB(r[0],r[1],r[2])}var rgbToHex=function(){var e,t,r=[];for(e=0;e<256;e+=1)t=e.toString(16),r[e]=1===t.length?"0"+t:t;return function(e,t,i){return e<0&&(e=0),t<0&&(t=0),i<0&&(i=0),"#"+r[e]+r[t]+r[i]}}(),setSubframeEnabled=function(e){subframeEnabled=!!e},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(e){expressionsPlugin=e},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(e){expressionsInterfaces=e},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(e){defaultCurveSegments=e},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(e){idPrefix$1=e},getIdPrefix=function(){return idPrefix$1};function createNS(e){return document.createElementNS(svgNS,e)}function _typeof$5(e){return(_typeof$5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var dataManager=function(){var e,t,r=1,i=[],n={onmessage:function(){},postMessage:function(t){e({data:t})}},s={postMessage:function(e){n.onmessage({data:e})}};function a(t){if(window.Worker&&window.Blob&&getWebWorker()){var r=new Blob(["var _workerSelf = self; self.onmessage = ",t.toString()],{type:"text/javascript"});return new Worker(URL.createObjectURL(r))}return e=t,n}function o(){t||((t=a(function(e){function t(){function e(t,r){var a,o,l,h,u,c,d=t.length;for(o=0;o<d;o+=1)if("ks"in(a=t[o])&&!a.completed){if(a.completed=!0,a.hasMask){var f=a.masksProperties;for(l=0,h=f.length;l<h;l+=1)if(f[l].pt.k.i)s(f[l].pt.k);else for(u=0,c=f[l].pt.k.length;u<c;u+=1)f[l].pt.k[u].s&&s(f[l].pt.k[u].s[0]),f[l].pt.k[u].e&&s(f[l].pt.k[u].e[0])}0===a.ty?(a.layers=i(a.refId,r),e(a.layers,r)):4===a.ty?n(a.shapes):5===a.ty&&p(a)}}function t(t,r){if(t){var n=0,s=t.length;for(n=0;n<s;n+=1)1===t[n].t&&(t[n].data.layers=i(t[n].data.refId,r),e(t[n].data.layers,r))}}function r(e,t){for(var r=0,i=t.length;r<i;){if(t[r].id===e)return t[r];r+=1}return null}function i(e,t){var i=r(e,t);return i?i.layers.__used?JSON.parse(JSON.stringify(i.layers)):(i.layers.__used=!0,i.layers):null}function n(e){var t,r,i;for(t=e.length-1;t>=0;t-=1)if("sh"===e[t].ty){if(e[t].ks.k.i)s(e[t].ks.k);else for(r=0,i=e[t].ks.k.length;r<i;r+=1)e[t].ks.k[r].s&&s(e[t].ks.k[r].s[0]),e[t].ks.k[r].e&&s(e[t].ks.k[r].e[0])}else"gr"===e[t].ty&&n(e[t].it)}function s(e){var t,r=e.i.length;for(t=0;t<r;t+=1)e.i[t][0]+=e.v[t][0],e.i[t][1]+=e.v[t][1],e.o[t][0]+=e.v[t][0],e.o[t][1]+=e.v[t][1]}function a(e,t){var r=t?t.split("."):[100,100,100];return e[0]>r[0]||!(r[0]>e[0])&&(e[1]>r[1]||!(r[1]>e[1])&&(e[2]>r[2]||!(r[2]>e[2])&&null))}var o=function(){var e=[4,4,14];function t(e){var t=e.t.d;e.t.d={k:[{s:t,t:0}]}}function r(e){var r,i=e.length;for(r=0;r<i;r+=1)5===e[r].ty&&t(e[r])}return function(t){if(a(e,t.v)&&(r(t.layers),t.assets)){var i,n=t.assets.length;for(i=0;i<n;i+=1)t.assets[i].layers&&r(t.assets[i].layers)}}}(),l=function(){var e=[4,7,99];return function(t){if(t.chars&&!a(e,t.v)){var r,i=t.chars.length;for(r=0;r<i;r+=1){var s=t.chars[r];s.data&&s.data.shapes&&(n(s.data.shapes),s.data.ip=0,s.data.op=99999,s.data.st=0,s.data.sr=1,s.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},t.chars[r].t||(s.data.shapes.push({ty:"no"}),s.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),h=function(){var e=[5,7,15];function t(e){var t=e.t.p;"number"==typeof t.a&&(t.a={a:0,k:t.a}),"number"==typeof t.p&&(t.p={a:0,k:t.p}),"number"==typeof t.r&&(t.r={a:0,k:t.r})}function r(e){var r,i=e.length;for(r=0;r<i;r+=1)5===e[r].ty&&t(e[r])}return function(t){if(a(e,t.v)&&(r(t.layers),t.assets)){var i,n=t.assets.length;for(i=0;i<n;i+=1)t.assets[i].layers&&r(t.assets[i].layers)}}}(),u=function(){var e=[4,1,9];function t(e){var r,i,n,s=e.length;for(r=0;r<s;r+=1)if("gr"===e[r].ty)t(e[r].it);else if("fl"===e[r].ty||"st"===e[r].ty){if(e[r].c.k&&e[r].c.k[0].i)for(i=0,n=e[r].c.k.length;i<n;i+=1)e[r].c.k[i].s&&(e[r].c.k[i].s[0]/=255,e[r].c.k[i].s[1]/=255,e[r].c.k[i].s[2]/=255,e[r].c.k[i].s[3]/=255),e[r].c.k[i].e&&(e[r].c.k[i].e[0]/=255,e[r].c.k[i].e[1]/=255,e[r].c.k[i].e[2]/=255,e[r].c.k[i].e[3]/=255);else e[r].c.k[0]/=255,e[r].c.k[1]/=255,e[r].c.k[2]/=255,e[r].c.k[3]/=255}}function r(e){var r,i=e.length;for(r=0;r<i;r+=1)4===e[r].ty&&t(e[r].shapes)}return function(t){if(a(e,t.v)&&(r(t.layers),t.assets)){var i,n=t.assets.length;for(i=0;i<n;i+=1)t.assets[i].layers&&r(t.assets[i].layers)}}}(),c=function(){var e=[4,4,18];function t(e){var r,i,n;for(r=e.length-1;r>=0;r-=1)if("sh"===e[r].ty){if(e[r].ks.k.i)e[r].ks.k.c=e[r].closed;else for(i=0,n=e[r].ks.k.length;i<n;i+=1)e[r].ks.k[i].s&&(e[r].ks.k[i].s[0].c=e[r].closed),e[r].ks.k[i].e&&(e[r].ks.k[i].e[0].c=e[r].closed)}else"gr"===e[r].ty&&t(e[r].it)}function r(e){var r,i,n,s,a,o,l=e.length;for(i=0;i<l;i+=1){if((r=e[i]).hasMask){var h=r.masksProperties;for(n=0,s=h.length;n<s;n+=1)if(h[n].pt.k.i)h[n].pt.k.c=h[n].cl;else for(a=0,o=h[n].pt.k.length;a<o;a+=1)h[n].pt.k[a].s&&(h[n].pt.k[a].s[0].c=h[n].cl),h[n].pt.k[a].e&&(h[n].pt.k[a].e[0].c=h[n].cl)}4===r.ty&&t(r.shapes)}}return function(t){if(a(e,t.v)&&(r(t.layers),t.assets)){var i,n=t.assets.length;for(i=0;i<n;i+=1)t.assets[i].layers&&r(t.assets[i].layers)}}}();function d(r){r.__complete||(u(r),o(r),l(r),h(r),c(r),e(r.layers,r.assets),t(r.chars,r.assets),r.__complete=!0)}function p(e){0===e.t.a.length&&e.t.p}var f={};return f.completeData=d,f.checkColors=u,f.checkChars=l,f.checkPathProperties=h,f.checkShapes=c,f.completeLayers=e,f}if(s.dataManager||(s.dataManager=t()),s.assetLoader||(s.assetLoader=function(){function e(e){var t=e.getResponseHeader("content-type");return t&&"json"===e.responseType&&-1!==t.indexOf("json")||e.response&&"object"===_typeof$5(e.response)?e.response:e.response&&"string"==typeof e.response?JSON.parse(e.response):e.responseText?JSON.parse(e.responseText):null}return{load:function(t,r,i,n){var s,a=new XMLHttpRequest;try{a.responseType="json"}catch(e){}a.onreadystatechange=function(){if(4===a.readyState){if(200===a.status)i(s=e(a));else try{s=e(a),i(s)}catch(e){n&&n(e)}}};try{a.open("GET",t,!0)}catch(e){a.open("GET",r+"/"+t,!0)}a.send()}}}()),"loadAnimation"===e.data.type)s.assetLoader.load(e.data.path,e.data.fullPath,function(t){s.dataManager.completeData(t),s.postMessage({id:e.data.id,payload:t,status:"success"})},function(){s.postMessage({id:e.data.id,status:"error"})});else if("complete"===e.data.type){var r=e.data.animation;s.dataManager.completeData(r),s.postMessage({id:e.data.id,payload:r,status:"success"})}else"loadData"===e.data.type&&s.assetLoader.load(e.data.path,e.data.fullPath,function(t){s.postMessage({id:e.data.id,payload:t,status:"success"})},function(){s.postMessage({id:e.data.id,status:"error"})})})).onmessage=function(e){var t=e.data,r=t.id,n=i[r];i[r]=null,"success"===t.status?n.onComplete(t.payload):n.onError&&n.onError()})}function l(e,t){var n="processId_"+(r+=1);return i[n]={onComplete:e,onError:t},n}return{loadAnimation:function(e,r,i){o();var n=l(r,i);t.postMessage({type:"loadAnimation",path:e,fullPath:window.location.origin+window.location.pathname,id:n})},loadData:function(e,r,i){o();var n=l(r,i);t.postMessage({type:"loadData",path:e,fullPath:window.location.origin+window.location.pathname,id:n})},completeAnimation:function(e,r,i){o();var n=l(r,i);t.postMessage({type:"complete",animation:e,id:n})}}}(),ImagePreloader=function(){var e=function(){var e=createTag("canvas");e.width=1,e.height=1;var t=e.getContext("2d");return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),e}();function t(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function r(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function i(e,t,r){var i="";if(e.e)i=e.p;else if(t){var n=e.p;-1!==n.indexOf("images/")&&(n=n.split("/")[1]),i=t+n}else i=r+(e.u?e.u:"")+e.p;return i}function n(e){var t=0,r=setInterval((function(){(e.getBBox().width||t>500)&&(this._imageLoaded(),clearInterval(r)),t+=1}).bind(this),50)}function s(t){var r=i(t,this.assetsPath,this.path),n=createNS("image");isSafari?this.testImageLoaded(n):n.addEventListener("load",this._imageLoaded,!1),n.addEventListener("error",(function(){s.img=e,this._imageLoaded()}).bind(this),!1),n.setAttributeNS("http://www.w3.org/1999/xlink","href",r),this._elementHelper.append?this._elementHelper.append(n):this._elementHelper.appendChild(n);var s={img:n,assetData:t};return s}function a(t){var r=i(t,this.assetsPath,this.path),n=createTag("img");n.crossOrigin="anonymous",n.addEventListener("load",this._imageLoaded,!1),n.addEventListener("error",(function(){s.img=e,this._imageLoaded()}).bind(this),!1),n.src=r;var s={img:n,assetData:t};return s}function o(e){var t={assetData:e},r=i(e,this.assetsPath,this.path);return dataManager.loadData(r,(function(e){t.img=e,this._footageLoaded()}).bind(this),(function(){t.img={},this._footageLoaded()}).bind(this)),t}function l(e,t){this.imagesLoadedCb=t;var r,i=e.length;for(r=0;r<i;r+=1)e[r].layers||(e[r].t&&"seq"!==e[r].t?3===e[r].t&&(this.totalFootages+=1,this.images.push(this.createFootageData(e[r]))):(this.totalImages+=1,this.images.push(this._createImageData(e[r]))))}function h(e){this.path=e||""}function u(e){this.assetsPath=e||""}function c(e){for(var t=0,r=this.images.length;t<r;){if(this.images[t].assetData===e)return this.images[t].img;t+=1}return null}function d(){this.imagesLoadedCb=null,this.images.length=0}function p(){return this.totalImages===this.loadedAssets}function f(){return this.totalFootages===this.loadedFootagesCount}function m(e,t){"svg"===e?(this._elementHelper=t,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function g(){this._imageLoaded=t.bind(this),this._footageLoaded=r.bind(this),this.testImageLoaded=n.bind(this),this.createFootageData=o.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return g.prototype={loadAssets:l,setAssetsPath:u,setPath:h,loadedImages:p,loadedFootages:f,destroy:d,getAsset:c,createImgData:a,createImageData:s,imageLoaded:t,footageLoaded:r,setCacheType:m},g}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(e,t){if(this._cbs[e])for(var r=this._cbs[e],i=0;i<r.length;i+=1)r[i](t)},addEventListener:function(e,t){return this._cbs[e]||(this._cbs[e]=[]),this._cbs[e].push(t),(function(){this.removeEventListener(e,t)}).bind(this)},removeEventListener:function(e,t){if(t){if(this._cbs[e]){for(var r=0,i=this._cbs[e].length;r<i;)this._cbs[e][r]===t&&(this._cbs[e].splice(r,1),r-=1,i-=1),r+=1;this._cbs[e].length||(this._cbs[e]=null)}}else this._cbs[e]=null}};var markerParser=function(){function e(e){for(var t,r=e.split("\r\n"),i={},n=0,s=0;s<r.length;s+=1)2===(t=r[s].split(":")).length&&(i[t[0]]=t[1].trim(),n+=1);if(0===n)throw Error();return i}return function(t){for(var r=[],i=0;i<t.length;i+=1){var n=t[i],s={time:n.tm,duration:n.dr};try{s.payload=JSON.parse(t[i].cm)}catch(r){try{s.payload=e(t[i].cm)}catch(e){s.payload={name:t[i].cm}}}r.push(s)}return r}}(),ProjectInterface=function(){function e(e){this.compositions.push(e)}return function(){function t(e){for(var t=0,r=this.compositions.length;t<r;){if(this.compositions[t].data&&this.compositions[t].data.nm===e)return this.compositions[t].prepareFrame&&this.compositions[t].data.xt&&this.compositions[t].prepareFrame(this.currentFrame),this.compositions[t].compInterface;t+=1}return null}return t.compositions=[],t.currentFrame=0,t.registerComposition=e,t}}(),renderers={},registerRenderer=function(e,t){renderers[e]=t};function getRenderer(e){return renderers[e]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var e in renderers)if(renderers[e])return e;return""}function _typeof$4(e){return(_typeof$4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(e){(e.wrapper||e.container)&&(this.wrapper=e.wrapper||e.container);var t="svg";e.animType?t=e.animType:e.renderer&&(t=e.renderer);var r=getRenderer(t);this.renderer=new r(this,e.rendererSettings),this.imagePreloader.setCacheType(t,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=t,""===e.loop||null===e.loop||void 0===e.loop||!0===e.loop?this.loop=!0:!1===e.loop?this.loop=!1:this.loop=parseInt(e.loop,10),this.autoplay=!("autoplay"in e)||e.autoplay,this.name=e.name?e.name:"",this.autoloadSegments=!Object.prototype.hasOwnProperty.call(e,"autoloadSegments")||e.autoloadSegments,this.assetsPath=e.assetsPath,this.initialSegment=e.initialSegment,e.audioFactory&&this.audioController.setAudioFactory(e.audioFactory),e.animationData?this.setupAnimation(e.animationData):e.path&&(-1!==e.path.lastIndexOf("\\")?this.path=e.path.substr(0,e.path.lastIndexOf("\\")+1):this.path=e.path.substr(0,e.path.lastIndexOf("/")+1),this.fileName=e.path.substr(e.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(e.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(e){dataManager.completeAnimation(e,this.configAnimation)},AnimationItem.prototype.setData=function(e,t){t&&"object"!==_typeof$4(t)&&(t=JSON.parse(t));var r={wrapper:e,animationData:t},i=e.attributes;r.path=i.getNamedItem("data-animation-path")?i.getNamedItem("data-animation-path").value:i.getNamedItem("data-bm-path")?i.getNamedItem("data-bm-path").value:i.getNamedItem("bm-path")?i.getNamedItem("bm-path").value:"",r.animType=i.getNamedItem("data-anim-type")?i.getNamedItem("data-anim-type").value:i.getNamedItem("data-bm-type")?i.getNamedItem("data-bm-type").value:i.getNamedItem("bm-type")?i.getNamedItem("bm-type").value:i.getNamedItem("data-bm-renderer")?i.getNamedItem("data-bm-renderer").value:i.getNamedItem("bm-renderer")?i.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var n=i.getNamedItem("data-anim-loop")?i.getNamedItem("data-anim-loop").value:i.getNamedItem("data-bm-loop")?i.getNamedItem("data-bm-loop").value:i.getNamedItem("bm-loop")?i.getNamedItem("bm-loop").value:"";"false"===n?r.loop=!1:"true"===n?r.loop=!0:""!==n&&(r.loop=parseInt(n,10));var s=i.getNamedItem("data-anim-autoplay")?i.getNamedItem("data-anim-autoplay").value:i.getNamedItem("data-bm-autoplay")?i.getNamedItem("data-bm-autoplay").value:!i.getNamedItem("bm-autoplay")||i.getNamedItem("bm-autoplay").value;r.autoplay="false"!==s,r.name=i.getNamedItem("data-name")?i.getNamedItem("data-name").value:i.getNamedItem("data-bm-name")?i.getNamedItem("data-bm-name").value:i.getNamedItem("bm-name")?i.getNamedItem("bm-name").value:"","false"===(i.getNamedItem("data-anim-prerender")?i.getNamedItem("data-anim-prerender").value:i.getNamedItem("data-bm-prerender")?i.getNamedItem("data-bm-prerender").value:i.getNamedItem("bm-prerender")?i.getNamedItem("bm-prerender").value:"")&&(r.prerender=!1),r.path?this.setParams(r):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(e){e.op>this.animationData.op&&(this.animationData.op=e.op,this.totalFrames=Math.floor(e.op-this.animationData.ip));var t,r,i=this.animationData.layers,n=i.length,s=e.layers,a=s.length;for(r=0;r<a;r+=1)for(t=0;t<n;){if(i[t].id===s[r].id){i[t]=s[r];break}t+=1}if((e.chars||e.fonts)&&(this.renderer.globalData.fontManager.addChars(e.chars),this.renderer.globalData.fontManager.addFonts(e.fonts,this.renderer.globalData.defs)),e.assets)for(t=0,n=e.assets.length;t<n;t+=1)this.animationData.assets.push(e.assets[t]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(e){this.animationData=e;var t=getExpressionsPlugin();t&&t.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var e=this.animationData.segments;if(!e||0===e.length||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var t=e.shift();this.timeCompleted=t.time*this.frameRate;var r=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(r,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){this.animationData.segments||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(e){if(this.renderer)try{this.animationData=e,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(e),e.assets||(e.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(e.assets),this.markers=markerParser(e.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(e){this.triggerConfigError(e)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||"canvas"!==this.renderer.rendererType)&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var e=getExpressionsPlugin();e&&e.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(e,t){var r="number"==typeof e?e:void 0,i="number"==typeof t?t:void 0;this.renderer.updateContainerSize(r,i)},AnimationItem.prototype.setSubframe=function(e){this.isSubframeEnabled=!!e},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!1!==this.isLoaded&&this.renderer)try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(e){this.triggerRenderFrameError(e)}},AnimationItem.prototype.play=function(e){(!e||this.name===e)&&!0===this.isPaused&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(e){e&&this.name!==e||!1!==this.isPaused||(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(e){e&&this.name!==e||(!0===this.isPaused?this.play():this.pause())},AnimationItem.prototype.stop=function(e){e&&this.name!==e||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(e){for(var t,r=0;r<this.markers.length;r+=1)if((t=this.markers[r]).payload&&t.payload.name===e)return t;return null},AnimationItem.prototype.goToAndStop=function(e,t,r){if(!r||this.name===r){if(isNaN(Number(e))){var i=this.getMarkerData(e);i&&this.goToAndStop(i.time,!0)}else t?this.setCurrentRawFrameValue(e):this.setCurrentRawFrameValue(e*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(e,t,r){if(!r||this.name===r){var i=Number(e);if(isNaN(i)){var n=this.getMarkerData(e);n&&(n.duration?this.playSegments([n.time,n.time+n.duration],!0):this.goToAndStop(n.time,!0))}else this.goToAndStop(i,t,r);this.play()}},AnimationItem.prototype.advanceTime=function(e){if(!0!==this.isPaused&&!1!==this.isLoaded){var t=this.currentRawFrame+e*this.frameModifier,r=!1;t>=this.totalFrames-1&&this.frameModifier>0?this.loop&&this.playCount!==this.loop?t>=this.totalFrames?(this.playCount+=1,this.checkSegments(t%this.totalFrames)||(this.setCurrentRawFrameValue(t%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(t):this.checkSegments(t>this.totalFrames?t%this.totalFrames:0)||(r=!0,t=this.totalFrames-1):t<0?this.checkSegments(t%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&!0!==this.loop)?(this.setCurrentRawFrameValue(this.totalFrames+t%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(r=!0,t=0)):this.setCurrentRawFrameValue(t),r&&(this.setCurrentRawFrameValue(t),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(e,t){this.playCount=0,e[1]<e[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=e[0]-e[1],this.timeCompleted=this.totalFrames,this.firstFrame=e[1],this.setCurrentRawFrameValue(this.totalFrames-.001-t)):e[1]>e[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=e[1]-e[0],this.timeCompleted=this.totalFrames,this.firstFrame=e[0],this.setCurrentRawFrameValue(.001+t)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(e,t){var r=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<e?r=e:this.currentRawFrame+this.firstFrame>t&&(r=t-e)),this.firstFrame=e,this.totalFrames=t-e,this.timeCompleted=this.totalFrames,-1!==r&&this.goToAndStop(r,!0)},AnimationItem.prototype.playSegments=function(e,t){if(t&&(this.segments.length=0),"object"===_typeof$4(e[0])){var r,i=e.length;for(r=0;r<i;r+=1)this.segments.push(e[r])}else this.segments.push(e);this.segments.length&&t&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(e){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),e&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(e){return!!this.segments.length&&(this.adjustSegment(this.segments.shift(),e),!0)},AnimationItem.prototype.destroy=function(e){(!e||this.name===e)&&this.renderer&&(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(e){this.currentRawFrame=e,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(e){this.playSpeed=e,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(e){this.playDirection=e<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(e){this.loop=e},AnimationItem.prototype.setVolume=function(e,t){t&&this.name!==t||this.audioController.setVolume(e)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(e){e&&this.name!==e||this.audioController.mute()},AnimationItem.prototype.unmute=function(e){e&&this.name!==e||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(e){var t="";if(e.e)t=e.p;else if(this.assetsPath){var r=e.p;-1!==r.indexOf("images/")&&(r=r.split("/")[1]),t=this.assetsPath+r}else t=this.path+(e.u?e.u:"")+e.p;return t},AnimationItem.prototype.getAssetData=function(e){for(var t=0,r=this.assets.length;t<r;){if(e===this.assets[t].id)return this.assets[t];t+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(e){return e?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(e,t,r){try{this.renderer.getElementByPath(e).updateDocumentData(t,r)}catch(e){}},AnimationItem.prototype.trigger=function(e){if(this._cbs&&this._cbs[e])switch(e){case"enterFrame":this.triggerEvent(e,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(e,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(e,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(e,new BMCompleteEvent(e,this.frameMult));break;case"segmentStart":this.triggerEvent(e,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(e,new BMDestroyEvent(e,this));break;default:this.triggerEvent(e)}"enterFrame"===e&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(e,this.currentFrame,this.totalFrames,this.frameMult)),"loopComplete"===e&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(e,this.loop,this.playCount,this.frameMult)),"complete"===e&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(e,this.frameMult)),"segmentStart"===e&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(e,this.firstFrame,this.totalFrames)),"destroy"===e&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(e,this))},AnimationItem.prototype.triggerRenderFrameError=function(e){var t=new BMRenderFrameErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)},AnimationItem.prototype.triggerConfigError=function(e){var t=new BMConfigErrorEvent(e,this.currentFrame);this.triggerEvent("error",t),this.onError&&this.onError.call(this,t)};var animationManager=function(){var e={},t=[],r=0,i=0,n=0,s=!0,a=!1;function o(e){for(var r=0,n=e.target;r<i;)t[r].animation!==n||(t.splice(r,1),r-=1,i-=1,n.isPaused||c()),r+=1}function l(e,r){if(!e)return null;for(var n=0;n<i;){if(t[n].elem===e&&null!==t[n].elem)return t[n].animation;n+=1}var s=new AnimationItem;return d(s,e),s.setData(e,r),s}function h(){var e,r=t.length,i=[];for(e=0;e<r;e+=1)i.push(t[e].animation);return i}function u(){n+=1,_()}function c(){n-=1}function d(e,r){e.addEventListener("destroy",o),e.addEventListener("_active",u),e.addEventListener("_idle",c),t.push({elem:r,animation:e}),i+=1}function p(e){var t=new AnimationItem;return d(t,null),t.setParams(e),t}function f(e,r){var n;for(n=0;n<i;n+=1)t[n].animation.setSpeed(e,r)}function m(e,r){var n;for(n=0;n<i;n+=1)t[n].animation.setDirection(e,r)}function g(e){var r;for(r=0;r<i;r+=1)t[r].animation.play(e)}function y(e){var o,l=e-r;for(o=0;o<i;o+=1)t[o].animation.advanceTime(l);r=e,n&&!a?window.requestAnimationFrame(y):s=!0}function v(e){r=e,window.requestAnimationFrame(y)}function b(e){var r;for(r=0;r<i;r+=1)t[r].animation.pause(e)}function w(e,r,n){var s;for(s=0;s<i;s+=1)t[s].animation.goToAndStop(e,r,n)}function E(e){var r;for(r=0;r<i;r+=1)t[r].animation.stop(e)}function S(e){var r;for(r=0;r<i;r+=1)t[r].animation.togglePause(e)}function T(e){var r;for(r=i-1;r>=0;r-=1)t[r].animation.destroy(e)}function C(e,t,r){var i,n=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),s=n.length;for(i=0;i<s;i+=1)r&&n[i].setAttribute("data-bm-type",r),l(n[i],e);if(t&&0===s){r||(r="svg");var a=document.getElementsByTagName("body")[0];a.innerText="";var o=createTag("div");o.style.width="100%",o.style.height="100%",o.setAttribute("data-bm-type",r),a.appendChild(o),l(o,e)}}function A(){var e;for(e=0;e<i;e+=1)t[e].animation.resize()}function _(){!a&&n&&s&&(window.requestAnimationFrame(v),s=!1)}function x(){a=!0}function k(){a=!1,_()}function I(e,r){var n;for(n=0;n<i;n+=1)t[n].animation.setVolume(e,r)}function D(e){var r;for(r=0;r<i;r+=1)t[r].animation.mute(e)}function P(e){var r;for(r=0;r<i;r+=1)t[r].animation.unmute(e)}return e.registerAnimation=l,e.loadAnimation=p,e.setSpeed=f,e.setDirection=m,e.play=g,e.pause=b,e.stop=E,e.togglePause=S,e.searchAnimations=C,e.resize=A,e.goToAndStop=w,e.destroy=T,e.freeze=x,e.unfreeze=k,e.setVolume=I,e.mute=D,e.unmute=P,e.getRegisteredAnimations=h,e}(),BezierFactory=function(){var e={};e.getBezierEasing=r;var t={};function r(e,r,i,n,s){var a=s||("bez_"+e+"_"+r+"_"+i+"_"+n).replace(/\./g,"p");if(t[a])return t[a];var o=new y([e,r,i,n]);return t[a]=o,o}var i=4,n=.001,s=1e-7,a=10,o=11,l=.1,h="function"==typeof Float32Array;function u(e,t){return 1-3*t+3*e}function c(e,t){return 3*t-6*e}function d(e){return 3*e}function p(e,t,r){return((u(t,r)*e+c(t,r))*e+d(t))*e}function f(e,t,r){return 3*u(t,r)*e*e+2*c(t,r)*e+d(t)}function m(e,t,r,i,n){var o,l,h=0;do(o=p(l=t+(r-t)/2,i,n)-e)>0?r=l:t=l;while(Math.abs(o)>s&&++h<a);return l}function g(e,t,r,n){for(var s=0;s<i;++s){var a=f(t,r,n);if(0===a)break;var o=p(t,r,n)-e;t-=o/a}return t}function y(e){this._p=e,this._mSampleValues=h?new Float32Array(o):Array(o),this._precomputed=!1,this.get=this.get.bind(this)}return y.prototype={get:function(e){var t=this._p[0],r=this._p[1],i=this._p[2],n=this._p[3];return(this._precomputed||this._precompute(),t===r&&i===n)?e:0===e?0:1===e?1:p(this._getTForX(e),r,n)},_precompute:function(){var e=this._p[0],t=this._p[1],r=this._p[2],i=this._p[3];this._precomputed=!0,(e!==t||r!==i)&&this._calcSampleValues()},_calcSampleValues:function(){for(var e=this._p[0],t=this._p[2],r=0;r<o;++r)this._mSampleValues[r]=p(r*l,e,t)},_getTForX:function(e){for(var t=this._p[0],r=this._p[2],i=this._mSampleValues,s=0,a=1,h=o-1;a!==h&&i[a]<=e;++a)s+=l;var u=s+(e-i[--a])/(i[a+1]-i[a])*l,c=f(u,t,r);return c>=n?g(e,u,t,r):0===c?u:m(e,s,s+l,t,r)}},e}(),pooling=function(){return{double:function(e){return e.concat(createSizedArray(e.length))}}}(),poolFactory=function(){return function(e,t,r){var i=0,n=e,s=createSizedArray(n);return{newElement:function(){var e;return i?(i-=1,e=s[i]):e=t(),e},release:function(e){i===n&&(s=pooling.double(s),n*=2),r&&r(e),s[i]=e,i+=1}}}}(),bezierLengthPool=function(){return poolFactory(8,function(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}})}(),segmentsLengthPool=function(){return poolFactory(8,function(){return{lengths:[],totalLength:0}},function(e){var t,r=e.lengths.length;for(t=0;t<r;t+=1)bezierLengthPool.release(e.lengths[t]);e.lengths.length=0})}();function bezFunction(){var e=Math;function t(e,t,r,i,n,s){var a=e*i+t*n+r*s-n*i-s*e-r*t;return a>-.001&&a<.001}function r(r,i,n,s,a,o,l,h,u){if(0===n&&0===o&&0===u)return t(r,i,s,a,l,h);var c,d=e.sqrt(e.pow(s-r,2)+e.pow(a-i,2)+e.pow(o-n,2)),p=e.sqrt(e.pow(l-r,2)+e.pow(h-i,2)+e.pow(u-n,2)),f=e.sqrt(e.pow(l-s,2)+e.pow(h-a,2)+e.pow(u-o,2));return(c=d>p?d>f?d-p-f:f-p-d:f>p?f-p-d:p-d-f)>-.0001&&c<1e-4}var i=function(){return function(e,t,r,i){var n,s,a,o,l,h,u=getDefaultCurveSegments(),c=0,d=[],p=[],f=bezierLengthPool.newElement();for(n=0,a=r.length;n<u;n+=1){for(s=0,l=n/(u-1),h=0;s<a;s+=1)o=bmPow(1-l,3)*e[s]+3*bmPow(1-l,2)*l*r[s]+3*(1-l)*bmPow(l,2)*i[s]+bmPow(l,3)*t[s],d[s]=o,null!==p[s]&&(h+=bmPow(d[s]-p[s],2)),p[s]=d[s];h&&(c+=h=bmSqrt(h)),f.percents[n]=l,f.lengths[n]=c}return f.addedLength=c,f}}();function n(e){var t,r=segmentsLengthPool.newElement(),n=e.c,s=e.v,a=e.o,o=e.i,l=e._length,h=r.lengths,u=0;for(t=0;t<l-1;t+=1)h[t]=i(s[t],s[t+1],a[t],o[t+1]),u+=h[t].addedLength;return n&&l&&(h[t]=i(s[t],s[0],a[t],o[0]),u+=h[t].addedLength),r.totalLength=u,r}function s(e){this.segmentLength=0,this.points=Array(e)}function a(e,t){this.partialLength=e,this.point=t}var o=function(){var e={};return function(r,i,n,o){var l=(r[0]+"_"+r[1]+"_"+i[0]+"_"+i[1]+"_"+n[0]+"_"+n[1]+"_"+o[0]+"_"+o[1]).replace(/\./g,"p");if(!e[l]){var h,u,c,d,p,f,m,g=getDefaultCurveSegments(),y=0,v=null;2===r.length&&(r[0]!==i[0]||r[1]!==i[1])&&t(r[0],r[1],i[0],i[1],r[0]+n[0],r[1]+n[1])&&t(r[0],r[1],i[0],i[1],i[0]+o[0],i[1]+o[1])&&(g=2);var b=new s(g);for(h=0,c=n.length;h<g;h+=1){for(u=0,m=createSizedArray(c),p=h/(g-1),f=0;u<c;u+=1)d=bmPow(1-p,3)*r[u]+3*bmPow(1-p,2)*p*(r[u]+n[u])+3*(1-p)*bmPow(p,2)*(i[u]+o[u])+bmPow(p,3)*i[u],m[u]=d,null!==v&&(f+=bmPow(m[u]-v[u],2));y+=f=bmSqrt(f),b.points[h]=new a(f,m),v=m}b.segmentLength=y,e[l]=b}return e[l]}}();function l(e,t){var r=t.percents,i=t.lengths,n=r.length,s=bmFloor((n-1)*e),a=e*t.addedLength,o=0;if(s===n-1||0===s||a===i[s])return r[s];for(var l=i[s]>a?-1:1,h=!0;h;)if(i[s]<=a&&i[s+1]>a?(o=(a-i[s])/(i[s+1]-i[s]),h=!1):s+=l,s<0||s>=n-1){if(s===n-1)return r[s];h=!1}return r[s]+(r[s+1]-r[s])*o}function h(t,r,i,n,s,a){var o=l(s,a),h=1-o;return[e.round((h*h*h*t[0]+(o*h*h+h*o*h+h*h*o)*i[0]+(o*o*h+h*o*o+o*h*o)*n[0]+o*o*o*r[0])*1e3)/1e3,e.round((h*h*h*t[1]+(o*h*h+h*o*h+h*h*o)*i[1]+(o*o*h+h*o*o+o*h*o)*n[1]+o*o*o*r[1])*1e3)/1e3]}var u=createTypedArray("float32",8);return{getSegmentsLength:n,getNewSegment:function(t,r,i,n,s,a,o){s<0?s=0:s>1&&(s=1);var h,c=l(s,o),d=l(a=a>1?1:a,o),p=t.length,f=1-c,m=1-d,g=f*f*f,y=c*f*f*3,v=c*c*f*3,b=c*c*c,w=f*f*m,E=c*f*m+f*c*m+f*f*d,S=c*c*m+f*c*d+c*f*d,T=c*c*d,C=f*m*m,A=c*m*m+f*d*m+f*m*d,_=c*d*m+f*d*d+c*m*d,x=c*d*d,k=m*m*m,I=d*m*m+m*d*m+m*m*d,D=d*d*m+m*d*d+d*m*d,P=d*d*d;for(h=0;h<p;h+=1)u[4*h]=e.round((g*t[h]+y*i[h]+v*n[h]+b*r[h])*1e3)/1e3,u[4*h+1]=e.round((w*t[h]+E*i[h]+S*n[h]+T*r[h])*1e3)/1e3,u[4*h+2]=e.round((C*t[h]+A*i[h]+_*n[h]+x*r[h])*1e3)/1e3,u[4*h+3]=e.round((k*t[h]+I*i[h]+D*n[h]+P*r[h])*1e3)/1e3;return u},getPointInSegment:h,buildBezierData:o,pointOnLine2D:t,pointOnLine3D:r}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(e,t){var r,i,n,s,a,o=this.offsetTime;"multidimensional"===this.propType&&(g=createTypedArray("float32",this.pv.length));for(var l=t.lastIndex,h=l,u=this.keyframes.length-1,c=!0;c;){if(y=this.keyframes[h],v=this.keyframes[h+1],h===u-1&&e>=v.t-o){y.h&&(y=v),l=0;break}if(v.t-o>e){l=h;break}h<u-1?h+=1:(l=0,c=!1)}b=this.keyframesMetadata[h]||{};var d=v.t-o,p=y.t-o;if(y.to){b.bezierData||(b.bezierData=bez.buildBezierData(y.s,v.s||y.e,y.to,y.ti));var f=b.bezierData;if(e>=d||e<p){var m=e>=d?f.points.length-1:0;for(w=0,E=f.points[m].point.length;w<E;w+=1)g[w]=f.points[m].point[w]}else{b.__fnct?A=b.__fnct:(A=BezierFactory.getBezierEasing(y.o.x,y.o.y,y.i.x,y.i.y,y.n).get,b.__fnct=A),S=A((e-p)/(d-p));var g,y,v,b,w,E,S,T,C,A,_,x,k=f.segmentLength*S,I=t.lastFrame<e&&t._lastKeyframeIndex===h?t._lastAddedLength:0;for(C=t.lastFrame<e&&t._lastKeyframeIndex===h?t._lastPoint:0,c=!0,T=f.points.length;c;){if(I+=f.points[C].partialLength,0===k||0===S||C===f.points.length-1){for(w=0,E=f.points[C].point.length;w<E;w+=1)g[w]=f.points[C].point[w];break}if(k>=I&&k<I+f.points[C+1].partialLength){for(w=0,x=(k-I)/f.points[C+1].partialLength,E=f.points[C].point.length;w<E;w+=1)g[w]=f.points[C].point[w]+(f.points[C+1].point[w]-f.points[C].point[w])*x;break}C<T-1?C+=1:c=!1}t._lastPoint=C,t._lastAddedLength=I-f.points[C].partialLength,t._lastKeyframeIndex=h}}else if(u=y.s.length,_=v.s||y.e,this.sh&&1!==y.h)e>=d?(g[0]=_[0],g[1]=_[1],g[2]=_[2]):e<=p?(g[0]=y.s[0],g[1]=y.s[1],g[2]=y.s[2]):quaternionToEuler(g,slerp(createQuaternion(y.s),createQuaternion(_),(e-p)/(d-p)));else for(h=0;h<u;h+=1)1!==y.h&&(e>=d?S=1:e<p?S=0:(y.o.x.constructor===Array?(b.__fnct||(b.__fnct=[]),b.__fnct[h]?A=b.__fnct[h]:(r=void 0===y.o.x[h]?y.o.x[0]:y.o.x[h],i=void 0===y.o.y[h]?y.o.y[0]:y.o.y[h],n=void 0===y.i.x[h]?y.i.x[0]:y.i.x[h],s=void 0===y.i.y[h]?y.i.y[0]:y.i.y[h],A=BezierFactory.getBezierEasing(r,i,n,s).get,b.__fnct[h]=A)):b.__fnct?A=b.__fnct:(r=y.o.x,i=y.o.y,n=y.i.x,s=y.i.y,A=BezierFactory.getBezierEasing(r,i,n,s).get,y.keyframeMetadata=A),S=A((e-p)/(d-p)))),_=v.s||y.e,a=1===y.h?y.s[h]:y.s[h]+(_[h]-y.s[h])*S,"multidimensional"===this.propType?g[h]=a:g=a;return t.lastIndex=l,g}function slerp(e,t,r){var i,n,s,a,o,l=[],h=e[0],u=e[1],c=e[2],d=e[3],p=t[0],f=t[1],m=t[2],g=t[3];return(n=h*p+u*f+c*m+d*g)<0&&(n=-n,p=-p,f=-f,m=-m,g=-g),1-n>1e-6?(s=Math.sin(i=Math.acos(n)),a=Math.sin((1-r)*i)/s,o=Math.sin(r*i)/s):(a=1-r,o=r),l[0]=a*h+o*p,l[1]=a*u+o*f,l[2]=a*c+o*m,l[3]=a*d+o*g,l}function quaternionToEuler(e,t){var r=t[0],i=t[1],n=t[2],s=t[3],a=Math.atan2(2*i*s-2*r*n,1-2*i*i-2*n*n),o=Math.asin(2*r*i+2*n*s),l=Math.atan2(2*r*s-2*i*n,1-2*r*r-2*n*n);e[0]=a/degToRads,e[1]=o/degToRads,e[2]=l/degToRads}function createQuaternion(e){var t=e[0]*degToRads,r=e[1]*degToRads,i=e[2]*degToRads,n=Math.cos(t/2),s=Math.cos(r/2),a=Math.cos(i/2),o=Math.sin(t/2),l=Math.sin(r/2),h=Math.sin(i/2),u=n*s*a-o*l*h;return[o*l*a+n*s*h,o*s*a+n*l*h,n*l*a-o*s*h,u]}function getValueAtCurrentTime(){var e=this.comp.renderedFrame-this.offsetTime,t=this.keyframes[0].t-this.offsetTime,r=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(e===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=r&&e>=r||this._caching.lastFrame<t&&e<t))){this._caching.lastFrame>=e&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var i=this.interpolateValue(e,this._caching);this.pv=i}return this._caching.lastFrame=e,this.pv}function setVValue(e){var t;if("unidimensional"===this.propType)t=e*this.mult,mathAbs(this.v-t)>1e-5&&(this.v=t,this._mdf=!0);else for(var r=0,i=this.v.length;r<i;)t=e[r]*this.mult,mathAbs(this.v[r]-t)>1e-5&&(this.v[r]=t,this._mdf=!0),r+=1}function processEffectsSequence(){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var e,t=this.effectsSequence.length,r=this.kf?this.pv:this.data.k;for(e=0;e<t;e+=1)r=this.effectsSequence[e](r);this.setVValue(r),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function ValueProperty(e,t,r,i){this.propType="unidimensional",this.mult=r||1,this.data=t,this.v=r?t.k*r:t.k,this.pv=t.k,this._mdf=!1,this.elem=e,this.container=i,this.comp=e.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(e,t,r,i){this.propType="multidimensional",this.mult=r||1,this.data=t,this._mdf=!1,this.elem=e,this.container=i,this.comp=e.comp,this.k=!1,this.kf=!1,this.frameId=-1;var n,s=t.k.length;for(n=0,this.v=createTypedArray("float32",s),this.pv=createTypedArray("float32",s),this.vel=createTypedArray("float32",s);n<s;n+=1)this.v[n]=t.k[n]*this.mult,this.pv[n]=t.k[n];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(e,t,r,i){this.propType="unidimensional",this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=t,this.mult=r||1,this.elem=e,this.container=i,this.comp=e.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(e,t,r,i){this.propType="multidimensional";var n,s,a,o,l,h=t.k.length;for(n=0;n<h-1;n+=1)t.k[n].to&&t.k[n].s&&t.k[n+1]&&t.k[n+1].s&&(s=t.k[n].s,a=t.k[n+1].s,o=t.k[n].to,l=t.k[n].ti,(2===s.length&&!(s[0]===a[0]&&s[1]===a[1])&&bez.pointOnLine2D(s[0],s[1],a[0],a[1],s[0]+o[0],s[1]+o[1])&&bez.pointOnLine2D(s[0],s[1],a[0],a[1],a[0]+l[0],a[1]+l[1])||3===s.length&&!(s[0]===a[0]&&s[1]===a[1]&&s[2]===a[2])&&bez.pointOnLine3D(s[0],s[1],s[2],a[0],a[1],a[2],s[0]+o[0],s[1]+o[1],s[2]+o[2])&&bez.pointOnLine3D(s[0],s[1],s[2],a[0],a[1],a[2],a[0]+l[0],a[1]+l[1],a[2]+l[2]))&&(t.k[n].to=null,t.k[n].ti=null),s[0]===a[0]&&s[1]===a[1]&&0===o[0]&&0===o[1]&&0===l[0]&&0===l[1]&&(2===s.length||s[2]===a[2]&&0===o[2]&&0===l[2])&&(t.k[n].to=null,t.k[n].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=t,this.keyframes=t.k,this.keyframesMetadata=[],this.offsetTime=e.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=r||1,this.elem=e,this.container=i,this.comp=e.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var u=t.k[0].s.length;for(n=0,this.v=createTypedArray("float32",u),this.pv=createTypedArray("float32",u);n<u;n+=1)this.v[n]=initFrame,this.pv[n]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",u)},this.addEffect=addEffect}var PropertyFactory=function(){return{getProp:function(e,t,r,i,n){var s;if(t.sid&&(t=e.globalData.slotManager.getProp(t)),t.k.length){if("number"==typeof t.k[0])s=new MultiDimensionalProperty(e,t,i,n);else switch(r){case 0:s=new KeyframedValueProperty(e,t,i,n);break;case 1:s=new KeyframedMultidimensionalProperty(e,t,i,n)}}else s=new ValueProperty(e,t,i,n);return s.effectsSequence.length&&n.addDynamicProperty(s),s}}}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&(this.dynamicProperties.push(e),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var e,t=this.dynamicProperties.length;for(e=0;e<t;e+=1)this.dynamicProperties[e].getValue(),this.dynamicProperties[e]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(e){this.container=e,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){return poolFactory(8,function(){return createTypedArray("float32",2)})}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(e,t){this.c=e,this.setLength(t);for(var r=0;r<t;)this.v[r]=pointPool.newElement(),this.o[r]=pointPool.newElement(),this.i[r]=pointPool.newElement(),r+=1},ShapePath.prototype.setLength=function(e){for(;this._maxLength<e;)this.doubleArrayLength();this._length=e},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(e,t,r,i,n){var s;switch(this._length=Math.max(this._length,i+1),this._length>=this._maxLength&&this.doubleArrayLength(),r){case"v":s=this.v;break;case"i":s=this.i;break;case"o":s=this.o;break;default:s=[]}s[i]&&(!s[i]||n)||(s[i]=pointPool.newElement()),s[i][0]=e,s[i][1]=t},ShapePath.prototype.setTripleAt=function(e,t,r,i,n,s,a,o){this.setXYAt(e,t,"v",a,o),this.setXYAt(r,i,"o",a,o),this.setXYAt(n,s,"i",a,o)},ShapePath.prototype.reverse=function(){var e,t=new ShapePath;t.setPathData(this.c,this._length);var r=this.v,i=this.o,n=this.i,s=0;this.c&&(t.setTripleAt(r[0][0],r[0][1],n[0][0],n[0][1],i[0][0],i[0][1],0,!1),s=1);var a=this._length-1,o=this._length;for(e=s;e<o;e+=1)t.setTripleAt(r[a][0],r[a][1],n[a][0],n[a][1],i[a][0],i[a][1],e,!1),a-=1;return t},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function e(e){var r,i=t.newElement(),n=void 0===e._length?e.v.length:e._length;for(i.setLength(n),i.c=e.c,r=0;r<n;r+=1)i.setTripleAt(e.v[r][0],e.v[r][1],e.o[r][0],e.o[r][1],e.i[r][0],e.i[r][1],r);return i}var t=poolFactory(4,function(){return new ShapePath},function(e){var t,r=e._length;for(t=0;t<r;t+=1)pointPool.release(e.v[t]),pointPool.release(e.i[t]),pointPool.release(e.o[t]),e.v[t]=null,e.i[t]=null,e.o[t]=null;e._length=0,e.c=!1});return t.clone=e,t}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(e){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=e,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var e;for(e=0;e<this._length;e+=1)shapePool.release(this.shapes[e]);this._length=0};var shapeCollectionPool=function(){var e={newShapeCollection:n,release:s},t=0,r=4,i=createSizedArray(4);function n(){var e;return t?(t-=1,e=i[t]):e=new ShapeCollection,e}function s(e){var n,s=e._length;for(n=0;n<s;n+=1)shapePool.release(e.shapes[n]);e._length=0,t===r&&(i=pooling.double(i),r*=2),i[t]=e,t+=1}return e}(),ShapePropertyFactory=function(){var e=-999999;function t(e,t,r){var i=r.lastIndex,n=this.keyframes;if(e<n[0].t-this.offsetTime)s=n[0].s[0],o=!0,i=0;else if(e>=n[n.length-1].t-this.offsetTime)s=n[n.length-1].s?n[n.length-1].s[0]:n[n.length-2].e[0],o=!0;else{for(var s,a,o,l,h,u,c,d,p,f,m,g,y,v=i,b=n.length-1,w=!0;w&&(f=n[v],!((m=n[v+1]).t-this.offsetTime>e));)v<b-1?v+=1:w=!1;g=this.keyframesMetadata[v]||{},o=1===f.h,i=v,o||(e>=m.t-this.offsetTime?d=1:e<f.t-this.offsetTime?d=0:(g.__fnct?y=g.__fnct:(y=BezierFactory.getBezierEasing(f.o.x,f.o.y,f.i.x,f.i.y).get,g.__fnct=y),d=y((e-(f.t-this.offsetTime))/(m.t-this.offsetTime-(f.t-this.offsetTime)))),a=m.s?m.s[0]:f.e[0]),s=f.s[0]}for(l=0,u=t._length,c=s.i[0].length,r.lastIndex=i;l<u;l+=1)for(h=0;h<c;h+=1)p=o?s.i[l][h]:s.i[l][h]+(a.i[l][h]-s.i[l][h])*d,t.i[l][h]=p,p=o?s.o[l][h]:s.o[l][h]+(a.o[l][h]-s.o[l][h])*d,t.o[l][h]=p,p=o?s.v[l][h]:s.v[l][h]+(a.v[l][h]-s.v[l][h])*d,t.v[l][h]=p}function r(){var t=this.comp.renderedFrame-this.offsetTime,r=this.keyframes[0].t-this.offsetTime,i=this.keyframes[this.keyframes.length-1].t-this.offsetTime,n=this._caching.lastFrame;return n!==e&&(n<r&&t<r||n>i&&t>i)||(this._caching.lastIndex=n<t?this._caching.lastIndex:0,this.interpolateShape(t,this.pv,this._caching)),this._caching.lastFrame=t,this.pv}function i(){this.paths=this.localShapeCollection}function n(e,t){if(e._length!==t._length||e.c!==t.c)return!1;var r,i=e._length;for(r=0;r<i;r+=1)if(e.v[r][0]!==t.v[r][0]||e.v[r][1]!==t.v[r][1]||e.o[r][0]!==t.o[r][0]||e.o[r][1]!==t.o[r][1]||e.i[r][0]!==t.i[r][0]||e.i[r][1]!==t.i[r][1])return!1;return!0}function s(e){n(this.v,e)||(this.v=shapePool.clone(e),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function a(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1,e=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var e,t,r=this.effectsSequence.length;for(t=0;t<r;t+=1)e=this.effectsSequence[t](e);this.setVValue(e),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function o(e,t,r){this.propType="shape",this.comp=e.comp,this.container=e,this.elem=e,this.data=t,this.k=!1,this.kf=!1,this._mdf=!1;var n=3===r?t.pt.k:t.ks.k;this.v=shapePool.clone(n),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=i,this.effectsSequence=[]}function l(e){this.effectsSequence.push(e),this.container.addDynamicProperty(this)}function h(t,n,s){this.propType="shape",this.comp=t.comp,this.elem=t,this.container=t,this.offsetTime=t.data.st,this.keyframes=3===s?n.pt.k:n.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var a=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,a),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=e,this.reset=i,this._caching={lastFrame:e,lastIndex:0},this.effectsSequence=[r.bind(this)]}o.prototype.interpolateShape=t,o.prototype.getValue=a,o.prototype.setVValue=s,o.prototype.addEffect=l,h.prototype.getValue=a,h.prototype.interpolateShape=t,h.prototype.setVValue=s,h.prototype.addEffect=l;var u=function(){var e=roundCorner;function t(e,t){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=t.d,this.elem=e,this.comp=e.comp,this.frameId=-1,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return t.prototype={reset:i,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var t=this.p.v[0],r=this.p.v[1],i=this.s.v[0]/2,n=this.s.v[1]/2,s=3!==this.d,a=this.v;a.v[0][0]=t,a.v[0][1]=r-n,a.v[1][0]=s?t+i:t-i,a.v[1][1]=r,a.v[2][0]=t,a.v[2][1]=r+n,a.v[3][0]=s?t-i:t+i,a.v[3][1]=r,a.i[0][0]=s?t-i*e:t+i*e,a.i[0][1]=r-n,a.i[1][0]=s?t+i:t-i,a.i[1][1]=r-n*e,a.i[2][0]=s?t+i*e:t-i*e,a.i[2][1]=r+n,a.i[3][0]=s?t-i:t+i,a.i[3][1]=r+n*e,a.o[0][0]=s?t+i*e:t-i*e,a.o[0][1]=r-n,a.o[1][0]=s?t+i:t-i,a.o[1][1]=r+n*e,a.o[2][0]=s?t-i*e:t+i*e,a.o[2][1]=r+n,a.o[3][0]=s?t-i:t+i,a.o[3][1]=r-n*e}},extendPrototype([DynamicPropertyContainer],t),t}(),c=function(){function e(e,t){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=e,this.comp=e.comp,this.data=t,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),1===t.sy?(this.ir=PropertyFactory.getProp(e,t.ir,0,0,this),this.is=PropertyFactory.getProp(e,t.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(e,t.pt,0,0,this),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,degToRads,this),this.or=PropertyFactory.getProp(e,t.or,0,0,this),this.os=PropertyFactory.getProp(e,t.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return e.prototype={reset:i,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var e,t,r,i,n=2*Math.floor(this.pt.v),s=2*Math.PI/n,a=!0,o=this.or.v,l=this.ir.v,h=this.os.v,u=this.is.v,c=2*Math.PI*o/(2*n),d=2*Math.PI*l/(2*n),p=-Math.PI/2;p+=this.r.v;var f=3===this.data.d?-1:1;for(e=0,this.v._length=0;e<n;e+=1){t=a?o:l,r=a?h:u,i=a?c:d;var m=t*Math.cos(p),g=t*Math.sin(p),y=0===m&&0===g?0:g/Math.sqrt(m*m+g*g),v=0===m&&0===g?0:-m/Math.sqrt(m*m+g*g);m+=+this.p.v[0],g+=+this.p.v[1],this.v.setTripleAt(m,g,m-y*i*r*f,g-v*i*r*f,m+y*i*r*f,g+v*i*r*f,e,!0),a=!a,p+=s*f}},convertPolygonToPath:function(){var e,t=Math.floor(this.pt.v),r=2*Math.PI/t,i=this.or.v,n=this.os.v,s=2*Math.PI*i/(4*t),a=-(.5*Math.PI),o=3===this.data.d?-1:1;for(a+=this.r.v,this.v._length=0,e=0;e<t;e+=1){var l=i*Math.cos(a),h=i*Math.sin(a),u=0===l&&0===h?0:h/Math.sqrt(l*l+h*h),c=0===l&&0===h?0:-l/Math.sqrt(l*l+h*h);l+=+this.p.v[0],h+=+this.p.v[1],this.v.setTripleAt(l,h,l-u*s*n*o,h-c*s*n*o,l+u*s*n*o,h+c*s*n*o,e,!0),a+=r*o}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],e),e}(),d=function(){function e(e,t){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=e,this.comp=e.comp,this.frameId=-1,this.d=t.d,this.initDynamicPropertyContainer(e),this.p=PropertyFactory.getProp(e,t.p,1,0,this),this.s=PropertyFactory.getProp(e,t.s,1,0,this),this.r=PropertyFactory.getProp(e,t.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return e.prototype={convertRectToPath:function(){var e=this.p.v[0],t=this.p.v[1],r=this.s.v[0]/2,i=this.s.v[1]/2,n=bmMin(r,i,this.r.v),s=n*(1-roundCorner);this.v._length=0,2===this.d||1===this.d?(this.v.setTripleAt(e+r,t-i+n,e+r,t-i+n,e+r,t-i+s,0,!0),this.v.setTripleAt(e+r,t+i-n,e+r,t+i-s,e+r,t+i-n,1,!0),0!==n?(this.v.setTripleAt(e+r-n,t+i,e+r-n,t+i,e+r-s,t+i,2,!0),this.v.setTripleAt(e-r+n,t+i,e-r+s,t+i,e-r+n,t+i,3,!0),this.v.setTripleAt(e-r,t+i-n,e-r,t+i-n,e-r,t+i-s,4,!0),this.v.setTripleAt(e-r,t-i+n,e-r,t-i+s,e-r,t-i+n,5,!0),this.v.setTripleAt(e-r+n,t-i,e-r+n,t-i,e-r+s,t-i,6,!0),this.v.setTripleAt(e+r-n,t-i,e+r-s,t-i,e+r-n,t-i,7,!0)):(this.v.setTripleAt(e-r,t+i,e-r+s,t+i,e-r,t+i,2),this.v.setTripleAt(e-r,t-i,e-r,t-i+s,e-r,t-i,3))):(this.v.setTripleAt(e+r,t-i+n,e+r,t-i+s,e+r,t-i+n,0,!0),0!==n?(this.v.setTripleAt(e+r-n,t-i,e+r-n,t-i,e+r-s,t-i,1,!0),this.v.setTripleAt(e-r+n,t-i,e-r+s,t-i,e-r+n,t-i,2,!0),this.v.setTripleAt(e-r,t-i+n,e-r,t-i+n,e-r,t-i+s,3,!0),this.v.setTripleAt(e-r,t+i-n,e-r,t+i-s,e-r,t+i-n,4,!0),this.v.setTripleAt(e-r+n,t+i,e-r+n,t+i,e-r+s,t+i,5,!0),this.v.setTripleAt(e+r-n,t+i,e+r-s,t+i,e+r-n,t+i,6,!0),this.v.setTripleAt(e+r,t+i-n,e+r,t+i-n,e+r,t+i-s,7,!0)):(this.v.setTripleAt(e-r,t-i,e-r+s,t-i,e-r,t-i,1,!0),this.v.setTripleAt(e-r,t+i,e-r,t+i-s,e-r,t+i,2,!0),this.v.setTripleAt(e+r,t+i,e+r-s,t+i,e+r,t+i,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:i},extendPrototype([DynamicPropertyContainer],e),e}();function p(e,t,r){var i;return 3===r||4===r?i=(3===r?t.pt:t.ks).k.length?new h(e,t,r):new o(e,t,r):5===r?i=new d(e,t):6===r?i=new u(e,t):7===r&&(i=new c(e,t)),i.k&&e.addDynamicProperty(i),i}function f(){return o}function m(){return h}var g={};return g.getShapeProp=p,g.getConstructorFunction=f,g.getKeyframedConstructorFunction=m,g}(),Matrix=function(){var e=Math.cos,t=Math.sin,r=Math.tan,i=Math.round;function n(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function s(r){if(0===r)return this;var i=e(r),n=t(r);return this._t(i,-n,0,0,n,i,0,0,0,0,1,0,0,0,0,1)}function a(r){if(0===r)return this;var i=e(r),n=t(r);return this._t(1,0,0,0,0,i,-n,0,0,n,i,0,0,0,0,1)}function o(r){if(0===r)return this;var i=e(r),n=t(r);return this._t(i,0,n,0,0,1,0,0,-n,0,i,0,0,0,0,1)}function l(r){if(0===r)return this;var i=e(r),n=t(r);return this._t(i,-n,0,0,n,i,0,0,0,0,1,0,0,0,0,1)}function h(e,t){return this._t(1,t,e,1,0,0)}function u(e,t){return this.shear(r(e),r(t))}function c(i,n){var s=e(n),a=t(n);return this._t(s,a,0,0,-a,s,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,r(i),1,0,0,0,0,1,0,0,0,0,1)._t(s,-a,0,0,a,s,0,0,0,0,1,0,0,0,0,1)}function d(e,t,r){return(r||0===r||(r=1),1===e&&1===t&&1===r)?this:this._t(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1)}function p(e,t,r,i,n,s,a,o,l,h,u,c,d,p,f,m){return this.props[0]=e,this.props[1]=t,this.props[2]=r,this.props[3]=i,this.props[4]=n,this.props[5]=s,this.props[6]=a,this.props[7]=o,this.props[8]=l,this.props[9]=h,this.props[10]=u,this.props[11]=c,this.props[12]=d,this.props[13]=p,this.props[14]=f,this.props[15]=m,this}function f(e,t,r){return(r=r||0,0!==e||0!==t||0!==r)?this._t(1,0,0,0,0,1,0,0,0,0,1,0,e,t,r,1):this}function m(e,t,r,i,n,s,a,o,l,h,u,c,d,p,f,m){var g=this.props;if(1===e&&0===t&&0===r&&0===i&&0===n&&1===s&&0===a&&0===o&&0===l&&0===h&&1===u&&0===c)return g[12]=g[12]*e+g[15]*d,g[13]=g[13]*s+g[15]*p,g[14]=g[14]*u+g[15]*f,g[15]*=m,this._identityCalculated=!1,this;var y=g[0],v=g[1],b=g[2],w=g[3],E=g[4],S=g[5],T=g[6],C=g[7],A=g[8],_=g[9],x=g[10],k=g[11],I=g[12],D=g[13],P=g[14],R=g[15];return g[0]=y*e+v*n+b*l+w*d,g[1]=y*t+v*s+b*h+w*p,g[2]=y*r+v*a+b*u+w*f,g[3]=y*i+v*o+b*c+w*m,g[4]=E*e+S*n+T*l+C*d,g[5]=E*t+S*s+T*h+C*p,g[6]=E*r+S*a+T*u+C*f,g[7]=E*i+S*o+T*c+C*m,g[8]=A*e+_*n+x*l+k*d,g[9]=A*t+_*s+x*h+k*p,g[10]=A*r+_*a+x*u+k*f,g[11]=A*i+_*o+x*c+k*m,g[12]=I*e+D*n+P*l+R*d,g[13]=I*t+D*s+P*h+R*p,g[14]=I*r+D*a+P*u+R*f,g[15]=I*i+D*o+P*c+R*m,this._identityCalculated=!1,this}function g(e){var t=e.props;return this.transform(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function y(){return this._identityCalculated||(this._identity=!(1!==this.props[0]||0!==this.props[1]||0!==this.props[2]||0!==this.props[3]||0!==this.props[4]||1!==this.props[5]||0!==this.props[6]||0!==this.props[7]||0!==this.props[8]||0!==this.props[9]||1!==this.props[10]||0!==this.props[11]||0!==this.props[12]||0!==this.props[13]||0!==this.props[14]||1!==this.props[15]),this._identityCalculated=!0),this._identity}function v(e){for(var t=0;t<16;){if(e.props[t]!==this.props[t])return!1;t+=1}return!0}function b(e){var t;for(t=0;t<16;t+=1)e.props[t]=this.props[t];return e}function w(e){var t;for(t=0;t<16;t+=1)this.props[t]=e[t]}function E(e,t,r){return{x:e*this.props[0]+t*this.props[4]+r*this.props[8]+this.props[12],y:e*this.props[1]+t*this.props[5]+r*this.props[9]+this.props[13],z:e*this.props[2]+t*this.props[6]+r*this.props[10]+this.props[14]}}function S(e,t,r){return e*this.props[0]+t*this.props[4]+r*this.props[8]+this.props[12]}function T(e,t,r){return e*this.props[1]+t*this.props[5]+r*this.props[9]+this.props[13]}function C(e,t,r){return e*this.props[2]+t*this.props[6]+r*this.props[10]+this.props[14]}function A(){var e=this.props[0]*this.props[5]-this.props[1]*this.props[4],t=this.props[5]/e,r=-this.props[1]/e,i=-this.props[4]/e,n=this.props[0]/e,s=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/e,a=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/e,o=new Matrix;return o.props[0]=t,o.props[1]=r,o.props[4]=i,o.props[5]=n,o.props[12]=s,o.props[13]=a,o}function _(e){return this.getInverseMatrix().applyToPointArray(e[0],e[1],e[2]||0)}function x(e){var t,r=e.length,i=[];for(t=0;t<r;t+=1)i[t]=_(e[t]);return i}function k(e,t,r){var i=createTypedArray("float32",6);if(this.isIdentity())i[0]=e[0],i[1]=e[1],i[2]=t[0],i[3]=t[1],i[4]=r[0],i[5]=r[1];else{var n=this.props[0],s=this.props[1],a=this.props[4],o=this.props[5],l=this.props[12],h=this.props[13];i[0]=e[0]*n+e[1]*a+l,i[1]=e[0]*s+e[1]*o+h,i[2]=t[0]*n+t[1]*a+l,i[3]=t[0]*s+t[1]*o+h,i[4]=r[0]*n+r[1]*a+l,i[5]=r[0]*s+r[1]*o+h}return i}function I(e,t,r){return this.isIdentity()?[e,t,r]:[e*this.props[0]+t*this.props[4]+r*this.props[8]+this.props[12],e*this.props[1]+t*this.props[5]+r*this.props[9]+this.props[13],e*this.props[2]+t*this.props[6]+r*this.props[10]+this.props[14]]}function D(e,t){if(this.isIdentity())return e+","+t;var r=this.props;return Math.round((e*r[0]+t*r[4]+r[12])*100)/100+","+Math.round((e*r[1]+t*r[5]+r[13])*100)/100}function P(){for(var e=0,t=this.props,r="matrix3d(",n=1e4;e<16;)r+=i(t[e]*n)/n+(15===e?")":","),e+=1;return r}function R(e){var t=1e4;return e<1e-6&&e>0||e>-.000001&&e<0?i(e*t)/t:e}function N(){var e=this.props;return"matrix("+R(e[0])+","+R(e[1])+","+R(e[4])+","+R(e[5])+","+R(e[12])+","+R(e[13])+")"}return function(){this.reset=n,this.rotate=s,this.rotateX=a,this.rotateY=o,this.rotateZ=l,this.skew=u,this.skewFromAxis=c,this.shear=h,this.scale=d,this.setTransform=p,this.translate=f,this.transform=m,this.multiply=g,this.applyToPoint=E,this.applyToX=S,this.applyToY=T,this.applyToZ=C,this.applyToPointArray=I,this.applyToTriplePoints=k,this.applyToPointStringified=D,this.toCSS=P,this.to2dCSS=N,this.clone=b,this.cloneFromProps=w,this.equals=v,this.inversePoints=x,this.inversePoint=_,this.getInverseMatrix=A,this._t=this.transform,this.isIdentity=y,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(e){return(_typeof$3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var lottie={},standalone="__[STANDALONE]__",animationData="__[ANIMATIONDATA]__",renderer="";function setLocation(e){setLocationHref(e)}function searchAnimations(){!0===standalone?animationManager.searchAnimations(animationData,standalone,renderer):animationManager.searchAnimations()}function setSubframeRendering(e){setSubframeEnabled(e)}function setPrefix(e){setIdPrefix(e)}function loadAnimation(e){return!0===standalone&&(e.animationData=JSON.parse(animationData)),animationManager.loadAnimation(e)}function setQuality(e){if("string"==typeof e)switch(e){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10)}else!isNaN(e)&&e>1&&setDefaultCurveSegments(e);getDefaultCurveSegments()>=50?roundValues(!1):roundValues(!0)}function inBrowser(){return"undefined"!=typeof navigator}function installPlugin(e,t){"expressions"===e&&setExpressionsPlugin(t)}function getFactory(e){switch(e){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}function checkReady(){"complete"===document.readyState&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(e){for(var t=queryString.split("&"),r=0;r<t.length;r+=1){var i=t[r].split("=");if(decodeURIComponent(i[0])==e)return decodeURIComponent(i[1])}return null}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.13.0";var queryString="";if(standalone){var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{"object"!==_typeof$3(exports)&&__webpack_require__.amdO}catch(err){}var ShapeModifiers=function(){var e={},t={};function r(e,r){t[e]||(t[e]=r)}function i(e,r,i){return new t[e](r,i)}return e.registerModifier=r,e.getModifier=i,e}();function ShapeModifier(){}function TrimModifier(){}function PuckerAndBloatModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(e){if(!this.closed){e.sh.container.addDynamicProperty(e.sh);var t={shape:e.sh,data:e,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(t),this.addShapeToModifier(t),this._isAnimated&&e.setAsAnimated()}},ShapeModifier.prototype.init=function(e,t){this.shapes=[],this.elem=e,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier),extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(e,t){this.s=PropertyFactory.getProp(e,t.s,0,.01,this),this.e=PropertyFactory.getProp(e,t.e,0,.01,this),this.o=PropertyFactory.getProp(e,t.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=t.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(e){e.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(e,t,r,i,n){var s,a,o=[];t<=1?o.push({s:e,e:t}):e>=1?o.push({s:e-1,e:t-1}):(o.push({s:e,e:1}),o.push({s:0,e:t-1}));var l=[],h=o.length;for(s=0;s<h;s+=1)(a=o[s]).e*n<i||a.s*n>i+r||l.push([a.s*n<=i?0:(a.s*n-i)/r,a.e*n>=i+r?1:(a.e*n-i)/r]);return l.length||l.push([0,0]),l},TrimModifier.prototype.releasePathsData=function(e){var t,r=e.length;for(t=0;t<r;t+=1)segmentsLengthPool.release(e[t]);return e.length=0,e},TrimModifier.prototype.processShapes=function(e){if(this._mdf||e){var t=this.o.v%360/360;if(t<0&&(t+=1),(s=this.s.v>1?1+t:this.s.v<0?0+t:this.s.v+t)>(a=this.e.v>1?1+t:this.e.v<0?0+t:this.e.v+t)){var r=s;s=a,a=r}s=1e-4*Math.round(1e4*s),a=1e-4*Math.round(1e4*a),this.sValue=s,this.eValue=a}else s=this.sValue,a=this.eValue;var i=this.shapes.length,n=0;if(a===s)for(l=0;l<i;l+=1)this.shapes[l].localShapeCollection.releaseShapes(),this.shapes[l].shape._mdf=!0,this.shapes[l].shape.paths=this.shapes[l].localShapeCollection,this._mdf&&(this.shapes[l].pathsData.length=0);else if(1===a&&0===s||0===a&&1===s){if(this._mdf)for(l=0;l<i;l+=1)this.shapes[l].pathsData.length=0,this.shapes[l].shape._mdf=!0}else{var s,a,o,l,h,u,c,d,p,f,m,g,y=[];for(l=0;l<i;l+=1)if((f=this.shapes[l]).shape._mdf||this._mdf||e||2===this.m){if(u=(o=f.shape.paths)._length,p=0,!f.shape._mdf&&f.pathsData.length)p=f.totalShapeLength;else{for(h=0,c=this.releasePathsData(f.pathsData);h<u;h+=1)d=bez.getSegmentsLength(o.shapes[h]),c.push(d),p+=d.totalLength;f.totalShapeLength=p,f.pathsData=c}n+=p,f.shape._mdf=!0}else f.shape.paths=f.localShapeCollection;var v=s,b=a,w=0;for(l=i-1;l>=0;l-=1)if((f=this.shapes[l]).shape._mdf){for((m=f.localShapeCollection).releaseShapes(),2===this.m&&i>1?(g=this.calculateShapeEdges(s,a,f.totalShapeLength,w,n),w+=f.totalShapeLength):g=[[v,b]],u=g.length,h=0;h<u;h+=1){v=g[h][0],b=g[h][1],y.length=0,b<=1?y.push({s:f.totalShapeLength*v,e:f.totalShapeLength*b}):v>=1?y.push({s:f.totalShapeLength*(v-1),e:f.totalShapeLength*(b-1)}):(y.push({s:f.totalShapeLength*v,e:f.totalShapeLength}),y.push({s:0,e:f.totalShapeLength*(b-1)}));var E=this.addShapes(f,y[0]);if(y[0].s!==y[0].e){if(y.length>1){if(f.shape.paths.shapes[f.shape.paths._length-1].c){var S=E.pop();this.addPaths(E,m),E=this.addShapes(f,y[1],S)}else this.addPaths(E,m),E=this.addShapes(f,y[1])}this.addPaths(E,m)}}f.shape.paths=m}}},TrimModifier.prototype.addPaths=function(e,t){var r,i=e.length;for(r=0;r<i;r+=1)t.addShape(e[r])},TrimModifier.prototype.addSegment=function(e,t,r,i,n,s,a){n.setXYAt(t[0],t[1],"o",s),n.setXYAt(r[0],r[1],"i",s+1),a&&n.setXYAt(e[0],e[1],"v",s),n.setXYAt(i[0],i[1],"v",s+1)},TrimModifier.prototype.addSegmentFromArray=function(e,t,r,i){t.setXYAt(e[1],e[5],"o",r),t.setXYAt(e[2],e[6],"i",r+1),i&&t.setXYAt(e[0],e[4],"v",r),t.setXYAt(e[3],e[7],"v",r+1)},TrimModifier.prototype.addShapes=function(e,t,r){var i,n,s,a,o,l,h,u,c=e.pathsData,d=e.shape.paths.shapes,p=e.shape.paths._length,f=0,m=[],g=!0;for(r?(o=r._length,u=r._length):(r=shapePool.newElement(),o=0,u=0),m.push(r),i=0;i<p;i+=1){for(n=1,l=c[i].lengths,r.c=d[i].c,s=d[i].c?l.length:l.length+1;n<s;n+=1)if(f+(a=l[n-1]).addedLength<t.s)f+=a.addedLength,r.c=!1;else if(f>t.e){r.c=!1;break}else t.s<=f&&t.e>=f+a.addedLength?(this.addSegment(d[i].v[n-1],d[i].o[n-1],d[i].i[n],d[i].v[n],r,o,g),g=!1):(h=bez.getNewSegment(d[i].v[n-1],d[i].v[n],d[i].o[n-1],d[i].i[n],(t.s-f)/a.addedLength,(t.e-f)/a.addedLength,l[n-1]),this.addSegmentFromArray(h,r,o,g),g=!1,r.c=!1),f+=a.addedLength,o+=1;if(d[i].c&&l.length){if(a=l[n-1],f<=t.e){var y=l[n-1].addedLength;t.s<=f&&t.e>=f+y?(this.addSegment(d[i].v[n-1],d[i].o[n-1],d[i].i[0],d[i].v[0],r,o,g),g=!1):(h=bez.getNewSegment(d[i].v[n-1],d[i].v[0],d[i].o[n-1],d[i].i[0],(t.s-f)/y,(t.e-f)/y,l[n-1]),this.addSegmentFromArray(h,r,o,g),g=!1,r.c=!1)}else r.c=!1;f+=a.addedLength,o+=1}if(r._length&&(r.setXYAt(r.v[u][0],r.v[u][1],"i",u),r.setXYAt(r.v[r._length-1][0],r.v[r._length-1][1],"o",r._length-1)),f>t.e)break;i<p-1&&(r=shapePool.newElement(),g=!0,m.push(r),o=0)}return m},extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,t.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(e,t){var r,i,n,s,a,o,l=t/100,h=[0,0],u=e._length,c=0;for(c=0;c<u;c+=1)h[0]+=e.v[c][0],h[1]+=e.v[c][1];h[0]/=u,h[1]/=u;var d=shapePool.newElement();for(c=0,d.c=e.c;c<u;c+=1)r=e.v[c][0]+(h[0]-e.v[c][0])*l,i=e.v[c][1]+(h[1]-e.v[c][1])*l,n=e.o[c][0]+-((h[0]-e.o[c][0])*l),s=e.o[c][1]+-((h[1]-e.o[c][1])*l),a=e.i[c][0]+-((h[0]-e.i[c][0])*l),o=e.i[c][1]+-((h[1]-e.i[c][1])*l),d.setTripleAt(r,i,n,s,a,o,c);return d},PuckerAndBloatModifier.prototype.processShapes=function(e){var t,r,i,n,s,a,o=this.shapes.length,l=this.amount.v;if(0!==l)for(r=0;r<o;r+=1){if(a=(s=this.shapes[r]).localShapeCollection,!(!s.shape._mdf&&!this._mdf&&!e))for(a.releaseShapes(),s.shape._mdf=!0,t=s.shape.paths.shapes,n=s.shape.paths._length,i=0;i<n;i+=1)a.addShape(this.processPath(t[i],l));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var e=[0,0];function t(e){var t=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||t,this.a&&e.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&e.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&e.skewFromAxis(-this.sk.v,this.sa.v),this.r?e.rotate(-this.r.v):e.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?e.translate(this.px.v,this.py.v,-this.pz.v):e.translate(this.px.v,this.py.v,0):e.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function r(t){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||t){var r;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){if(r=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(i=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/r,0),n=this.p.getValueAtTime(this.p.keyframes[0].t/r,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(i=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/r,0),n=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/r,0)):(i=this.p.pv,n=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/r,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){i=[],n=[];var i,n,s=this.px,a=this.py;s._caching.lastFrame+s.offsetTime<=s.keyframes[0].t?(i[0]=s.getValueAtTime((s.keyframes[0].t+.01)/r,0),i[1]=a.getValueAtTime((a.keyframes[0].t+.01)/r,0),n[0]=s.getValueAtTime(s.keyframes[0].t/r,0),n[1]=a.getValueAtTime(a.keyframes[0].t/r,0)):s._caching.lastFrame+s.offsetTime>=s.keyframes[s.keyframes.length-1].t?(i[0]=s.getValueAtTime(s.keyframes[s.keyframes.length-1].t/r,0),i[1]=a.getValueAtTime(a.keyframes[a.keyframes.length-1].t/r,0),n[0]=s.getValueAtTime((s.keyframes[s.keyframes.length-1].t-.01)/r,0),n[1]=a.getValueAtTime((a.keyframes[a.keyframes.length-1].t-.01)/r,0)):(i=[s.pv,a.pv],n[0]=s.getValueAtTime((s._caching.lastFrame+s.offsetTime-.01)/r,s.offsetTime),n[1]=a.getValueAtTime((a._caching.lastFrame+a.offsetTime-.01)/r,a.offsetTime))}else i=n=e;this.v.rotate(-Math.atan2(i[1]-n[1],i[0]-n[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function i(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length&&(this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1,!this.s.effectsSequence.length)){if(this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2,this.sk){if(this.sk.effectsSequence.length||this.sa.effectsSequence.length)return;this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3}this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):this.rz.effectsSequence.length||this.ry.effectsSequence.length||this.rx.effectsSequence.length||this.or.effectsSequence.length||(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}}function n(){}function s(e){this._addDynamicProperty(e),this.elem.addDynamicProperty(e),this._isDirty=!0}function a(e,t,r){if(this.elem=e,this.frameId=-1,this.propType="transform",this.data=t,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(r||e),t.p&&t.p.s?(this.px=PropertyFactory.getProp(e,t.p.x,0,0,this),this.py=PropertyFactory.getProp(e,t.p.y,0,0,this),t.p.z&&(this.pz=PropertyFactory.getProp(e,t.p.z,0,0,this))):this.p=PropertyFactory.getProp(e,t.p||{k:[0,0,0]},1,0,this),t.rx){if(this.rx=PropertyFactory.getProp(e,t.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(e,t.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(e,t.rz,0,degToRads,this),t.or.k[0].ti){var i,n=t.or.k.length;for(i=0;i<n;i+=1)t.or.k[i].to=null,t.or.k[i].ti=null}this.or=PropertyFactory.getProp(e,t.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(e,t.r||{k:0},0,degToRads,this);t.sk&&(this.sk=PropertyFactory.getProp(e,t.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(e,t.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(e,t.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(e,t.s||{k:[100,100,100]},1,.01,this),t.o?this.o=PropertyFactory.getProp(e,t.o,0,.01,e):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}return a.prototype={applyToMatrix:t,getValue:r,precalculateMatrix:i,autoOrient:n},extendPrototype([DynamicPropertyContainer],a),a.prototype.addDynamicProperty=s,a.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty,{getTransformProperty:function(e,t,r){return new a(e,t,r)}}}();function RepeaterModifier(){}function RoundCornersModifier(){}function floatEqual(e,t){return 1e5*Math.abs(e-t)<=Math.min(Math.abs(e),Math.abs(t))}function floatZero(e){return 1e-5>=Math.abs(e)}function lerp(e,t,r){return e*(1-r)+t*r}function lerpPoint(e,t,r){return[lerp(e[0],t[0],r),lerp(e[1],t[1],r)]}function quadRoots(e,t,r){if(0===e)return[];var i=t*t-4*e*r;if(i<0)return[];var n=-t/(2*e);if(0===i)return[n];var s=Math.sqrt(i)/(2*e);return[n-s,n+s]}function polynomialCoefficients(e,t,r,i){return[-e+3*t-3*r+i,3*e-6*t+3*r,-3*e+3*t,e]}function singlePoint(e){return new PolynomialBezier(e,e,e,e,!1)}function PolynomialBezier(e,t,r,i,n){n&&pointEqual(e,t)&&(t=lerpPoint(e,i,1/3)),n&&pointEqual(r,i)&&(r=lerpPoint(e,i,2/3));var s=polynomialCoefficients(e[0],t[0],r[0],i[0]),a=polynomialCoefficients(e[1],t[1],r[1],i[1]);this.a=[s[0],a[0]],this.b=[s[1],a[1]],this.c=[s[2],a[2]],this.d=[s[3],a[3]],this.points=[e,t,r,i]}function extrema(e,t){var r=e.points[0][t],i=e.points[e.points.length-1][t];if(r>i){var n=i;i=r,r=n}for(var s=quadRoots(3*e.a[t],2*e.b[t],e.c[t]),a=0;a<s.length;a+=1)if(s[a]>0&&s[a]<1){var o=e.point(s[a])[t];o<r?r=o:o>i&&(i=o)}return{min:r,max:i}}function intersectData(e,t,r){var i=e.boundingBox();return{cx:i.cx,cy:i.cy,width:i.width,height:i.height,bez:e,t:(t+r)/2,t1:t,t2:r}}function splitData(e){var t=e.bez.split(.5);return[intersectData(t[0],e.t1,e.t),intersectData(t[1],e.t,e.t2)]}function boxIntersect(e,t){return 2*Math.abs(e.cx-t.cx)<e.width+t.width&&2*Math.abs(e.cy-t.cy)<e.height+t.height}function intersectsImpl(e,t,r,i,n,s){if(boxIntersect(e,t)){if(r>=s||e.width<=i&&e.height<=i&&t.width<=i&&t.height<=i){n.push([e.t,t.t]);return}var a=splitData(e),o=splitData(t);intersectsImpl(a[0],o[0],r+1,i,n,s),intersectsImpl(a[0],o[1],r+1,i,n,s),intersectsImpl(a[1],o[0],r+1,i,n,s),intersectsImpl(a[1],o[1],r+1,i,n,s)}}function crossProduct(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function lineIntersection(e,t,r,i){var n=[e[0],e[1],1],s=[t[0],t[1],1],a=[r[0],r[1],1],o=[i[0],i[1],1],l=crossProduct(crossProduct(n,s),crossProduct(a,o));return floatZero(l[2])?null:[l[0]/l[2],l[1]/l[2]]}function polarOffset(e,t,r){return[e[0]+Math.cos(t)*r,e[1]-Math.sin(t)*r]}function pointDistance(e,t){return Math.hypot(e[0]-t[0],e[1]-t[1])}function pointEqual(e,t){return floatEqual(e[0],t[0])&&floatEqual(e[1],t[1])}function ZigZagModifier(){}function setPoint(e,t,r,i,n,s,a){var o=r-Math.PI/2,l=r+Math.PI/2,h=t[0]+Math.cos(r)*i*n,u=t[1]-Math.sin(r)*i*n;e.setTripleAt(h,u,h+Math.cos(o)*s,u-Math.sin(o)*s,h+Math.cos(l)*a,u-Math.sin(l)*a,e.length())}function getPerpendicularVector(e,t){var r=[t[0]-e[0],t[1]-e[1]],i=-(.5*Math.PI);return[Math.cos(i)*r[0]-Math.sin(i)*r[1],Math.sin(i)*r[0]+Math.cos(i)*r[1]]}function getProjectingAngle(e,t){var r=0===t?e.length()-1:t-1,i=(t+1)%e.length(),n=getPerpendicularVector(e.v[r],e.v[i]);return Math.atan2(0,1)-Math.atan2(n[1],n[0])}function zigZagCorner(e,t,r,i,n,s,a){var o=getProjectingAngle(t,r),l=t.v[r%t._length],h=t.v[0===r?t._length-1:r-1],u=t.v[(r+1)%t._length],c=2===s?Math.sqrt(Math.pow(l[0]-h[0],2)+Math.pow(l[1]-h[1],2)):0,d=2===s?Math.sqrt(Math.pow(l[0]-u[0],2)+Math.pow(l[1]-u[1],2)):0;setPoint(e,t.v[r%t._length],o,a,i,d/((n+1)*2),c/((n+1)*2),s)}function zigZagSegment(e,t,r,i,n,s){for(var a=0;a<i;a+=1){var o=(a+1)/(i+1),l=2===n?Math.sqrt(Math.pow(t.points[3][0]-t.points[0][0],2)+Math.pow(t.points[3][1]-t.points[0][1],2)):0,h=t.normalAngle(o);setPoint(e,t.point(o),h,s,r,l/((i+1)*2),l/((i+1)*2),n),s=-s}return s}function linearOffset(e,t,r){var i=Math.atan2(t[0]-e[0],t[1]-e[1]);return[polarOffset(e,i,r),polarOffset(t,i,r)]}function offsetSegment(e,t){r=(l=linearOffset(e.points[0],e.points[1],t))[0],i=l[1],n=(l=linearOffset(e.points[1],e.points[2],t))[0],s=l[1],a=(l=linearOffset(e.points[2],e.points[3],t))[0],o=l[1];var r,i,n,s,a,o,l,h=lineIntersection(r,i,n,s);null===h&&(h=i);var u=lineIntersection(a,o,n,s);return null===u&&(u=a),new PolynomialBezier(r,h,u,o)}function joinLines(e,t,r,i,n){var s=t.points[3],a=r.points[0];if(3===i||pointEqual(s,a))return s;if(2===i){var o=-t.tangentAngle(1),l=-r.tangentAngle(0)+Math.PI,h=lineIntersection(s,polarOffset(s,o+Math.PI/2,100),a,polarOffset(a,o+Math.PI/2,100)),u=h?pointDistance(h,s):pointDistance(s,a)/2,c=polarOffset(s,o,2*u*roundCorner);return e.setXYAt(c[0],c[1],"o",e.length()-1),c=polarOffset(a,l,2*u*roundCorner),e.setTripleAt(a[0],a[1],a[0],a[1],c[0],c[1],e.length()),a}var d=pointEqual(s,t.points[2])?t.points[0]:t.points[2],p=pointEqual(a,r.points[1])?r.points[3]:r.points[1],f=lineIntersection(d,s,a,p);return f&&pointDistance(f,s)<n?(e.setTripleAt(f[0],f[1],f[0],f[1],f[0],f[1],e.length()),f):s}function getIntersection(e,t){var r=e.intersections(t);return(r.length&&floatEqual(r[0][0],1)&&r.shift(),r.length)?r[0]:null}function pruneSegmentIntersection(e,t){var r=e.slice(),i=t.slice(),n=getIntersection(e[e.length-1],t[0]);return(n&&(r[e.length-1]=e[e.length-1].split(n[0])[0],i[0]=t[0].split(n[1])[1]),e.length>1&&t.length>1&&(n=getIntersection(e[0],t[t.length-1])))?[[e[0].split(n[0])[0]],[t[t.length-1].split(n[1])[1]]]:[r,i]}function pruneIntersections(e){for(var t,r=1;r<e.length;r+=1)t=pruneSegmentIntersection(e[r-1],e[r]),e[r-1]=t[0],e[r]=t[1];return e.length>1&&(t=pruneSegmentIntersection(e[e.length-1],e[0]),e[e.length-1]=t[0],e[0]=t[1]),e}function offsetSegmentSplit(e,t){var r,i,n,s,a=e.inflectionPoints();if(0===a.length)return[offsetSegment(e,t)];if(1===a.length||floatEqual(a[1],1))return r=(n=e.split(a[0]))[0],i=n[1],[offsetSegment(r,t),offsetSegment(i,t)];r=(n=e.split(a[0]))[0];var o=(a[1]-a[0])/(1-a[0]);return s=(n=n[1].split(o))[0],i=n[1],[offsetSegment(r,t),offsetSegment(s,t),offsetSegment(i,t)]}function OffsetPathModifier(){}function getFontProperties(e){for(var t=e.fStyle?e.fStyle.split(" "):[],r="normal",i="normal",n=t.length,s=0;s<n;s+=1)switch(t[s].toLowerCase()){case"italic":i="italic";break;case"bold":r="700";break;case"black":r="900";break;case"medium":r="500";break;case"regular":case"normal":r="400";break;case"light":case"thin":r="200"}return{style:i,weight:e.fWeight||r}}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(e,t.c,0,null,this),this.o=PropertyFactory.getProp(e,t.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(e,t.tr,this),this.so=PropertyFactory.getProp(e,t.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(e,t.tr.eo,0,.01,this),this.data=t,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(e,t,r,i,n,s){var a=s?-1:1,o=i.s.v[0]+(1-i.s.v[0])*(1-n),l=i.s.v[1]+(1-i.s.v[1])*(1-n);e.translate(i.p.v[0]*a*n,i.p.v[1]*a*n,i.p.v[2]),t.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),t.rotate(-i.r.v*a*n),t.translate(i.a.v[0],i.a.v[1],i.a.v[2]),r.translate(-i.a.v[0],-i.a.v[1],i.a.v[2]),r.scale(s?1/o:o,s?1/l:l),r.translate(i.a.v[0],i.a.v[1],i.a.v[2])},RepeaterModifier.prototype.init=function(e,t,r,i){for(this.elem=e,this.arr=t,this.pos=r,this.elemsData=i,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(e),this.initModifierProperties(e,t[r]);r>0;)r-=1,this._elements.unshift(t[r]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(e){var t,r=e.length;for(t=0;t<r;t+=1)e[t]._processed=!1,"gr"===e[t].ty&&this.resetElements(e[t].it)},RepeaterModifier.prototype.cloneElements=function(e){var t=JSON.parse(JSON.stringify(e));return this.resetElements(t),t},RepeaterModifier.prototype.changeGroupRender=function(e,t){var r,i=e.length;for(r=0;r<i;r+=1)e[r]._render=t,"gr"===e[r].ty&&this.changeGroupRender(e[r].it,t)},RepeaterModifier.prototype.processShapes=function(e){var t=!1;if(this._mdf||e){var r,i,n,s,a,o,l,h,u=Math.ceil(this.c.v);if(this._groups.length<u){for(;this._groups.length<u;){var c={it:this.cloneElements(this._elements),ty:"gr"};c.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,c),this._groups.splice(0,0,c),this._currentCopies+=1}this.elem.reloadShapes(),t=!0}for(n=0,a=0;n<=this._groups.length-1;n+=1){if(o=a<u,this._groups[n]._render=o,this.changeGroupRender(this._groups[n].it,o),!o){var d=this.elemsData[n].it,p=d[d.length-1];0!==p.transform.op.v?(p.transform.op._mdf=!0,p.transform.op.v=0):p.transform.op._mdf=!1}a+=1}this._currentCopies=u;var f=this.o.v,m=f%1,g=f>0?Math.floor(f):Math.ceil(f),y=this.pMatrix.props,v=this.rMatrix.props,b=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var w=0;if(f>0){for(;w<g;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),w+=1;m&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,m,!1),w+=m)}else if(f<0){for(;w>g;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),w-=1;m&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-m,!0),w-=m)}for(n=1===this.data.m?0:this._currentCopies-1,s=1===this.data.m?1:-1,a=this._currentCopies;a;){if(h=(i=(r=this.elemsData[n].it)[r.length-1].transform.mProps.v.props).length,r[r.length-1].transform.mProps._mdf=!0,r[r.length-1].transform.op._mdf=!0,r[r.length-1].transform.op.v=1===this._currentCopies?this.so.v:this.so.v+(this.eo.v-this.so.v)*(n/(this._currentCopies-1)),0!==w){for((0!==n&&1===s||n!==this._currentCopies-1&&-1===s)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(v[0],v[1],v[2],v[3],v[4],v[5],v[6],v[7],v[8],v[9],v[10],v[11],v[12],v[13],v[14],v[15]),this.matrix.transform(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7],b[8],b[9],b[10],b[11],b[12],b[13],b[14],b[15]),this.matrix.transform(y[0],y[1],y[2],y[3],y[4],y[5],y[6],y[7],y[8],y[9],y[10],y[11],y[12],y[13],y[14],y[15]),l=0;l<h;l+=1)i[l]=this.matrix.props[l];this.matrix.reset()}else for(this.matrix.reset(),l=0;l<h;l+=1)i[l]=this.matrix.props[l];w+=1,a-=1,n+=s}}else for(a=this._currentCopies,n=0,s=1;a;)i=(r=this.elemsData[n].it)[r.length-1].transform.mProps.v.props,r[r.length-1].transform.mProps._mdf=!1,r[r.length-1].transform.op._mdf=!1,a-=1,n+=s;return t},RepeaterModifier.prototype.addShape=function(){},extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(e,t.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(e,t){var r,i,n,s,a,o,l,h,u,c,d,p,f,m=shapePool.newElement();m.c=e.c;var g=e._length,y=0;for(r=0;r<g;r+=1)i=e.v[r],s=e.o[r],n=e.i[r],i[0]===s[0]&&i[1]===s[1]&&i[0]===n[0]&&i[1]===n[1]?0!==r&&r!==g-1||e.c?(a=0===r?e.v[g-1]:e.v[r-1],l=(o=Math.sqrt(Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)))?Math.min(o/2,t)/o:0,h=p=i[0]+(a[0]-i[0])*l,u=f=i[1]-(i[1]-a[1])*l,c=h-(h-i[0])*roundCorner,d=u-(u-i[1])*roundCorner,m.setTripleAt(h,u,c,d,p,f,y),y+=1,a=r===g-1?e.v[0]:e.v[r+1],l=(o=Math.sqrt(Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)))?Math.min(o/2,t)/o:0,h=c=i[0]+(a[0]-i[0])*l,u=d=i[1]+(a[1]-i[1])*l,p=h-(h-i[0])*roundCorner,f=u-(u-i[1])*roundCorner,m.setTripleAt(h,u,c,d,p,f,y)):m.setTripleAt(i[0],i[1],s[0],s[1],n[0],n[1],y):m.setTripleAt(e.v[r][0],e.v[r][1],e.o[r][0],e.o[r][1],e.i[r][0],e.i[r][1],y),y+=1;return m},RoundCornersModifier.prototype.processShapes=function(e){var t,r,i,n,s,a,o=this.shapes.length,l=this.rd.v;if(0!==l)for(r=0;r<o;r+=1){if(a=(s=this.shapes[r]).localShapeCollection,!(!s.shape._mdf&&!this._mdf&&!e))for(a.releaseShapes(),s.shape._mdf=!0,t=s.shape.paths.shapes,n=s.shape.paths._length,i=0;i<n;i+=1)a.addShape(this.processPath(t[i],l));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},PolynomialBezier.prototype.point=function(e){return[((this.a[0]*e+this.b[0])*e+this.c[0])*e+this.d[0],((this.a[1]*e+this.b[1])*e+this.c[1])*e+this.d[1]]},PolynomialBezier.prototype.derivative=function(e){return[(3*e*this.a[0]+2*this.b[0])*e+this.c[0],(3*e*this.a[1]+2*this.b[1])*e+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(e){var t=this.derivative(e);return Math.atan2(t[1],t[0])},PolynomialBezier.prototype.normalAngle=function(e){var t=this.derivative(e);return Math.atan2(t[0],t[1])},PolynomialBezier.prototype.inflectionPoints=function(){var e=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(e))return[];var t=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/e,r=t*t-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/e;if(r<0)return[];var i=Math.sqrt(r);return floatZero(i)?i>0&&i<1?[t]:[]:[t-i,t+i].filter(function(e){return e>0&&e<1})},PolynomialBezier.prototype.split=function(e){if(e<=0)return[singlePoint(this.points[0]),this];if(e>=1)return[this,singlePoint(this.points[this.points.length-1])];var t=lerpPoint(this.points[0],this.points[1],e),r=lerpPoint(this.points[1],this.points[2],e),i=lerpPoint(this.points[2],this.points[3],e),n=lerpPoint(t,r,e),s=lerpPoint(r,i,e),a=lerpPoint(n,s,e);return[new PolynomialBezier(this.points[0],t,n,a,!0),new PolynomialBezier(a,s,i,this.points[3],!0)]},PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var e=this.bounds();return{left:e.x.min,right:e.x.max,top:e.y.min,bottom:e.y.max,width:e.x.max-e.x.min,height:e.y.max-e.y.min,cx:(e.x.max+e.x.min)/2,cy:(e.y.max+e.y.min)/2}},PolynomialBezier.prototype.intersections=function(e,t,r){void 0===t&&(t=2),void 0===r&&(r=7);var i=[];return intersectsImpl(intersectData(this,0,1),intersectData(e,0,1),0,t,i,r),i},PolynomialBezier.shapeSegment=function(e,t){var r=(t+1)%e.length();return new PolynomialBezier(e.v[t],e.o[t],e.i[r],e.v[r],!0)},PolynomialBezier.shapeSegmentInverted=function(e,t){var r=(t+1)%e.length();return new PolynomialBezier(e.v[r],e.i[r],e.o[t],e.v[t],!0)},extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(e,t.s,0,null,this),this.frequency=PropertyFactory.getProp(e,t.r,0,null,this),this.pointsType=PropertyFactory.getProp(e,t.pt,0,null,this),this._isAnimated=0!==this.amplitude.effectsSequence.length||0!==this.frequency.effectsSequence.length||0!==this.pointsType.effectsSequence.length},ZigZagModifier.prototype.processPath=function(e,t,r,i){var n=e._length,s=shapePool.newElement();if(s.c=e.c,e.c||(n-=1),0===n)return s;var a=-1,o=PolynomialBezier.shapeSegment(e,0);zigZagCorner(s,e,0,t,r,i,a);for(var l=0;l<n;l+=1)a=zigZagSegment(s,o,t,r,i,-a),o=l!==n-1||e.c?PolynomialBezier.shapeSegment(e,(l+1)%n):null,zigZagCorner(s,e,l+1,t,r,i,a);return s},ZigZagModifier.prototype.processShapes=function(e){var t,r,i,n,s,a,o=this.shapes.length,l=this.amplitude.v,h=Math.max(0,Math.round(this.frequency.v)),u=this.pointsType.v;if(0!==l)for(r=0;r<o;r+=1){if(a=(s=this.shapes[r]).localShapeCollection,!(!s.shape._mdf&&!this._mdf&&!e))for(a.releaseShapes(),s.shape._mdf=!0,t=s.shape.paths.shapes,n=s.shape.paths._length,i=0;i<n;i+=1)a.addShape(this.processPath(t[i],l,h,u));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)},extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(e,t){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(e,t.a,0,null,this),this.miterLimit=PropertyFactory.getProp(e,t.ml,0,null,this),this.lineJoin=t.lj,this._isAnimated=0!==this.amount.effectsSequence.length},OffsetPathModifier.prototype.processPath=function(e,t,r,i){var n,s,a,o=shapePool.newElement();o.c=e.c;var l=e.length();e.c||(l-=1);var h=[];for(n=0;n<l;n+=1)a=PolynomialBezier.shapeSegment(e,n),h.push(offsetSegmentSplit(a,t));if(!e.c)for(n=l-1;n>=0;n-=1)a=PolynomialBezier.shapeSegmentInverted(e,n),h.push(offsetSegmentSplit(a,t));h=pruneIntersections(h);var u=null,c=null;for(n=0;n<h.length;n+=1){var d=h[n];for(c&&(u=joinLines(o,c,d[0],r,i)),c=d[d.length-1],s=0;s<d.length;s+=1)a=d[s],u&&pointEqual(a.points[0],u)?o.setXYAt(a.points[1][0],a.points[1][1],"o",o.length()-1):o.setTripleAt(a.points[0][0],a.points[0][1],a.points[1][0],a.points[1][1],a.points[0][0],a.points[0][1],o.length()),o.setTripleAt(a.points[3][0],a.points[3][1],a.points[3][0],a.points[3][1],a.points[2][0],a.points[2][1],o.length()),u=a.points[3]}return h.length&&joinLines(o,c,h[0][0],r,i),o},OffsetPathModifier.prototype.processShapes=function(e){var t,r,i,n,s,a,o=this.shapes.length,l=this.amount.v,h=this.miterLimit.v,u=this.lineJoin;if(0!==l)for(r=0;r<o;r+=1){if(a=(s=this.shapes[r]).localShapeCollection,!(!s.shape._mdf&&!this._mdf&&!e))for(a.releaseShapes(),s.shape._mdf=!0,t=s.shape.paths.shapes,n=s.shape.paths._length,i=0;i<n;i+=1)a.addShape(this.processPath(t[i],l,u,h));s.shape.paths=s.localShapeCollection}this.dynamicProperties.length||(this._mdf=!1)};var FontManager=function(){var e=5e3,t={w:0,size:0,shapes:[],data:{shapes:[]}},r=[];r=r.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var i=127988,n=917631,s=917601,a=917626,o=65039,l=8205,h=127462,u=127487,c=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function d(e){var t,r=e.split(","),i=r.length,n=[];for(t=0;t<i;t+=1)"sans-serif"!==r[t]&&"monospace"!==r[t]&&n.push(r[t]);return n.join(",")}function p(e,t){var r=createTag("span");r.setAttribute("aria-hidden",!0),r.style.fontFamily=t;var i=createTag("span");i.innerText="giItT1WQy@!-/#",r.style.position="absolute",r.style.left="-10000px",r.style.top="-10000px",r.style.fontSize="300px",r.style.fontVariant="normal",r.style.fontStyle="normal",r.style.fontWeight="normal",r.style.letterSpacing="0",r.appendChild(i),document.body.appendChild(r);var n=i.offsetWidth;return i.style.fontFamily=d(e)+", "+t,{node:i,w:n,parent:r}}function f(){var t,r,i,n=this.fonts.length,s=n;for(t=0;t<n;t+=1)this.fonts[t].loaded?s-=1:"n"===this.fonts[t].fOrigin||0===this.fonts[t].origin?this.fonts[t].loaded=!0:(r=this.fonts[t].monoCase.node,i=this.fonts[t].monoCase.w,r.offsetWidth!==i?(s-=1,this.fonts[t].loaded=!0):(r=this.fonts[t].sansCase.node,i=this.fonts[t].sansCase.w,r.offsetWidth!==i&&(s-=1,this.fonts[t].loaded=!0)),this.fonts[t].loaded&&(this.fonts[t].sansCase.parent.parentNode.removeChild(this.fonts[t].sansCase.parent),this.fonts[t].monoCase.parent.parentNode.removeChild(this.fonts[t].monoCase.parent)));0!==s&&Date.now()-this.initTime<e?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function m(e,t){var r,i=document.body&&t?"svg":"canvas",n=getFontProperties(e);if("svg"===i){var s=createNS("text");s.style.fontSize="100px",s.setAttribute("font-family",e.fFamily),s.setAttribute("font-style",n.style),s.setAttribute("font-weight",n.weight),s.textContent="1",e.fClass?(s.style.fontFamily="inherit",s.setAttribute("class",e.fClass)):s.style.fontFamily=e.fFamily,t.appendChild(s),r=s}else{var a=new OffscreenCanvas(500,500).getContext("2d");a.font=n.style+" "+n.weight+" 100px "+e.fFamily,r=a}return{measureText:function(e){return"svg"===i?(r.textContent=e,r.getComputedTextLength()):r.measureText(e).width}}}function g(e,t){if(!e){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=e.list;return}if(!document.body){this.isLoaded=!0,e.list.forEach(function(e){e.helper=m(e),e.cache={}}),this.fonts=e.list;return}var r=e.list,i=r.length,n=i;for(s=0;s<i;s+=1){var s,a,o,l=!0;if(r[s].loaded=!1,r[s].monoCase=p(r[s].fFamily,"monospace"),r[s].sansCase=p(r[s].fFamily,"sans-serif"),r[s].fPath){if("p"===r[s].fOrigin||3===r[s].origin){if((a=document.querySelectorAll('style[f-forigin="p"][f-family="'+r[s].fFamily+'"], style[f-origin="3"][f-family="'+r[s].fFamily+'"]')).length>0&&(l=!1),l){var h=createTag("style");h.setAttribute("f-forigin",r[s].fOrigin),h.setAttribute("f-origin",r[s].origin),h.setAttribute("f-family",r[s].fFamily),h.type="text/css",h.innerText="@font-face {font-family: "+r[s].fFamily+"; font-style: normal; src: url('"+r[s].fPath+"');}",t.appendChild(h)}}else if("g"===r[s].fOrigin||1===r[s].origin){for(o=0,a=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]');o<a.length;o+=1)-1!==a[o].href.indexOf(r[s].fPath)&&(l=!1);if(l){var u=createTag("link");u.setAttribute("f-forigin",r[s].fOrigin),u.setAttribute("f-origin",r[s].origin),u.type="text/css",u.rel="stylesheet",u.href=r[s].fPath,document.body.appendChild(u)}}else if("t"===r[s].fOrigin||2===r[s].origin){for(o=0,a=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]');o<a.length;o+=1)r[s].fPath===a[o].src&&(l=!1);if(l){var c=createTag("link");c.setAttribute("f-forigin",r[s].fOrigin),c.setAttribute("f-origin",r[s].origin),c.setAttribute("rel","stylesheet"),c.setAttribute("href",r[s].fPath),t.appendChild(c)}}}else r[s].loaded=!0,n-=1;r[s].helper=m(r[s],t),r[s].cache={},this.fonts.push(r[s])}0===n?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function y(e){if(e){this.chars||(this.chars=[]);var t,r,i,n=e.length,s=this.chars.length;for(t=0;t<n;t+=1){for(r=0,i=!1;r<s;)this.chars[r].style===e[t].style&&this.chars[r].fFamily===e[t].fFamily&&this.chars[r].ch===e[t].ch&&(i=!0),r+=1;i||(this.chars.push(e[t]),s+=1)}}}function v(e,r,i){for(var n=0,s=this.chars.length;n<s;){if(this.chars[n].ch===e&&this.chars[n].style===r&&this.chars[n].fFamily===i)return this.chars[n];n+=1}return("string"==typeof e&&13!==e.charCodeAt(0)||!e)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",e,r,i)),t}function b(e,t,r){var i=this.getFontByName(t),n=e;if(!i.cache[n]){var s=i.helper;if(" "===e){var a=s.measureText("|"+e+"|"),o=s.measureText("||");i.cache[n]=(a-o)/100}else i.cache[n]=s.measureText(e)/100}return i.cache[n]*r}function w(e){for(var t=0,r=this.fonts.length;t<r;){if(this.fonts[t].fName===e)return this.fonts[t];t+=1}return this.fonts[0]}function E(e){var t=0,r=e.charCodeAt(0);if(r>=55296&&r<=56319){var i=e.charCodeAt(1);i>=56320&&i<=57343&&(t=(r-55296)*1024+i-56320+65536)}return t}function S(e,t){var r=e.toString(16)+t.toString(16);return -1!==c.indexOf(r)}function T(e){return e===l}function C(e){return e===o}function A(e){var t=E(e);return t>=h&&t<=u}function _(e){return A(e.substr(0,2))&&A(e.substr(2,2))}function x(e){return -1!==r.indexOf(e)}function k(e,t){var r=E(e.substr(t,2));if(r!==i)return!1;var o=0;for(t+=2;o<5;){if((r=E(e.substr(t,2)))<s||r>a)return!1;o+=1,t+=2}return E(e.substr(t,2))===n}function I(){this.isLoaded=!0}var D=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};D.isModifier=S,D.isZeroWidthJoiner=T,D.isFlagEmoji=_,D.isRegionalCode=A,D.isCombinedCharacter=x,D.isRegionalFlag=k,D.isVariationSelector=C,D.BLACK_FLAG_CODE_POINT=i;var P={addChars:y,addFonts:g,getCharData:v,getFontByName:w,measureText:b,checkLoadedFonts:f,setIsLoaded:I};return D.prototype=P,D}();function SlotManager(e){this.animationData=e}function slotFactory(e){return new SlotManager(e)}function RenderableElement(){}SlotManager.prototype.getProp=function(e){return this.animationData.slots&&this.animationData.slots[e.sid]?Object.assign(e,this.animationData.slots[e.sid].p):e},RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(e){-1===this.renderableComponents.indexOf(e)&&this.renderableComponents.push(e)},removeRenderableComponent:function(e){-1!==this.renderableComponents.indexOf(e)&&this.renderableComponents.splice(this.renderableComponents.indexOf(e),1)},prepareRenderableFrame:function(e){this.checkLayerLimits(e)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(e){this.data.ip-this.data.st<=e&&this.data.op-this.data.st>e?!0!==this.isInRange&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):!1!==this.isInRange&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var e,t=this.renderableComponents.length;for(e=0;e<t;e+=1)this.renderableComponents[e].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return 5===this.data.ty?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var e={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(t){return e[t]||""}}();function SliderEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,0,0,r)}function AngleEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,0,0,r)}function ColorEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,1,0,r)}function PointEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,1,0,r)}function LayerIndexEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,0,0,r)}function MaskIndexEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,0,0,r)}function CheckboxEffect(e,t,r){this.p=PropertyFactory.getProp(t,e.v,0,0,r)}function NoValueEffect(){this.p={}}function EffectsManager(e,t){var r,i,n=e.ef||[];this.effectElements=[];var s=n.length;for(r=0;r<s;r+=1)i=new GroupEffect(n[r],t),this.effectElements.push(i)}function GroupEffect(e,t){this.init(e,t)}function BaseElement(){}function FrameElement(){}function FootageElement(e,t,r){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.footageData=t.imageLoader.getAsset(this.assetData),this.initBaseData(e,t,r)}function AudioElement(e,t,r){this.initFrame(),this.initRenderable(),this.assetData=t.getAssetData(e.refId),this.initBaseData(e,t,r),this._isPlaying=!1,this._canPlay=!1;var i=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(i),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,e.au&&e.au.lv?e.au.lv:{k:[100]},1,.01,this)}function BaseRenderer(){}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(e,t){this.data=e,this.effectElements=[],this.initDynamicPropertyContainer(t);var r,i,n=this.data.ef.length,s=this.data.ef;for(r=0;r<n;r+=1){switch(i=null,s[r].ty){case 0:i=new SliderEffect(s[r],t,this);break;case 1:i=new AngleEffect(s[r],t,this);break;case 2:i=new ColorEffect(s[r],t,this);break;case 3:i=new PointEffect(s[r],t,this);break;case 4:case 7:i=new CheckboxEffect(s[r],t,this);break;case 10:i=new LayerIndexEffect(s[r],t,this);break;case 11:i=new MaskIndexEffect(s[r],t,this);break;case 5:i=new EffectsManager(s[r],t,this);break;default:i=new NoValueEffect(s[r],t,this)}i&&this.effectElements.push(i)}},BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var e=0,t=this.data.masksProperties.length;e<t;){if("n"!==this.data.masksProperties[e].mode&&!1!==this.data.masksProperties[e].cl)return!0;e+=1}return!1},initExpressions:function(){var e=getExpressionInterfaces();if(e){var t=e("layer"),r=e("effects"),i=e("shape"),n=e("text"),s=e("comp");this.layerInterface=t(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var a=r.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(a),0===this.data.ty||this.data.xt?this.compInterface=s(this):4===this.data.ty?(this.layerInterface.shapeInterface=i(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):5===this.data.ty&&(this.layerInterface.textInterface=n(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var e=getBlendMode(this.data.bm);(this.baseElement||this.layerElement).style["mix-blend-mode"]=e},initBaseData:function(e,t,r){this.globalData=t,this.comp=r,this.data=e,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}},FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(e,t){var r,i=this.dynamicProperties.length;for(r=0;r<i;r+=1)(t||this._isParent&&"transform"===this.dynamicProperties[r].propType)&&(this.dynamicProperties[r].getValue(),this.dynamicProperties[r]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(e){-1===this.dynamicProperties.indexOf(e)&&this.dynamicProperties.push(e)}},FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var e=getExpressionInterfaces();if(e){var t=e("footage");this.layerInterface=t(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData},AudioElement.prototype.prepareFrame=function(e){if(this.prepareRenderableFrame(e,!0),this.prepareProperties(e,!0),this.tm._placeholder)this._currentTime=e/this.data.sr;else{var t=this.tm.v;this._currentTime=t}this._volume=this.lv.v[0];var r=this._volume*this._volumeMultiplier;this._previousVolume!==r&&(this._previousVolume=r,this.audio.volume(r))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(e){this.audio.rate(e)},AudioElement.prototype.volume=function(e){this._volumeMultiplier=e,this._previousVolume=e*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){},BaseRenderer.prototype.checkLayers=function(e){var t,r,i=this.layers.length;for(this.completeLayers=!0,t=i-1;t>=0;t-=1)!this.elements[t]&&(r=this.layers[t]).ip-r.st<=e-this.layers[t].st&&r.op-r.st>e-this.layers[t].st&&this.buildItem(t),this.completeLayers=!!this.elements[t]&&this.completeLayers;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(e){switch(e.ty){case 2:return this.createImage(e);case 0:return this.createComp(e);case 1:return this.createSolid(e);case 3:default:return this.createNull(e);case 4:return this.createShape(e);case 5:return this.createText(e);case 6:return this.createAudio(e);case 13:return this.createCamera(e);case 15:return this.createFootage(e)}},BaseRenderer.prototype.createCamera=function(){throw Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(e){return new AudioElement(e,this.globalData,this)},BaseRenderer.prototype.createFootage=function(e){return new FootageElement(e,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.buildItem(e);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(e){this.completeLayers=!1;var t,r,i=e.length,n=this.layers.length;for(t=0;t<i;t+=1)for(r=0;r<n;){if(this.layers[r].id===e[t].id){this.layers[r]=e[t];break}r+=1}},BaseRenderer.prototype.setProjectInterface=function(e){this.globalData.projectInterface=e},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(e,t,r){for(var i=this.elements,n=this.layers,s=0,a=n.length;s<a;)n[s].ind==t&&(i[s]&&!0!==i[s]?(r.push(i[s]),i[s].setAsParent(),void 0!==n[s].parent?this.buildElementParenting(e,n[s].parent,r):e.setHierarchy(r)):(this.buildItem(s),this.addPendingElement(e))),s+=1},BaseRenderer.prototype.addPendingElement=function(e){this.pendingElements.push(e)},BaseRenderer.prototype.searchExtraCompositions=function(e){var t,r=e.length;for(t=0;t<r;t+=1)if(e[t].xt){var i=this.createComp(e[t]);i.initExpressions(),this.globalData.projectInterface.registerComposition(i)}},BaseRenderer.prototype.getElementById=function(e){var t,r=this.elements.length;for(t=0;t<r;t+=1)if(this.elements[t].data.ind===e)return this.elements[t];return null},BaseRenderer.prototype.getElementByPath=function(e){var t=e.shift();if("number"==typeof t)r=this.elements[t];else{var r,i,n=this.elements.length;for(i=0;i<n;i+=1)if(this.elements[i].data.nm===t){r=this.elements[i];break}}return 0===e.length?r:r.getElementByPath(e)},BaseRenderer.prototype.setupGlobalData=function(e,t){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(e),this.globalData.fontManager.addChars(e.chars),this.globalData.fontManager.addFonts(e.fonts,t),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=e.fr,this.globalData.nm=e.nm,this.globalData.compSize={w:e.w,h:e.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}function MaskElement(e,t,r){this.data=e,this.element=t,this.globalData=r,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var i=this.globalData.defs,n=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(n),this.solidPath="";var s=this.masksProperties,a=0,o=[],l=createElementID(),h="clipPath",u="clip-path";for(c=0;c<n;c+=1)if(("a"!==s[c].mode&&"n"!==s[c].mode||s[c].inv||100!==s[c].o.k||s[c].o.x)&&(h="mask",u="mask"),("s"===s[c].mode||"i"===s[c].mode)&&0===a?((m=createNS("rect")).setAttribute("fill","#ffffff"),m.setAttribute("width",this.element.comp.data.w||0),m.setAttribute("height",this.element.comp.data.h||0),o.push(m)):m=null,d=createNS("path"),"n"===s[c].mode)this.viewData[c]={op:PropertyFactory.getProp(this.element,s[c].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,s[c],3),elem:d,lastPath:""},i.appendChild(d);else{if(a+=1,d.setAttribute("fill","s"===s[c].mode?"#000000":"#ffffff"),d.setAttribute("clip-rule","nonzero"),0!==s[c].x.k?(h="mask",u="mask",v=PropertyFactory.getProp(this.element,s[c].x,0,null,this.element),b=createElementID(),(g=createNS("filter")).setAttribute("id",b),(y=createNS("feMorphology")).setAttribute("operator","erode"),y.setAttribute("in","SourceGraphic"),y.setAttribute("radius","0"),g.appendChild(y),i.appendChild(g),d.setAttribute("stroke","s"===s[c].mode?"#000000":"#ffffff")):(y=null,v=null),this.storedData[c]={elem:d,x:v,expan:y,lastPath:"",lastOperator:"",filterId:b,lastRadius:0},"i"===s[c].mode){f=o.length;var c,d,p,f,m,g,y,v,b,w=createNS("g");for(p=0;p<f;p+=1)w.appendChild(o[p]);var E=createNS("mask");E.setAttribute("mask-type","alpha"),E.setAttribute("id",l+"_"+a),E.appendChild(d),i.appendChild(E),w.setAttribute("mask","url("+getLocationHref()+"#"+l+"_"+a+")"),o.length=0,o.push(w)}else o.push(d);s[c].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[c]={elem:d,lastPath:"",op:PropertyFactory.getProp(this.element,s[c].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,s[c],3),invRect:m},this.viewData[c].prop.k||this.drawPath(s[c],this.viewData[c].prop.v,this.viewData[c])}for(c=0,this.maskElement=createNS(h),n=o.length;c<n;c+=1)this.maskElement.appendChild(o[c]);a>0&&(this.maskElement.setAttribute("id",l),this.element.maskedElement.setAttribute(u,"url("+getLocationHref()+"#"+l+")"),i.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}TransformElement.prototype={initTransform:function(){var e=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:e,localMat:e,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var e,t=this.finalTransform.mat,r=0,i=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;r<i;){if(this.hierarchy[r].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}r+=1}if(this.finalTransform._matMdf)for(e=this.finalTransform.mProp.v.props,t.cloneFromProps(e),r=0;r<i;r+=1)t.multiply(this.hierarchy[r].finalTransform.mProp.v)}(!this.localTransforms||this.finalTransform._matMdf)&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var e=0,t=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;e<t;)this.localTransforms[e]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[e]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),e+=1;if(this.finalTransform._localMatMdf){var r=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(r),e=1;e<t;e+=1){var i=this.localTransforms[e].matrix;r.multiply(i)}r.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var n=this.finalTransform.localOpacity;for(e=0;e<t;e+=1)n*=.01*this.localTransforms[e].opacity;this.finalTransform.localOpacity=n}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var e=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(e.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var t=0,r=e.length;for(t=0;t<r;t+=1)this.localTransforms.push(e[t])}}},globalToLocal:function(e){var t,r,i=[];i.push(this.finalTransform);for(var n=!0,s=this.comp;n;)s.finalTransform?(s.data.hasMask&&i.splice(0,0,s.finalTransform),s=s.comp):n=!1;var a=i.length;for(t=0;t<a;t+=1)r=i[t].mat.applyToPointArray(0,0,0),e=[e[0]-r[0],e[1]-r[1],0];return e},mHelper:new Matrix},MaskElement.prototype.getMaskProperty=function(e){return this.viewData[e].prop},MaskElement.prototype.renderFrame=function(e){var t,r=this.element.finalTransform.mat,i=this.masksProperties.length;for(t=0;t<i;t+=1)if((this.viewData[t].prop._mdf||e)&&this.drawPath(this.masksProperties[t],this.viewData[t].prop.v,this.viewData[t]),(this.viewData[t].op._mdf||e)&&this.viewData[t].elem.setAttribute("fill-opacity",this.viewData[t].op.v),"n"!==this.masksProperties[t].mode&&(this.viewData[t].invRect&&(this.element.finalTransform.mProp._mdf||e)&&this.viewData[t].invRect.setAttribute("transform",r.getInverseMatrix().to2dCSS()),this.storedData[t].x&&(this.storedData[t].x._mdf||e))){var n=this.storedData[t].expan;this.storedData[t].x.v<0?("erode"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="erode",this.storedData[t].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[t].filterId+")")),n.setAttribute("radius",-this.storedData[t].x.v)):("dilate"!==this.storedData[t].lastOperator&&(this.storedData[t].lastOperator="dilate",this.storedData[t].elem.setAttribute("filter",null)),this.storedData[t].elem.setAttribute("stroke-width",2*this.storedData[t].x.v))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){return"M0,0 "+(" h"+this.globalData.compSize.w+" v"+this.globalData.compSize.h+" h-"+this.globalData.compSize.w+" v-"+this.globalData.compSize.h)+" "},MaskElement.prototype.drawPath=function(e,t,r){var i,n,s=" M"+t.v[0][0]+","+t.v[0][1];for(i=1,n=t._length;i<n;i+=1)s+=" C"+t.o[i-1][0]+","+t.o[i-1][1]+" "+t.i[i][0]+","+t.i[i][1]+" "+t.v[i][0]+","+t.v[i][1];if(t.c&&n>1&&(s+=" C"+t.o[i-1][0]+","+t.o[i-1][1]+" "+t.i[0][0]+","+t.i[0][1]+" "+t.v[0][0]+","+t.v[0][1]),r.lastPath!==s){var a="";r.elem&&(t.c&&(a=e.inv?this.solidPath+s:s),r.elem.setAttribute("d",a)),r.lastPath=s}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var e={};function t(e,t){var r=createNS("filter");return r.setAttribute("id",e),!0!==t&&(r.setAttribute("filterUnits","objectBoundingBox"),r.setAttribute("x","0%"),r.setAttribute("y","0%"),r.setAttribute("width","100%"),r.setAttribute("height","100%")),r}function r(){var e=createNS("feColorMatrix");return e.setAttribute("type","matrix"),e.setAttribute("color-interpolation-filters","sRGB"),e.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),e}return e.createFilter=t,e.createAlphaToLuminanceFilter=r,e}(),featureSupport=function(){var e={maskType:!0,svgLumaHidden:!0,offscreenCanvas:"undefined"!=typeof OffscreenCanvas};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(e.maskType=!1),/firefox/i.test(navigator.userAgent)&&(e.svgLumaHidden=!1),e}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(e){var t,r,i="SourceGraphic",n=e.data.ef?e.data.ef.length:0,s=createElementID(),a=filtersFactory.createFilter(s,!0),o=0;for(t=0,this.filters=[];t<n;t+=1){r=null;var l=e.data.ef[t].ty;registeredEffects$1[l]&&(r=new registeredEffects$1[l].effect(a,e.effectsManager.effectElements[t],e,idPrefix+o,i),i=idPrefix+o,registeredEffects$1[l].countsAsEffect&&(o+=1)),r&&this.filters.push(r)}o&&(e.globalData.defs.appendChild(a),e.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+s+")")),this.filters.length&&e.addRenderableComponent(this)}function registerEffect$1(e,t,r){registeredEffects$1[e]={effect:t,countsAsEffect:r}}function SVGBaseElement(){}function HierarchyElement(){}function RenderableDOMElement(){}function IImageElement(e,t,r){this.assetData=t.getAssetData(e.refId),this.assetData&&this.assetData.sid&&(this.assetData=t.slotManager.getProp(this.assetData)),this.initElement(e,t,r),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}function ProcessedElement(e,t){this.elem=e,this.pos=t}function IShapeElement(){}SVGEffects.prototype.renderFrame=function(e){var t,r=this.filters.length;for(t=0;t<r;t+=1)this.filters[t].renderFrame(e)},SVGEffects.prototype.getEffects=function(e){var t,r=this.filters.length,i=[];for(t=0;t<r;t+=1)this.filters[t].type===e&&i.push(this.filters[t]);return i},SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var e=null;if(this.data.td){this.matteMasks={};var t=createNS("g");t.setAttribute("id",this.layerId),t.appendChild(this.layerElement),e=t,this.globalData.defs.appendChild(t)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),e=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0===this.data.ty&&!this.data.hd){var r=createNS("clipPath"),i=createNS("path");i.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var n=createElementID();if(r.setAttribute("id",n),r.appendChild(i),this.globalData.defs.appendChild(r),this.checkMasks()){var s=createNS("g");s.setAttribute("clip-path","url("+getLocationHref()+"#"+n+")"),s.appendChild(this.layerElement),this.transformedElement=s,e?e.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+n+")")}0!==this.data.bm&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(e){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[e]){var t,r,i,n,s=this.layerId+"_"+e;if(1===e||3===e){var a=createNS("mask");a.setAttribute("id",s),a.setAttribute("mask-type",3===e?"luminance":"alpha"),(i=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),a.appendChild(i),this.globalData.defs.appendChild(a),featureSupport.maskType||1!==e||(a.setAttribute("mask-type","luminance"),t=createElementID(),r=filtersFactory.createFilter(t),this.globalData.defs.appendChild(r),r.appendChild(filtersFactory.createAlphaToLuminanceFilter()),(n=createNS("g")).appendChild(i),a.appendChild(n),n.setAttribute("filter","url("+getLocationHref()+"#"+t+")"))}else if(2===e){var o=createNS("mask");o.setAttribute("id",s),o.setAttribute("mask-type","alpha");var l=createNS("g");o.appendChild(l),t=createElementID(),r=filtersFactory.createFilter(t);var h=createNS("feComponentTransfer");h.setAttribute("in","SourceGraphic"),r.appendChild(h);var u=createNS("feFuncA");u.setAttribute("type","table"),u.setAttribute("tableValues","1.0 0.0"),h.appendChild(u),this.globalData.defs.appendChild(r);var c=createNS("rect");c.setAttribute("width",this.comp.data.w),c.setAttribute("height",this.comp.data.h),c.setAttribute("x","0"),c.setAttribute("y","0"),c.setAttribute("fill","#ffffff"),c.setAttribute("opacity","0"),l.setAttribute("filter","url("+getLocationHref()+"#"+t+")"),l.appendChild(c),(i=createNS("use")).setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),l.appendChild(i),featureSupport.maskType||(o.setAttribute("mask-type","luminance"),r.appendChild(filtersFactory.createAlphaToLuminanceFilter()),n=createNS("g"),l.appendChild(c),n.appendChild(this.layerElement),l.appendChild(n)),this.globalData.defs.appendChild(o)}this.matteMasks[e]=s}return this.matteMasks[e]},setMatte:function(e){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+e+")")}},HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(e){this.hierarchy=e},setAsParent:function(){this._isParent=!0},checkParenting:function(){void 0!==this.data.parent&&this.comp.buildElementParenting(this,this.data.parent,[])}},function(){extendPrototype([RenderableElement,createProxyFunction({initElement:function(e,t,r){this.initFrame(),this.initBaseData(e,t,r),this.initTransform(e,t,r),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){this.hidden||this.isInRange&&!this.isTransparent||((this.baseElement||this.layerElement).style.display="none",this.hidden=!0)},show:function(){this.isInRange&&!this.isTransparent&&(this.data.hd||((this.baseElement||this.layerElement).style.display="block"),this.hidden=!1,this._isFirstFrame=!0)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}})],RenderableDOMElement)}(),extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect},IShapeElement.prototype={addShapeToModifiers:function(e){var t,r=this.shapeModifiers.length;for(t=0;t<r;t+=1)this.shapeModifiers[t].addShape(e)},isShapeInAnimatedModifiers:function(e){for(var t=0,r=this.shapeModifiers.length;t<r;)if(this.shapeModifiers[t].isAnimatedWithShape(e))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var e,t=this.shapes.length;for(e=0;e<t;e+=1)this.shapes[e].sh.reset();for(e=(t=this.shapeModifiers.length)-1;e>=0&&!this.shapeModifiers[e].processShapes(this._isFirstFrame);e-=1);}},searchProcessedElement:function(e){for(var t=this.processedElements,r=0,i=t.length;r<i;){if(t[r].elem===e)return t[r].pos;r+=1}return 0},addProcessedElement:function(e,t){for(var r=this.processedElements,i=r.length;i;)if(r[i-=1].elem===e){r[i].pos=t;return}r.push(new ProcessedElement(e,t))},prepareFrame:function(e){this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(e,t,r){this.caches=[],this.styles=[],this.transformers=e,this.lStr="",this.sh=r,this.lvl=t,this._isAnimated=!!r.k;for(var i=0,n=e.length;i<n;){if(e[i].mProps.dynamicProperties.length){this._isAnimated=!0;break}i+=1}}function SVGStyleData(e,t){this.data=e,this.type=e.ty,this.d="",this.lvl=t,this._mdf=!1,this.closed=!0===e.hd,this.pElem=createNS("path"),this.msElem=null}function DashProperty(e,t,r,i){this.elem=e,this.frameId=-1,this.dataProps=createSizedArray(t.length),this.renderer=r,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",t.length?t.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(i);var n,s,a=t.length||0;for(n=0;n<a;n+=1)s=PropertyFactory.getProp(e,t[n].v,0,0,this),this.k=s.k||this.k,this.dataProps[n]={n:t[n].n,p:s};this.k||this.getValue(!0),this._isAnimated=this.k}function SVGStrokeStyleData(e,t,r){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=r,this._isAnimated=!!this._isAnimated}function SVGFillStyleData(e,t,r){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.c=PropertyFactory.getProp(e,t.c,1,255,this),this.style=r}function SVGNoStyleData(e,t,r){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.style=r}function GradientProperty(e,t,r){this.data=t,this.c=createTypedArray("uint8c",4*t.p);var i=t.k.k[0].s?t.k.k[0].s.length-4*t.p:t.k.k.length-4*t.p;this.o=createTypedArray("float32",i),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=i,this.initDynamicPropertyContainer(r),this.prop=PropertyFactory.getProp(e,t.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}function SVGGradientFillStyleData(e,t,r){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.initGradientData(e,t,r)}function SVGGradientStrokeStyleData(e,t,r){this.initDynamicPropertyContainer(e),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(e,t.w,0,null,this),this.d=new DashProperty(e,t.d||{},"svg",this),this.initGradientData(e,t,r),this._isAnimated=!!this._isAnimated}function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(e,t,r){this.transform={mProps:e,op:t,container:r},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0},SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1},DashProperty.prototype.getValue=function(e){if((this.elem.globalData.frameId!==this.frameId||e)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||e,this._mdf)){var t=0,r=this.dataProps.length;for("svg"===this.renderer&&(this.dashStr=""),t=0;t<r;t+=1)"o"!==this.dataProps[t].n?"svg"===this.renderer?this.dashStr+=" "+this.dataProps[t].p.v:this.dashArray[t]=this.dataProps[t].p.v:this.dashoffset[0]=this.dataProps[t].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty),extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData),extendPrototype([DynamicPropertyContainer],SVGFillStyleData),extendPrototype([DynamicPropertyContainer],SVGNoStyleData),GradientProperty.prototype.comparePoints=function(e,t){for(var r=0,i=this.o.length/2;r<i;){if(Math.abs(e[4*r]-e[4*t+2*r])>.01)return!1;r+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!=this.c.length/4)return!1;if(this.data.k.k[0].s)for(var e=0,t=this.data.k.k.length;e<t;){if(!this.comparePoints(this.data.k.k[e].s,this.data.p))return!1;e+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(e){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||e){var t,r,i,n=4*this.data.p;for(t=0;t<n;t+=1)r=t%4==0?100:255,i=Math.round(this.prop.v[t]*r),this.c[t]!==i&&(this.c[t]=i,this._cmdf=!e);if(this.o.length)for(n=this.prop.v.length,t=4*this.data.p;t<n;t+=1)r=t%2==0?100:1,i=t%2==0?Math.round(100*this.prop.v[t]):this.prop.v[t],this.o[t-4*this.data.p]!==i&&(this.o[t-4*this.data.p]=i,this._omdf=!e);this._mdf=!e}},extendPrototype([DynamicPropertyContainer],GradientProperty),SVGGradientFillStyleData.prototype.initGradientData=function(e,t,r){this.o=PropertyFactory.getProp(e,t.o,0,.01,this),this.s=PropertyFactory.getProp(e,t.s,1,null,this),this.e=PropertyFactory.getProp(e,t.e,1,null,this),this.h=PropertyFactory.getProp(e,t.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(e,t.a||{k:0},0,degToRads,this),this.g=new GradientProperty(e,t.g,this),this.style=r,this.stops=[],this.setGradientData(r.pElem,t),this.setGradientOpacity(t,r),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(e,t){var r,i,n,s=createElementID(),a=createNS(1===t.t?"linearGradient":"radialGradient");a.setAttribute("id",s),a.setAttribute("spreadMethod","pad"),a.setAttribute("gradientUnits","userSpaceOnUse");var o=[];for(i=0,n=4*t.g.p;i<n;i+=4)r=createNS("stop"),a.appendChild(r),o.push(r);e.setAttribute("gf"===t.ty?"fill":"stroke","url("+getLocationHref()+"#"+s+")"),this.gf=a,this.cst=o},SVGGradientFillStyleData.prototype.setGradientOpacity=function(e,t){if(this.g._hasOpacity&&!this.g._collapsable){var r,i,n,s=createNS("mask"),a=createNS("path");s.appendChild(a);var o=createElementID(),l=createElementID();s.setAttribute("id",l);var h=createNS(1===e.t?"linearGradient":"radialGradient");h.setAttribute("id",o),h.setAttribute("spreadMethod","pad"),h.setAttribute("gradientUnits","userSpaceOnUse"),n=e.g.k.k[0].s?e.g.k.k[0].s.length:e.g.k.k.length;var u=this.stops;for(i=4*e.g.p;i<n;i+=2)(r=createNS("stop")).setAttribute("stop-color","rgb(255,255,255)"),h.appendChild(r),u.push(r);a.setAttribute("gf"===e.ty?"fill":"stroke","url("+getLocationHref()+"#"+o+")"),"gs"===e.ty&&(a.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),a.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),1===e.lj&&a.setAttribute("stroke-miterlimit",e.ml)),this.of=h,this.ms=s,this.ost=u,this.maskId=l,t.msElem=a}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData),extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);var buildShapeString=function(e,t,r,i){if(0===t)return"";var n,s=e.o,a=e.i,o=e.v,l=" M"+i.applyToPointStringified(o[0][0],o[0][1]);for(n=1;n<t;n+=1)l+=" C"+i.applyToPointStringified(s[n-1][0],s[n-1][1])+" "+i.applyToPointStringified(a[n][0],a[n][1])+" "+i.applyToPointStringified(o[n][0],o[n][1]);return r&&t&&(l+=" C"+i.applyToPointStringified(s[n-1][0],s[n-1][1])+" "+i.applyToPointStringified(a[0][0],a[0][1])+" "+i.applyToPointStringified(o[0][0],o[0][1])+"z"),l},SVGElementsRenderer=function(){var e=new Matrix,t=new Matrix;function r(e,t,r){(r||t.transform.op._mdf)&&t.transform.container.setAttribute("opacity",t.transform.op.v),(r||t.transform.mProps._mdf)&&t.transform.container.setAttribute("transform",t.transform.mProps.v.to2dCSS())}function i(){}function n(r,i,n){var s,a,o,l,h,u,c,d,p,f,m=i.styles.length,g=i.lvl;for(u=0;u<m;u+=1){if(l=i.sh._mdf||n,i.styles[u].lvl<g){for(d=t.reset(),p=g-i.styles[u].lvl,f=i.transformers.length-1;!l&&p>0;)l=i.transformers[f].mProps._mdf||l,p-=1,f-=1;if(l)for(p=g-i.styles[u].lvl,f=i.transformers.length-1;p>0;)d.multiply(i.transformers[f].mProps.v),p-=1,f-=1}else d=e;if(a=(c=i.sh.paths)._length,l){for(s=0,o="";s<a;s+=1)(h=c.shapes[s])&&h._length&&(o+=buildShapeString(h,h._length,h.c,d));i.caches[u]=o}else o=i.caches[u];i.styles[u].d+=!0===r.hd?"":o,i.styles[u]._mdf=l||i.styles[u]._mdf}}function s(e,t,r){var i=t.style;(t.c._mdf||r)&&i.pElem.setAttribute("fill","rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||r)&&i.pElem.setAttribute("fill-opacity",t.o.v)}function a(e,t,r){o(e,t,r),l(e,t,r)}function o(e,t,r){var i,n,s,a,o,l=t.gf,h=t.g._hasOpacity,u=t.s.v,c=t.e.v;if(t.o._mdf||r){var d="gf"===e.ty?"fill-opacity":"stroke-opacity";t.style.pElem.setAttribute(d,t.o.v)}if(t.s._mdf||r){var p=1===e.t?"x1":"cx",f="x1"===p?"y1":"cy";l.setAttribute(p,u[0]),l.setAttribute(f,u[1]),h&&!t.g._collapsable&&(t.of.setAttribute(p,u[0]),t.of.setAttribute(f,u[1]))}if(t.g._cmdf||r){i=t.cst;var m=t.g.c;for(n=0,s=i.length;n<s;n+=1)(a=i[n]).setAttribute("offset",m[4*n]+"%"),a.setAttribute("stop-color","rgb("+m[4*n+1]+","+m[4*n+2]+","+m[4*n+3]+")")}if(h&&(t.g._omdf||r)){var g=t.g.o;for(n=0,s=(i=t.g._collapsable?t.cst:t.ost).length;n<s;n+=1)a=i[n],t.g._collapsable||a.setAttribute("offset",g[2*n]+"%"),a.setAttribute("stop-opacity",g[2*n+1])}if(1===e.t)(t.e._mdf||r)&&(l.setAttribute("x2",c[0]),l.setAttribute("y2",c[1]),h&&!t.g._collapsable&&(t.of.setAttribute("x2",c[0]),t.of.setAttribute("y2",c[1])));else if((t.s._mdf||t.e._mdf||r)&&(o=Math.sqrt(Math.pow(u[0]-c[0],2)+Math.pow(u[1]-c[1],2)),l.setAttribute("r",o),h&&!t.g._collapsable&&t.of.setAttribute("r",o)),t.s._mdf||t.e._mdf||t.h._mdf||t.a._mdf||r){o||(o=Math.sqrt(Math.pow(u[0]-c[0],2)+Math.pow(u[1]-c[1],2)));var y=Math.atan2(c[1]-u[1],c[0]-u[0]),v=t.h.v;v>=1?v=.99:v<=-1&&(v=-.99);var b=o*v,w=Math.cos(y+t.a.v)*b+u[0],E=Math.sin(y+t.a.v)*b+u[1];l.setAttribute("fx",w),l.setAttribute("fy",E),h&&!t.g._collapsable&&(t.of.setAttribute("fx",w),t.of.setAttribute("fy",E))}}function l(e,t,r){var i=t.style,n=t.d;n&&(n._mdf||r)&&n.dashStr&&(i.pElem.setAttribute("stroke-dasharray",n.dashStr),i.pElem.setAttribute("stroke-dashoffset",n.dashoffset[0])),t.c&&(t.c._mdf||r)&&i.pElem.setAttribute("stroke","rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||r)&&i.pElem.setAttribute("stroke-opacity",t.o.v),(t.w._mdf||r)&&(i.pElem.setAttribute("stroke-width",t.w.v),i.msElem&&i.msElem.setAttribute("stroke-width",t.w.v))}return{createRenderFunction:function(e){switch(e.ty){case"fl":return s;case"gf":return o;case"gs":return a;case"st":return l;case"sh":case"el":case"rc":case"sr":return n;case"tr":return r;case"no":return i;default:return null}}}}();function SVGShapeElement(e,t,r){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(e,t,r),this.prevViewData=[]}function LetterProps(e,t,r,i,n,s){this.o=e,this.sw=t,this.sc=r,this.fc=i,this.m=n,this.p=s,this._mdf={o:!0,sw:!!t,sc:!!r,fc:!!i,m:!0,p:!0}}function TextProperty(e,t){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,t.d&&t.d.sid&&(t.d=e.globalData.slotManager.getProp(t.d)),this.data=t,this.elem=e,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var e,t,r,i,n=this.shapes.length,s=this.stylesList.length,a=[],o=!1;for(r=0;r<s;r+=1){for(e=0,i=this.stylesList[r],o=!1,a.length=0;e<n;e+=1)-1!==(t=this.shapes[e]).styles.indexOf(i)&&(a.push(t),o=t._isAnimated||o);a.length>1&&o&&this.setShapesAsAnimated(a)}},SVGShapeElement.prototype.setShapesAsAnimated=function(e){var t,r=e.length;for(t=0;t<r;t+=1)e[t].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(e,t){var r,i=new SVGStyleData(e,t),n=i.pElem;return"st"===e.ty?r=new SVGStrokeStyleData(this,e,i):"fl"===e.ty?r=new SVGFillStyleData(this,e,i):"gf"===e.ty||"gs"===e.ty?(r=new("gf"===e.ty?SVGGradientFillStyleData:SVGGradientStrokeStyleData)(this,e,i),this.globalData.defs.appendChild(r.gf),r.maskId&&(this.globalData.defs.appendChild(r.ms),this.globalData.defs.appendChild(r.of),n.setAttribute("mask","url("+getLocationHref()+"#"+r.maskId+")"))):"no"===e.ty&&(r=new SVGNoStyleData(this,e,i)),("st"===e.ty||"gs"===e.ty)&&(n.setAttribute("stroke-linecap",lineCapEnum[e.lc||2]),n.setAttribute("stroke-linejoin",lineJoinEnum[e.lj||2]),n.setAttribute("fill-opacity","0"),1===e.lj&&n.setAttribute("stroke-miterlimit",e.ml)),2===e.r&&n.setAttribute("fill-rule","evenodd"),e.ln&&n.setAttribute("id",e.ln),e.cl&&n.setAttribute("class",e.cl),e.bm&&(n.style["mix-blend-mode"]=getBlendMode(e.bm)),this.stylesList.push(i),this.addToAnimatedContents(e,r),r},SVGShapeElement.prototype.createGroupElement=function(e){var t=new ShapeGroupData;return e.ln&&t.gr.setAttribute("id",e.ln),e.cl&&t.gr.setAttribute("class",e.cl),e.bm&&(t.gr.style["mix-blend-mode"]=getBlendMode(e.bm)),t},SVGShapeElement.prototype.createTransformElement=function(e,t){var r=TransformPropertyFactory.getTransformProperty(this,e,this),i=new SVGTransformData(r,r.o,t);return this.addToAnimatedContents(e,i),i},SVGShapeElement.prototype.createShapeElement=function(e,t,r){var i=4;"rc"===e.ty?i=5:"el"===e.ty?i=6:"sr"===e.ty&&(i=7);var n=new SVGShapeData(t,r,ShapePropertyFactory.getShapeProp(this,e,i,this));return this.shapes.push(n),this.addShapeToModifiers(n),this.addToAnimatedContents(e,n),n},SVGShapeElement.prototype.addToAnimatedContents=function(e,t){for(var r=0,i=this.animatedContents.length;r<i;){if(this.animatedContents[r].element===t)return;r+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(e),element:t,data:e})},SVGShapeElement.prototype.setElementStyles=function(e){var t,r=e.styles,i=this.stylesList.length;for(t=0;t<i;t+=1)-1!==r.indexOf(this.stylesList[t])||this.stylesList[t].closed||r.push(this.stylesList[t])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var e,t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(e,t,r,i,n,s,a){var o,l,h,u,c,d,p=[].concat(s),f=e.length-1,m=[],g=[];for(o=f;o>=0;o-=1){if((d=this.searchProcessedElement(e[o]))?t[o]=r[d-1]:e[o]._render=a,"fl"===e[o].ty||"st"===e[o].ty||"gf"===e[o].ty||"gs"===e[o].ty||"no"===e[o].ty)d?t[o].style.closed=e[o].hd:t[o]=this.createStyleElement(e[o],n),e[o]._render&&t[o].style.pElem.parentNode!==i&&i.appendChild(t[o].style.pElem),m.push(t[o].style);else if("gr"===e[o].ty){if(d)for(l=0,h=t[o].it.length;l<h;l+=1)t[o].prevViewData[l]=t[o].it[l];else t[o]=this.createGroupElement(e[o]);this.searchShapes(e[o].it,t[o].it,t[o].prevViewData,t[o].gr,n+1,p,a),e[o]._render&&t[o].gr.parentNode!==i&&i.appendChild(t[o].gr)}else"tr"===e[o].ty?(d||(t[o]=this.createTransformElement(e[o],i)),u=t[o].transform,p.push(u)):"sh"===e[o].ty||"rc"===e[o].ty||"el"===e[o].ty||"sr"===e[o].ty?(d||(t[o]=this.createShapeElement(e[o],p,n)),this.setElementStyles(t[o])):"tm"===e[o].ty||"rd"===e[o].ty||"ms"===e[o].ty||"pb"===e[o].ty||"zz"===e[o].ty||"op"===e[o].ty?(d?(c=t[o]).closed=!1:((c=ShapeModifiers.getModifier(e[o].ty)).init(this,e[o]),t[o]=c,this.shapeModifiers.push(c)),g.push(c)):"rp"===e[o].ty&&(d?(c=t[o]).closed=!0:(c=ShapeModifiers.getModifier(e[o].ty),t[o]=c,c.init(this,e,o,t),this.shapeModifiers.push(c),a=!1),g.push(c));this.addProcessedElement(e[o],o+1)}for(o=0,f=m.length;o<f;o+=1)m[o].closed=!0;for(o=0,f=g.length;o<f;o+=1)g[o].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var e,t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].reset();for(this.renderShape(),e=0;e<t;e+=1)(this.stylesList[e]._mdf||this._isFirstFrame)&&(this.stylesList[e].msElem&&(this.stylesList[e].msElem.setAttribute("d",this.stylesList[e].d),this.stylesList[e].d="M0 0"+this.stylesList[e].d),this.stylesList[e].pElem.setAttribute("d",this.stylesList[e].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var e,t,r=this.animatedContents.length;for(e=0;e<r;e+=1)t=this.animatedContents[e],(this._isFirstFrame||t.element._isAnimated)&&!0!==t.data&&t.fn(t.data,t.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null},LetterProps.prototype.update=function(e,t,r,i,n,s){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var a=!1;return this.o!==e&&(this.o=e,this._mdf.o=!0,a=!0),this.sw!==t&&(this.sw=t,this._mdf.sw=!0,a=!0),this.sc!==r&&(this.sc=r,this._mdf.sc=!0,a=!0),this.fc!==i&&(this.fc=i,this._mdf.fc=!0,a=!0),this.m!==n&&(this.m=n,this._mdf.m=!0,a=!0),s.length&&(this.p[0]!==s[0]||this.p[1]!==s[1]||this.p[4]!==s[4]||this.p[5]!==s[5]||this.p[12]!==s[12]||this.p[13]!==s[13])&&(this.p=s,this._mdf.p=!0,a=!0),a},TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},TextProperty.prototype.setCurrentData=function(e){e.__complete||this.completeTextData(e),this.currentData=e,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(e){this.effectsSequence.push(e),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(e){if(this.elem.globalData.frameId!==this.frameId&&this.effectsSequence.length||e){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var t,r=this.currentData,i=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var n=this.effectsSequence.length,s=e||this.data.d.k[this.keysIndex].s;for(t=0;t<n;t+=1)s=i!==this.keysIndex?this.effectsSequence[t](s,s.t):this.effectsSequence[t](this.currentData,s.t);r!==s&&this.setCurrentData(s),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var e=this.data.d.k,t=this.elem.comp.renderedFrame,r=0,i=e.length;r<=i-1&&r!==i-1&&!(e[r+1].t>t);)r+=1;return this.keysIndex!==r&&(this.keysIndex=r),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(e){for(var t,r,i=[],n=0,s=e.length,a=!1,o=!1,l="";n<s;)a=o,o=!1,t=e.charCodeAt(n),l=e.charAt(n),FontManager.isCombinedCharacter(t)?a=!0:t>=55296&&t<=56319?FontManager.isRegionalFlag(e,n)?l=e.substr(n,14):(r=e.charCodeAt(n+1))>=56320&&r<=57343&&(FontManager.isModifier(t,r)?(l=e.substr(n,2),a=!0):l=FontManager.isFlagEmoji(e.substr(n,4))?e.substr(n,4):e.substr(n,2)):t>56319?(r=e.charCodeAt(n+1),FontManager.isVariationSelector(t)&&(a=!0)):FontManager.isZeroWidthJoiner(t)&&(a=!0,o=!0),a?(i[i.length-1]+=l,a=!1):i.push(l),n+=l.length;return i},TextProperty.prototype.completeTextData=function(e){e.__complete=!0;var t=this.elem.globalData.fontManager,r=this.data,i=[],n=0,s=r.m.g,a=0,o=0,l=0,h=[],u=0,c=0,d=t.getFontByName(e.f),p=0,f=getFontProperties(d);e.fWeight=f.weight,e.fStyle=f.style,e.finalSize=e.s,e.finalText=this.buildFinalText(e.t),y=e.finalText.length,e.finalLineHeight=e.lh;var m=e.tr/1e3*e.finalSize;if(e.sz)for(var g,y,v,b,w,E,S,T,C,A,_=!0,x=e.sz[0],k=e.sz[1];_;){A=this.buildFinalText(e.t),C=0,u=0,y=A.length,m=e.tr/1e3*e.finalSize;var I=-1;for(g=0;g<y;g+=1)T=A[g].charCodeAt(0),v=!1," "===A[g]?I=g:(13===T||3===T)&&(u=0,v=!0,C+=e.finalLineHeight||1.2*e.finalSize),t.chars?(S=t.getCharData(A[g],d.fStyle,d.fFamily),p=v?0:S.w*e.finalSize/100):p=t.measureText(A[g],e.f,e.finalSize),u+p>x&&" "!==A[g]?(-1===I?y+=1:g=I,C+=e.finalLineHeight||1.2*e.finalSize,A.splice(g,I===g?1:0,"\r"),I=-1,u=0):u+=p+m;C+=d.ascent*e.finalSize/100,this.canResize&&e.finalSize>this.minimumFontSize&&k<C?(e.finalSize-=1,e.finalLineHeight=e.finalSize*e.lh/e.s):(e.finalText=A,y=e.finalText.length,_=!1)}u=-m,p=0;var D=0;for(g=0;g<y;g+=1)if(v=!1,13===(T=(N=e.finalText[g]).charCodeAt(0))||3===T?(D=0,h.push(u),c=u>c?u:c,u=-2*m,b="",v=!0,l+=1):b=N,t.chars?(S=t.getCharData(N,d.fStyle,t.getFontByName(e.f).fFamily),p=v?0:S.w*e.finalSize/100):p=t.measureText(b,e.f,e.finalSize)," "===N?D+=p+m:(u+=p+m+D,D=0),i.push({l:p,an:p,add:a,n:v,anIndexes:[],val:b,line:l,animatorJustifyOffset:0}),2==s){if(a+=p,""===b||" "===b||g===y-1){for((""===b||" "===b)&&(a-=p);o<=g;)i[o].an=a,i[o].ind=n,i[o].extra=p,o+=1;n+=1,a=0}}else if(3==s){if(a+=p,""===b||g===y-1){for(""===b&&(a-=p);o<=g;)i[o].an=a,i[o].ind=n,i[o].extra=p,o+=1;a=0,n+=1}}else i[n].ind=n,i[n].extra=0,n+=1;if(e.l=i,c=u>c?u:c,h.push(u),e.sz)e.boxWidth=e.sz[0],e.justifyOffset=0;else switch(e.boxWidth=c,e.j){case 1:e.justifyOffset=-e.boxWidth;break;case 2:e.justifyOffset=-e.boxWidth/2;break;default:e.justifyOffset=0}e.lineWidths=h;var P=r.a;E=P.length;var R=[];for(w=0;w<E;w+=1){for((O=P[w]).a.sc&&(e.strokeColorAnim=!0),O.a.sw&&(e.strokeWidthAnim=!0),(O.a.fc||O.a.fh||O.a.fs||O.a.fb)&&(e.fillColorAnim=!0),F=0,L=O.s.b,g=0;g<y;g+=1)(M=i[g]).anIndexes[w]=F,(1==L&&""!==M.val||2==L&&""!==M.val&&" "!==M.val||3==L&&(M.n||" "==M.val||g==y-1)||4==L&&(M.n||g==y-1))&&(1===O.s.rn&&R.push(F),F+=1);r.a[w].s.totalChars=F;var N,O,M,L,F,B,U=-1;if(1===O.s.rn)for(g=0;g<y;g+=1)U!=(M=i[g]).anIndexes[w]&&(U=M.anIndexes[w],B=R.splice(Math.floor(Math.random()*R.length),1)[0]),M.anIndexes[w]=B}e.yOffset=e.finalLineHeight||1.2*e.finalSize,e.ls=e.ls||0,e.ascent=d.ascent*e.finalSize/100},TextProperty.prototype.updateDocumentData=function(e,t){t=void 0===t?this.keysIndex:t;var r=this.copyData({},this.data.d.k[t].s);r=this.copyData(r,e),this.data.d.k[t].s=r,this.recalculate(t),this.setCurrentData(r),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(e){var t=this.data.d.k[e].s;t.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(t)},TextProperty.prototype.canResizeFont=function(e){this.canResize=e,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(e){this.minimumFontSize=Math.floor(e)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var e=Math.max,t=Math.min,r=Math.floor;function i(e,t){this._currentTextLength=-1,this.k=!1,this.data=t,this.elem=e,this.comp=e.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(e),this.s=PropertyFactory.getProp(e,t.s||{k:0},0,0,this),"e"in t?this.e=PropertyFactory.getProp(e,t.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(e,t.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(e,t.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(e,t.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(e,t.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(e,t.a,0,.01,this),this.dynamicProperties.length||this.getValue()}return i.prototype={getMult:function(i){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var n=0,s=0,a=1,o=1;this.ne.v>0?n=this.ne.v/100:s=-this.ne.v/100,this.xe.v>0?a=1-this.xe.v/100:o=1+this.xe.v/100;var l=BezierFactory.getBezierEasing(n,s,a,o).get,h=0,u=this.finalS,c=this.finalE,d=this.data.sh;if(2===d)h=l(h=c===u?i>=c?1:0:e(0,t(.5/(c-u)+(i-u)/(c-u),1)));else if(3===d)h=l(h=c===u?i>=c?0:1:1-e(0,t(.5/(c-u)+(i-u)/(c-u),1)));else if(4===d)c===u?h=0:(h=e(0,t(.5/(c-u)+(i-u)/(c-u),1)))<.5?h*=2:h=1-2*(h-.5),h=l(h);else if(5===d){if(c===u)h=0;else{var p=c-u,f=-p/2+(i=t(e(0,i+.5-u),c-u)),m=p/2;h=Math.sqrt(1-f*f/(m*m))}h=l(h)}else 6===d?h=l(h=c===u?0:(1+Math.cos(Math.PI+2*Math.PI*(i=t(e(0,i+.5-u),c-u))/(c-u)))/2):(i>=r(u)&&(h=i-u<0?e(0,t(t(c,1)-(u-i),1)):e(0,t(c-i,1))),h=l(h));if(100!==this.sm.v){var g=.01*this.sm.v;0===g&&(g=1e-8);var y=.5-.5*g;h<y?h=0:(h=(h-y)/g)>1&&(h=1)}return h*this.a.v},getValue:function(e){this.iterateDynamicProperties(),this._mdf=e||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,e&&2===this.data.r&&(this.e.v=this._currentTextLength);var t=2===this.data.r?1:100/this.data.totalChars,r=this.o.v/t,i=this.s.v/t+r,n=this.e.v/t+r;if(i>n){var s=i;i=n,n=s}this.finalS=i,this.finalE=n}},extendPrototype([DynamicPropertyContainer],i),{getTextSelectorProp:function(e,t,r){return new i(e,t,r)}}}();function TextAnimatorDataProperty(e,t,r){var i={propType:!1},n=PropertyFactory.getProp,s=t.a;this.a={r:s.r?n(e,s.r,0,degToRads,r):i,rx:s.rx?n(e,s.rx,0,degToRads,r):i,ry:s.ry?n(e,s.ry,0,degToRads,r):i,sk:s.sk?n(e,s.sk,0,degToRads,r):i,sa:s.sa?n(e,s.sa,0,degToRads,r):i,s:s.s?n(e,s.s,1,.01,r):i,a:s.a?n(e,s.a,1,0,r):i,o:s.o?n(e,s.o,0,.01,r):i,p:s.p?n(e,s.p,1,0,r):i,sw:s.sw?n(e,s.sw,0,0,r):i,sc:s.sc?n(e,s.sc,1,0,r):i,fc:s.fc?n(e,s.fc,1,0,r):i,fh:s.fh?n(e,s.fh,0,0,r):i,fs:s.fs?n(e,s.fs,0,.01,r):i,fb:s.fb?n(e,s.fb,0,.01,r):i,t:s.t?n(e,s.t,0,0,r):i},this.s=TextSelectorProp.getTextSelectorProp(e,t.s,r),this.s.t=t.s.t}function TextAnimatorProperty(e,t,r){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=e,this._renderType=t,this._elem=r,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(r)}function ITextElement(){}TextAnimatorProperty.prototype.searchProperties=function(){var e,t,r=this._textData.a.length,i=PropertyFactory.getProp;for(e=0;e<r;e+=1)t=this._textData.a[e],this._animatorsData[e]=new TextAnimatorDataProperty(this._elem,t,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:i(this._elem,this._textData.p.a,0,0,this),f:i(this._elem,this._textData.p.f,0,0,this),l:i(this._elem,this._textData.p.l,0,0,this),r:i(this._elem,this._textData.p.r,0,0,this),p:i(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=i(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(e,t){if(this.lettersChangedFlag=t,this._mdf||this._isFirstFrame||t||this._hasMaskedPath&&this._pathData.m._mdf){this._isFirstFrame=!1;var r,i,n,s,a,o,l,h,u,c,d,p,f,m,g,y,v,b,w=this._moreOptions.alignment.v,E=this._animatorsData,S=this._textData,T=this.mHelper,C=this._renderType,A=this.renderedLetters.length,_=e.l;if(this._hasMaskedPath){if(q=this._pathData.m,!this._pathData.n||this._pathData._mdf){var x,k,I,D,P,R,N,O,M,L,F,B,U,z,V,j,G,q,H,W=q.v;for(this._pathData.r.v&&(W=W.reverse()),P={tLength:0,segments:[]},D=W._length-1,j=0,I=0;I<D;I+=1)H=bez.buildBezierData(W.v[I],W.v[I+1],[W.o[I][0]-W.v[I][0],W.o[I][1]-W.v[I][1]],[W.i[I+1][0]-W.v[I+1][0],W.i[I+1][1]-W.v[I+1][1]]),P.tLength+=H.segmentLength,P.segments.push(H),j+=H.segmentLength;I=D,q.v.c&&(H=bez.buildBezierData(W.v[I],W.v[0],[W.o[I][0]-W.v[I][0],W.o[I][1]-W.v[I][1]],[W.i[0][0]-W.v[0][0],W.i[0][1]-W.v[0][1]]),P.tLength+=H.segmentLength,P.segments.push(H),j+=H.segmentLength),this._pathData.pi=P}if(P=this._pathData.pi,R=this._pathData.f.v,F=0,L=1,O=0,M=!0,z=P.segments,R<0&&q.v.c)for(P.tLength<Math.abs(R)&&(R=-Math.abs(R)%P.tLength),F=z.length-1,L=(U=z[F].points).length-1;R<0;)R+=U[L].partialLength,(L-=1)<0&&(F-=1,L=(U=z[F].points).length-1);B=(U=z[F].points)[L-1],V=(N=U[L]).partialLength}D=_.length,x=0,k=0;var K=1.2*e.finalSize*.714,Q=!0;s=E.length;var $=-1,J=R,Y=F,X=L,Z=-1,ee="",et=this.defaultPropsArray;if(2===e.j||1===e.j){var er=0,ei=0,en=2===e.j?-.5:-1,es=0,ea=!0;for(I=0;I<D;I+=1)if(_[I].n){for(er&&(er+=ei);es<I;)_[es].animatorJustifyOffset=er,es+=1;er=0,ea=!0}else{for(n=0;n<s;n+=1)(r=E[n].a).t.propType&&(ea&&2===e.j&&(ei+=r.t.v*en),(o=(i=E[n].s).getMult(_[I].anIndexes[n],S.a[n].s.totalChars)).length?er+=r.t.v*o[0]*en:er+=r.t.v*o*en);ea=!1}for(er&&(er+=ei);es<I;)_[es].animatorJustifyOffset=er,es+=1}for(I=0;I<D;I+=1){if(T.reset(),c=1,_[I].n)x=0,k+=e.yOffset+(Q?1:0),R=J,Q=!1,this._hasMaskedPath&&(F=Y,L=X,B=(U=z[F].points)[L-1],V=(N=U[L]).partialLength,O=0),ee="",v="",g="",b="",et=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Z!==_[I].line){switch(e.j){case 1:R+=j-e.lineWidths[_[I].line];break;case 2:R+=(j-e.lineWidths[_[I].line])/2}Z=_[I].line}$!==_[I].ind&&(_[$]&&(R+=_[$].extra),R+=_[I].an/2,$=_[I].ind),R+=w[0]*_[I].an*.005;var eo=0;for(n=0;n<s;n+=1)(r=E[n].a).p.propType&&((o=(i=E[n].s).getMult(_[I].anIndexes[n],S.a[n].s.totalChars)).length?eo+=r.p.v[0]*o[0]:eo+=r.p.v[0]*o),r.a.propType&&((o=(i=E[n].s).getMult(_[I].anIndexes[n],S.a[n].s.totalChars)).length?eo+=r.a.v[0]*o[0]:eo+=r.a.v[0]*o);for(M=!0,this._pathData.a.v&&(R=.5*_[0].an+(j-this._pathData.f.v-.5*_[0].an-.5*_[_.length-1].an)*$/(D-1)+this._pathData.f.v);M;)O+V>=R+eo||!U?(G=(R+eo-O)/N.partialLength,h=B.point[0]+(N.point[0]-B.point[0])*G,u=B.point[1]+(N.point[1]-B.point[1])*G,T.translate(-w[0]*_[I].an*.005,-(w[1]*K*.01)),M=!1):U&&(O+=N.partialLength,(L+=1)>=U.length&&(L=0,z[F+=1]?U=z[F].points:q.v.c?(L=0,U=z[F=0].points):(O-=N.partialLength,U=null)),U&&(B=N,V=(N=U[L]).partialLength));l=_[I].an/2-_[I].add,T.translate(-l,0,0)}else l=_[I].an/2-_[I].add,T.translate(-l,0,0),T.translate(-w[0]*_[I].an*.005,-w[1]*K*.01,0);for(n=0;n<s;n+=1)(r=E[n].a).t.propType&&(o=(i=E[n].s).getMult(_[I].anIndexes[n],S.a[n].s.totalChars),(0!==x||0!==e.j)&&(this._hasMaskedPath?o.length?R+=r.t.v*o[0]:R+=r.t.v*o:o.length?x+=r.t.v*o[0]:x+=r.t.v*o));for(e.strokeWidthAnim&&(p=e.sw||0),e.strokeColorAnim&&(d=e.sc?[e.sc[0],e.sc[1],e.sc[2]]:[0,0,0]),e.fillColorAnim&&e.fc&&(f=[e.fc[0],e.fc[1],e.fc[2]]),n=0;n<s;n+=1)(r=E[n].a).a.propType&&((o=(i=E[n].s).getMult(_[I].anIndexes[n],S.a[n].s.totalChars)).length?T.translate(-r.a.v[0]*o[0],-r.a.v[1]*o[1],r.a.v[2]*o[2]):T.translate(-r.a.v[0]*o,-r.a.v[1]*o,r.a.v[2]*o));for(n=0;n<s;n+=1)(r=E[n].a).s.propType&&((o=(i=E[n].s).getMult(_[I].anIndexes[n],S.a[n].s.totalChars)).length?T.scale(1+(r.s.v[0]-1)*o[0],1+(r.s.v[1]-1)*o[1],1):T.scale(1+(r.s.v[0]-1)*o,1+(r.s.v[1]-1)*o,1));for(n=0;n<s;n+=1){if(r=E[n].a,o=(i=E[n].s).getMult(_[I].anIndexes[n],S.a[n].s.totalChars),r.sk.propType&&(o.length?T.skewFromAxis(-r.sk.v*o[0],r.sa.v*o[1]):T.skewFromAxis(-r.sk.v*o,r.sa.v*o)),r.r.propType&&(o.length?T.rotateZ(-r.r.v*o[2]):T.rotateZ(-r.r.v*o)),r.ry.propType&&(o.length?T.rotateY(r.ry.v*o[1]):T.rotateY(r.ry.v*o)),r.rx.propType&&(o.length?T.rotateX(r.rx.v*o[0]):T.rotateX(r.rx.v*o)),r.o.propType&&(o.length?c+=(r.o.v*o[0]-c)*o[0]:c+=(r.o.v*o-c)*o),e.strokeWidthAnim&&r.sw.propType&&(o.length?p+=r.sw.v*o[0]:p+=r.sw.v*o),e.strokeColorAnim&&r.sc.propType)for(m=0;m<3;m+=1)o.length?d[m]+=(r.sc.v[m]-d[m])*o[0]:d[m]+=(r.sc.v[m]-d[m])*o;if(e.fillColorAnim&&e.fc){if(r.fc.propType)for(m=0;m<3;m+=1)o.length?f[m]+=(r.fc.v[m]-f[m])*o[0]:f[m]+=(r.fc.v[m]-f[m])*o;r.fh.propType&&(f=o.length?addHueToRGB(f,r.fh.v*o[0]):addHueToRGB(f,r.fh.v*o)),r.fs.propType&&(f=o.length?addSaturationToRGB(f,r.fs.v*o[0]):addSaturationToRGB(f,r.fs.v*o)),r.fb.propType&&(f=o.length?addBrightnessToRGB(f,r.fb.v*o[0]):addBrightnessToRGB(f,r.fb.v*o))}}for(n=0;n<s;n+=1)(r=E[n].a).p.propType&&(o=(i=E[n].s).getMult(_[I].anIndexes[n],S.a[n].s.totalChars),this._hasMaskedPath?o.length?T.translate(0,r.p.v[1]*o[0],-r.p.v[2]*o[1]):T.translate(0,r.p.v[1]*o,-r.p.v[2]*o):o.length?T.translate(r.p.v[0]*o[0],r.p.v[1]*o[1],-r.p.v[2]*o[2]):T.translate(r.p.v[0]*o,r.p.v[1]*o,-r.p.v[2]*o));if(e.strokeWidthAnim&&(g=p<0?0:p),e.strokeColorAnim&&(y="rgb("+Math.round(255*d[0])+","+Math.round(255*d[1])+","+Math.round(255*d[2])+")"),e.fillColorAnim&&e.fc&&(v="rgb("+Math.round(255*f[0])+","+Math.round(255*f[1])+","+Math.round(255*f[2])+")"),this._hasMaskedPath){if(T.translate(0,-e.ls),T.translate(0,w[1]*K*.01+k,0),this._pathData.p.v){var el=180*Math.atan((N.point[1]-B.point[1])/(N.point[0]-B.point[0]))/Math.PI;N.point[0]<B.point[0]&&(el+=180),T.rotate(-el*Math.PI/180)}T.translate(h,u,0),R-=w[0]*_[I].an*.005,_[I+1]&&$!==_[I+1].ind&&(R+=_[I].an/2+.001*e.tr*e.finalSize)}else{switch(T.translate(x,k,0),e.ps&&T.translate(e.ps[0],e.ps[1]+e.ascent,0),e.j){case 1:T.translate(_[I].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[_[I].line]),0,0);break;case 2:T.translate(_[I].animatorJustifyOffset+e.justifyOffset+(e.boxWidth-e.lineWidths[_[I].line])/2,0,0)}T.translate(0,-e.ls),T.translate(l,0,0),T.translate(w[0]*_[I].an*.005,w[1]*K*.01,0),x+=_[I].l+.001*e.tr*e.finalSize}"html"===C?ee=T.toCSS():"svg"===C?ee=T.to2dCSS():et=[T.props[0],T.props[1],T.props[2],T.props[3],T.props[4],T.props[5],T.props[6],T.props[7],T.props[8],T.props[9],T.props[10],T.props[11],T.props[12],T.props[13],T.props[14],T.props[15]],b=c}A<=I?(a=new LetterProps(b,g,y,v,ee,et),this.renderedLetters.push(a),A+=1,this.lettersChangedFlag=!0):(a=this.renderedLetters[I],this.lettersChangedFlag=a.update(b,g,y,v,ee,et)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty),ITextElement.prototype.initElement=function(e,t,r){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(e,t,r),this.textProperty=new TextProperty(this,e.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(e.t,this.renderType,this),this.initTransform(e,t,r),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(e){this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange)},ITextElement.prototype.createPathShape=function(e,t){var r,i,n=t.length,s="";for(r=0;r<n;r+=1)"sh"===t[r].ty&&(s+=buildShapeString(i=t[r].ks.k,i.i.length,!0,e));return s},ITextElement.prototype.updateDocumentData=function(e,t){this.textProperty.updateDocumentData(e,t)},ITextElement.prototype.canResizeFont=function(e){this.textProperty.canResizeFont(e)},ITextElement.prototype.setMinimumFontSize=function(e){this.textProperty.setMinimumFontSize(e)},ITextElement.prototype.applyTextPropertiesToMatrix=function(e,t,r,i,n){switch(e.ps&&t.translate(e.ps[0],e.ps[1]+e.ascent,0),t.translate(0,-e.ls,0),e.j){case 1:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[r]),0,0);break;case 2:t.translate(e.justifyOffset+(e.boxWidth-e.lineWidths[r])/2,0,0)}t.translate(i,n,0)},ITextElement.prototype.buildColor=function(e){return"rgb("+Math.round(255*e[0])+","+Math.round(255*e[1])+","+Math.round(255*e[2])+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(e,t,r){this.textSpans=[],this.renderType="svg",this.initElement(e,t,r)}function ISolidElement(e,t,r){this.initElement(e,t,r)}function NullElement(e,t,r){this.initFrame(),this.initBaseData(e,t,r),this.initFrame(),this.initTransform(e,t,r),this.initHierarchy()}function SVGRendererBase(){}function ICompElement(){}function SVGCompElement(e,t,r){this.layers=e.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,r),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function SVGRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var r="";if(t&&t.title){var i=createNS("title"),n=createElementID();i.setAttribute("id",n),i.textContent=t.title,this.svgElement.appendChild(i),r+=n}if(t&&t.description){var s=createNS("desc"),a=createElementID();s.setAttribute("id",a),s.textContent=t.description,this.svgElement.appendChild(s),r+=" "+a}r&&this.svgElement.setAttribute("aria-labelledby",r);var o=createNS("defs");this.svgElement.appendChild(o);var l=createNS("g");this.svgElement.appendChild(l),this.layerElement=l,this.renderConfig={preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",progressiveLoad:t&&t.progressiveLoad||!1,hideOnTransparent:!(t&&!1===t.hideOnTransparent),viewBoxOnly:t&&t.viewBoxOnly||!1,viewBoxSize:t&&t.viewBoxSize||!1,className:t&&t.className||"",id:t&&t.id||"",focusable:t&&t.focusable,filterSize:{width:t&&t.filterSize&&t.filterSize.width||"100%",height:t&&t.filterSize&&t.filterSize.height||"100%",x:t&&t.filterSize&&t.filterSize.x||"0%",y:t&&t.filterSize&&t.filterSize.y||"0%"},width:t&&t.width,height:t&&t.height,runExpressions:!t||void 0===t.runExpressions||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:o,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(e){for(var t=0,r=e.length,i=[],n="";t<r;)"\r"===e[t]||"\x03"===e[t]?(i.push(n),n=""):n+=e[t],t+=1;return i.push(n),i},SVGTextLottieElement.prototype.buildShapeData=function(e,t){if(e.shapes&&e.shapes.length){var r=e.shapes[0];if(r.it){var i=r.it[r.it.length-1];i.s&&(i.s.k[0]=t,i.s.k[1]=t)}}return e},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e?e.l.length:0),e.fc?this.layerElement.setAttribute("fill",this.buildColor(e.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),e.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(e.sc)),this.layerElement.setAttribute("stroke-width",e.sw)),this.layerElement.setAttribute("font-size",e.finalSize);var t=this.globalData.fontManager.getFontByName(e.f);if(t.fClass)this.layerElement.setAttribute("class",t.fClass);else{this.layerElement.setAttribute("font-family",t.fFamily);var r=e.fWeight,i=e.fStyle;this.layerElement.setAttribute("font-style",i),this.layerElement.setAttribute("font-weight",r)}this.layerElement.setAttribute("aria-label",e.t);var n=e.l||[],s=!!this.globalData.fontManager.chars;g=n.length;var a=this.mHelper,o="",l=this.data.singleShape,h=0,u=0,c=!0,d=.001*e.tr*e.finalSize;if(!l||s||e.sz){var p=this.textSpans.length;for(m=0;m<g;m+=1){if(this.textSpans[m]||(this.textSpans[m]={span:null,childSpan:null,glyph:null}),!s||!l||0===m){if(y=p>m?this.textSpans[m].span:createNS(s?"g":"text"),p<=m){if(y.setAttribute("stroke-linecap","butt"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit","4"),this.textSpans[m].span=y,s){var f=createNS("g");y.appendChild(f),this.textSpans[m].childSpan=f}this.textSpans[m].span=y,this.layerElement.appendChild(y)}y.style.display="inherit"}if(a.reset(),l&&(n[m].n&&(h=-d,u+=e.yOffset+(c?1:0),c=!1),this.applyTextPropertiesToMatrix(e,a,n[m].line,h,u),h+=(n[m].l||0)+d),s){if(1===(v=this.globalData.fontManager.getCharData(e.finalText[m],t.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily)).t)b=new SVGCompElement(v.data,this.globalData,this);else{var m,g,y,v,b,w=emptyShapeData;v.data&&v.data.shapes&&(w=this.buildShapeData(v.data,e.finalSize)),b=new SVGShapeElement(w,this.globalData,this)}if(this.textSpans[m].glyph){var E=this.textSpans[m].glyph;this.textSpans[m].childSpan.removeChild(E.layerElement),E.destroy()}this.textSpans[m].glyph=b,b._debug=!0,b.prepareFrame(0),b.renderFrame(),this.textSpans[m].childSpan.appendChild(b.layerElement),1===v.t&&this.textSpans[m].childSpan.setAttribute("transform","scale("+e.finalSize/100+","+e.finalSize/100+")")}else l&&y.setAttribute("transform","translate("+a.props[12]+","+a.props[13]+")"),y.textContent=n[m].val,y.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}l&&y&&y.setAttribute("d",o)}else{var S=this.textContainer,T="start";switch(e.j){case 1:T="end";break;case 2:T="middle";break;default:T="start"}S.setAttribute("text-anchor",T),S.setAttribute("letter-spacing",d);var C=this.buildTextContents(e.finalText);for(m=0,g=C.length,u=e.ps?e.ps[1]+e.ascent:0;m<g;m+=1)(y=this.textSpans[m].span||createNS("tspan")).textContent=C[m],y.setAttribute("x",0),y.setAttribute("y",u),y.style.display="inherit",S.appendChild(y),this.textSpans[m]||(this.textSpans[m]={span:null,glyph:null}),this.textSpans[m].span=y,u+=e.finalLineHeight;this.layerElement.appendChild(S)}for(;m<this.textSpans.length;)this.textSpans[m].span.style.display="none",m+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var e=this.layerElement.getBBox();this.bbox={top:e.y,left:e.x,width:e.width,height:e.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var e,t,r=this.textSpans.length;for(e=0,this.renderedFrame=this.comp.renderedFrame;e<r;e+=1)(t=this.textSpans[e].glyph)&&(t.prepareFrame(this.comp.renderedFrame-this.data.st),t._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var e,t,r,i,n,s=this.textAnimator.renderedLetters,a=this.textProperty.currentData.l;for(e=0,t=a.length;e<t;e+=1)!a[e].n&&(r=s[e],i=this.textSpans[e].span,(n=this.textSpans[e].glyph)&&n.renderFrame(),r._mdf.m&&i.setAttribute("transform",r.m),r._mdf.o&&i.setAttribute("opacity",r.o),r._mdf.sw&&i.setAttribute("stroke-width",r.sw),r._mdf.sc&&i.setAttribute("stroke",r.sc),r._mdf.fc&&i.setAttribute("fill",r.fc))}},extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var e=createNS("rect");e.setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.layerElement.appendChild(e)},NullElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement),extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(e){return new NullElement(e,this.globalData,this)},SVGRendererBase.prototype.createShape=function(e){return new SVGShapeElement(e,this.globalData,this)},SVGRendererBase.prototype.createText=function(e){return new SVGTextLottieElement(e,this.globalData,this)},SVGRendererBase.prototype.createImage=function(e){return new IImageElement(e,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(e){return new ISolidElement(e,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(e){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+e.w+" "+e.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",e.w),this.svgElement.setAttribute("height",e.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),void 0!==this.renderConfig.focusable&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var t=this.globalData.defs;this.setupGlobalData(e,t),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=e;var r=createNS("clipPath"),i=createNS("rect");i.setAttribute("width",e.w),i.setAttribute("height",e.h),i.setAttribute("x",0),i.setAttribute("y",0);var n=createElementID();r.setAttribute("id",n),r.appendChild(i),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+n+")"),t.appendChild(r),this.layers=e.layers,this.elements=createSizedArray(e.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var e,t=this.layers?this.layers.length:0;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(e){var t=0,r=this.layers.length;for(t=0;t<r;t+=1)if(this.layers[t].ind===e)return t;return -1},SVGRendererBase.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!==this.layers[e].ty){t[e]=!0;var r=this.createItem(this.layers[e]);if(t[e]=r,getExpressionsPlugin()&&(0===this.layers[e].ty&&this.globalData.projectInterface.registerComposition(r),r.initExpressions()),this.appendElementInPos(r,e),this.layers[e].tt){var i="tp"in this.layers[e]?this.findIndexByInd(this.layers[e].tp):e-1;if(-1===i)return;if(this.elements[i]&&!0!==this.elements[i]){var n=t[i].getMatte(this.layers[e].tt);r.setMatte(n)}else this.buildItem(i),this.addPendingElement(r)}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var e=this.pendingElements.pop();if(e.checkParenting(),e.data.tt)for(var t=0,r=this.elements.length;t<r;){if(this.elements[t]===e){var i="tp"in e.data?this.findIndexByInd(e.data.tp):t-1,n=this.elements[i].getMatte(this.layers[t].tt);e.setMatte(n);break}t+=1}}},SVGRendererBase.prototype.renderFrame=function(e){if(this.renderedFrame!==e&&!this.destroyed){null===e?e=this.renderedFrame:this.renderedFrame=e,this.globalData.frameNum=e,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=e,this.globalData._mdf=!1;var t,r=this.layers.length;for(this.completeLayers||this.checkLayers(e),t=r-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&this.elements[t].prepareFrame(e-this.layers[t].st);if(this.globalData._mdf)for(t=0;t<r;t+=1)(this.completeLayers||this.elements[t])&&this.elements[t].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(e,t){var r,i=e.getBaseElement();if(i){for(var n=0;n<t;)this.elements[n]&&!0!==this.elements[n]&&this.elements[n].getBaseElement()&&(r=this.elements[n].getBaseElement()),n+=1;r?this.layerElement.insertBefore(i,r):this.layerElement.appendChild(i)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(e,t,r){this.initFrame(),this.initBaseData(e,t,r),this.initTransform(e,t,r),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!t.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(e){if(this._mdf=!1,this.prepareRenderableFrame(e),this.prepareProperties(e,this.isInRange),this.isInRange||this.data.xt){if(this.tm._placeholder)this.renderedFrame=e/this.data.sr;else{var t,r=this.tm.v;r===this.data.op&&(r=this.data.op-1),this.renderedFrame=r}var i=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),t=i-1;t>=0;t-=1)(this.completeLayers||this.elements[t])&&(this.elements[t].prepareFrame(this.renderedFrame-this.layers[t].st),this.elements[t]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},ICompElement.prototype.setElements=function(e){this.elements=e},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var e,t=this.layers.length;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()},extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)},extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(e){return new SVGCompElement(e,this.globalData,this)},ShapeTransformManager.prototype={addTransformSequence:function(e){var t,r=e.length,i="_";for(t=0;t<r;t+=1)i+=e[t].transform.key+"_";var n=this.sequences[i];return n||(n={transforms:[].concat(e),finalTransform:new Matrix,_mdf:!1},this.sequences[i]=n,this.sequenceList.push(n)),n},processSequence:function(e,t){for(var r=0,i=e.transforms.length,n=t;r<i&&!t;){if(e.transforms[r].transform.mProps._mdf){n=!0;break}r+=1}if(n)for(e.finalTransform.reset(),r=i-1;r>=0;r-=1)e.finalTransform.multiply(e.transforms[r].transform.mProps.v);e._mdf=n},processSequences:function(e){var t,r=this.sequenceList.length;for(t=0;t<r;t+=1)this.processSequence(this.sequenceList[t],e)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var e="__lottie_element_luma_buffer",t=null,r=null,i=null;function n(){var t=createNS("svg"),r=createNS("filter"),i=createNS("feColorMatrix");return r.setAttribute("id",e),i.setAttribute("type","matrix"),i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),r.appendChild(i),t.appendChild(r),t.setAttribute("id",e+"_svg"),featureSupport.svgLumaHidden&&(t.style.display="none"),t}function s(){t||(i=n(),document.body.appendChild(i),(r=(t=createTag("canvas")).getContext("2d")).filter="url(#"+e+")",r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1))}function a(i){return t||s(),t.width=i.width,t.height=i.height,r.filter="url(#"+e+")",t}return{load:s,get:a}};function createCanvas(e,t){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(e,t);var r=createTag("canvas");return r.width=e,r.height=t,r}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas:createCanvas}}(),registeredEffects={};function CVEffects(e){var t,r,i=e.data.ef?e.data.ef.length:0;for(t=0,this.filters=[];t<i;t+=1){r=null;var n=e.data.ef[t].ty;registeredEffects[n]&&(r=new registeredEffects[n].effect(e.effectsManager.effectElements[t],e)),r&&this.filters.push(r)}this.filters.length&&e.addRenderableComponent(this)}function registerEffect(e,t){registeredEffects[e]={effect:t}}function CVMaskElement(e,t){this.data=e,this.element=t,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var r,i=this.masksProperties.length,n=!1;for(r=0;r<i;r+=1)"n"!==this.masksProperties[r].mode&&(n=!0),this.viewData[r]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[r],3);this.hasMasks=n,n&&this.element.addRenderableComponent(this)}function CVBaseElement(){}CVEffects.prototype.renderFrame=function(e){var t,r=this.filters.length;for(t=0;t<r;t+=1)this.filters[t].renderFrame(e)},CVEffects.prototype.getEffects=function(e){var t,r=this.filters.length,i=[];for(t=0;t<r;t+=1)this.filters[t].type===e&&i.push(this.filters[t]);return i},CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var e=this.element.finalTransform.mat,t=this.element.canvasContext,r=this.masksProperties.length;for(t.beginPath(),i=0;i<r;i+=1)if("n"!==this.masksProperties[i].mode){this.masksProperties[i].inv&&(t.moveTo(0,0),t.lineTo(this.element.globalData.compSize.w,0),t.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),t.lineTo(0,this.element.globalData.compSize.h),t.lineTo(0,0)),a=this.viewData[i].v,n=e.applyToPointArray(a.v[0][0],a.v[0][1],0),t.moveTo(n[0],n[1]);var i,n,s,a,o,l=a._length;for(o=1;o<l;o+=1)s=e.applyToTriplePoints(a.o[o-1],a.i[o],a.v[o]),t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);s=e.applyToTriplePoints(a.o[o-1],a.i[0],a.v[0]),t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}this.element.globalData.renderer.save(!0),t.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};function CVShapeData(e,t,r,i){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var n,s,a=4;"rc"===t.ty?a=5:"el"===t.ty?a=6:"sr"===t.ty&&(a=7),this.sh=ShapePropertyFactory.getShapeProp(e,t,a,e);var o=r.length;for(n=0;n<o;n+=1)r[n].closed||(s={transforms:i.addTransformSequence(r[n].transforms),trNodes:[]},this.styledShapes.push(s),r[n].elements.push(s))}function CVShapeElement(e,t,r){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(e,t,r)}function CVTextElement(e,t,r){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(e,t,r)}function CVImageElement(e,t,r){this.assetData=t.getAssetData(e.refId),this.img=t.imageLoader.getAsset(this.assetData),this.initElement(e,t,r)}function CVSolidElement(e,t,r){this.initElement(e,t,r)}function CanvasRendererBase(){}function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var e,t=15;for(e=0;e<t;e+=1){var r=new CanvasContext;this.stack[e]=r}this._length=t,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}function CVCompElement(e,t,r){this.completeLayers=!1,this.layers=e.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(e,t,r),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function CanvasRenderer(e,t){this.animationItem=e,this.renderConfig={clearCanvas:!t||void 0===t.clearCanvas||t.clearCanvas,context:t&&t.context||null,progressiveLoad:t&&t.progressiveLoad||!1,preserveAspectRatio:t&&t.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:t&&t.contentVisibility||"visible",className:t&&t.className||"",id:t&&t.id||"",runExpressions:!t||void 0===t.runExpressions||t.runExpressions},this.renderConfig.dpr=t&&t.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=t&&t.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}function HBaseElement(){}function HSolidElement(e,t,r){this.initElement(e,t,r)}function HShapeElement(e,t,r){this.shapes=[],this.shapesData=e.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(e,t,r),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}function HTextElement(e,t,r){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(e,t,r)}function HCameraElement(e,t,r){this.initFrame(),this.initBaseData(e,t,r),this.initHierarchy();var i=PropertyFactory.getProp;if(this.pe=i(this,e.pe,0,0,this),e.ks.p.s?(this.px=i(this,e.ks.p.x,1,0,this),this.py=i(this,e.ks.p.y,1,0,this),this.pz=i(this,e.ks.p.z,1,0,this)):this.p=i(this,e.ks.p,1,0,this),e.ks.a&&(this.a=i(this,e.ks.a,1,0,this)),e.ks.or.k.length&&e.ks.or.k[0].to){var n,s=e.ks.or.k.length;for(n=0;n<s;n+=1)e.ks.or.k[n].to=null,e.ks.or.k[n].ti=null}this.or=i(this,e.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=i(this,e.ks.rx,0,degToRads,this),this.ry=i(this,e.ks.ry,0,degToRads,this),this.rz=i(this,e.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}function HImageElement(e,t,r){this.assetData=t.getAssetData(e.refId),this.initElement(e,t,r)}function HybridRendererBase(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&!1===t.hideOnTransparent),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}function HCompElement(e,t,r){this.layers=e.layers,this.supports3d=!e.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(e,t,r),this.tm=e.tm?PropertyFactory.getProp(this,e.tm,0,t.frameRate,this):{_placeholder:!0}}function HybridRenderer(e,t){this.animationItem=e,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:t&&t.className||"",imagePreserveAspectRatio:t&&t.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(t&&!1===t.hideOnTransparent),filterSize:{width:t&&t.filterSize&&t.filterSize.width||"400%",height:t&&t.filterSize&&t.filterSize.height||"400%",x:t&&t.filterSize&&t.filterSize.x||"-100%",y:t&&t.filterSize&&t.filterSize.y||"-100%"},runExpressions:!t||void 0===t.runExpressions||t.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var e=this.globalData.canvasContext,t=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(t);var r=assetLoader.createCanvas(e.canvas.width,e.canvas.height);this.buffers.push(r),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var e=this.globalData;if(e.blendMode!==this.data.bm){e.blendMode=this.data.bm;var t=getBlendMode(this.data.bm);e.canvasContext.globalCompositeOperation=t}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){this.hidden||this.isInRange&&!this.isTransparent||(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(e){e.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var e=this.buffers[0].getContext("2d");this.clearCanvas(e),e.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var e=this.buffers[1],t=e.getContext("2d");if(this.clearCanvas(t),t.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform),this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1).renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var r=assetLoader.getLumaCanvas(this.canvasContext.canvas);r.getContext("2d").drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(r,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(e,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(e){if(!this.hidden&&!this.data.hd&&(1!==this.data.td||e)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var t=0===this.data.ty;this.prepareLayer(),this.globalData.renderer.save(t),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(t),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement,CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated,extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(e,t){var r={data:e,type:e.ty,preTransforms:this.transformsManager.addTransformSequence(t),transforms:[],elements:[],closed:!0===e.hd},i={};if("fl"===e.ty||"st"===e.ty?(i.c=PropertyFactory.getProp(this,e.c,1,255,this),i.c.k||(r.co="rgb("+bmFloor(i.c.v[0])+","+bmFloor(i.c.v[1])+","+bmFloor(i.c.v[2])+")")):("gf"===e.ty||"gs"===e.ty)&&(i.s=PropertyFactory.getProp(this,e.s,1,null,this),i.e=PropertyFactory.getProp(this,e.e,1,null,this),i.h=PropertyFactory.getProp(this,e.h||{k:0},0,.01,this),i.a=PropertyFactory.getProp(this,e.a||{k:0},0,degToRads,this),i.g=new GradientProperty(this,e.g,this)),i.o=PropertyFactory.getProp(this,e.o,0,.01,this),"st"===e.ty||"gs"===e.ty){if(r.lc=lineCapEnum[e.lc||2],r.lj=lineJoinEnum[e.lj||2],1==e.lj&&(r.ml=e.ml),i.w=PropertyFactory.getProp(this,e.w,0,null,this),i.w.k||(r.wi=i.w.v),e.d){var n=new DashProperty(this,e.d,"canvas",this);i.d=n,i.d.k||(r.da=i.d.dashArray,r.do=i.d.dashoffset[0])}}else r.r=2===e.r?"evenodd":"nonzero";return this.stylesList.push(r),i.style=r,i},CVShapeElement.prototype.createGroupElement=function(){return{it:[],prevViewData:[]}},CVShapeElement.prototype.createTransformElement=function(e){return{transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,e.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,e,this)}}},CVShapeElement.prototype.createShapeElement=function(e){var t=new CVShapeData(this,e,this.stylesList,this.transformsManager);return this.shapes.push(t),this.addShapeToModifiers(t),t},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var e,t=this.itemsData.length;for(e=0;e<t;e+=1)this.prevViewData[e]=this.itemsData[e];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),t=this.dynamicProperties.length,e=0;e<t;e+=1)this.dynamicProperties[e].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(e){var t,r=this.stylesList.length;for(t=0;t<r;t+=1)this.stylesList[t].closed||this.stylesList[t].transforms.push(e)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var e,t=this.stylesList.length;for(e=0;e<t;e+=1)this.stylesList[e].closed||this.stylesList[e].transforms.pop()},CVShapeElement.prototype.closeStyles=function(e){var t,r=e.length;for(t=0;t<r;t+=1)e[t].closed=!0},CVShapeElement.prototype.searchShapes=function(e,t,r,i,n){var s,a,o,l,h,u,c=e.length-1,d=[],p=[],f=[].concat(n);for(s=c;s>=0;s-=1){if((l=this.searchProcessedElement(e[s]))?t[s]=r[l-1]:e[s]._shouldRender=i,"fl"===e[s].ty||"st"===e[s].ty||"gf"===e[s].ty||"gs"===e[s].ty)l?t[s].style.closed=!1:t[s]=this.createStyleElement(e[s],f),d.push(t[s].style);else if("gr"===e[s].ty){if(l)for(a=0,o=t[s].it.length;a<o;a+=1)t[s].prevViewData[a]=t[s].it[a];else t[s]=this.createGroupElement(e[s]);this.searchShapes(e[s].it,t[s].it,t[s].prevViewData,i,f)}else"tr"===e[s].ty?(l||(u=this.createTransformElement(e[s]),t[s]=u),f.push(t[s]),this.addTransformToStyleList(t[s])):"sh"===e[s].ty||"rc"===e[s].ty||"el"===e[s].ty||"sr"===e[s].ty?l||(t[s]=this.createShapeElement(e[s])):"tm"===e[s].ty||"rd"===e[s].ty||"pb"===e[s].ty||"zz"===e[s].ty||"op"===e[s].ty?(l?(h=t[s]).closed=!1:((h=ShapeModifiers.getModifier(e[s].ty)).init(this,e[s]),t[s]=h,this.shapeModifiers.push(h)),p.push(h)):"rp"===e[s].ty&&(l?(h=t[s]).closed=!0:(h=ShapeModifiers.getModifier(e[s].ty),t[s]=h,h.init(this,e,s,t),this.shapeModifiers.push(h),i=!1),p.push(h));this.addProcessedElement(e[s],s+1)}for(this.removeTransformFromStyleList(),this.closeStyles(d),c=p.length,s=0;s<c;s+=1)p[s].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(e,t){(e._opMdf||t.op._mdf||this._isFirstFrame)&&(t.opacity=e.opacity,t.opacity*=t.op.v,t._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var e,t,r,i,n,s,a,o,l,h=this.stylesList.length,u=this.globalData.renderer,c=this.globalData.canvasContext;for(e=0;e<h;e+=1)if(!(("st"===(o=(l=this.stylesList[e]).type)||"gs"===o)&&0===l.wi||!l.data._shouldRender||0===l.coOp||0===this.globalData.currentGlobalAlpha)){for(u.save(),s=l.elements,"st"===o||"gs"===o?(u.ctxStrokeStyle("st"===o?l.co:l.grd),u.ctxLineWidth(l.wi),u.ctxLineCap(l.lc),u.ctxLineJoin(l.lj),u.ctxMiterLimit(l.ml||0)):u.ctxFillStyle("fl"===o?l.co:l.grd),u.ctxOpacity(l.coOp),"st"!==o&&"gs"!==o&&c.beginPath(),u.ctxTransform(l.preTransforms.finalTransform.props),r=s.length,t=0;t<r;t+=1){for(("st"===o||"gs"===o)&&(c.beginPath(),l.da&&(c.setLineDash(l.da),c.lineDashOffset=l.do)),n=(a=s[t].trNodes).length,i=0;i<n;i+=1)"m"===a[i].t?c.moveTo(a[i].p[0],a[i].p[1]):"c"===a[i].t?c.bezierCurveTo(a[i].pts[0],a[i].pts[1],a[i].pts[2],a[i].pts[3],a[i].pts[4],a[i].pts[5]):c.closePath();("st"===o||"gs"===o)&&(u.ctxStroke(),l.da&&c.setLineDash(this.dashResetter))}"st"!==o&&"gs"!==o&&this.globalData.renderer.ctxFill(l.r),u.restore()}},CVShapeElement.prototype.renderShape=function(e,t,r,i){var n,s,a=t.length-1;for(s=e,n=a;n>=0;n-=1)"tr"===t[n].ty?(s=r[n].transform,this.renderShapeTransform(e,s)):"sh"===t[n].ty||"el"===t[n].ty||"rc"===t[n].ty||"sr"===t[n].ty?this.renderPath(t[n],r[n]):"fl"===t[n].ty?this.renderFill(t[n],r[n],s):"st"===t[n].ty?this.renderStroke(t[n],r[n],s):"gf"===t[n].ty||"gs"===t[n].ty?this.renderGradientFill(t[n],r[n],s):"gr"===t[n].ty?this.renderShape(s,t[n].it,r[n].it):t[n].ty;i&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(e,t){if(this._isFirstFrame||t._mdf||e.transforms._mdf){var r,i,n,s=e.trNodes,a=t.paths,o=a._length;s.length=0;var l=e.transforms.finalTransform;for(n=0;n<o;n+=1){var h=a.shapes[n];if(h&&h.v){for(r=1,i=h._length;r<i;r+=1)1===r&&s.push({t:"m",p:l.applyToPointArray(h.v[0][0],h.v[0][1],0)}),s.push({t:"c",pts:l.applyToTriplePoints(h.o[r-1],h.i[r],h.v[r])});1===i&&s.push({t:"m",p:l.applyToPointArray(h.v[0][0],h.v[0][1],0)}),h.c&&i&&(s.push({t:"c",pts:l.applyToTriplePoints(h.o[r-1],h.i[0],h.v[0])}),s.push({t:"z"}))}}e.trNodes=s}},CVShapeElement.prototype.renderPath=function(e,t){if(!0!==e.hd&&e._shouldRender){var r,i=t.styledShapes.length;for(r=0;r<i;r+=1)this.renderStyledShape(t.styledShapes[r],t.sh)}},CVShapeElement.prototype.renderFill=function(e,t,r){var i=t.style;(t.c._mdf||this._isFirstFrame)&&(i.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||r._opMdf||this._isFirstFrame)&&(i.coOp=t.o.v*r.opacity)},CVShapeElement.prototype.renderGradientFill=function(e,t,r){var i=t.style;if(!i.grd||t.g._mdf||t.s._mdf||t.e._mdf||1!==e.t&&(t.h._mdf||t.a._mdf)){var n,s,a=this.globalData.canvasContext,o=t.s.v,l=t.e.v;if(1===e.t)n=a.createLinearGradient(o[0],o[1],l[0],l[1]);else{var h=Math.sqrt(Math.pow(o[0]-l[0],2)+Math.pow(o[1]-l[1],2)),u=Math.atan2(l[1]-o[1],l[0]-o[0]),c=t.h.v;c>=1?c=.99:c<=-1&&(c=-.99);var d=h*c,p=Math.cos(u+t.a.v)*d+o[0],f=Math.sin(u+t.a.v)*d+o[1];n=a.createRadialGradient(p,f,0,o[0],o[1],h)}var m=e.g.p,g=t.g.c,y=1;for(s=0;s<m;s+=1)t.g._hasOpacity&&t.g._collapsable&&(y=t.g.o[2*s+1]),n.addColorStop(g[4*s]/100,"rgba("+g[4*s+1]+","+g[4*s+2]+","+g[4*s+3]+","+y+")");i.grd=n}i.coOp=t.o.v*r.opacity},CVShapeElement.prototype.renderStroke=function(e,t,r){var i=t.style,n=t.d;n&&(n._mdf||this._isFirstFrame)&&(i.da=n.dashArray,i.do=n.dashoffset[0]),(t.c._mdf||this._isFirstFrame)&&(i.co="rgb("+bmFloor(t.c.v[0])+","+bmFloor(t.c.v[1])+","+bmFloor(t.c.v[2])+")"),(t.o._mdf||r._opMdf||this._isFirstFrame)&&(i.coOp=t.o.v*r.opacity),(t.w._mdf||this._isFirstFrame)&&(i.wi=t.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var e,t,r,i,n,s,a,o,l,h,u,c,d=this.textProperty.currentData;this.renderedLetters=createSizedArray(d.l?d.l.length:0);var p=!1;d.fc?(p=!0,this.values.fill=this.buildColor(d.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=p;var f=!1;d.sc&&(f=!0,this.values.stroke=this.buildColor(d.sc),this.values.sWidth=d.sw);var m=this.globalData.fontManager.getFontByName(d.f),g=d.l,y=this.mHelper;this.stroke=f,this.values.fValue=d.finalSize+"px "+this.globalData.fontManager.getFontByName(d.f).fFamily,t=d.finalText.length;var v=this.data.singleShape,b=.001*d.tr*d.finalSize,w=0,E=0,S=!0,T=0;for(e=0;e<t;e+=1){i=(r=this.globalData.fontManager.getCharData(d.finalText[e],m.fStyle,this.globalData.fontManager.getFontByName(d.f).fFamily))&&r.data||{},y.reset(),v&&g[e].n&&(w=-b,E+=d.yOffset+(S?1:0),S=!1),l=(a=i.shapes?i.shapes[0].it:[]).length,y.scale(d.finalSize/100,d.finalSize/100),v&&this.applyTextPropertiesToMatrix(d,y,g[e].line,w,E),u=createSizedArray(l-1);var C=0;for(o=0;o<l;o+=1)if("sh"===a[o].ty){for(n=1,s=a[o].ks.k.i.length,h=a[o].ks.k,c=[];n<s;n+=1)1===n&&c.push(y.applyToX(h.v[0][0],h.v[0][1],0),y.applyToY(h.v[0][0],h.v[0][1],0)),c.push(y.applyToX(h.o[n-1][0],h.o[n-1][1],0),y.applyToY(h.o[n-1][0],h.o[n-1][1],0),y.applyToX(h.i[n][0],h.i[n][1],0),y.applyToY(h.i[n][0],h.i[n][1],0),y.applyToX(h.v[n][0],h.v[n][1],0),y.applyToY(h.v[n][0],h.v[n][1],0));c.push(y.applyToX(h.o[n-1][0],h.o[n-1][1],0),y.applyToY(h.o[n-1][0],h.o[n-1][1],0),y.applyToX(h.i[0][0],h.i[0][1],0),y.applyToY(h.i[0][0],h.i[0][1],0),y.applyToX(h.v[0][0],h.v[0][1],0),y.applyToY(h.v[0][0],h.v[0][1],0)),u[C]=c,C+=1}v&&(w+=g[e].l+b),this.textSpans[T]?this.textSpans[T].elem=u:this.textSpans[T]={elem:u},T+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText(),this.canvasContext.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var e,t,r,i,n,s,a,o,l,h=this.textAnimator.renderedLetters,u=this.textProperty.currentData.l;t=u.length;var c=null,d=null,p=null,f=this.globalData.renderer;for(e=0;e<t;e+=1)if(!u[e].n){if((a=h[e])&&(f.save(),f.ctxTransform(a.p),f.ctxOpacity(a.o)),this.fill){for(a&&a.fc?c!==a.fc&&(f.ctxFillStyle(a.fc),c=a.fc):c!==this.values.fill&&(c=this.values.fill,f.ctxFillStyle(this.values.fill)),i=(o=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),r=0;r<i;r+=1)for(s=(l=o[r]).length,this.globalData.canvasContext.moveTo(l[0],l[1]),n=2;n<s;n+=6)this.globalData.canvasContext.bezierCurveTo(l[n],l[n+1],l[n+2],l[n+3],l[n+4],l[n+5]);this.globalData.canvasContext.closePath(),f.ctxFill()}if(this.stroke){for(a&&a.sw?p!==a.sw&&(p=a.sw,f.ctxLineWidth(a.sw)):p!==this.values.sWidth&&(p=this.values.sWidth,f.ctxLineWidth(this.values.sWidth)),a&&a.sc?d!==a.sc&&(d=a.sc,f.ctxStrokeStyle(a.sc)):d!==this.values.stroke&&(d=this.values.stroke,f.ctxStrokeStyle(this.values.stroke)),i=(o=this.textSpans[e].elem).length,this.globalData.canvasContext.beginPath(),r=0;r<i;r+=1)for(s=(l=o[r]).length,this.globalData.canvasContext.moveTo(l[0],l[1]),n=2;n<s;n+=6)this.globalData.canvasContext.bezierCurveTo(l[n],l[n+1],l[n+2],l[n+3],l[n+4],l[n+5]);this.globalData.canvasContext.closePath(),f.ctxStroke()}a&&this.globalData.renderer.restore()}},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var e,t,r=createTag("canvas");r.width=this.assetData.w,r.height=this.assetData.h;var i=r.getContext("2d"),n=this.img.width,s=this.img.height,a=n/s,o=this.assetData.w/this.assetData.h,l=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;a>o&&"xMidYMid slice"===l||a<o&&"xMidYMid slice"!==l?e=(t=s)*o:t=(e=n)/o,i.drawImage(this.img,(n-e)/2,(s-t)/2,e,t,0,0,this.assetData.w,this.assetData.h),this.img=r}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null},extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)},extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(e){return new CVShapeElement(e,this.globalData,this)},CanvasRendererBase.prototype.createText=function(e){return new CVTextElement(e,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(e){return new CVImageElement(e,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(e){return new CVSolidElement(e,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(e){(1!==e[0]||0!==e[1]||0!==e[4]||1!==e[5]||0!==e[12]||0!==e[13])&&this.canvasContext.transform(e[0],e[1],e[4],e[5],e[12],e[13])},CanvasRendererBase.prototype.ctxOpacity=function(e){this.canvasContext.globalAlpha*=e<0?0:e},CanvasRendererBase.prototype.ctxFillStyle=function(e){this.canvasContext.fillStyle=e},CanvasRendererBase.prototype.ctxStrokeStyle=function(e){this.canvasContext.strokeStyle=e},CanvasRendererBase.prototype.ctxLineWidth=function(e){this.canvasContext.lineWidth=e},CanvasRendererBase.prototype.ctxLineCap=function(e){this.canvasContext.lineCap=e},CanvasRendererBase.prototype.ctxLineJoin=function(e){this.canvasContext.lineJoin=e},CanvasRendererBase.prototype.ctxMiterLimit=function(e){this.canvasContext.miterLimit=e},CanvasRendererBase.prototype.ctxFill=function(e){this.canvasContext.fill(e)},CanvasRendererBase.prototype.ctxFillRect=function(e,t,r,i){this.canvasContext.fillRect(e,t,r,i)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(e){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}e&&(this.globalData.blendMode="source-over"),this.contextData.restore(e)},CanvasRendererBase.prototype.configAnimation=function(e){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var t=this.animationItem.container.style;t.width="100%",t.height="100%";var r="0px 0px 0px";t.transformOrigin=r,t.mozTransformOrigin=r,t.webkitTransformOrigin=r,t["-webkit-transform"]=r,t.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=e,this.layers=e.layers,this.transformCanvas={w:e.w,h:e.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(e,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(e.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(e,t){if(this.reset(),e?(r=e,i=t,this.canvasContext.canvas.width=r,this.canvasContext.canvas.height=i):(this.animationItem.wrapper&&this.animationItem.container?(r=this.animationItem.wrapper.offsetWidth,i=this.animationItem.wrapper.offsetHeight):(r=this.canvasContext.canvas.width,i=this.canvasContext.canvas.height),this.canvasContext.canvas.width=r*this.renderConfig.dpr,this.canvasContext.canvas.height=i*this.renderConfig.dpr),-1!==this.renderConfig.preserveAspectRatio.indexOf("meet")||-1!==this.renderConfig.preserveAspectRatio.indexOf("slice")){var r,i,n,s,a=this.renderConfig.preserveAspectRatio.split(" "),o=a[1]||"meet",l=a[0]||"xMidYMid",h=l.substr(0,4),u=l.substr(4);n=r/i,(s=this.transformCanvas.w/this.transformCanvas.h)>n&&"meet"===o||s<n&&"slice"===o?(this.transformCanvas.sx=r/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=r/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=i/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=i/(this.transformCanvas.h/this.renderConfig.dpr)),"xMid"===h&&(s<n&&"meet"===o||s>n&&"slice"===o)?this.transformCanvas.tx=(r-this.transformCanvas.w*(i/this.transformCanvas.h))/2*this.renderConfig.dpr:"xMax"===h&&(s<n&&"meet"===o||s>n&&"slice"===o)?this.transformCanvas.tx=(r-this.transformCanvas.w*(i/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,"YMid"===u&&(s>n&&"meet"===o||s<n&&"slice"===o)?this.transformCanvas.ty=(i-this.transformCanvas.h*(r/this.transformCanvas.w))/2*this.renderConfig.dpr:"YMax"===u&&(s>n&&"meet"===o||s<n&&"slice"===o)?this.transformCanvas.ty=(i-this.transformCanvas.h*(r/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else"none"===this.renderConfig.preserveAspectRatio?(this.transformCanvas.sx=r/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=i/(this.transformCanvas.h/this.renderConfig.dpr)):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0;this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){var e;for(this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),e=(this.layers?this.layers.length:0)-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(e,t){if((this.renderedFrame!==e||!0!==this.renderConfig.clearCanvas||t)&&!this.destroyed&&-1!==e){this.renderedFrame=e,this.globalData.frameNum=e-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||t,this.globalData.projectInterface.currentFrame=e;var r,i=this.layers.length;for(this.completeLayers||this.checkLayers(e),r=i-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].prepareFrame(e-this.layers[r].st);if(this.globalData._mdf){for(!0===this.renderConfig.clearCanvas?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),r=i-1;r>=0;r-=1)(this.completeLayers||this.elements[r])&&this.elements[r].renderFrame();!0!==this.renderConfig.clearCanvas&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(e){var t=this.elements;if(!t[e]&&99!==this.layers[e].ty){var r=this.createItem(this.layers[e],this,this.globalData);t[e]=r,r.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"},CVContextData.prototype.duplicate=function(){var e=2*this._length,t=0;for(t=this._length;t<e;t+=1)this.stack[t]=new CanvasContext;this._length=e},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(e){this.cArrPos-=1;var t,r=this.stack[this.cArrPos],i=r.transform,n=this.cTr.props;for(t=0;t<16;t+=1)n[t]=i[t];if(e){this.nativeContext.restore();var s=this.stack[this.cArrPos+1];this.appliedFillStyle=s.fillStyle,this.appliedStrokeStyle=s.strokeStyle,this.appliedLineWidth=s.lineWidth,this.appliedLineCap=s.lineCap,this.appliedLineJoin=s.lineJoin,this.appliedMiterLimit=s.miterLimit}this.nativeContext.setTransform(i[0],i[1],i[4],i[5],i[12],i[13]),(e||-1!==r.opacity&&this.currentOpacity!==r.opacity)&&(this.nativeContext.globalAlpha=r.opacity,this.currentOpacity=r.opacity),this.currentFillStyle=r.fillStyle,this.currentStrokeStyle=r.strokeStyle,this.currentLineWidth=r.lineWidth,this.currentLineCap=r.lineCap,this.currentLineJoin=r.lineJoin,this.currentMiterLimit=r.miterLimit},CVContextData.prototype.save=function(e){e&&this.nativeContext.save();var t,r=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var i=this.stack[this.cArrPos];for(t=0;t<16;t+=1)i.transform[t]=r[t];this.cArrPos+=1;var n=this.stack[this.cArrPos];n.opacity=i.opacity,n.fillStyle=i.fillStyle,n.strokeStyle=i.strokeStyle,n.lineWidth=i.lineWidth,n.lineCap=i.lineCap,n.lineJoin=i.lineJoin,n.miterLimit=i.miterLimit},CVContextData.prototype.setOpacity=function(e){this.stack[this.cArrPos].opacity=e},CVContextData.prototype.setContext=function(e){this.nativeContext=e},CVContextData.prototype.fillStyle=function(e){this.stack[this.cArrPos].fillStyle!==e&&(this.currentFillStyle=e,this.stack[this.cArrPos].fillStyle=e)},CVContextData.prototype.strokeStyle=function(e){this.stack[this.cArrPos].strokeStyle!==e&&(this.currentStrokeStyle=e,this.stack[this.cArrPos].strokeStyle=e)},CVContextData.prototype.lineWidth=function(e){this.stack[this.cArrPos].lineWidth!==e&&(this.currentLineWidth=e,this.stack[this.cArrPos].lineWidth=e)},CVContextData.prototype.lineCap=function(e){this.stack[this.cArrPos].lineCap!==e&&(this.currentLineCap=e,this.stack[this.cArrPos].lineCap=e)},CVContextData.prototype.lineJoin=function(e){this.stack[this.cArrPos].lineJoin!==e&&(this.currentLineJoin=e,this.stack[this.cArrPos].lineJoin=e)},CVContextData.prototype.miterLimit=function(e){this.stack[this.cArrPos].miterLimit!==e&&(this.currentMiterLimit=e,this.stack[this.cArrPos].miterLimit=e)},CVContextData.prototype.transform=function(e){this.transformMat.cloneFromProps(e);var t=this.cTr;this.transformMat.multiply(t),t.cloneFromProps(this.transformMat.props);var r=t.props;this.nativeContext.setTransform(r[0],r[1],r[4],r[5],r[12],r[13])},CVContextData.prototype.opacity=function(e){var t=this.stack[this.cArrPos].opacity;t*=e<0?0:e,this.stack[this.cArrPos].opacity!==t&&(this.currentOpacity!==e&&(this.nativeContext.globalAlpha=e,this.currentOpacity=e),this.stack[this.cArrPos].opacity=t)},CVContextData.prototype.fill=function(e){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(e)},CVContextData.prototype.fillRect=function(e,t,r,i){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(e,t,r,i)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()},extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var e,t=this.canvasContext;for(t.beginPath(),t.moveTo(0,0),t.lineTo(this.data.w,0),t.lineTo(this.data.w,this.data.h),t.lineTo(0,this.data.h),t.lineTo(0,0),t.clip(),e=this.layers.length-1;e>=0;e-=1)(this.completeLayers||this.elements[e])&&this.elements[e].renderFrame()},CVCompElement.prototype.destroy=function(){var e;for(e=this.layers.length-1;e>=0;e-=1)this.elements[e]&&this.elements[e].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)},extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(e){return new CVCompElement(e,this.globalData,this)},HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),0!==this.data.bm&&this.setBlendMode()},renderElement:function(){var e=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var t=this.finalTransform.mat.toCSS();e.transform=t,e.webkitTransform=t}this.finalTransform._opMdf&&(e.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting,extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var e;this.data.hasMask?((e=createNS("rect")).setAttribute("width",this.data.sw),e.setAttribute("height",this.data.sh),e.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):((e=createTag("div")).style.width=this.data.sw+"px",e.style.height=this.data.sh+"px",e.style.backgroundColor=this.data.sc),this.layerElement.appendChild(e)},extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var e;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),e=this.svgElement;else{e=createNS("svg");var t=this.comp.data?this.comp.data:this.globalData.compSize;e.setAttribute("width",t.w),e.setAttribute("height",t.h),e.appendChild(this.shapesContainer),this.layerElement.appendChild(e)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=e},HShapeElement.prototype.getTransformedPoint=function(e,t){var r,i=e.length;for(r=0;r<i;r+=1)t=e[r].mProps.v.applyToPointArray(t[0],t[1],0);return t},HShapeElement.prototype.calculateShapeBoundingBox=function(e,t){var r,i,n,s,a,o=e.sh.v,l=e.transformers,h=o._length;if(!(h<=1)){for(r=0;r<h-1;r+=1)i=this.getTransformedPoint(l,o.v[r]),n=this.getTransformedPoint(l,o.o[r]),s=this.getTransformedPoint(l,o.i[r+1]),a=this.getTransformedPoint(l,o.v[r+1]),this.checkBounds(i,n,s,a,t);o.c&&(i=this.getTransformedPoint(l,o.v[r]),n=this.getTransformedPoint(l,o.o[r]),s=this.getTransformedPoint(l,o.i[0]),a=this.getTransformedPoint(l,o.v[0]),this.checkBounds(i,n,s,a,t))}},HShapeElement.prototype.checkBounds=function(e,t,r,i,n){this.getBoundsOfCurve(e,t,r,i);var s=this.shapeBoundingBox;n.x=bmMin(s.left,n.x),n.xMax=bmMax(s.right,n.xMax),n.y=bmMin(s.top,n.y),n.yMax=bmMax(s.bottom,n.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(e,t,r,i){for(var n,s,a,o,l,h,u,c=[[e[0],i[0]],[e[1],i[1]]],d=0;d<2;++d)s=6*e[d]-12*t[d]+6*r[d],n=-3*e[d]+9*t[d]-9*r[d]+3*i[d],a=3*t[d]-3*e[d],s|=0,a|=0,0==(n|=0)&&0===s||(0===n?(o=-a/s)>0&&o<1&&c[d].push(this.calculateF(o,e,t,r,i,d)):(l=s*s-4*a*n)>=0&&((h=(-s+bmSqrt(l))/(2*n))>0&&h<1&&c[d].push(this.calculateF(h,e,t,r,i,d)),(u=(-s-bmSqrt(l))/(2*n))>0&&u<1&&c[d].push(this.calculateF(u,e,t,r,i,d))));this.shapeBoundingBox.left=bmMin.apply(null,c[0]),this.shapeBoundingBox.top=bmMin.apply(null,c[1]),this.shapeBoundingBox.right=bmMax.apply(null,c[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,c[1])},HShapeElement.prototype.calculateF=function(e,t,r,i,n,s){return bmPow(1-e,3)*t[s]+3*bmPow(1-e,2)*e*r[s]+3*(1-e)*bmPow(e,2)*i[s]+bmPow(e,3)*n[s]},HShapeElement.prototype.calculateBoundingBox=function(e,t){var r,i=e.length;for(r=0;r<i;r+=1)e[r]&&e[r].sh?this.calculateShapeBoundingBox(e[r],t):e[r]&&e[r].it?this.calculateBoundingBox(e[r].it,t):e[r]&&e[r].style&&e[r].w&&this.expandStrokeBoundingBox(e[r].w,t)},HShapeElement.prototype.expandStrokeBoundingBox=function(e,t){var r=0;if(e.keyframes){for(var i=0;i<e.keyframes.length;i+=1){var n=e.keyframes[i].s;n>r&&(r=n)}r*=e.mult}else r=e.v*e.mult;t.x-=r,t.xMax+=r,t.y-=r,t.yMax+=r},HShapeElement.prototype.currentBoxContains=function(e){return this.currentBBox.x<=e.x&&this.currentBBox.y<=e.y&&this.currentBBox.width+this.currentBBox.x>=e.x+e.width&&this.currentBBox.height+this.currentBBox.y>=e.y+e.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var e=this.tempBoundingBox,t=999999;if(e.x=t,e.xMax=-t,e.y=t,e.yMax=-t,this.calculateBoundingBox(this.itemsData,e),e.width=e.xMax<e.x?0:e.xMax-e.x,e.height=e.yMax<e.y?0:e.yMax-e.y,!this.currentBoxContains(e)){var r=!1;if(this.currentBBox.w!==e.width&&(this.currentBBox.w=e.width,this.shapeCont.setAttribute("width",e.width),r=!0),this.currentBBox.h!==e.height&&(this.currentBBox.h=e.height,this.shapeCont.setAttribute("height",e.height),r=!0),r||this.currentBBox.x!==e.x||this.currentBBox.y!==e.y){this.currentBBox.w=e.width,this.currentBBox.h=e.height,this.currentBBox.x=e.x,this.currentBBox.y=e.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var i=this.shapeCont.style,n="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";i.transform=n,i.webkitTransform=n}}}},extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var e=createNS("g");this.maskedElement.appendChild(e),this.innerElem=e}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var e=this.textProperty.currentData;this.renderedLetters=createSizedArray(e.l?e.l.length:0);var t=this.innerElem.style,r=e.fc?this.buildColor(e.fc):"rgba(0,0,0,0)";t.fill=r,t.color=r,e.sc&&(t.stroke=this.buildColor(e.sc),t.strokeWidth=e.sw+"px");var i=this.globalData.fontManager.getFontByName(e.f);if(!this.globalData.fontManager.chars){if(t.fontSize=e.finalSize+"px",t.lineHeight=e.finalSize+"px",i.fClass)this.innerElem.className=i.fClass;else{t.fontFamily=i.fFamily;var n=e.fWeight,s=e.fStyle;t.fontStyle=s,t.fontWeight=n}}var a=e.l;c=a.length;var o=this.mHelper,l="",h=0;for(u=0;u<c;u+=1){if(this.globalData.fontManager.chars?(this.textPaths[h]?d=this.textPaths[h]:((d=createNS("path")).setAttribute("stroke-linecap",lineCapEnum[1]),d.setAttribute("stroke-linejoin",lineJoinEnum[2]),d.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[h]?f=(p=this.textSpans[h]).children[0]:((p=createTag("div")).style.lineHeight=0,(f=createNS("svg")).appendChild(d),styleDiv(p)))):this.isMasked?d=this.textPaths[h]?this.textPaths[h]:createNS("text"):this.textSpans[h]?(p=this.textSpans[h],d=this.textPaths[h]):(styleDiv(p=createTag("span")),styleDiv(d=createTag("span")),p.appendChild(d)),this.globalData.fontManager.chars){var u,c,d,p,f,m,g,y=this.globalData.fontManager.getCharData(e.finalText[u],i.fStyle,this.globalData.fontManager.getFontByName(e.f).fFamily);if(g=y?y.data:null,o.reset(),g&&g.shapes&&g.shapes.length&&(m=g.shapes[0].it,o.scale(e.finalSize/100,e.finalSize/100),l=this.createPathShape(o,m),d.setAttribute("d",l)),this.isMasked)this.innerElem.appendChild(d);else{if(this.innerElem.appendChild(p),g&&g.shapes){document.body.appendChild(f);var v=f.getBBox();f.setAttribute("width",v.width+2),f.setAttribute("height",v.height+2),f.setAttribute("viewBox",v.x-1+" "+(v.y-1)+" "+(v.width+2)+" "+(v.height+2));var b=f.style,w="translate("+(v.x-1)+"px,"+(v.y-1)+"px)";b.transform=w,b.webkitTransform=w,a[u].yOffset=v.y-1}else f.setAttribute("width",1),f.setAttribute("height",1);p.appendChild(f)}}else if(d.textContent=a[u].val,d.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(d);else{this.innerElem.appendChild(p);var E=d.style,S="translate3d(0,"+-e.finalSize/1.2+"px,0)";E.transform=S,E.webkitTransform=S}this.isMasked?this.textSpans[h]=d:this.textSpans[h]=p,this.textSpans[h].style.display="block",this.textPaths[h]=d,h+=1}for(;h<this.textSpans.length;)this.textSpans[h].style.display="none",h+=1},HTextElement.prototype.renderInnerContent=function(){if(this.validateText(),this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),e=this.svgElement.style;var e,t,r,i,n,s,a="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";e.transform=a,e.webkitTransform=a}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){var o=0,l=this.textAnimator.renderedLetters,h=this.textProperty.currentData.l;for(t=0,r=h.length;t<r;t+=1)h[t].n?o+=1:(n=this.textSpans[t],s=this.textPaths[t],i=l[o],o+=1,i._mdf.m&&(this.isMasked?n.setAttribute("transform",i.m):(n.style.webkitTransform=i.m,n.style.transform=i.m)),n.style.opacity=i.o,i.sw&&i._mdf.sw&&s.setAttribute("stroke-width",i.sw),i.sc&&i._mdf.sc&&s.setAttribute("stroke",i.sc),i.fc&&i._mdf.fc&&(s.setAttribute("fill",i.fc),s.style.color=i.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var u=this.innerElem.getBBox();this.currentBBox.w!==u.width&&(this.currentBBox.w=u.width,this.svgElement.setAttribute("width",u.width)),this.currentBBox.h!==u.height&&(this.currentBBox.h=u.height,this.svgElement.setAttribute("height",u.height));var c=1;if(this.currentBBox.w!==u.width+2*c||this.currentBBox.h!==u.height+2*c||this.currentBBox.x!==u.x-c||this.currentBBox.y!==u.y-c){this.currentBBox.w=u.width+2*c,this.currentBBox.h=u.height+2*c,this.currentBBox.x=u.x-c,this.currentBBox.y=u.y-c,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),e=this.svgElement.style;var d="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";e.transform=d,e.webkitTransform=d}}}},extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var e,t,r,i,n=this.comp.threeDElements.length;for(e=0;e<n;e+=1)if("3d"===(t=this.comp.threeDElements[e]).type){r=t.perspectiveElem.style,i=t.container.style;var s=this.pe.v+"px",a="0px 0px 0px",o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";r.perspective=s,r.webkitPerspective=s,i.transformOrigin=a,i.mozTransformOrigin=a,i.webkitTransformOrigin=a,r.transform=o,r.webkitTransform=o}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var e=this._isFirstFrame;if(this.hierarchy)for(r=0,i=this.hierarchy.length;r<i;r+=1)e=this.hierarchy[r].finalTransform.mProp._mdf||e;if(e||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(r=i=this.hierarchy.length-1;r>=0;r-=1){var t=this.hierarchy[r].finalTransform.mProp;this.mat.translate(-t.p.v[0],-t.p.v[1],t.p.v[2]),this.mat.rotateX(-t.or.v[0]).rotateY(-t.or.v[1]).rotateZ(t.or.v[2]),this.mat.rotateX(-t.rx.v).rotateY(-t.ry.v).rotateZ(t.rz.v),this.mat.scale(1/t.s.v[0],1/t.s.v[1],1/t.s.v[2]),this.mat.translate(t.a.v[0],t.a.v[1],t.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var r,i,n,s=Math.sqrt(Math.pow((n=this.p?[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]])[0],2)+Math.pow(n[1],2)+Math.pow(n[2],2)),a=[n[0]/s,n[1]/s,n[2]/s],o=Math.sqrt(a[2]*a[2]+a[0]*a[0]),l=Math.atan2(a[1],o),h=Math.atan2(a[0],-a[2]);this.mat.rotateY(h).rotateX(-l)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var u=!this._prevMat.equals(this.mat);if((u||this.pe._mdf)&&this.comp.threeDElements){for(r=0,i=this.comp.threeDElements.length;r<i;r+=1)if("3d"===(c=this.comp.threeDElements[r]).type){if(u){var c,d,p,f=this.mat.toCSS();(p=c.container.style).transform=f,p.webkitTransform=f}this.pe._mdf&&((d=c.perspectiveElem.style).perspective=this.pe.v+"px",d.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(e){this.prepareProperties(e,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null},extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var e=this.globalData.getAssetsPath(this.assetData),t=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",e),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(t),t.crossOrigin="anonymous",t.src=e,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)},extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;)this.pendingElements.pop().checkParenting()},HybridRendererBase.prototype.appendElementInPos=function(e,t){var r=e.getBaseElement();if(r){var i=this.layers[t];if(i.ddd&&this.supports3d)this.addTo3dContainer(r,t);else if(this.threeDElements)this.addTo3dContainer(r,t);else{for(var n,s,a=0;a<t;)this.elements[a]&&!0!==this.elements[a]&&this.elements[a].getBaseElement&&(s=this.elements[a],n=(this.layers[a].ddd?this.getThreeDContainerByPos(a):s.getBaseElement())||n),a+=1;n?i.ddd&&this.supports3d||this.layerElement.insertBefore(r,n):i.ddd&&this.supports3d||this.layerElement.appendChild(r)}}},HybridRendererBase.prototype.createShape=function(e){return this.supports3d?new HShapeElement(e,this.globalData,this):new SVGShapeElement(e,this.globalData,this)},HybridRendererBase.prototype.createText=function(e){return this.supports3d?new HTextElement(e,this.globalData,this):new SVGTextLottieElement(e,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(e){return this.camera=new HCameraElement(e,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(e){return this.supports3d?new HImageElement(e,this.globalData,this):new IImageElement(e,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(e){return this.supports3d?new HSolidElement(e,this.globalData,this):new ISolidElement(e,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(e){for(var t=0,r=this.threeDElements.length;t<r;){if(this.threeDElements[t].startPos<=e&&this.threeDElements[t].endPos>=e)return this.threeDElements[t].perspectiveElem;t+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(e,t){var r,i,n=createTag("div");styleDiv(n);var s=createTag("div");if(styleDiv(s),"3d"===t){(r=n.style).width=this.globalData.compSize.w+"px",r.height=this.globalData.compSize.h+"px";var a="50% 50%";r.webkitTransformOrigin=a,r.mozTransformOrigin=a,r.transformOrigin=a;var o="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";(i=s.style).transform=o,i.webkitTransform=o}n.appendChild(s);var l={container:s,perspectiveElem:n,startPos:e,endPos:e,type:t};return this.threeDElements.push(l),l},HybridRendererBase.prototype.build3dContainers=function(){var e,t,r=this.layers.length,i="";for(e=0;e<r;e+=1)this.layers[e].ddd&&3!==this.layers[e].ty?"3d"!==i&&(i="3d",t=this.createThreeDContainer(e,"3d")):"2d"!==i&&(i="2d",t=this.createThreeDContainer(e,"2d")),t.endPos=Math.max(t.endPos,e);for(e=(r=this.threeDElements.length)-1;e>=0;e-=1)this.resizerElem.appendChild(this.threeDElements[e].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(e,t){for(var r=0,i=this.threeDElements.length;r<i;){if(t<=this.threeDElements[r].endPos){for(var n,s=this.threeDElements[r].startPos;s<t;)this.elements[s]&&this.elements[s].getBaseElement&&(n=this.elements[s].getBaseElement()),s+=1;n?this.threeDElements[r].container.insertBefore(e,n):this.threeDElements[r].container.appendChild(e);break}r+=1}},HybridRendererBase.prototype.configAnimation=function(e){var t=createTag("div"),r=this.animationItem.wrapper,i=t.style;i.width=e.w+"px",i.height=e.h+"px",this.resizerElem=t,styleDiv(t),i.transformStyle="flat",i.mozTransformStyle="flat",i.webkitTransformStyle="flat",this.renderConfig.className&&t.setAttribute("class",this.renderConfig.className),r.appendChild(t),i.overflow="hidden";var n=createNS("svg");n.setAttribute("width","1"),n.setAttribute("height","1"),styleDiv(n),this.resizerElem.appendChild(n);var s=createNS("defs");n.appendChild(s),this.data=e,this.setupGlobalData(e,n),this.globalData.defs=s,this.layers=e.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var e,t=this.layers?this.layers.length:0;for(e=0;e<t;e+=1)this.elements[e]&&this.elements[e].destroy&&this.elements[e].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var e,t,r,i,n=this.animationItem.wrapper.offsetWidth,s=this.animationItem.wrapper.offsetHeight,a=n/s;this.globalData.compSize.w/this.globalData.compSize.h>a?(e=n/this.globalData.compSize.w,t=n/this.globalData.compSize.w,r=0,i=(s-this.globalData.compSize.h*(n/this.globalData.compSize.w))/2):(e=s/this.globalData.compSize.h,t=s/this.globalData.compSize.h,r=(n-this.globalData.compSize.w*(s/this.globalData.compSize.h))/2,i=0);var o=this.resizerElem.style;o.webkitTransform="matrix3d("+e+",0,0,0,0,"+t+",0,0,0,0,1,0,"+r+","+i+",0,1)",o.transform=o.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var e,t=this.globalData.compSize.w,r=this.globalData.compSize.h,i=this.threeDElements.length;for(e=0;e<i;e+=1){var n=this.threeDElements[e].perspectiveElem.style;n.webkitPerspective=Math.sqrt(Math.pow(t,2)+Math.pow(r,2))+"px",n.perspective=n.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(e){var t,r=e.length,i=createTag("div");for(t=0;t<r;t+=1)if(e[t].xt){var n=this.createComp(e[t],i,this.globalData.comp,null);n.initExpressions(),this.globalData.projectInterface.registerComposition(n)}},extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(e,t){for(var r,i=0;i<t;)this.elements[i]&&this.elements[i].getBaseElement&&(r=this.elements[i].getBaseElement()),i+=1;r?this.layerElement.insertBefore(e,r):this.layerElement.appendChild(e)},HCompElement.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)},extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(e){return this.supports3d?new HCompElement(e,this.globalData,this):new SVGCompElement(e,this.globalData,this)};var CompExpressionInterface=function(){return function(e){function t(t){for(var r=0,i=e.layers.length;r<i;){if(e.layers[r].nm===t||e.layers[r].ind===t)return e.elements[r].layerInterface;r+=1}return null}return Object.defineProperty(t,"_name",{value:e.data.nm}),t.layer=t,t.pixelAspect=1,t.height=e.data.h||e.globalData.compSize.h,t.width=e.data.w||e.globalData.compSize.w,t.pixelAspect=1,t.frameDuration=1/e.globalData.frameRate,t.displayStartTime=0,t.numLayers=e.layers.length,t}}();function _typeof$2(e){return(_typeof$2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function seedRandom(e,t){var r,i=this,n=256,s=6,a=52,o="random",l=t.pow(n,s),h=t.pow(2,a),u=2*h,c=n-1;function d(r,i,a){var c=[],d=g(m((i=!0===i?{entropy:!0}:i||{}).entropy?[r,v(e)]:null===r?y():r,3),c),b=new p(c),w=function(){for(var e=b.g(s),t=l,r=0;e<h;)e=(e+r)*n,t*=n,r=b.g(1);for(;e>=u;)e/=2,t/=2,r>>>=1;return(e+r)/t};return w.int32=function(){return 0|b.g(4)},w.quick=function(){return b.g(4)/4294967296},w.double=w,g(v(b.S),e),(i.pass||a||function(e,r,i,n){return(n&&(n.S&&f(n,b),e.state=function(){return f(b,{})}),i)?(t[o]=e,r):e})(w,d,"global"in i?i.global:this==t,i.state)}function p(e){var t,r=e.length,i=this,s=0,a=i.i=i.j=0,o=i.S=[];for(r||(e=[r++]);s<n;)o[s]=s++;for(s=0;s<n;s++)o[s]=o[a=c&a+e[s%r]+(t=o[s])],o[a]=t;i.g=function(e){for(var t,r=0,s=i.i,a=i.j,o=i.S;e--;)t=o[s=c&s+1],r=r*n+o[c&(o[s]=o[a=c&a+t])+(o[a]=t)];return i.i=s,i.j=a,r}}function f(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function m(e,t){var r,i=[],n=_typeof$2(e);if(t&&"object"==n)for(r in e)try{i.push(m(e[r],t-1))}catch(e){}return i.length?i:"string"==n?e:e+"\0"}function g(e,t){for(var r,i=e+"",n=0;n<i.length;)t[c&n]=c&(r^=19*t[c&n])+i.charCodeAt(n++);return v(t)}function y(){try{if(r)return v(r.randomBytes(n));var t=new Uint8Array(n);return(i.crypto||i.msCrypto).getRandomValues(t),v(t)}catch(t){var s=i.navigator,a=s&&s.plugins;return[+new Date,i,a,i.screen,v(e)]}}function v(e){return String.fromCharCode.apply(0,e)}t["seed"+o]=d,g(t.random(),e)}function initialize$2(e){seedRandom([],e)}var propTypes={SHAPE:"shape"};function _typeof$1(e){return(_typeof$1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(e){return e.constructor===Array||e.constructor===Float32Array}function isNumerable(e,t){return"number"===e||t instanceof Number||"boolean"===e||"string"===e}function $bm_neg(e){var t=_typeof$1(e);if("number"===t||e instanceof Number||"boolean"===t)return-e;if($bm_isInstanceOfArray(e)){var r,i=e.length,n=[];for(r=0;r<i;r+=1)n[r]=-e[r];return n}return e.propType?e.v:-e}initialize$2(BMMath);var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(e,t){var r=_typeof$1(e),i=_typeof$1(t);if(isNumerable(r,e)&&isNumerable(i,t)||"string"===r||"string"===i)return e+t;if($bm_isInstanceOfArray(e)&&isNumerable(i,t))return e=e.slice(0),e[0]+=t,e;if(isNumerable(r,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e+t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var n=0,s=e.length,a=t.length,o=[];n<s||n<a;)("number"==typeof e[n]||e[n]instanceof Number)&&("number"==typeof t[n]||t[n]instanceof Number)?o[n]=e[n]+t[n]:o[n]=void 0===t[n]?e[n]:e[n]||t[n],n+=1;return o}return 0}var add=sum;function sub(e,t){var r=_typeof$1(e),i=_typeof$1(t);if(isNumerable(r,e)&&isNumerable(i,t))return"string"===r&&(e=parseInt(e,10)),"string"===i&&(t=parseInt(t,10)),e-t;if($bm_isInstanceOfArray(e)&&isNumerable(i,t))return e=e.slice(0),e[0]-=t,e;if(isNumerable(r,e)&&$bm_isInstanceOfArray(t))return(t=t.slice(0))[0]=e-t[0],t;if($bm_isInstanceOfArray(e)&&$bm_isInstanceOfArray(t)){for(var n=0,s=e.length,a=t.length,o=[];n<s||n<a;)("number"==typeof e[n]||e[n]instanceof Number)&&("number"==typeof t[n]||t[n]instanceof Number)?o[n]=e[n]-t[n]:o[n]=void 0===t[n]?e[n]:e[n]||t[n],n+=1;return o}return 0}function mul(e,t){var r,i,n,s=_typeof$1(e),a=_typeof$1(t);if(isNumerable(s,e)&&isNumerable(a,t))return e*t;if($bm_isInstanceOfArray(e)&&isNumerable(a,t)){for(i=0,r=createTypedArray("float32",n=e.length);i<n;i+=1)r[i]=e[i]*t;return r}if(isNumerable(s,e)&&$bm_isInstanceOfArray(t)){for(i=0,r=createTypedArray("float32",n=t.length);i<n;i+=1)r[i]=e*t[i];return r}return 0}function div(e,t){var r,i,n,s=_typeof$1(e),a=_typeof$1(t);if(isNumerable(s,e)&&isNumerable(a,t))return e/t;if($bm_isInstanceOfArray(e)&&isNumerable(a,t)){for(i=0,r=createTypedArray("float32",n=e.length);i<n;i+=1)r[i]=e[i]/t;return r}if(isNumerable(s,e)&&$bm_isInstanceOfArray(t)){for(i=0,r=createTypedArray("float32",n=t.length);i<n;i+=1)r[i]=e/t[i];return r}return 0}function mod(e,t){return"string"==typeof e&&(e=parseInt(e,10)),"string"==typeof t&&(t=parseInt(t,10)),e%t}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(e,t,r){if(t>r){var i=r;r=t,t=i}return Math.min(Math.max(e,t),r)}function radiansToDegrees(e){return e/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(e){return e*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(e,t){if("number"==typeof e||e instanceof Number)return t=t||0,Math.abs(e-t);t||(t=helperLengthArray);var r,i=Math.min(e.length,t.length),n=0;for(r=0;r<i;r+=1)n+=Math.pow(t[r]-e[r],2);return Math.sqrt(n)}function normalize(e){return div(e,length(e))}function rgbToHsl(e){var t,r,i=e[0],n=e[1],s=e[2],a=Math.max(i,n,s),o=Math.min(i,n,s),l=(a+o)/2;if(a===o)t=0,r=0;else{var h=a-o;switch(r=l>.5?h/(2-a-o):h/(a+o),a){case i:t=(n-s)/h+(n<s?6:0);break;case n:t=(s-i)/h+2;break;case s:t=(i-n)/h+4}t/=6}return[t,r,l,e[3]]}function hue2rgb(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function hslToRgb(e){var t,r,i,n=e[0],s=e[1],a=e[2];if(0===s)t=a,i=a,r=a;else{var o=a<.5?a*(1+s):a+s-a*s,l=2*a-o;t=hue2rgb(l,o,n+1/3),r=hue2rgb(l,o,n),i=hue2rgb(l,o,n-1/3)}return[t,r,i,e[3]]}function linear(e,t,r,i,n){if((void 0===i||void 0===n)&&(i=t,n=r,t=0,r=1),r<t){var s,a=r;r=t,t=a}if(e<=t)return i;if(e>=r)return n;var o=r===t?0:(e-t)/(r-t);if(!i.length)return i+(n-i)*o;var l=i.length,h=createTypedArray("float32",l);for(s=0;s<l;s+=1)h[s]=i[s]+(n[s]-i[s])*o;return h}function random(e,t){if(void 0===t&&(void 0===e?(e=0,t=1):(t=e,e=void 0)),t.length){var r,i=t.length;e||(e=createTypedArray("float32",i));var n=createTypedArray("float32",i),s=BMMath.random();for(r=0;r<i;r+=1)n[r]=e[r]+s*(t[r]-e[r]);return n}return void 0===e&&(e=0),e+BMMath.random()*(t-e)}function createPath(e,t,r,i){var n,s,a,o=e.length,l=shapePool.newElement();l.setPathData(!!i,o);var h=[0,0];for(n=0;n<o;n+=1)s=t&&t[n]?t[n]:h,a=r&&r[n]?r[n]:h,l.setTripleAt(e[n][0],e[n][1],a[0]+e[n][0],a[1]+e[n][1],s[0]+e[n][0],s[1]+e[n][1],n,!0);return l}function initiateExpression(elem,data,property){function noOp(e){return e}if(!elem.globalData.renderConfig.runExpressions)return noOp;var transform,$bm_transform,content,effect,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,time,velocity,value,text,textIndex,textTotal,selectorValue,parent,val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=-1!==val.indexOf("random"),elemType=elem.data.ty,thisProperty=property;thisProperty._name=elem.data.nm,thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||!0!==this.data.hd,wiggle=(function(e,t){var r,i,n=this.pv.length?this.pv.length:1,s=createTypedArray("float32",n);e=5;var a=Math.floor(time*e);for(r=0,i=0;r<a;){for(i=0;i<n;i+=1)s[i]+=-t+2*t*BMMath.random();r+=1}var o=time*e,l=o-Math.floor(o),h=createTypedArray("float32",n);if(n>1){for(i=0;i<n;i+=1)h[i]=this.pv[i]+s[i]+(-t+2*t*BMMath.random())*l;return h}return this.pv+s[0]+(-t+2*t*BMMath.random())*l}).bind(this);function loopInDuration(e,t){return loopIn(e,t,!0)}function loopOutDuration(e,t){return loopOut(e,t,!0)}thisProperty.loopIn&&(loop_in=loopIn=thisProperty.loopIn.bind(thisProperty)),thisProperty.loopOut&&(loop_out=loopOut=thisProperty.loopOut.bind(thisProperty)),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty)),this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(e,t){var r=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],i=Math.atan2(r[0],Math.sqrt(r[1]*r[1]+r[2]*r[2]))/degToRads;return[-Math.atan2(r[1],r[2])/degToRads,i,0]}function easeOut(e,t,r,i,n){return applyEase(easeOutBez,e,t,r,i,n)}function easeIn(e,t,r,i,n){return applyEase(easeInBez,e,t,r,i,n)}function ease(e,t,r,i,n){return applyEase(easeInOutBez,e,t,r,i,n)}function applyEase(e,t,r,i,n,s){void 0===n?(n=r,s=i):t=(t-r)/(i-r),t>1?t=1:t<0&&(t=0);var a=e(t);if($bm_isInstanceOfArray(n)){var o,l=n.length,h=createTypedArray("float32",l);for(o=0;o<l;o+=1)h[o]=(s[o]-n[o])*a+n[o];return h}return(s-n)*a+n}function nearestKey(e){var t,r,i,n=data.k.length;if(data.k.length&&"number"!=typeof data.k[0]){if(r=-1,(e*=elem.comp.globalData.frameRate)<data.k[0].t)r=1,i=data.k[0].t;else{for(t=0;t<n-1;t+=1){if(e===data.k[t].t){r=t+1,i=data.k[t].t;break}if(e>data.k[t].t&&e<data.k[t+1].t){e-data.k[t].t>data.k[t+1].t-e?(r=t+2,i=data.k[t+1].t):(r=t+1,i=data.k[t].t);break}}-1===r&&(r=t+1,i=data.k[t].t)}}else r=0,i=0;var s={};return s.index=r,s.time=i/elem.comp.globalData.frameRate,s}function key(e){if(!data.k.length||"number"==typeof data.k[0])throw Error("The property has no keyframe at index "+e);e-=1,t={time:data.k[e].t/elem.comp.globalData.frameRate,value:[]};var t,r,i,n=Object.prototype.hasOwnProperty.call(data.k[e],"s")?data.k[e].s:data.k[e-1].e;for(r=0,i=n.length;r<i;r+=1)t[r]=n[r],t.value[r]=n[r];return t}function framesToTime(e,t){return t||(t=elem.comp.globalData.frameRate),e/t}function timeToFrames(e,t){return e||0===e||(e=time),t||(t=elem.comp.globalData.frameRate),e*t}function seedRandom(e){BMMath.seedrandom(randSeed+e)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(e,t){return"string"==typeof value?void 0===t?value.substring(e):value.substring(e,t):""}function substr(e,t){return"string"==typeof value?void 0===t?value.substr(e):value.substr(e,t):""}function posterizeTime(e){time=0===e?0:Math.floor(time*e)/e,value=valueAtTime(time)}var index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),randSeed=Math.floor(1e6*Math.random()),globalData=elem.globalData;function executeExpression(e){return(value=e,this.frameExpressionId===elem.globalData.frameId&&"textSelector"!==this.propType)?value:("textSelector"===this.propType&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),!transform&&($bm_transform=transform=elem.layerInterface("ADBE Transform Group"),transform&&(anchorPoint=transform.anchorPoint)),4!==elemType||content||(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),(hasParent=!!(elem.hierarchy&&elem.hierarchy.length))&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var e={};function t(e){var t=0,r=[];function i(){t+=1}function n(){0==(t-=1)&&a()}function s(e){-1===r.indexOf(e)&&r.push(e)}function a(){var e,t=r.length;for(e=0;e<t;e+=1)r[e].release();r.length=0}e.renderer.compInterface=CompExpressionInterface(e.renderer),e.renderer.globalData.projectInterface.registerComposition(e.renderer),e.renderer.globalData.pushExpression=i,e.renderer.globalData.popExpression=n,e.renderer.globalData.registerExpressionProperty=s}return e.initExpressions=t,e.resetFrame=ExpressionManager.resetFrame,e}(),MaskManagerInterface=function(){function e(e,t){this._mask=e,this._data=t}return Object.defineProperty(e.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(e.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),100*this._mask.op.v}}),function(t){var r,i=createSizedArray(t.viewData.length),n=t.viewData.length;for(r=0;r<n;r+=1)i[r]=new e(t.viewData[r],t.masksProperties[r]);return function(e){for(r=0;r<n;){if(t.masksProperties[r].nm===e)return i[r];r+=1}return null}}}(),ExpressionPropertyInterface=function(){var e={pv:0,v:0,mult:1},t={pv:[0,0,0],v:[0,0,0],mult:1};function r(e,t,r){Object.defineProperty(e,"velocity",{get:function(){return t.getVelocityAtTime(t.comp.currentFrame)}}),e.numKeys=t.keyframes?t.keyframes.length:0,e.key=function(i){if(!e.numKeys)return 0;var n="";n="s"in t.keyframes[i-1]?t.keyframes[i-1].s:"e"in t.keyframes[i-2]?t.keyframes[i-2].e:t.keyframes[i-2].s;var s="unidimensional"===r?new Number(n):Object.assign({},n);return s.time=t.keyframes[i-1].t/t.elem.comp.globalData.frameRate,s.value="unidimensional"===r?n[0]:n,s},e.valueAtTime=t.getValueAtTime,e.speedAtTime=t.getSpeedAtTime,e.velocityAtTime=t.getVelocityAtTime,e.propertyGroup=t.propertyGroup}function i(t){t&&"pv"in t||(t=e);var i=1/t.mult,n=t.pv*i,s=new Number(n);return s.value=n,r(s,t,"unidimensional"),function(){return t.k&&t.getValue(),n=t.v*i,s.value!==n&&((s=new Number(n)).value=n,s[0]=n,r(s,t,"unidimensional")),s}}function n(e){e&&"pv"in e||(e=t);var i=1/e.mult,n=e.data&&e.data.l||e.pv.length,s=createTypedArray("float32",n),a=createTypedArray("float32",n);return s.value=a,r(s,e,"multidimensional"),function(){e.k&&e.getValue();for(var t=0;t<n;t+=1)a[t]=e.v[t]*i,s[t]=a[t];return s}}function s(){return e}return function(e){return e?"unidimensional"===e.propType?i(e):n(e):s}}(),TransformExpressionInterface=function(){return function(e){var t,r,i,n;function s(e){switch(e){case"scale":case"Scale":case"ADBE Scale":case 6:return s.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return s.rotation;case"ADBE Rotate X":return s.xRotation;case"ADBE Rotate Y":return s.yRotation;case"position":case"Position":case"ADBE Position":case 2:return s.position;case"ADBE Position_0":return s.xPosition;case"ADBE Position_1":return s.yPosition;case"ADBE Position_2":return s.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return s.anchorPoint;case"opacity":case"Opacity":case 11:return s.opacity;default:return null}}return Object.defineProperty(s,"rotation",{get:ExpressionPropertyInterface(e.r||e.rz)}),Object.defineProperty(s,"zRotation",{get:ExpressionPropertyInterface(e.rz||e.r)}),Object.defineProperty(s,"xRotation",{get:ExpressionPropertyInterface(e.rx)}),Object.defineProperty(s,"yRotation",{get:ExpressionPropertyInterface(e.ry)}),Object.defineProperty(s,"scale",{get:ExpressionPropertyInterface(e.s)}),e.p?n=ExpressionPropertyInterface(e.p):(t=ExpressionPropertyInterface(e.px),r=ExpressionPropertyInterface(e.py),e.pz&&(i=ExpressionPropertyInterface(e.pz))),Object.defineProperty(s,"position",{get:function(){return e.p?n():[t(),r(),i?i():0]}}),Object.defineProperty(s,"xPosition",{get:ExpressionPropertyInterface(e.px)}),Object.defineProperty(s,"yPosition",{get:ExpressionPropertyInterface(e.py)}),Object.defineProperty(s,"zPosition",{get:ExpressionPropertyInterface(e.pz)}),Object.defineProperty(s,"anchorPoint",{get:ExpressionPropertyInterface(e.a)}),Object.defineProperty(s,"opacity",{get:ExpressionPropertyInterface(e.o)}),Object.defineProperty(s,"skew",{get:ExpressionPropertyInterface(e.sk)}),Object.defineProperty(s,"skewAxis",{get:ExpressionPropertyInterface(e.sa)}),Object.defineProperty(s,"orientation",{get:ExpressionPropertyInterface(e.or)}),s}}(),LayerExpressionInterface=function(){function e(e){var t=new Matrix;return void 0!==e?this._elem.finalTransform.mProp.getValueAtTime(e).clone(t):this._elem.finalTransform.mProp.applyToMatrix(t),t}function t(e,t){var r=this.getMatrix(t);return r.props[12]=0,r.props[13]=0,r.props[14]=0,this.applyPoint(r,e)}function r(e,t){var r=this.getMatrix(t);return this.applyPoint(r,e)}function i(e,t){var r=this.getMatrix(t);return r.props[12]=0,r.props[13]=0,r.props[14]=0,this.invertPoint(r,e)}function n(e,t){var r=this.getMatrix(t);return this.invertPoint(r,e)}function s(e,t){if(this._elem.hierarchy&&this._elem.hierarchy.length){var r,i=this._elem.hierarchy.length;for(r=0;r<i;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(e)}return e.applyToPointArray(t[0],t[1],t[2]||0)}function a(e,t){if(this._elem.hierarchy&&this._elem.hierarchy.length){var r,i=this._elem.hierarchy.length;for(r=0;r<i;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(e)}return e.inversePoint(t)}function o(e){var t=new Matrix;if(t.reset(),this._elem.finalTransform.mProp.applyToMatrix(t),this._elem.hierarchy&&this._elem.hierarchy.length){var r,i=this._elem.hierarchy.length;for(r=0;r<i;r+=1)this._elem.hierarchy[r].finalTransform.mProp.applyToMatrix(t)}return t.inversePoint(e)}function l(){return[1,1,1,1]}return function(h){function u(e){d.mask=new MaskManagerInterface(e,h)}function c(e){d.effect=e}function d(e){switch(e){case"ADBE Root Vectors Group":case"Contents":case 2:return d.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return p;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return d.effect;case"ADBE Text Properties":return d.textInterface;default:return null}}d.getMatrix=e,d.invertPoint=a,d.applyPoint=s,d.toWorld=r,d.toWorldVec=t,d.fromWorld=n,d.fromWorldVec=i,d.toComp=r,d.fromComp=o,d.sampleImage=l,d.sourceRectAtTime=h.sourceRectAtTime.bind(h),d._elem=h;var p,f=getDescriptor(p=TransformExpressionInterface(h.finalTransform.mProp),"anchorPoint");return Object.defineProperties(d,{hasParent:{get:function(){return h.hierarchy.length}},parent:{get:function(){return h.hierarchy[0].layerInterface}},rotation:getDescriptor(p,"rotation"),scale:getDescriptor(p,"scale"),position:getDescriptor(p,"position"),opacity:getDescriptor(p,"opacity"),anchorPoint:f,anchor_point:f,transform:{get:function(){return p}},active:{get:function(){return h.isInRange}}}),d.startTime=h.data.st,d.index=h.data.ind,d.source=h.data.refId,d.height=0===h.data.ty?h.data.h:100,d.width=0===h.data.ty?h.data.w:100,d.inPoint=h.data.ip/h.comp.globalData.frameRate,d.outPoint=h.data.op/h.comp.globalData.frameRate,d._name=h.data.nm,d.registerMaskInterface=u,d.registerEffectsInterface=c,d}}(),propertyGroupFactory=function(){return function(e,t){return function(r){return(r=void 0===r?1:r)<=0?e:t(r-1)}}}(),PropertyInterface=function(){return function(e,t){var r={_name:e};return function(e){return(e=void 0===e?1:e)<=0?r:t(e-1)}}}(),EffectsExpressionInterface=function(){function e(r,i,n,s){function a(e){for(var t=r.ef,i=0,n=t.length;i<n;){if(e===t[i].nm||e===t[i].mn||e===t[i].ix){if(5===t[i].ty)return h[i];return h[i]()}i+=1}throw Error()}var o,l=propertyGroupFactory(a,n),h=[],u=r.ef.length;for(o=0;o<u;o+=1)5===r.ef[o].ty?h.push(e(r.ef[o],i.effectElements[o],i.effectElements[o].propertyGroup,s)):h.push(t(i.effectElements[o],r.ef[o].ty,s,l));return"ADBE Color Control"===r.mn&&Object.defineProperty(a,"color",{get:function(){return h[0]()}}),Object.defineProperties(a,{numProperties:{get:function(){return r.np}},_name:{value:r.nm},propertyGroup:{value:l}}),a.enabled=0!==r.en,a.active=a.enabled,a}function t(e,t,r,i){var n=ExpressionPropertyInterface(e.p);function s(){return 10===t?r.comp.compInterface(e.p.v):n()}return e.p.setGroupProperty&&e.p.setGroupProperty(PropertyInterface("",i)),s}return{createEffectsInterface:function(t,r){if(t.effectsManager){var i,n=[],s=t.data.ef,a=t.effectsManager.effectElements.length;for(i=0;i<a;i+=1)n.push(e(s[i],t.effectsManager.effectElements[i],r,t));var o=t.data.ef||[],l=function(e){for(i=0,a=o.length;i<a;){if(e===o[i].nm||e===o[i].mn||e===o[i].ix)return n[i];i+=1}return null};return Object.defineProperty(l,"numProperties",{get:function(){return o.length}}),l}return null}}}(),ShapePathInterface=function(){return function(e,t,r){var i=t.sh;function n(e){return"Shape"===e||"shape"===e||"Path"===e||"path"===e||"ADBE Vector Shape"===e||2===e?n.path:null}var s=propertyGroupFactory(n,r);return i.setGroupProperty(PropertyInterface("Path",s)),Object.defineProperties(n,{path:{get:function(){return i.k&&i.getValue(),i}},shape:{get:function(){return i.k&&i.getValue(),i}},_name:{value:e.nm},ix:{value:e.ix},propertyIndex:{value:e.ix},mn:{value:e.mn},propertyGroup:{value:r}}),n}}(),ShapeExpressionInterface=function(){function e(e,t,l){var f,m=[],g=e?e.length:0;for(f=0;f<g;f+=1)"gr"===e[f].ty?m.push(r(e[f],t[f],l)):"fl"===e[f].ty?m.push(i(e[f],t[f],l)):"st"===e[f].ty?m.push(a(e[f],t[f],l)):"tm"===e[f].ty?m.push(o(e[f],t[f],l)):"tr"===e[f].ty||("el"===e[f].ty?m.push(h(e[f],t[f],l)):"sr"===e[f].ty?m.push(u(e[f],t[f],l)):"sh"===e[f].ty?m.push(ShapePathInterface(e[f],t[f],l)):"rc"===e[f].ty?m.push(c(e[f],t[f],l)):"rd"===e[f].ty?m.push(d(e[f],t[f],l)):"rp"===e[f].ty?m.push(p(e[f],t[f],l)):"gf"===e[f].ty?m.push(n(e[f],t[f],l)):m.push(s(e[f],t[f],l)));return m}function t(t,r,i){var n,s=function(e){for(var t=0,r=n.length;t<r;){if(n[t]._name===e||n[t].mn===e||n[t].propertyIndex===e||n[t].ix===e||n[t].ind===e)return n[t];t+=1}return"number"==typeof e?n[e-1]:null};s.propertyGroup=propertyGroupFactory(s,i),n=e(t.it,r.it,s.propertyGroup),s.numProperties=n.length;var a=l(t.it[t.it.length-1],r.it[r.it.length-1],s.propertyGroup);return s.transform=a,s.propertyIndex=t.cix,s._name=t.nm,s}function r(e,r,i){var n=function(e){switch(e){case"ADBE Vectors Group":case"Contents":case 2:return n.content;default:return n.transform}};n.propertyGroup=propertyGroupFactory(n,i);var s=t(e,r,n.propertyGroup),a=l(e.it[e.it.length-1],r.it[r.it.length-1],n.propertyGroup);return n.content=s,n.transform=a,Object.defineProperty(n,"_name",{get:function(){return e.nm}}),n.numProperties=e.np,n.propertyIndex=e.ix,n.nm=e.nm,n.mn=e.mn,n}function i(e,t,r){function i(e){return"Color"===e||"color"===e?i.color:"Opacity"===e||"opacity"===e?i.opacity:null}return Object.defineProperties(i,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(PropertyInterface("Color",r)),t.o.setGroupProperty(PropertyInterface("Opacity",r)),i}function n(e,t,r){function i(e){return"Start Point"===e||"start point"===e?i.startPoint:"End Point"===e||"end point"===e?i.endPoint:"Opacity"===e||"opacity"===e?i.opacity:null}return Object.defineProperties(i,{startPoint:{get:ExpressionPropertyInterface(t.s)},endPoint:{get:ExpressionPropertyInterface(t.e)},opacity:{get:ExpressionPropertyInterface(t.o)},type:{get:function(){return"a"}},_name:{value:e.nm},mn:{value:e.mn}}),t.s.setGroupProperty(PropertyInterface("Start Point",r)),t.e.setGroupProperty(PropertyInterface("End Point",r)),t.o.setGroupProperty(PropertyInterface("Opacity",r)),i}function s(){return function(){return null}}function a(e,t,r){var i,n=propertyGroupFactory(h,r),s=propertyGroupFactory(l,n);function a(r){Object.defineProperty(l,e.d[r].nm,{get:ExpressionPropertyInterface(t.d.dataProps[r].p)})}var o=e.d?e.d.length:0,l={};for(i=0;i<o;i+=1)a(i),t.d.dataProps[i].p.setGroupProperty(s);function h(e){return"Color"===e||"color"===e?h.color:"Opacity"===e||"opacity"===e?h.opacity:"Stroke Width"===e||"stroke width"===e?h.strokeWidth:null}return Object.defineProperties(h,{color:{get:ExpressionPropertyInterface(t.c)},opacity:{get:ExpressionPropertyInterface(t.o)},strokeWidth:{get:ExpressionPropertyInterface(t.w)},dash:{get:function(){return l}},_name:{value:e.nm},mn:{value:e.mn}}),t.c.setGroupProperty(PropertyInterface("Color",n)),t.o.setGroupProperty(PropertyInterface("Opacity",n)),t.w.setGroupProperty(PropertyInterface("Stroke Width",n)),h}function o(e,t,r){function i(t){return t===e.e.ix||"End"===t||"end"===t?i.end:t===e.s.ix?i.start:t===e.o.ix?i.offset:null}var n=propertyGroupFactory(i,r);return i.propertyIndex=e.ix,t.s.setGroupProperty(PropertyInterface("Start",n)),t.e.setGroupProperty(PropertyInterface("End",n)),t.o.setGroupProperty(PropertyInterface("Offset",n)),i.propertyIndex=e.ix,i.propertyGroup=r,Object.defineProperties(i,{start:{get:ExpressionPropertyInterface(t.s)},end:{get:ExpressionPropertyInterface(t.e)},offset:{get:ExpressionPropertyInterface(t.o)},_name:{value:e.nm}}),i.mn=e.mn,i}function l(e,t,r){function i(t){return e.a.ix===t||"Anchor Point"===t?i.anchorPoint:e.o.ix===t||"Opacity"===t?i.opacity:e.p.ix===t||"Position"===t?i.position:e.r.ix===t||"Rotation"===t||"ADBE Vector Rotation"===t?i.rotation:e.s.ix===t||"Scale"===t?i.scale:e.sk&&e.sk.ix===t||"Skew"===t?i.skew:e.sa&&e.sa.ix===t||"Skew Axis"===t?i.skewAxis:null}var n=propertyGroupFactory(i,r);return t.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",n)),t.transform.mProps.p.setGroupProperty(PropertyInterface("Position",n)),t.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",n)),t.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",n)),t.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",n)),t.transform.mProps.sk&&(t.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",n)),t.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",n))),t.transform.op.setGroupProperty(PropertyInterface("Opacity",n)),Object.defineProperties(i,{opacity:{get:ExpressionPropertyInterface(t.transform.mProps.o)},position:{get:ExpressionPropertyInterface(t.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(t.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(t.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(t.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(t.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(t.transform.mProps.sa)},_name:{value:e.nm}}),i.ty="tr",i.mn=e.mn,i.propertyGroup=r,i}function h(e,t,r){function i(t){return e.p.ix===t?i.position:e.s.ix===t?i.size:null}var n=propertyGroupFactory(i,r);i.propertyIndex=e.ix;var s="tm"===t.sh.ty?t.sh.prop:t.sh;return s.s.setGroupProperty(PropertyInterface("Size",n)),s.p.setGroupProperty(PropertyInterface("Position",n)),Object.defineProperties(i,{size:{get:ExpressionPropertyInterface(s.s)},position:{get:ExpressionPropertyInterface(s.p)},_name:{value:e.nm}}),i.mn=e.mn,i}function u(e,t,r){function i(t){return e.p.ix===t?i.position:e.r.ix===t?i.rotation:e.pt.ix===t?i.points:e.or.ix===t||"ADBE Vector Star Outer Radius"===t?i.outerRadius:e.os.ix===t?i.outerRoundness:e.ir&&(e.ir.ix===t||"ADBE Vector Star Inner Radius"===t)?i.innerRadius:e.is&&e.is.ix===t?i.innerRoundness:null}var n=propertyGroupFactory(i,r),s="tm"===t.sh.ty?t.sh.prop:t.sh;return i.propertyIndex=e.ix,s.or.setGroupProperty(PropertyInterface("Outer Radius",n)),s.os.setGroupProperty(PropertyInterface("Outer Roundness",n)),s.pt.setGroupProperty(PropertyInterface("Points",n)),s.p.setGroupProperty(PropertyInterface("Position",n)),s.r.setGroupProperty(PropertyInterface("Rotation",n)),e.ir&&(s.ir.setGroupProperty(PropertyInterface("Inner Radius",n)),s.is.setGroupProperty(PropertyInterface("Inner Roundness",n))),Object.defineProperties(i,{position:{get:ExpressionPropertyInterface(s.p)},rotation:{get:ExpressionPropertyInterface(s.r)},points:{get:ExpressionPropertyInterface(s.pt)},outerRadius:{get:ExpressionPropertyInterface(s.or)},outerRoundness:{get:ExpressionPropertyInterface(s.os)},innerRadius:{get:ExpressionPropertyInterface(s.ir)},innerRoundness:{get:ExpressionPropertyInterface(s.is)},_name:{value:e.nm}}),i.mn=e.mn,i}function c(e,t,r){function i(t){return e.p.ix===t?i.position:e.r.ix===t?i.roundness:e.s.ix===t||"Size"===t||"ADBE Vector Rect Size"===t?i.size:null}var n=propertyGroupFactory(i,r),s="tm"===t.sh.ty?t.sh.prop:t.sh;return i.propertyIndex=e.ix,s.p.setGroupProperty(PropertyInterface("Position",n)),s.s.setGroupProperty(PropertyInterface("Size",n)),s.r.setGroupProperty(PropertyInterface("Rotation",n)),Object.defineProperties(i,{position:{get:ExpressionPropertyInterface(s.p)},roundness:{get:ExpressionPropertyInterface(s.r)},size:{get:ExpressionPropertyInterface(s.s)},_name:{value:e.nm}}),i.mn=e.mn,i}function d(e,t,r){function i(t){return e.r.ix===t||"Round Corners 1"===t?i.radius:null}var n=propertyGroupFactory(i,r),s=t;return i.propertyIndex=e.ix,s.rd.setGroupProperty(PropertyInterface("Radius",n)),Object.defineProperties(i,{radius:{get:ExpressionPropertyInterface(s.rd)},_name:{value:e.nm}}),i.mn=e.mn,i}function p(e,t,r){function i(t){return e.c.ix===t||"Copies"===t?i.copies:e.o.ix===t||"Offset"===t?i.offset:null}var n=propertyGroupFactory(i,r),s=t;return i.propertyIndex=e.ix,s.c.setGroupProperty(PropertyInterface("Copies",n)),s.o.setGroupProperty(PropertyInterface("Offset",n)),Object.defineProperties(i,{copies:{get:ExpressionPropertyInterface(s.c)},offset:{get:ExpressionPropertyInterface(s.o)},_name:{value:e.nm}}),i.mn=e.mn,i}return function(t,r,i){var n;function s(e){if("number"==typeof e)return 0===(e=void 0===e?1:e)?i:n[e-1];for(var t=0,r=n.length;t<r;){if(n[t]._name===e)return n[t];t+=1}return null}function a(){return i}return s.propertyGroup=propertyGroupFactory(s,a),n=e(t,r,s.propertyGroup),s.numProperties=n.length,s._name="Contents",s}}(),TextExpressionInterface=function(){return function(e){var t;function r(e){return"ADBE Text Document"===e?r.sourceText:null}return Object.defineProperty(r,"sourceText",{get:function(){e.textProperty.getValue();var r=e.textProperty.currentData.t;return t&&r===t.value||((t=new String(r)).value=r||new String(r),Object.defineProperty(t,"style",{get:function(){return{fillColor:e.textProperty.currentData.fc}}})),t}}),r}}();function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var FootageInterface=function(){var e=function(e){var t="",r=e.getFootageData();function i(e){if(r[e])return(t=e,r=r[e],"object"===_typeof(r))?i:r;var n=e.indexOf(t);return -1!==n?(r=r[parseInt(e.substr(n+t.length),10)],"object"===_typeof(r))?i:r:""}return function(){return t="",r=e.getFootageData(),i}},t=function(t){function r(e){return"Outline"===e?r.outlineInterface():null}return r._name="Outline",r.outlineInterface=e(t),r};return function(e){function r(e){return"Data"===e?r.dataInterface:null}return r._name="Data",r.dataInterface=t(e),r}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(e){return interfaces[e]||null}var expressionHelpers=function(){return{searchExpressions:function(e,t,r){t.x&&(r.k=!0,r.x=!0,r.initiateExpression=ExpressionManager.initiateExpression,r.effectsSequence.push(r.initiateExpression(e,t,r).bind(r)))},getSpeedAtTime:function(e){var t,r=-.01,i=this.getValueAtTime(e),n=this.getValueAtTime(e+r),s=0;if(i.length){for(t=0;t<i.length;t+=1)s+=Math.pow(n[t]-i[t],2);s=100*Math.sqrt(s)}else s=0;return s},getVelocityAtTime:function(e){if(void 0!==this.vel)return this.vel;var t,r,i=-.001,n=this.getValueAtTime(e),s=this.getValueAtTime(e+i);if(n.length)for(r=0,t=createTypedArray("float32",n.length);r<n.length;r+=1)t[r]=(s[r]-n[r])/i;else t=(s-n)/i;return t},getValueAtTime:function(e){return e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<e?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(e,this._cachingAtTime),this._cachingAtTime.lastFrame=e),this._cachingAtTime.value},getStaticValueAtTime:function(){return this.pv},setGroupProperty:function(e){this.propertyGroup=e}}}();function addPropertyDecorator(){function e(e,t,r){if(!this.k||!this.keyframes)return this.pv;e=e?e.toLowerCase():"";var i,n,s,a,o,l=this.comp.renderedFrame,h=this.keyframes,u=h[h.length-1].t;if(l<=u)return this.pv;if(r?(i=t?Math.abs(u-this.elem.comp.globalData.frameRate*t):Math.max(0,u-this.elem.data.ip),n=u-i):((!t||t>h.length-1)&&(t=h.length-1),i=u-(n=h[h.length-1-t].t)),"pingpong"===e){if(Math.floor((l-n)/i)%2!=0)return this.getValueAtTime((i-(l-n)%i+n)/this.comp.globalData.frameRate,0)}else if("offset"===e){var c=this.getValueAtTime(n/this.comp.globalData.frameRate,0),d=this.getValueAtTime(u/this.comp.globalData.frameRate,0),p=this.getValueAtTime(((l-n)%i+n)/this.comp.globalData.frameRate,0),f=Math.floor((l-n)/i);if(this.pv.length){for(s=0,a=(o=Array(c.length)).length;s<a;s+=1)o[s]=(d[s]-c[s])*f+p[s];return o}return(d-c)*f+p}else if("continue"===e){var m=this.getValueAtTime(u/this.comp.globalData.frameRate,0),g=this.getValueAtTime((u-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(s=0,a=(o=Array(m.length)).length;s<a;s+=1)o[s]=m[s]+(m[s]-g[s])*((l-u)/this.comp.globalData.frameRate)/5e-4;return o}return m+(l-u)/.001*(m-g)}return this.getValueAtTime(((l-n)%i+n)/this.comp.globalData.frameRate,0)}function t(e,t,r){if(!this.k)return this.pv;e=e?e.toLowerCase():"";var i,n,s,a,o,l=this.comp.renderedFrame,h=this.keyframes,u=h[0].t;if(l>=u)return this.pv;if(r?(i=t?Math.abs(this.elem.comp.globalData.frameRate*t):Math.max(0,this.elem.data.op-u),n=u+i):((!t||t>h.length-1)&&(t=h.length-1),i=(n=h[t].t)-u),"pingpong"===e){if(Math.floor((u-l)/i)%2==0)return this.getValueAtTime(((u-l)%i+u)/this.comp.globalData.frameRate,0)}else if("offset"===e){var c=this.getValueAtTime(u/this.comp.globalData.frameRate,0),d=this.getValueAtTime(n/this.comp.globalData.frameRate,0),p=this.getValueAtTime((i-(u-l)%i+u)/this.comp.globalData.frameRate,0),f=Math.floor((u-l)/i)+1;if(this.pv.length){for(s=0,a=(o=Array(c.length)).length;s<a;s+=1)o[s]=p[s]-(d[s]-c[s])*f;return o}return p-(d-c)*f}else if("continue"===e){var m=this.getValueAtTime(u/this.comp.globalData.frameRate,0),g=this.getValueAtTime((u+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(s=0,a=(o=Array(m.length)).length;s<a;s+=1)o[s]=m[s]+(m[s]-g[s])*(u-l)/.001;return o}return m+(m-g)*(u-l)/.001}return this.getValueAtTime((i-((u-l)%i+u))/this.comp.globalData.frameRate,0)}function r(e,t){if(!this.k||(e=.5*(e||.4),(t=Math.floor(t||5))<=1))return this.pv;var r,i,n=this.comp.renderedFrame/this.comp.globalData.frameRate,s=n-e,a=n+e,o=t>1?(a-s)/(t-1):1,l=0,h=0;for(r=this.pv.length?createTypedArray("float32",this.pv.length):0;l<t;){if(i=this.getValueAtTime(s+l*o),this.pv.length)for(h=0;h<this.pv.length;h+=1)r[h]+=i[h];else r+=i;l+=1}if(this.pv.length)for(h=0;h<this.pv.length;h+=1)r[h]/=t;else r/=t;return r}function i(e){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var t=this._transformCachingAtTime.v;if(t.cloneFromProps(this.pre.props),this.appliedTransformations<1){var r=this.a.getValueAtTime(e);t.translate(-r[0]*this.a.mult,-r[1]*this.a.mult,r[2]*this.a.mult)}if(this.appliedTransformations<2){var i=this.s.getValueAtTime(e);t.scale(i[0]*this.s.mult,i[1]*this.s.mult,i[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var n=this.sk.getValueAtTime(e),s=this.sa.getValueAtTime(e);t.skewFromAxis(-n*this.sk.mult,s*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var a=this.r.getValueAtTime(e);t.rotate(-a*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var o=this.rz.getValueAtTime(e),l=this.ry.getValueAtTime(e),h=this.rx.getValueAtTime(e),u=this.or.getValueAtTime(e);t.rotateZ(-o*this.rz.mult).rotateY(l*this.ry.mult).rotateX(h*this.rx.mult).rotateZ(-u[2]*this.or.mult).rotateY(u[1]*this.or.mult).rotateX(u[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var c=this.px.getValueAtTime(e),d=this.py.getValueAtTime(e);if(this.data.p.z){var p=this.pz.getValueAtTime(e);t.translate(c*this.px.mult,d*this.py.mult,-p*this.pz.mult)}else t.translate(c*this.px.mult,d*this.py.mult,0)}else{var f=this.p.getValueAtTime(e);t.translate(f[0]*this.p.mult,f[1]*this.p.mult,-f[2]*this.p.mult)}return t}function n(){return this.v.clone(new Matrix)}var s=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(e,t,r){var a=s(e,t,r);return a.dynamicProperties.length?a.getValueAtTime=i.bind(a):a.getValueAtTime=n.bind(a),a.setGroupProperty=expressionHelpers.setGroupProperty,a};var a=PropertyFactory.getProp;function o(e){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),e*=this.elem.globalData.frameRate,(e-=this.offsetTime)!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<e?this._caching.lastIndex:0,this._cachingAtTime.lastTime=e,this.interpolateShape(e,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}PropertyFactory.getProp=function(i,n,s,o,l){var h=a(i,n,s,o,l);h.kf?h.getValueAtTime=expressionHelpers.getValueAtTime.bind(h):h.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(h),h.setGroupProperty=expressionHelpers.setGroupProperty,h.loopOut=e,h.loopIn=t,h.smooth=r,h.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(h),h.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(h),h.numKeys=1===n.a?n.k.length:0,h.propertyIndex=n.ix;var u=0;return 0!==s&&(u=createTypedArray("float32",1===n.a?n.k[0].s.length:n.k.length)),h._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:u},expressionHelpers.searchExpressions(i,n,h),h.k&&l.addDynamicProperty(h),h};var l=ShapePropertyFactory.getConstructorFunction(),h=ShapePropertyFactory.getKeyframedConstructorFunction();function u(){}u.prototype={vertices:function(e,t){this.k&&this.getValue();var r,i=this.v;void 0!==t&&(i=this.getValueAtTime(t,0));var n=i._length,s=i[e],a=i.v,o=createSizedArray(n);for(r=0;r<n;r+=1)"i"===e||"o"===e?o[r]=[s[r][0]-a[r][0],s[r][1]-a[r][1]]:o[r]=[s[r][0],s[r][1]];return o},points:function(e){return this.vertices("v",e)},inTangents:function(e){return this.vertices("i",e)},outTangents:function(e){return this.vertices("o",e)},isClosed:function(){return this.v.c},pointOnPath:function(e,t){var r,i=this.v;void 0!==t&&(i=this.getValueAtTime(t,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(i));for(var n=this._segmentsLength,s=n.lengths,a=n.totalLength*e,o=0,l=s.length,h=0;o<l;){if(h+s[o].addedLength>a){var u=o,c=i.c&&o===l-1?0:o+1,d=(a-h)/s[o].addedLength;r=bez.getPointInSegment(i.v[u],i.v[c],i.o[u],i.i[c],d,s[o]);break}h+=s[o].addedLength,o+=1}return r||(r=i.c?[i.v[0][0],i.v[0][1]]:[i.v[i._length-1][0],i.v[i._length-1][1]]),r},vectorOnPath:function(e,t,r){1==e?e=this.v.c:0==e&&(e=.999);var i=this.pointOnPath(e,t),n=this.pointOnPath(e+.001,t),s=n[0]-i[0],a=n[1]-i[1],o=Math.sqrt(Math.pow(s,2)+Math.pow(a,2));return 0===o?[0,0]:"tangent"===r?[s/o,a/o]:[-a/o,s/o]},tangentOnPath:function(e,t){return this.vectorOnPath(e,t,"tangent")},normalOnPath:function(e,t){return this.vectorOnPath(e,t,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([u],l),extendPrototype([u],h),h.prototype.getValueAtTime=o,h.prototype.initiateExpression=ExpressionManager.initiateExpression;var c=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(e,t,r,i,n){var s=c(e,t,r,i,n);return s.propertyIndex=t.ix,s.lock=!1,3===r?expressionHelpers.searchExpressions(e,t.pt,s):4===r&&expressionHelpers.searchExpressions(e,t.ks,s),s.k&&e.addDynamicProperty(s),s}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function e(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(e,t){var r=this.calculateExpression(t);if(e.t!==r){var i={};return this.copyData(i,e),i.t=r.toString(),i.__complete=!1,i}return e},TextProperty.prototype.searchProperty=function(){var e=this.searchKeyframes(),t=this.searchExpressions();return this.kf=e||t,this.kf},TextProperty.prototype.searchExpressions=e}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function(e,t){var r,i,n=createNS("feMerge");for(n.setAttribute("result",e),i=0;i<t.length;i+=1)(r=createNS("feMergeNode")).setAttribute("in",t[i]),n.appendChild(r),n.appendChild(r);return n}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(e,t,r,i,n){this.filterManager=t;var s=createNS("feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","linearRGB"),s.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=s,s.setAttribute("result",i+"_tint_1"),e.appendChild(s),(s=createNS("feColorMatrix")).setAttribute("type","matrix"),s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),s.setAttribute("result",i+"_tint_2"),e.appendChild(s),this.matrixFilter=s;var a=this.createMergeNode(i,[n,i+"_tint_1",i+"_tint_2"]);e.appendChild(a)}function SVGFillFilter(e,t,r,i){this.filterManager=t;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),n.setAttribute("result",i),e.appendChild(n),this.matrixFilter=n}function SVGStrokeEffect(e,t,r){this.initialized=!1,this.filterManager=t,this.elem=r,this.paths=[]}function SVGTritoneFilter(e,t,r,i){this.filterManager=t;var n=createNS("feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("color-interpolation-filters","linearRGB"),n.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),e.appendChild(n);var s=createNS("feComponentTransfer");s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("result",i),this.matrixFilter=s;var a=createNS("feFuncR");a.setAttribute("type","table"),s.appendChild(a),this.feFuncR=a;var o=createNS("feFuncG");o.setAttribute("type","table"),s.appendChild(o),this.feFuncG=o;var l=createNS("feFuncB");l.setAttribute("type","table"),s.appendChild(l),this.feFuncB=l,e.appendChild(s)}function SVGProLevelsFilter(e,t,r,i){this.filterManager=t;var n=this.filterManager.effectElements,s=createNS("feComponentTransfer");(n[10].p.k||0!==n[10].p.v||n[11].p.k||1!==n[11].p.v||n[12].p.k||1!==n[12].p.v||n[13].p.k||0!==n[13].p.v||n[14].p.k||1!==n[14].p.v)&&(this.feFuncR=this.createFeFunc("feFuncR",s)),(n[17].p.k||0!==n[17].p.v||n[18].p.k||1!==n[18].p.v||n[19].p.k||1!==n[19].p.v||n[20].p.k||0!==n[20].p.v||n[21].p.k||1!==n[21].p.v)&&(this.feFuncG=this.createFeFunc("feFuncG",s)),(n[24].p.k||0!==n[24].p.v||n[25].p.k||1!==n[25].p.v||n[26].p.k||1!==n[26].p.v||n[27].p.k||0!==n[27].p.v||n[28].p.k||1!==n[28].p.v)&&(this.feFuncB=this.createFeFunc("feFuncB",s)),(n[31].p.k||0!==n[31].p.v||n[32].p.k||1!==n[32].p.v||n[33].p.k||1!==n[33].p.v||n[34].p.k||0!==n[34].p.v||n[35].p.k||1!==n[35].p.v)&&(this.feFuncA=this.createFeFunc("feFuncA",s)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(s.setAttribute("color-interpolation-filters","sRGB"),e.appendChild(s)),(n[3].p.k||0!==n[3].p.v||n[4].p.k||1!==n[4].p.v||n[5].p.k||1!==n[5].p.v||n[6].p.k||0!==n[6].p.v||n[7].p.k||1!==n[7].p.v)&&((s=createNS("feComponentTransfer")).setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("result",i),e.appendChild(s),this.feFuncRComposed=this.createFeFunc("feFuncR",s),this.feFuncGComposed=this.createFeFunc("feFuncG",s),this.feFuncBComposed=this.createFeFunc("feFuncB",s))}function SVGDropShadowEffect(e,t,r,i,n){var s=t.container.globalData.renderConfig.filterSize,a=t.data.fs||s;e.setAttribute("x",a.x||s.x),e.setAttribute("y",a.y||s.y),e.setAttribute("width",a.width||s.width),e.setAttribute("height",a.height||s.height),this.filterManager=t;var o=createNS("feGaussianBlur");o.setAttribute("in","SourceAlpha"),o.setAttribute("result",i+"_drop_shadow_1"),o.setAttribute("stdDeviation","0"),this.feGaussianBlur=o,e.appendChild(o);var l=createNS("feOffset");l.setAttribute("dx","25"),l.setAttribute("dy","0"),l.setAttribute("in",i+"_drop_shadow_1"),l.setAttribute("result",i+"_drop_shadow_2"),this.feOffset=l,e.appendChild(l);var h=createNS("feFlood");h.setAttribute("flood-color","#00ff00"),h.setAttribute("flood-opacity","1"),h.setAttribute("result",i+"_drop_shadow_3"),this.feFlood=h,e.appendChild(h);var u=createNS("feComposite");u.setAttribute("in",i+"_drop_shadow_3"),u.setAttribute("in2",i+"_drop_shadow_2"),u.setAttribute("operator","in"),u.setAttribute("result",i+"_drop_shadow_4"),e.appendChild(u);var c=this.createMergeNode(i,[i+"_drop_shadow_4",n]);e.appendChild(c)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,i=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+i+" 0"),this.matrixFilter.setAttribute("values",r[0]-t[0]+" 0 0 0 "+t[0]+" "+(r[1]-t[1])+" 0 0 0 "+t[1]+" "+(r[2]-t[2])+" 0 0 0 "+t[2]+" 0 0 0 1 0")}},SVGFillFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[2].p.v,r=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+t[0]+" 0 0 0 0 "+t[1]+" 0 0 0 0 "+t[2]+" 0 0 0 "+r+" 0")}},SVGStrokeEffect.prototype.initialize=function(){var e,t,r,i,n=this.elem.layerElement.children||this.elem.layerElement.childNodes;for(1===this.filterManager.effectElements[1].p.v?(i=this.elem.maskManager.masksProperties.length,r=0):i=(r=this.filterManager.effectElements[0].p.v-1)+1,(t=createNS("g")).setAttribute("fill","none"),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-dashoffset",1);r<i;r+=1)e=createNS("path"),t.appendChild(e),this.paths.push({p:e,m:r});if(3===this.filterManager.effectElements[10].p.v){var s=createNS("mask"),a=createElementID();s.setAttribute("id",a),s.setAttribute("mask-type","alpha"),s.appendChild(t),this.elem.globalData.defs.appendChild(s);var o=createNS("g");for(o.setAttribute("mask","url("+getLocationHref()+"#"+a+")");n[0];)o.appendChild(n[0]);this.elem.layerElement.appendChild(o),this.masker=s,t.setAttribute("stroke","#fff")}else if(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v){if(2===this.filterManager.effectElements[10].p.v)for(n=this.elem.layerElement.children||this.elem.layerElement.childNodes;n.length;)this.elem.layerElement.removeChild(n[0]);this.elem.layerElement.appendChild(t),this.elem.layerElement.removeAttribute("mask"),t.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=t},SVGStrokeEffect.prototype.renderFrame=function(e){this.initialized||this.initialize();var t=this.paths.length;for(r=0;r<t;r+=1)if(-1!==this.paths[r].m&&(i=this.elem.maskManager.viewData[this.paths[r].m],n=this.paths[r].p,(e||this.filterManager._mdf||i.prop._mdf)&&n.setAttribute("d",i.lastPath),e||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||i.prop._mdf)){if(0!==this.filterManager.effectElements[7].p.v||100!==this.filterManager.effectElements[8].p.v){var r,i,n,s,a,o=.01*Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),l=.01*Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v),h=n.getTotalLength();s="0 0 0 "+h*o+" ";var u=Math.floor(h*(l-o)/(1+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01));for(a=0;a<u;a+=1)s+="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01+" ";s+="0 "+10*h+" 0 0"}else s="1 "+2*this.filterManager.effectElements[4].p.v*this.filterManager.effectElements[9].p.v*.01;n.setAttribute("stroke-dasharray",s)}if((e||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",2*this.filterManager.effectElements[4].p.v),(e||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(1===this.filterManager.effectElements[10].p.v||2===this.filterManager.effectElements[10].p.v)&&(e||this.filterManager.effectElements[3].p._mdf)){var c=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(255*c[0])+","+bmFloor(255*c[1])+","+bmFloor(255*c[2])+")")}},SVGTritoneFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=this.filterManager.effectElements[0].p.v,r=this.filterManager.effectElements[1].p.v,i=this.filterManager.effectElements[2].p.v,n=i[0]+" "+r[0]+" "+t[0],s=i[1]+" "+r[1]+" "+t[1],a=i[2]+" "+r[2]+" "+t[2];this.feFuncR.setAttribute("tableValues",n),this.feFuncG.setAttribute("tableValues",s),this.feFuncB.setAttribute("tableValues",a)}},SVGProLevelsFilter.prototype.createFeFunc=function(e,t){var r=createNS(e);return r.setAttribute("type","table"),t.appendChild(r),r},SVGProLevelsFilter.prototype.getTableValue=function(e,t,r,i,n){for(var s,a,o=0,l=256,h=Math.min(e,t),u=Math.max(e,t),c=Array.call(null,{length:256}),d=0,p=n-i,f=t-e;o<=256;)a=(s=o/256)<=h?f<0?n:i:s>=u?f<0?i:n:i+p*Math.pow((s-e)/f,1/r),c[d]=a,d+=1,o+=256/(l-1);return c.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t,r=this.filterManager.effectElements;this.feFuncRComposed&&(e||r[3].p._mdf||r[4].p._mdf||r[5].p._mdf||r[6].p._mdf||r[7].p._mdf)&&(t=this.getTableValue(r[3].p.v,r[4].p.v,r[5].p.v,r[6].p.v,r[7].p.v),this.feFuncRComposed.setAttribute("tableValues",t),this.feFuncGComposed.setAttribute("tableValues",t),this.feFuncBComposed.setAttribute("tableValues",t)),this.feFuncR&&(e||r[10].p._mdf||r[11].p._mdf||r[12].p._mdf||r[13].p._mdf||r[14].p._mdf)&&(t=this.getTableValue(r[10].p.v,r[11].p.v,r[12].p.v,r[13].p.v,r[14].p.v),this.feFuncR.setAttribute("tableValues",t)),this.feFuncG&&(e||r[17].p._mdf||r[18].p._mdf||r[19].p._mdf||r[20].p._mdf||r[21].p._mdf)&&(t=this.getTableValue(r[17].p.v,r[18].p.v,r[19].p.v,r[20].p.v,r[21].p.v),this.feFuncG.setAttribute("tableValues",t)),this.feFuncB&&(e||r[24].p._mdf||r[25].p._mdf||r[26].p._mdf||r[27].p._mdf||r[28].p._mdf)&&(t=this.getTableValue(r[24].p.v,r[25].p.v,r[26].p.v,r[27].p.v,r[28].p.v),this.feFuncB.setAttribute("tableValues",t)),this.feFuncA&&(e||r[31].p._mdf||r[32].p._mdf||r[33].p._mdf||r[34].p._mdf||r[35].p._mdf)&&(t=this.getTableValue(r[31].p.v,r[32].p.v,r[33].p.v,r[34].p.v,r[35].p.v),this.feFuncA.setAttribute("tableValues",t))}},extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){if((e||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),e||this.filterManager.effectElements[0].p._mdf){var t=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(255*t[0]),Math.round(255*t[1]),Math.round(255*t[2])))}if((e||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),e||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var r=this.filterManager.effectElements[3].p.v,i=(this.filterManager.effectElements[2].p.v-90)*degToRads,n=r*Math.cos(i),s=r*Math.sin(i);this.feOffset.setAttribute("dx",n),this.feOffset.setAttribute("dy",s)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(e,t,r){this.initialized=!1,this.filterManager=t,this.filterElem=e,this.elem=r,r.matteElement=createNS("g"),r.matteElement.appendChild(r.layerElement),r.matteElement.appendChild(r.transformedElement),r.baseElement=r.matteElement}function SVGGaussianBlurEffect(e,t,r,i){e.setAttribute("x","-100%"),e.setAttribute("y","-100%"),e.setAttribute("width","300%"),e.setAttribute("height","300%"),this.filterManager=t;var n=createNS("feGaussianBlur");n.setAttribute("result",i),e.appendChild(n),this.feGaussianBlur=n}function TransformEffect(){}function SVGTransformEffect(e,t){this.init(t)}function CVTransformEffect(e){this.init(e)}return SVGMatte3Effect.prototype.findSymbol=function(e){for(var t=0,r=_svgMatteSymbols.length;t<r;){if(_svgMatteSymbols[t]===e)return _svgMatteSymbols[t];t+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(e,t){var r,i=e.layerElement.parentNode;if(i){for(var n=i.children,s=0,a=n.length;s<a&&n[s]!==e.layerElement;)s+=1;s<=a-2&&(r=n[s+1]);var o=createNS("use");o.setAttribute("href","#"+t),r?i.insertBefore(o,r):i.appendChild(o)}},SVGMatte3Effect.prototype.setElementAsMask=function(e,t){if(!this.findSymbol(t)){var r=createElementID(),i=createNS("mask");i.setAttribute("id",t.layerId),i.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(t);var n=e.globalData.defs;n.appendChild(i);var s=createNS("symbol");s.setAttribute("id",r),this.replaceInParent(t,r),s.appendChild(t.layerElement),n.appendChild(s);var a=createNS("use");a.setAttribute("href","#"+r),i.appendChild(a),t.data.hd=!1,t.show()}e.setMatte(t.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var e=this.filterManager.effectElements[0].p.v,t=this.elem.comp.elements,r=0,i=t.length;r<i;)t[r]&&t[r].data.ind===e&&this.setElementAsMask(this.elem,t[r]),r+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()},SVGGaussianBlurEffect.prototype.renderFrame=function(e){if(e||this.filterManager._mdf){var t=.3,r=this.filterManager.effectElements[0].p.v*t,i=this.filterManager.effectElements[1].p.v,n=3==i?0:r,s=2==i?0:r;this.feGaussianBlur.setAttribute("stdDeviation",n+" "+s);var a=1==this.filterManager.effectElements[2].p.v?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",a)}},TransformEffect.prototype.init=function(e){this.effectsManager=e,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(e){if(this._opMdf=!1,this._mdf=!1,e||this.effectsManager._mdf){var t=this.effectsManager.effectElements,r=t[0].p.v,i=t[1].p.v,n=1===t[2].p.v,s=t[3].p.v,a=n?s:t[4].p.v,o=t[5].p.v,l=t[6].p.v,h=t[7].p.v;this.matrix.reset(),this.matrix.translate(-r[0],-r[1],r[2]),this.matrix.scale(.01*a,.01*s,1),this.matrix.rotate(-h*degToRads),this.matrix.skewFromAxis(-o*degToRads,(l+90)*degToRads),this.matrix.translate(i[0],i[1],0),this._mdf=!0,this.opacity!==t[8].p.v&&(this.opacity=t[8].p.v,this._opMdf=!0)}},extendPrototype([TransformEffect],SVGTransformEffect),extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})},9899:(e,t,r)=>{"use strict";var i=r(6715);function n(){}function s(){}s.resetWarningCache=n,e.exports=function(){function e(e,t,r,n,s,a){if(a!==i){var o=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:n};return r.PropTypes=r,r}},8439:(e,t,r)=>{e.exports=r(9899)()},6715:e=>{"use strict";var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";e.exports=t},2607:(e,t,r)=>{"use strict";var i=r(1101);e.exports=t=i.descriptor=i.Root.fromJSON(r(9987)).lookup(".google.protobuf");var n=i.Namespace,s=i.Root,a=i.Enum,o=i.Type,l=i.Field,h=i.MapField,u=i.OneOf,c=i.Service,d=i.Method;function p(e,r,i){var h=t.FileDescriptorProto.create({name:e.filename||(e.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});D(i,h),e instanceof s||(h.package=e.fullName.substring(1));for(var u,d=0;d<e.nestedArray.length;++d)(u=e._nestedArray[d])instanceof o?h.messageType.push(u.toDescriptor(i)):u instanceof a?h.enumType.push(u.toDescriptor()):u instanceof l?h.extension.push(u.toDescriptor(i)):u instanceof c?h.service.push(u.toDescriptor()):u instanceof n&&p(u,r,i);h.options=_(e.options,t.FileOptions),h.messageType.length+h.enumType.length+h.extension.length+h.service.length&&r.push(h)}s.fromDescriptor=function(e){"number"==typeof e.length&&(e=t.FileDescriptorSet.decode(e));var r=new s;if(e.file)for(var i,n,h,u=0;u<e.file.length;++u){n=r,(i=e.file[u]).package&&i.package.length&&(n=r.define(i.package));var d=I(i);if(i.name&&i.name.length&&r.files.push(n.filename=i.name),i.messageType)for(h=0;h<i.messageType.length;++h)n.add(o.fromDescriptor(i.messageType[h],d));if(i.enumType)for(h=0;h<i.enumType.length;++h)n.add(a.fromDescriptor(i.enumType[h],d));if(i.extension)for(h=0;h<i.extension.length;++h)n.add(l.fromDescriptor(i.extension[h],d));if(i.service)for(h=0;h<i.service.length;++h)n.add(c.fromDescriptor(i.service[h],d));var p=C(i.options,t.FileOptions);if(p){var f=Object.keys(p);for(h=0;h<f.length;++h)n.setOption(f[h],p[f[h]])}}return r.resolveAll()},s.prototype.toDescriptor=function(e){var r=t.FileDescriptorSet.create();return p(this,r.file,e),r};var f=0;o.fromDescriptor=function(e,r,i){"number"==typeof e.length&&(e=t.DescriptorProto.decode(e));var n,s=new o(e.name.length?e.name:"Type"+f++,C(e.options,t.MessageOptions));if(i||(s._edition=r),e.oneofDecl)for(n=0;n<e.oneofDecl.length;++n)s.add(u.fromDescriptor(e.oneofDecl[n]));if(e.field)for(n=0;n<e.field.length;++n){var h=l.fromDescriptor(e.field[n],r,!0);s.add(h),e.field[n].hasOwnProperty("oneofIndex")&&s.oneofsArray[e.field[n].oneofIndex].add(h)}if(e.extension)for(n=0;n<e.extension.length;++n)s.add(l.fromDescriptor(e.extension[n],r,!0));if(e.nestedType)for(n=0;n<e.nestedType.length;++n)s.add(o.fromDescriptor(e.nestedType[n],r,!0)),e.nestedType[n].options&&e.nestedType[n].options.mapEntry&&s.setOption("map_entry",!0);if(e.enumType)for(n=0;n<e.enumType.length;++n)s.add(a.fromDescriptor(e.enumType[n],r,!0));if(e.extensionRange&&e.extensionRange.length)for(n=0,s.extensions=[];n<e.extensionRange.length;++n)s.extensions.push([e.extensionRange[n].start,e.extensionRange[n].end]);if(e.reservedRange&&e.reservedRange.length||e.reservedName&&e.reservedName.length){if(s.reserved=[],e.reservedRange)for(n=0;n<e.reservedRange.length;++n)s.reserved.push([e.reservedRange[n].start,e.reservedRange[n].end]);if(e.reservedName)for(n=0;n<e.reservedName.length;++n)s.reserved.push(e.reservedName[n])}return s},o.prototype.toDescriptor=function(e){var r,i,n=t.DescriptorProto.create({name:this.name});for(i=0;i<this.fieldsArray.length;++i)if(n.field.push(r=this._fieldsArray[i].toDescriptor(e)),this._fieldsArray[i]instanceof h){var s=S(this._fieldsArray[i].keyType,this._fieldsArray[i].resolvedKeyType,!1),u=S(this._fieldsArray[i].type,this._fieldsArray[i].resolvedType,!1),c=11===u||14===u?this._fieldsArray[i].resolvedType&&x(this.parent,this._fieldsArray[i].resolvedType)||this._fieldsArray[i].type:void 0;n.nestedType.push(t.DescriptorProto.create({name:r.typeName,field:[t.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),t.FieldDescriptorProto.create({name:"value",number:2,label:1,type:u,typeName:c})],options:t.MessageOptions.create({mapEntry:!0})}))}for(i=0;i<this.oneofsArray.length;++i)n.oneofDecl.push(this._oneofsArray[i].toDescriptor());for(i=0;i<this.nestedArray.length;++i)this._nestedArray[i]instanceof l?n.field.push(this._nestedArray[i].toDescriptor(e)):this._nestedArray[i]instanceof o?n.nestedType.push(this._nestedArray[i].toDescriptor(e)):this._nestedArray[i]instanceof a&&n.enumType.push(this._nestedArray[i].toDescriptor());if(this.extensions)for(i=0;i<this.extensions.length;++i)n.extensionRange.push(t.DescriptorProto.ExtensionRange.create({start:this.extensions[i][0],end:this.extensions[i][1]}));if(this.reserved)for(i=0;i<this.reserved.length;++i)"string"==typeof this.reserved[i]?n.reservedName.push(this.reserved[i]):n.reservedRange.push(t.DescriptorProto.ReservedRange.create({start:this.reserved[i][0],end:this.reserved[i][1]}));return n.options=_(this.options,t.MessageOptions),n};var m=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;l.fromDescriptor=function(e,r,i){if("number"==typeof e.length&&(e=t.DescriptorProto.decode(e)),"number"!=typeof e.number)throw Error("missing field id");switch(n=e.typeName&&e.typeName.length?e.typeName:w(e.type),e.label){case 1:s=void 0;break;case 2:s="required";break;case 3:s="repeated";break;default:throw Error("illegal label: "+e.label)}var n,s,a=e.extendee;void 0!==e.extendee&&(a=a.length?a:void 0);var o=new l(e.name.length?e.name:"field"+e.number,e.number,n,s,a);if(i||(o._edition=r),o.options=C(e.options,t.FieldOptions),e.proto3_optional&&(o.options.proto3_optional=!0),e.defaultValue&&e.defaultValue.length){var h=e.defaultValue;switch(h){case"true":case"TRUE":h=!0;break;case"false":case"FALSE":h=!1;break;default:m.exec(h)&&(h=parseInt(h))}o.setOption("default",h)}return E(e.type)&&("proto3"===r?e.options&&!e.options.packed&&o.setOption("packed",!1):(!r||"proto2"===r)&&e.options&&e.options.packed&&o.setOption("packed",!0)),o},l.prototype.toDescriptor=function(e){var r=t.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)r.type=11,r.typeName=i.util.ucFirst(this.name),r.label=3;else{switch(r.type=S(this.type,this.resolve().resolvedType,this.delimited)){case 10:case 11:case 14:r.typeName=this.resolvedType?x(this.parent,this.resolvedType):this.type}"repeated"===this.rule?r.label=3:this.required&&"proto2"===e?r.label=2:r.label=1}if(r.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(r.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(r.options=_(this.options,t.FieldOptions),null!=this.options.default&&(r.defaultValue=String(this.options.default)),this.options.proto3_optional&&(r.proto3_optional=!0)),"proto3"===e?this.packed||((r.options||(r.options=t.FieldOptions.create())).packed=!1):(!e||"proto2"===e)&&this.packed&&((r.options||(r.options=t.FieldOptions.create())).packed=!0),r};var g=0;a.fromDescriptor=function(e,r,i){"number"==typeof e.length&&(e=t.EnumDescriptorProto.decode(e));var n={};if(e.value)for(var s=0;s<e.value.length;++s){var o=e.value[s].name,l=e.value[s].number||0;n[o&&o.length?o:"NAME"+l]=l}var h=new a(e.name&&e.name.length?e.name:"Enum"+g++,n,C(e.options,t.EnumOptions));return i||(h._edition=r),h},a.prototype.toDescriptor=function(){for(var e=[],r=0,i=Object.keys(this.values);r<i.length;++r)e.push(t.EnumValueDescriptorProto.create({name:i[r],number:this.values[i[r]]}));return t.EnumDescriptorProto.create({name:this.name,value:e,options:_(this.options,t.EnumOptions)})};var y=0;u.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.OneofDescriptorProto.decode(e)),new u(e.name&&e.name.length?e.name:"oneof"+y++)},u.prototype.toDescriptor=function(){return t.OneofDescriptorProto.create({name:this.name})};var v=0;c.fromDescriptor=function(e,r,i){"number"==typeof e.length&&(e=t.ServiceDescriptorProto.decode(e));var n=new c(e.name&&e.name.length?e.name:"Service"+v++,C(e.options,t.ServiceOptions));if(i||(n._edition=r),e.method)for(var s=0;s<e.method.length;++s)n.add(d.fromDescriptor(e.method[s]));return n},c.prototype.toDescriptor=function(){for(var e=[],r=0;r<this.methodsArray.length;++r)e.push(this._methodsArray[r].toDescriptor());return t.ServiceDescriptorProto.create({name:this.name,method:e,options:_(this.options,t.ServiceOptions)})};var b=0;function w(e){switch(e){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+e)}function E(e){switch(e){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function S(e,t,r){switch(e){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(t instanceof a)return 14;if(t instanceof o)return r?10:11;throw Error("illegal type: "+e)}function T(e,t){for(var r,i,n={},s=0;s<t.fieldsArray.length;++s)if("uninterpretedOption"!==(i=(r=t._fieldsArray[s]).name)&&Object.prototype.hasOwnProperty.call(e,i)){var l=k(i);r.resolvedType instanceof o?n[l]=T(e[i],r.resolvedType):r.resolvedType instanceof a?n[l]=r.resolvedType.valuesById[e[i]]:n[l]=e[i]}return n}function C(e,t){if(e)return T(t.toObject(e),t)}function A(e,t){for(var r={},n=Object.keys(e),s=0;s<n.length;++s){var a=n[s],l=i.util.camelCase(a);if(Object.prototype.hasOwnProperty.call(t.fields,l)){var h=t.fields[l];h.resolvedType instanceof o?r[l]=A(e[a],h.resolvedType):r[l]=e[a],h.repeated&&!Array.isArray(r[l])&&(r[l]=[r[l]])}}return r}function _(e,t){if(e)return t.fromObject(A(e,t))}function x(e,t){var r=e.fullName.split("."),i=t.fullName.split("."),a=0,o=0,l=i.length-1;if(!(e instanceof s)&&t instanceof n)for(;a<r.length&&o<l&&r[a]===i[o];){var h=t.lookup(r[a++],!0);if(null!==h&&h!==t)break;++o}else for(;a<r.length&&o<l&&r[a]===i[o];++a,++o);return i.slice(o).join(".")}function k(e){return e.substring(0,1)+e.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(e,t){return"_"+t.toLowerCase()})}function I(e){if("editions"===e.syntax){if(e.edition===t.Edition.EDITION_2023)return"2023";throw Error("Unsupported edition "+e.edition)}return"proto3"===e.syntax?"proto3":"proto2"}function D(e,r){if(e){if("proto2"===e||"proto3"===e)r.syntax=e;else if(r.syntax="editions","2023"===e)r.edition=t.Edition.EDITION_2023;else throw Error("Unsupported edition "+e)}}d.fromDescriptor=function(e){return"number"==typeof e.length&&(e=t.MethodDescriptorProto.decode(e)),new d(e.name&&e.name.length?e.name:"Method"+b++,"rpc",e.inputType,e.outputType,!!e.clientStreaming,!!e.serverStreaming,C(e.options,t.MethodOptions))},d.prototype.toDescriptor=function(){return t.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:_(this.options,t.MethodOptions)})}},1101:(e,t,r)=>{"use strict";e.exports=r(8582)},3980:e=>{"use strict";e.exports=i;var t,r=/\/|\./;function i(e,t){r.test(e)||(e="google/protobuf/"+e+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),i[e]=t}i("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}}),i("duration",{Duration:t={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}}),i("timestamp",{Timestamp:t}),i("empty",{Empty:{fields:{}}}),i("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}}),i("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}}),i("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}}),i.get=function(e){return i[e]||null}},5711:(e,t,r)=>{"use strict";var i=t,n=r(1114),s=r(4615);function a(e,t,r,i){var s=!1;if(t.resolvedType){if(t.resolvedType instanceof n){e("switch(d%s){",i);for(var a=t.resolvedType.values,o=Object.keys(a),l=0;l<o.length;++l)a[o[l]]!==t.typeDefault||s||(e("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',i,i,i),t.repeated||e("break"),s=!0),e("case%j:",o[l])("case %i:",a[o[l]])("m%s=%j",i,a[o[l]])("break");e("}")}else e('if(typeof d%s!=="object")',i)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",i,r,i)}else{var h=!1;switch(t.type){case"double":case"float":e("m%s=Number(d%s)",i,i);break;case"uint32":case"fixed32":e("m%s=d%s>>>0",i,i);break;case"int32":case"sint32":case"sfixed32":e("m%s=d%s|0",i,i);break;case"uint64":h=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",i,i,h)('else if(typeof d%s==="string")',i)("m%s=parseInt(d%s,10)",i,i)('else if(typeof d%s==="number")',i)("m%s=d%s",i,i)('else if(typeof d%s==="object")',i)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",i,i,i,h?"true":"");break;case"bytes":e('if(typeof d%s==="string")',i)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",i,i,i)("else if(d%s.length >= 0)",i)("m%s=d%s",i,i);break;case"string":e("m%s=String(d%s)",i,i);break;case"bool":e("m%s=Boolean(d%s)",i,i)}}return e}function o(e,t,r,i){if(t.resolvedType)t.resolvedType instanceof n?e("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",i,r,i,i,r,i,i):e("d%s=types[%i].toObject(m%s,o)",i,r,i);else{var s=!1;switch(t.type){case"double":case"float":e("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",i,i,i,i);break;case"uint64":s=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":e('if(typeof m%s==="number")',i)("d%s=o.longs===String?String(m%s):m%s",i,i,i)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",i,i,i,i,s?"true":"",i);break;case"bytes":e("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",i,i,i,i,i);break;default:e("d%s=m%s",i,i)}}return e}i.fromObject=function(e){var t=e.fieldsArray,r=s.codegen(["d"],e.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!t.length)return r("return new this.ctor");r("var m=new this.ctor");for(var i=0;i<t.length;++i){var o=t[i].resolve(),l=s.safeProp(o.name);o.map?(r("if(d%s){",l)('if(typeof d%s!=="object")',l)("throw TypeError(%j)",o.fullName+": object expected")("m%s={}",l)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",l),a(r,o,i,l+"[ks[i]]")("}")("}")):o.repeated?(r("if(d%s){",l)("if(!Array.isArray(d%s))",l)("throw TypeError(%j)",o.fullName+": array expected")("m%s=[]",l)("for(var i=0;i<d%s.length;++i){",l),a(r,o,i,l+"[i]")("}")("}")):(o.resolvedType instanceof n||r("if(d%s!=null){",l),a(r,o,i,l),o.resolvedType instanceof n||r("}"))}return r("return m")},i.toObject=function(e){var t=e.fieldsArray.slice().sort(s.compareFieldsById);if(!t.length)return s.codegen()("return {}");for(var r=s.codegen(["m","o"],e.name+"$toObject")("if(!o)")("o={}")("var d={}"),i=[],a=[],l=[],h=0;h<t.length;++h)t[h].partOf||(t[h].resolve().repeated?i:t[h].map?a:l).push(t[h]);if(i.length){for(r("if(o.arrays||o.defaults){"),h=0;h<i.length;++h)r("d%s=[]",s.safeProp(i[h].name));r("}")}if(a.length){for(r("if(o.objects||o.defaults){"),h=0;h<a.length;++h)r("d%s={}",s.safeProp(a[h].name));r("}")}if(l.length){for(r("if(o.defaults){"),h=0;h<l.length;++h){var u=l[h],c=s.safeProp(u.name);if(u.resolvedType instanceof n)r("d%s=o.enums===String?%j:%j",c,u.resolvedType.valuesById[u.typeDefault],u.typeDefault);else if(u.long)r("if(util.Long){")("var n=new util.Long(%i,%i,%j)",u.typeDefault.low,u.typeDefault.high,u.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",c)("}else")("d%s=o.longs===String?%j:%i",c,u.typeDefault.toString(),u.typeDefault.toNumber());else if(u.bytes){var d="["+Array.prototype.slice.call(u.typeDefault).join(",")+"]";r("if(o.bytes===String)d%s=%j",c,String.fromCharCode.apply(String,u.typeDefault))("else{")("d%s=%s",c,d)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",c,c)("}")}else r("d%s=%j",c,u.typeDefault)}r("}")}var p=!1;for(h=0;h<t.length;++h){var u=t[h],f=e._fieldsArray.indexOf(u),c=s.safeProp(u.name);u.map?(p||(p=!0,r("var ks2")),r("if(m%s&&(ks2=Object.keys(m%s)).length){",c,c)("d%s={}",c)("for(var j=0;j<ks2.length;++j){"),o(r,u,f,c+"[ks2[j]]")("}")):u.repeated?(r("if(m%s&&m%s.length){",c,c)("d%s=[]",c)("for(var j=0;j<m%s.length;++j){",c),o(r,u,f,c+"[j]")("}")):(r("if(m%s!=null&&m.hasOwnProperty(%j)){",c,u.name),o(r,u,f,c),u.partOf&&r("if(o.oneofs)")("d%s=%j",s.safeProp(u.partOf.name),u.name)),r("}")}return r("return d")}},1526:(e,t,r)=>{"use strict";e.exports=o;var i=r(1114),n=r(6160),s=r(4615);function a(e){return"missing required '"+e.name+"'"}function o(e){for(var t=s.codegen(["r","l","e"],e.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(e.fieldsArray.filter(function(e){return e.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()")("if(t===e)")("break")("switch(t>>>3){"),r=0;r<e.fieldsArray.length;++r){var o=e._fieldsArray[r].resolve(),l=o.resolvedType instanceof i?"int32":o.type,h="m"+s.safeProp(o.name);t("case %i: {",o.id),o.map?(t("if(%s===util.emptyObject)",h)("%s={}",h)("var c2 = r.uint32()+r.pos"),void 0!==n.defaults[o.keyType]?t("k=%j",n.defaults[o.keyType]):t("k=null"),void 0!==n.defaults[l]?t("value=%j",n.defaults[l]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",o.keyType)("case 2:"),void 0===n.basic[l]?t("value=types[%i].decode(r,r.uint32())",r):t("value=r.%s()",l),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),t(void 0!==n.long[o.keyType]?'%s[typeof k==="object"?util.longToHash(k):k]=value':"%s[k]=value",h)):o.repeated?(t("if(!(%s&&%s.length))",h,h)("%s=[]",h),void 0!==n.packed[l]&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",h,l)("}else"),void 0===n.basic[l]?t(o.delimited?"%s.push(types[%i].decode(r,undefined,((t&~7)|4)))":"%s.push(types[%i].decode(r,r.uint32()))",h,r):t("%s.push(r.%s())",h,l)):void 0===n.basic[l]?t(o.delimited?"%s=types[%i].decode(r,undefined,((t&~7)|4))":"%s=types[%i].decode(r,r.uint32())",h,r):t("%s=r.%s()",h,l),t("break")("}")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),r=0;r<e._fieldsArray.length;++r){var u=e._fieldsArray[r];u.required&&t("if(!m.hasOwnProperty(%j))",u.name)("throw util.ProtocolError(%j,{instance:m})",a(u))}return t("return m")}},8455:(e,t,r)=>{"use strict";e.exports=o;var i=r(1114),n=r(6160),s=r(4615);function a(e,t,r,i){return t.delimited?e("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",r,i,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):e("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",r,i,(t.id<<3|2)>>>0)}function o(e){for(var t,r,o=s.codegen(["m","w"],e.name+"$encode")("if(!w)")("w=Writer.create()"),l=e.fieldsArray.slice().sort(s.compareFieldsById),t=0;t<l.length;++t){var h=l[t].resolve(),u=e._fieldsArray.indexOf(h),c=h.resolvedType instanceof i?"int32":h.type,d=n.basic[c];r="m"+s.safeProp(h.name),h.map?(o("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",r,h.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",r)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(h.id<<3|2)>>>0,8|n.mapKey[h.keyType],h.keyType),void 0===d?o("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",u,r):o(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|d,c,r),o("}")("}")):h.repeated?(o("if(%s!=null&&%s.length){",r,r),h.packed&&void 0!==n.packed[c]?o("w.uint32(%i).fork()",(h.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",r)("w.%s(%s[i])",c,r)("w.ldelim()"):(o("for(var i=0;i<%s.length;++i)",r),void 0===d?a(o,h,u,r+"[i]"):o("w.uint32(%i).%s(%s[i])",(h.id<<3|d)>>>0,c,r)),o("}")):(h.optional&&o("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",r,h.name),void 0===d?a(o,h,u,r):o("w.uint32(%i).%s(%s)",(h.id<<3|d)>>>0,c,r))}return o("return w")}},1114:(e,t,r)=>{"use strict";e.exports=a;var i=r(3514);((a.prototype=Object.create(i.prototype)).constructor=a).className="Enum";var n=r(4943),s=r(4615);function a(e,t,r,n,s,a){if(i.call(this,e,r),t&&"object"!=typeof t)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=s||{},this.valuesOptions=a,this._valuesFeatures={},this.reserved=void 0,t)for(var o=Object.keys(t),l=0;l<o.length;++l)"number"==typeof t[o[l]]&&(this.valuesById[this.values[o[l]]=t[o[l]]]=o[l])}a.prototype._resolveFeatures=function(e){return e=this._edition||e,i.prototype._resolveFeatures.call(this,e),Object.keys(this.values).forEach(e=>{var t=Object.assign({},this._features);this._valuesFeatures[e]=Object.assign(t,this.valuesOptions&&this.valuesOptions[e]&&this.valuesOptions[e].features)}),this},a.fromJSON=function(e,t){var r=new a(e,t.values,t.options,t.comment,t.comments);return r.reserved=t.reserved,t.edition&&(r._edition=t.edition),r._defaultEdition="proto3",r},a.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["edition",this._editionToJSON(),"options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",t?this.comment:void 0,"comments",t?this.comments:void 0])},a.prototype.add=function(e,t,r,i){if(!s.isString(e))throw TypeError("name must be a string");if(!s.isInteger(t))throw TypeError("id must be an integer");if(void 0!==this.values[e])throw Error("duplicate name '"+e+"' in "+this);if(this.isReservedId(t))throw Error("id "+t+" is reserved in "+this);if(this.isReservedName(e))throw Error("name '"+e+"' is reserved in "+this);if(void 0!==this.valuesById[t]){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+t+" in "+this);this.values[e]=t}else this.valuesById[this.values[e]=t]=e;return i&&(void 0===this.valuesOptions&&(this.valuesOptions={}),this.valuesOptions[e]=i||null),this.comments[e]=r||null,this},a.prototype.remove=function(e){if(!s.isString(e))throw TypeError("name must be a string");var t=this.values[e];if(null==t)throw Error("name '"+e+"' does not exist in "+this);return delete this.valuesById[t],delete this.values[e],delete this.comments[e],this.valuesOptions&&delete this.valuesOptions[e],this},a.prototype.isReservedId=function(e){return n.isReservedId(this.reserved,e)},a.prototype.isReservedName=function(e){return n.isReservedName(this.reserved,e)}},7510:(e,t,r)=>{"use strict";e.exports=h;var i,n=r(3514);((h.prototype=Object.create(n.prototype)).constructor=h).className="Field";var s=r(1114),a=r(6160),o=r(4615),l=/^required|optional|repeated$/;function h(e,t,r,i,s,h,u){if(o.isObject(i)?(u=s,h=i,i=s=void 0):o.isObject(s)&&(u=h,h=s,s=void 0),n.call(this,e,h),!o.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!o.isString(r))throw TypeError("type must be a string");if(void 0!==i&&!l.test(i=i.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==s&&!o.isString(s))throw TypeError("extend must be a string");"proto3_optional"===i&&(i="optional"),this.rule=i&&"optional"!==i?i:void 0,this.type=r,this.id=t,this.extend=s||void 0,this.repeated="repeated"===i,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!o.Long&&void 0!==a.long[r],this.bytes="bytes"===r,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.comment=u}h.fromJSON=function(e,t){var r=new h(e,t.id,t.type,t.rule,t.extend,t.options,t.comment);return t.edition&&(r._edition=t.edition),r._defaultEdition="proto3",r},Object.defineProperty(h.prototype,"required",{get:function(){return"LEGACY_REQUIRED"===this._features.field_presence}}),Object.defineProperty(h.prototype,"optional",{get:function(){return!this.required}}),Object.defineProperty(h.prototype,"delimited",{get:function(){return this.resolvedType instanceof i&&"DELIMITED"===this._features.message_encoding}}),Object.defineProperty(h.prototype,"packed",{get:function(){return"PACKED"===this._features.repeated_field_encoding}}),Object.defineProperty(h.prototype,"hasPresence",{get:function(){return!this.repeated&&!this.map&&(this.partOf||this.declaringField||this.extensionField||"IMPLICIT"!==this._features.field_presence)}}),h.prototype.setOption=function(e,t,r){return n.prototype.setOption.call(this,e,t,r)},h.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return o.toObject(["edition",this._editionToJSON(),"rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},h.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=a.defaults[this.type])?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof i?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof s&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof s||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=o.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var e;o.base64.test(this.typeDefault)?o.base64.decode(this.typeDefault,e=o.newBuffer(o.base64.length(this.typeDefault)),0):o.utf8.write(this.typeDefault,e=o.newBuffer(o.utf8.length(this.typeDefault)),0),this.typeDefault=e}return this.map?this.defaultValue=o.emptyObject:this.repeated?this.defaultValue=o.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof i&&(this.parent.ctor.prototype[this.name]=this.defaultValue),n.prototype.resolve.call(this)},h.prototype._inferLegacyProtoFeatures=function(e){if("proto2"!==e&&"proto3"!==e)return{};var t={};if("required"===this.rule&&(t.field_presence="LEGACY_REQUIRED"),this.parent&&void 0===a.defaults[this.type]){var r=this.parent.get(this.type.split(".").pop());r&&r instanceof i&&r.group&&(t.message_encoding="DELIMITED")}return!0===this.getOption("packed")?t.repeated_field_encoding="PACKED":!1===this.getOption("packed")&&(t.repeated_field_encoding="EXPANDED"),t},h.prototype._resolveFeatures=function(e){return n.prototype._resolveFeatures.call(this,this._edition||e)},h.d=function(e,t,r,i){return"function"==typeof t?t=o.decorateType(t).name:t&&"object"==typeof t&&(t=o.decorateEnum(t).name),function(n,s){o.decorateType(n.constructor).add(new h(s,e,t,r,{default:i}))}},h._configure=function(e){i=e}},4630:(e,t,r)=>{"use strict";var i=e.exports=r(8690);function n(e,t,r){return"function"==typeof t?(r=t,t=new i.Root):t||(t=new i.Root),t.load(e,r)}function s(e,t){return t||(t=new i.Root),t.loadSync(e)}i.build="light",i.load=n,i.loadSync=s,i.encoder=r(8455),i.decoder=r(1526),i.verifier=r(4633),i.converter=r(5711),i.ReflectionObject=r(3514),i.Namespace=r(4943),i.Root=r(4343),i.Enum=r(1114),i.Type=r(3839),i.Field=r(7510),i.OneOf=r(2695),i.MapField=r(9538),i.Service=r(1631),i.Method=r(6539),i.Message=r(2936),i.wrappers=r(9579),i.types=r(6160),i.util=r(4615),i.ReflectionObject._configure(i.Root),i.Namespace._configure(i.Type,i.Service,i.Enum),i.Root._configure(i.Type),i.Field._configure(i.Type)},8690:(e,t,r)=>{"use strict";var i=t;function n(){i.util._configure(),i.Writer._configure(i.BufferWriter),i.Reader._configure(i.BufferReader)}i.build="minimal",i.Writer=r(8458),i.BufferWriter=r(8386),i.Reader=r(2279),i.BufferReader=r(424),i.util=r(745),i.rpc=r(4774),i.roots=r(9694),i.configure=n,n()},8582:(e,t,r)=>{"use strict";var i=e.exports=r(4630);i.build="full",i.tokenize=r(9867),i.parse=r(6614),i.common=r(3980),i.Root._configure(i.Type,i.parse,i.common)},9538:(e,t,r)=>{"use strict";e.exports=a;var i=r(7510);((a.prototype=Object.create(i.prototype)).constructor=a).className="MapField";var n=r(6160),s=r(4615);function a(e,t,r,n,a,o){if(i.call(this,e,t,n,void 0,void 0,a,o),!s.isString(r))throw TypeError("keyType must be a string");this.keyType=r,this.resolvedKeyType=null,this.map=!0}a.fromJSON=function(e,t){return new a(e,t.id,t.keyType,t.type,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",t?this.comment:void 0])},a.prototype.resolve=function(){if(this.resolved)return this;if(void 0===n.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return i.prototype.resolve.call(this)},a.d=function(e,t,r){return"function"==typeof r?r=s.decorateType(r).name:r&&"object"==typeof r&&(r=s.decorateEnum(r).name),function(i,n){s.decorateType(i.constructor).add(new a(n,e,t,r))}}},2936:(e,t,r)=>{"use strict";e.exports=n;var i=r(745);function n(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)this[t[r]]=e[t[r]]}n.create=function(e){return this.$type.create(e)},n.encode=function(e,t){return this.$type.encode(e,t)},n.encodeDelimited=function(e,t){return this.$type.encodeDelimited(e,t)},n.decode=function(e){return this.$type.decode(e)},n.decodeDelimited=function(e){return this.$type.decodeDelimited(e)},n.verify=function(e){return this.$type.verify(e)},n.fromObject=function(e){return this.$type.fromObject(e)},n.toObject=function(e,t){return this.$type.toObject(e,t)},n.prototype.toJSON=function(){return this.$type.toObject(this,i.toJSONOptions)}},6539:(e,t,r)=>{"use strict";e.exports=s;var i=r(3514);((s.prototype=Object.create(i.prototype)).constructor=s).className="Method";var n=r(4615);function s(e,t,r,s,a,o,l,h,u){if(n.isObject(a)?(l=a,a=o=void 0):n.isObject(o)&&(l=o,o=void 0),!(void 0===t||n.isString(t)))throw TypeError("type must be a string");if(!n.isString(r))throw TypeError("requestType must be a string");if(!n.isString(s))throw TypeError("responseType must be a string");i.call(this,e,l),this.type=t||"rpc",this.requestType=r,this.requestStream=!!a||void 0,this.responseType=s,this.responseStream=!!o||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=h,this.parsedOptions=u}s.fromJSON=function(e,t){return new s(e,t.type,t.requestType,t.responseType,t.requestStream,t.responseStream,t.options,t.comment,t.parsedOptions)},s.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return n.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",t?this.comment:void 0,"parsedOptions",this.parsedOptions])},s.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),i.prototype.resolve.call(this))}},4943:(e,t,r)=>{"use strict";e.exports=c;var i,n,s,a=r(3514);((c.prototype=Object.create(a.prototype)).constructor=c).className="Namespace";var o=r(7510),l=r(4615),h=r(2695);function u(e,t){if(e&&e.length){for(var r={},i=0;i<e.length;++i)r[e[i].name]=e[i].toJSON(t);return r}}function c(e,t){a.call(this,e,t),this.nested=void 0,this._nestedArray=null,this._lookupCache={},this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0}function d(e){e._nestedArray=null,e._lookupCache={};for(var t=e;t=t.parent;)t._lookupCache={};return e}c.fromJSON=function(e,t){return new c(e,t.options).addJSON(t.nested)},c.arrayToJSON=u,c.isReservedId=function(e,t){if(e){for(var r=0;r<e.length;++r)if("string"!=typeof e[r]&&e[r][0]<=t&&e[r][1]>t)return!0}return!1},c.isReservedName=function(e,t){if(e){for(var r=0;r<e.length;++r)if(e[r]===t)return!0}return!1},Object.defineProperty(c.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=l.toArray(this.nested))}}),c.prototype.toJSON=function(e){return l.toObject(["options",this.options,"nested",u(this.nestedArray,e)])},c.prototype.addJSON=function(e){var t=this;if(e)for(var r,a=Object.keys(e),l=0;l<a.length;++l)r=e[a[l]],t.add((void 0!==r.fields?i.fromJSON:void 0!==r.values?s.fromJSON:void 0!==r.methods?n.fromJSON:void 0!==r.id?o.fromJSON:c.fromJSON)(a[l],r));return this},c.prototype.get=function(e){return this.nested&&this.nested[e]||null},c.prototype.getEnum=function(e){if(this.nested&&this.nested[e]instanceof s)return this.nested[e].values;throw Error("no such enum: "+e)},c.prototype.add=function(e){if(!(e instanceof o&&void 0!==e.extend||e instanceof i||e instanceof h||e instanceof s||e instanceof n||e instanceof c))throw TypeError("object must be a valid nested object");if(this.nested){var t=this.get(e.name);if(t){if(t instanceof c&&e instanceof c&&!(t instanceof i||t instanceof n)){for(var r=t.nestedArray,a=0;a<r.length;++a)e.add(r[a]);this.remove(t),this.nested||(this.nested={}),e.setOptions(t.options,!0)}else throw Error("duplicate name '"+e.name+"' in "+this)}}else this.nested={};this.nested[e.name]=e,this instanceof i||this instanceof n||this instanceof s||this instanceof o||e._edition||(e._edition=e._defaultEdition),this._needsRecursiveFeatureResolution=!0,this._needsRecursiveResolve=!0;for(var l=this;l=l.parent;)l._needsRecursiveFeatureResolution=!0,l._needsRecursiveResolve=!0;return e.onAdd(this),d(this)},c.prototype.remove=function(e){if(!(e instanceof a))throw TypeError("object must be a ReflectionObject");if(e.parent!==this)throw Error(e+" is not a member of "+this);return delete this.nested[e.name],Object.keys(this.nested).length||(this.nested=void 0),e.onRemove(this),d(this)},c.prototype.define=function(e,t){if(l.isString(e))e=e.split(".");else if(!Array.isArray(e))throw TypeError("illegal path");if(e&&e.length&&""===e[0])throw Error("path must be relative");for(var r=this;e.length>0;){var i=e.shift();if(r.nested&&r.nested[i]){if(!((r=r.nested[i])instanceof c))throw Error("path conflicts with non-namespace objects")}else r.add(r=new c(i))}return t&&r.addJSON(t),r},c.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;this._resolveFeaturesRecursive(this._edition);var e=this.nestedArray,t=0;for(this.resolve();t<e.length;)e[t]instanceof c?e[t++].resolveAll():e[t++].resolve();return this._needsRecursiveResolve=!1,this},c.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution&&(this._needsRecursiveFeatureResolution=!1,e=this._edition||e,a.prototype._resolveFeaturesRecursive.call(this,e),this.nestedArray.forEach(t=>{t._resolveFeaturesRecursive(e)})),this},c.prototype.lookup=function(e,t,r){if("boolean"==typeof t?(r=t,t=void 0):t&&!Array.isArray(t)&&(t=[t]),l.isString(e)&&e.length){if("."===e)return this.root;e=e.split(".")}else if(!e.length)return this;var i=e.join(".");if(""===e[0])return this.root.lookup(e.slice(1),t);var n=this.root._fullyQualifiedObjects&&this.root._fullyQualifiedObjects["."+i];if(n&&(!t||t.indexOf(n.constructor)>-1)||(n=this._lookupImpl(e,i))&&(!t||t.indexOf(n.constructor)>-1))return n;if(r)return null;for(var s=this;s.parent;){if((n=s.parent._lookupImpl(e,i))&&(!t||t.indexOf(n.constructor)>-1))return n;s=s.parent}return null},c.prototype._lookupImpl=function(e,t){if(Object.prototype.hasOwnProperty.call(this._lookupCache,t))return this._lookupCache[t];var r=this.get(e[0]),i=null;if(r)1===e.length?i=r:r instanceof c&&(e=e.slice(1),i=r._lookupImpl(e,e.join(".")));else for(var n=0;n<this.nestedArray.length;++n)this._nestedArray[n]instanceof c&&(r=this._nestedArray[n]._lookupImpl(e,t))&&(i=r);return this._lookupCache[t]=i,i},c.prototype.lookupType=function(e){var t=this.lookup(e,[i]);if(!t)throw Error("no such type: "+e);return t},c.prototype.lookupEnum=function(e){var t=this.lookup(e,[s]);if(!t)throw Error("no such Enum '"+e+"' in "+this);return t},c.prototype.lookupTypeOrEnum=function(e){var t=this.lookup(e,[i,s]);if(!t)throw Error("no such Type or Enum '"+e+"' in "+this);return t},c.prototype.lookupService=function(e){var t=this.lookup(e,[n]);if(!t)throw Error("no such Service '"+e+"' in "+this);return t},c._configure=function(e,t,r){i=e,n=t,s=r}},3514:(e,t,r)=>{"use strict";e.exports=h,h.className="ReflectionObject";let i=r(2695);var n,s=r(4615),a={enum_type:"OPEN",field_presence:"EXPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"},o={enum_type:"CLOSED",field_presence:"EXPLICIT",json_format:"LEGACY_BEST_EFFORT",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"EXPANDED",utf8_validation:"NONE"},l={enum_type:"OPEN",field_presence:"IMPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"};function h(e,t){if(!s.isString(e))throw TypeError("name must be a string");if(t&&!s.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=e,this._edition=null,this._defaultEdition="proto2",this._features={},this._featuresResolved=!1,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(h.prototype,{root:{get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}},fullName:{get:function(){for(var e=[this.name],t=this.parent;t;)e.unshift(t.name),t=t.parent;return e.join(".")}}}),h.prototype.toJSON=function(){throw Error()},h.prototype.onAdd=function(e){this.parent&&this.parent!==e&&this.parent.remove(this),this.parent=e,this.resolved=!1;var t=e.root;t instanceof n&&t._handleAdd(this)},h.prototype.onRemove=function(e){var t=e.root;t instanceof n&&t._handleRemove(this),this.parent=null,this.resolved=!1},h.prototype.resolve=function(){return this.resolved||this.root instanceof n&&(this.resolved=!0),this},h.prototype._resolveFeaturesRecursive=function(e){return this._resolveFeatures(this._edition||e)},h.prototype._resolveFeatures=function(e){if(!this._featuresResolved){var t={};if(!e)throw Error("Unknown edition for "+this.fullName);var r=Object.assign(this.options?Object.assign({},this.options.features):{},this._inferLegacyProtoFeatures(e));if(this._edition){if("proto2"===e)t=Object.assign({},o);else if("proto3"===e)t=Object.assign({},l);else if("2023"===e)t=Object.assign({},a);else throw Error("Unknown edition: "+e);this._features=Object.assign(t,r||{}),this._featuresResolved=!0;return}if(this.partOf instanceof i){var n=Object.assign({},this.partOf._features);this._features=Object.assign(n,r||{})}else if(this.declaringField);else if(this.parent){var s=Object.assign({},this.parent._features);this._features=Object.assign(s,r||{})}else throw Error("Unable to find a parent for "+this.fullName);this.extensionField&&(this.extensionField._features=this._features),this._featuresResolved=!0}},h.prototype._inferLegacyProtoFeatures=function(){return{}},h.prototype.getOption=function(e){if(this.options)return this.options[e]},h.prototype.setOption=function(e,t,r){return this.options||(this.options={}),/^features\./.test(e)?s.setProperty(this.options,e,t,r):r&&void 0!==this.options[e]||(this.getOption(e)!==t&&(this.resolved=!1),this.options[e]=t),this},h.prototype.setParsedOption=function(e,t,r){this.parsedOptions||(this.parsedOptions=[]);var i=this.parsedOptions;if(r){var n=i.find(function(t){return Object.prototype.hasOwnProperty.call(t,e)});if(n){var a=n[e];s.setProperty(a,r,t)}else(n={})[e]=s.setProperty({},r,t),i.push(n)}else{var o={};o[e]=t,i.push(o)}return this},h.prototype.setOptions=function(e,t){if(e)for(var r=Object.keys(e),i=0;i<r.length;++i)this.setOption(r[i],e[r[i]],t);return this},h.prototype.toString=function(){var e=this.constructor.className,t=this.fullName;return t.length?e+" "+t:e},h.prototype._editionToJSON=function(){if(this._edition&&"proto3"!==this._edition)return this._edition},h._configure=function(e){n=e}},2695:(e,t,r)=>{"use strict";e.exports=a;var i=r(3514);((a.prototype=Object.create(i.prototype)).constructor=a).className="OneOf";var n=r(7510),s=r(4615);function a(e,t,r,n){if(Array.isArray(t)||(r=t,t=void 0),i.call(this,e,r),!(void 0===t||Array.isArray(t)))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=n}function o(e){if(e.parent)for(var t=0;t<e.fieldsArray.length;++t)e.fieldsArray[t].parent||e.parent.add(e.fieldsArray[t])}a.fromJSON=function(e,t){return new a(e,t.oneof,t.options,t.comment)},a.prototype.toJSON=function(e){var t=!!e&&!!e.keepComments;return s.toObject(["options",this.options,"oneof",this.oneof,"comment",t?this.comment:void 0])},a.prototype.add=function(e){if(!(e instanceof n))throw TypeError("field must be a Field");return e.parent&&e.parent!==this.parent&&e.parent.remove(e),this.oneof.push(e.name),this.fieldsArray.push(e),e.partOf=this,o(this),this},a.prototype.remove=function(e){if(!(e instanceof n))throw TypeError("field must be a Field");var t=this.fieldsArray.indexOf(e);if(t<0)throw Error(e+" is not a member of "+this);return this.fieldsArray.splice(t,1),(t=this.oneof.indexOf(e.name))>-1&&this.oneof.splice(t,1),e.partOf=null,this},a.prototype.onAdd=function(e){i.prototype.onAdd.call(this,e);for(var t=this,r=0;r<this.oneof.length;++r){var n=e.get(this.oneof[r]);n&&!n.partOf&&(n.partOf=t,t.fieldsArray.push(n))}o(this)},a.prototype.onRemove=function(e){for(var t,r=0;r<this.fieldsArray.length;++r)(t=this.fieldsArray[r]).parent&&t.parent.remove(t);i.prototype.onRemove.call(this,e)},Object.defineProperty(a.prototype,"isProto3Optional",{get:function(){if(null==this.fieldsArray||1!==this.fieldsArray.length)return!1;var e=this.fieldsArray[0];return null!=e.options&&!0===e.options.proto3_optional}}),a.d=function(){for(var e=Array(arguments.length),t=0;t<arguments.length;)e[t]=arguments[t++];return function(t,r){s.decorateType(t.constructor).add(new a(r,e)),Object.defineProperty(t,r,{get:s.oneOfGetter(e),set:s.oneOfSetter(e)})}}},6614:(e,t,r)=>{"use strict";e.exports=C,C.filename=null,C.defaults={keepCase:!1};var i=r(9867),n=r(4343),s=r(3839),a=r(7510),o=r(9538),l=r(2695),h=r(1114),u=r(1631),c=r(6539),d=r(3514),p=r(6160),f=r(4615),m=/^[1-9][0-9]*$/,g=/^-?[1-9][0-9]*$/,y=/^0[x][0-9a-fA-F]+$/,v=/^-?0[x][0-9a-fA-F]+$/,b=/^0[0-7]+$/,w=/^-?0[0-7]+$/,E=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,S=/^[a-zA-Z_][a-zA-Z_0-9]*$/,T=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/;function C(e,t,r){t instanceof n||(r=t,t=new n),r||(r=C.defaults);var A,_,x,k,I=r.preferTrailingComment||!1,D=i(e,r.alternateCommentMode||!1),P=D.next,R=D.push,N=D.peek,O=D.skip,M=D.cmnt,L=!0,F="proto2",B=t,U=[],z={},V=r.keepCase?function(e){return e}:f.camelCase;function j(){U.forEach(e=>{e._edition=F,Object.keys(z).forEach(t=>{void 0===e.getOption(t)&&e.setOption(t,z[t],!0)})})}function G(e,t,r){var i=C.filename;return r||(C.filename=null),Error("illegal "+(t||"token")+" '"+e+"' ("+(i?i+", ":"")+"line "+D.line+")")}function q(){var e,t=[];do{if('"'!==(e=P())&&"'"!==e)throw G(e);t.push(P()),O(e),e=N()}while('"'===e||"'"===e);return t.join("")}function H(e){var t=P();switch(t){case"'":case'"':return R(t),q();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return K(t,!0)}catch(r){if(e&&T.test(t))return t;throw G(t,"value")}}function W(e,t){do if(t&&('"'===(r=N())||"'"===r)){var r,i,n=q();if(e.push(n),F>=2023)throw G(n,"id")}else try{e.push([i=Q(P()),O("to",!0)?Q(P()):i])}catch(i){if(t&&T.test(r)&&F>=2023)e.push(r);else throw i}while(O(",",!0));var s={options:void 0};s.setOption=function(e,t){void 0===this.options&&(this.options={}),this.options[e]=t},ee(s,function(e){if("option"===e)el(s,e),O(";");else throw G(e)},function(){ed(s)})}function K(e,t){var r=1;switch("-"===e.charAt(0)&&(r=-1,e=e.substring(1)),e){case"inf":case"INF":case"Inf":return 1/0*r;case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(m.test(e))return r*parseInt(e,10);if(y.test(e))return r*parseInt(e,16);if(b.test(e))return r*parseInt(e,8);if(E.test(e))return r*parseFloat(e);throw G(e,"number",t)}function Q(e,t){switch(e){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!t&&"-"===e.charAt(0))throw G(e,"id");if(g.test(e))return parseInt(e,10);if(v.test(e))return parseInt(e,16);if(w.test(e))return parseInt(e,8);throw G(e,"id")}function $(){if(void 0!==_)throw G("package");if(_=P(),!T.test(_))throw G(_,"name");B=B.define(_),O(";")}function J(){var e,t=N();switch(t){case"weak":e=k||(k=[]),P();break;case"public":P();default:e=x||(x=[])}t=q(),O(";"),e.push(t)}function Y(){if(O("="),(F=q())<2023)throw G(F,"syntax");O(";")}function X(){if(O("="),!["2023"].includes(F=q()))throw G(F,"edition");O(";")}function Z(e,t){switch(t){case"option":return el(e,t),O(";"),!0;case"message":return et(e,t),!0;case"enum":return ea(e,t),!0;case"service":return ep(e,t),!0;case"extend":return em(e,t),!0}return!1}function ee(e,t,r){var i,n=D.line;if(e&&("string"!=typeof e.comment&&(e.comment=M()),e.filename=C.filename),O("{",!0)){for(;"}"!==(i=P());)t(i);O(";",!0)}else r&&r(),O(";"),e&&("string"!=typeof e.comment||I)&&(e.comment=M(n)||e.comment)}function et(e,t){if(!S.test(t=P()))throw G(t,"type name");var r=new s(t);ee(r,function(e){if(!Z(r,e))switch(e){case"map":en(r,e);break;case"required":if("proto2"!==F)throw G(e);case"repeated":er(r,e);break;case"optional":if("proto3"===F)er(r,"proto3_optional");else if("proto2"!==F)throw G(e);else er(r,"optional");break;case"oneof":es(r,e);break;case"extensions":W(r.extensions||(r.extensions=[]));break;case"reserved":W(r.reserved||(r.reserved=[]),!0);break;default:if("proto2"===F||!T.test(e))throw G(e);R(e),er(r,"optional")}}),e.add(r),e===B&&U.push(r)}function er(e,t,r){var i=P();if("group"===i){ei(e,t);return}for(;i.endsWith(".")||N().startsWith(".");)i+=P();if(!T.test(i))throw G(i,"type");var n=P();if(!S.test(n))throw G(n,"name");n=V(n),O("=");var s=new a(n,Q(P()),i,t,r);if(ee(s,function(e){if("option"===e)el(s,e),O(";");else throw G(e)},function(){ed(s)}),"proto3_optional"===t){var o=new l("_"+n);s.setOption("proto3_optional",!0),o.add(s),e.add(o)}else e.add(s);e===B&&U.push(s)}function ei(e,t){if(F>=2023)throw G("group");var r=P();if(!S.test(r))throw G(r,"name");var i=f.lcFirst(r);r===i&&(r=f.ucFirst(r)),O("=");var n=Q(P()),o=new s(r);o.group=!0;var l=new a(i,n,r,t);l.filename=C.filename,ee(o,function(e){switch(e){case"option":el(o,e),O(";");break;case"required":case"repeated":er(o,e);break;case"optional":"proto3"===F?er(o,"proto3_optional"):er(o,"optional");break;case"message":et(o,e);break;case"enum":ea(o,e);break;case"reserved":W(o.reserved||(o.reserved=[]),!0);break;default:throw G(e)}}),e.add(o).add(l)}function en(e){O("<");var t=P();if(void 0===p.mapKey[t])throw G(t,"type");O(",");var r=P();if(!T.test(r))throw G(r,"type");O(">");var i=P();if(!S.test(i))throw G(i,"name");O("=");var n=new o(V(i),Q(P()),t,r);ee(n,function(e){if("option"===e)el(n,e),O(";");else throw G(e)},function(){ed(n)}),e.add(n)}function es(e,t){if(!S.test(t=P()))throw G(t,"name");var r=new l(V(t));ee(r,function(e){"option"===e?(el(r,e),O(";")):(R(e),er(r,"optional"))}),e.add(r)}function ea(e,t){if(!S.test(t=P()))throw G(t,"name");var r=new h(t);ee(r,function(e){switch(e){case"option":el(r,e),O(";");break;case"reserved":W(r.reserved||(r.reserved=[]),!0),void 0===r.reserved&&(r.reserved=[]);break;default:eo(r,e)}}),e.add(r),e===B&&U.push(r)}function eo(e,t){if(!S.test(t))throw G(t,"name");O("=");var r=Q(P(),!0),i={options:void 0};i.getOption=function(e){return this.options[e]},i.setOption=function(e,t){d.prototype.setOption.call(i,e,t)},i.setParsedOption=function(){},ee(i,function(e){if("option"===e)el(i,e),O(";");else throw G(e)},function(){ed(i)}),e.add(t,r,i.comment,i.parsedOptions||i.options)}function el(e,t){var r,i,n=!0;for("option"===t&&(t=P());"="!==t;){if("("===t){var s=P();O(")"),t="("+s+")"}if(n){if(n=!1,t.includes(".")&&!t.includes("(")){var a=t.split(".");r=a[0]+".",t=a[1];continue}r=t}else i=i?i+=t:t;t=P()}var o=eh(e,i?r.concat(i):r);i=i&&"."===i[0]?i.slice(1):i,ec(e,r=r&&"."===r[r.length-1]?r.slice(0,-1):r,o,i)}function eh(e,t){if(O("{",!0)){for(var r={};!O("}",!0);){if(!S.test(A=P()))throw G(A,"name");if(null===A)throw G(A,"end of input");var i,n,s=A;if(O(":",!0),"{"===N())i=eh(e,t+"."+A);else if("["===N()){if(i=[],O("[",!0)){do n=H(!0),i.push(n);while(O(",",!0));O("]"),void 0!==n&&eu(e,t+"."+A,n)}}else i=H(!0),eu(e,t+"."+A,i);var a=r[s];a&&(i=[].concat(a).concat(i)),r[s]=i,O(",",!0),O(";",!0)}return r}var o=H(!0);return eu(e,t,o),o}function eu(e,t,r){if(B===e&&/^features\./.test(t)){z[t]=r;return}e.setOption&&e.setOption(t,r)}function ec(e,t,r,i){e.setParsedOption&&e.setParsedOption(t,r,i)}function ed(e){if(O("[",!0)){do el(e,"option");while(O(",",!0));O("]")}return e}function ep(e,t){if(!S.test(t=P()))throw G(t,"service name");var r=new u(t);ee(r,function(e){if(!Z(r,e)){if("rpc"===e)ef(r,e);else throw G(e)}}),e.add(r),e===B&&U.push(r)}function ef(e,t){var r=M(),i=t;if(!S.test(t=P()))throw G(t,"name");var n,s,a,o,l=t;if(O("("),O("stream",!0)&&(s=!0),!T.test(t=P())||(n=t,O(")"),O("returns"),O("("),O("stream",!0)&&(o=!0),!T.test(t=P())))throw G(t);a=t,O(")");var h=new c(l,i,n,a,s,o);h.comment=r,ee(h,function(e){if("option"===e)el(h,e),O(";");else throw G(e)}),e.add(h)}function em(e,t){if(!T.test(t=P()))throw G(t,"reference");var r=t;ee(null,function(t){switch(t){case"required":case"repeated":er(e,t,r);break;case"optional":"proto3"===F?er(e,"proto3_optional",r):er(e,"optional",r);break;default:if("proto2"===F||!T.test(t))throw G(t);R(t),er(e,"optional",r)}})}for(;null!==(A=P());)switch(A){case"package":if(!L)throw G(A);$();break;case"import":if(!L)throw G(A);J();break;case"syntax":if(!L)throw G(A);Y();break;case"edition":if(!L)throw G(A);X();break;case"option":el(B,A),O(";",!0);break;default:if(Z(B,A)){L=!1;continue}throw G(A)}return j(),C.filename=null,{package:_,imports:x,weakImports:k,root:t}}},2279:(e,t,r)=>{"use strict";e.exports=l;var i,n=r(745),s=n.LongBits,a=n.utf8;function o(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var h="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},u=function(){return n.Buffer?function(e){return(l.create=function(e){return n.Buffer.isBuffer(e)?new i(e):h(e)})(e)}:h};function c(){var e=new s(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw o(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}if(this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw o(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function d(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw o(this,8);return new s(d(this.buf,this.pos+=4),d(this.buf,this.pos+=4))}l.create=u(),l.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,l.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(e=(e|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(e=(e|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(e=(e|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(e=(e|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return e;if((this.pos+=5)>this.len)throw this.pos=this.len,o(this,10);return e}}(),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw o(this,4);return d(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw o(this,4);return 0|d(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw o(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw o(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw o(this,e);if(this.pos+=e,Array.isArray(this.buf))return this.buf.slice(t,r);if(t===r){var i=n.Buffer;return i?i.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,t,r)},l.prototype.string=function(){var e=this.bytes();return a.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw o(this,e);this.pos+=e}else do if(this.pos>=this.len)throw o(this);while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){i=e,l.create=u(),i._configure();var t=n.Long?"toLong":"toNumber";n.merge(l.prototype,{int64:function(){return c.call(this)[t](!1)},uint64:function(){return c.call(this)[t](!0)},sint64:function(){return c.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},424:(e,t,r)=>{"use strict";e.exports=s;var i=r(2279);(s.prototype=Object.create(i.prototype)).constructor=s;var n=r(745);function s(e){i.call(this,e)}s._configure=function(){n.Buffer&&(s.prototype._slice=n.Buffer.prototype.slice)},s.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},s._configure()},4343:(e,t,r)=>{"use strict";e.exports=c;var i,n,s,a=r(4943);((c.prototype=Object.create(a.prototype)).constructor=c).className="Root";var o=r(7510),l=r(1114),h=r(2695),u=r(4615);function c(e){a.call(this,"",e),this.deferred=[],this.files=[],this._edition="proto2",this._fullyQualifiedObjects={}}function d(){}c.fromJSON=function(e,t){return t||(t=new c),e.options&&t.setOptions(e.options),t.addJSON(e.nested).resolveAll()},c.prototype.resolvePath=u.path.resolve,c.prototype.fetch=u.fetch,c.prototype.load=function e(t,r,i){"function"==typeof r&&(i=r,r=void 0);var a=this;if(!i)return u.asPromise(e,a,t,r);var o=i===d;function l(e,t){if(i){if(o)throw e;t&&t.resolveAll();var r=i;i=null,r(e,t)}}function h(e){var t=e.lastIndexOf("google/protobuf/");if(t>-1){var r=e.substring(t);if(r in s)return r}return null}function c(e,t){try{if(u.isString(t)&&"{"===t.charAt(0)&&(t=JSON.parse(t)),u.isString(t)){n.filename=e;var i,s=n(t,a,r),c=0;if(s.imports)for(;c<s.imports.length;++c)(i=h(s.imports[c])||a.resolvePath(e,s.imports[c]))&&p(i);if(s.weakImports)for(c=0;c<s.weakImports.length;++c)(i=h(s.weakImports[c])||a.resolvePath(e,s.weakImports[c]))&&p(i,!0)}else a.setOptions(t.options).addJSON(t.nested)}catch(e){l(e)}o||f||l(null,a)}function p(e,t){if(e=h(e)||e,!(a.files.indexOf(e)>-1)){if(a.files.push(e),e in s){o?c(e,s[e]):(++f,setTimeout(function(){--f,c(e,s[e])}));return}if(o){var r;try{r=u.fs.readFileSync(e).toString("utf8")}catch(e){t||l(e);return}c(e,r)}else++f,a.fetch(e,function(r,n){if(--f,i){if(r){t?f||l(null,a):l(r);return}c(e,n)}})}}var f=0;u.isString(t)&&(t=[t]);for(var m,g=0;g<t.length;++g)(m=a.resolvePath("",t[g]))&&p(m);return o?a.resolveAll():f||l(null,a),a},c.prototype.loadSync=function(e,t){if(!u.isNode)throw Error("not supported");return this.load(e,t,d)},c.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(e){return"'extend "+e.extend+"' in "+e.parent.fullName}).join(", "));return a.prototype.resolveAll.call(this)};var p=/^[A-Z]/;function f(e,t){var r=t.parent.lookup(t.extend);if(r){var i=new o(t.fullName,t.id,t.type,t.rule,void 0,t.options);return!!r.get(i.name)||(i.declaringField=t,t.extensionField=i,r.add(i),!0)}return!1}c.prototype._handleAdd=function(e){if(e instanceof o)void 0===e.extend||e.extensionField||f(this,e)||this.deferred.push(e);else if(e instanceof l)p.test(e.name)&&(e.parent[e.name]=e.values);else if(!(e instanceof h)){if(e instanceof i)for(var t=0;t<this.deferred.length;)f(this,this.deferred[t])?this.deferred.splice(t,1):++t;for(var r=0;r<e.nestedArray.length;++r)this._handleAdd(e._nestedArray[r]);p.test(e.name)&&(e.parent[e.name]=e)}(e instanceof i||e instanceof l||e instanceof o)&&(this._fullyQualifiedObjects[e.fullName]=e)},c.prototype._handleRemove=function(e){if(e instanceof o){if(void 0!==e.extend){if(e.extensionField)e.extensionField.parent.remove(e.extensionField),e.extensionField=null;else{var t=this.deferred.indexOf(e);t>-1&&this.deferred.splice(t,1)}}}else if(e instanceof l)p.test(e.name)&&delete e.parent[e.name];else if(e instanceof a){for(var r=0;r<e.nestedArray.length;++r)this._handleRemove(e._nestedArray[r]);p.test(e.name)&&delete e.parent[e.name]}delete this._fullyQualifiedObjects[e.fullName]},c._configure=function(e,t,r){i=e,n=t,s=r}},9694:e=>{"use strict";e.exports={}},4774:(e,t,r)=>{"use strict";t.Service=r(3829)},3829:(e,t,r)=>{"use strict";e.exports=n;var i=r(745);function n(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!r}(n.prototype=Object.create(i.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,r,n,s,a){if(!s)throw TypeError("request must be specified");var o=this;if(!a)return i.asPromise(e,o,t,r,n,s);if(!o.rpcImpl){setTimeout(function(){a(Error("already ended"))},0);return}try{return o.rpcImpl(t,r[o.requestDelimited?"encodeDelimited":"encode"](s).finish(),function(e,r){if(e)return o.emit("error",e,t),a(e);if(null===r){o.end(!0);return}if(!(r instanceof n))try{r=n[o.responseDelimited?"decodeDelimited":"decode"](r)}catch(e){return o.emit("error",e,t),a(e)}return o.emit("data",r,t),a(null,r)})}catch(e){o.emit("error",e,t),setTimeout(function(){a(e)},0);return}},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},1631:(e,t,r)=>{"use strict";e.exports=o;var i=r(4943);((o.prototype=Object.create(i.prototype)).constructor=o).className="Service";var n=r(6539),s=r(4615),a=r(4774);function o(e,t){i.call(this,e,t),this.methods={},this._methodsArray=null}function l(e){return e._methodsArray=null,e}o.fromJSON=function(e,t){var r=new o(e,t.options);if(t.methods)for(var i=Object.keys(t.methods),s=0;s<i.length;++s)r.add(n.fromJSON(i[s],t.methods[i[s]]));return t.nested&&r.addJSON(t.nested),t.edition&&(r._edition=t.edition),r.comment=t.comment,r._defaultEdition="proto3",r},o.prototype.toJSON=function(e){var t=i.prototype.toJSON.call(this,e),r=!!e&&!!e.keepComments;return s.toObject(["edition",this._editionToJSON(),"options",t&&t.options||void 0,"methods",i.arrayToJSON(this.methodsArray,e)||{},"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},Object.defineProperty(o.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=s.toArray(this.methods))}}),o.prototype.get=function(e){return this.methods[e]||i.prototype.get.call(this,e)},o.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;i.prototype.resolve.call(this);for(var e=this.methodsArray,t=0;t<e.length;++t)e[t].resolve();return this},o.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution&&(e=this._edition||e,i.prototype._resolveFeaturesRecursive.call(this,e),this.methodsArray.forEach(t=>{t._resolveFeaturesRecursive(e)})),this},o.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);return e instanceof n?(this.methods[e.name]=e,e.parent=this,l(this)):i.prototype.add.call(this,e)},o.prototype.remove=function(e){if(e instanceof n){if(this.methods[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.methods[e.name],e.parent=null,l(this)}return i.prototype.remove.call(this,e)},o.prototype.create=function(e,t,r){for(var i,n=new a.Service(e,t,r),o=0;o<this.methodsArray.length;++o){var l=s.lcFirst((i=this._methodsArray[o]).resolve().name).replace(/[^$\w_]/g,"");n[l]=s.codegen(["r","c"],s.isReserved(l)?l+"_":l)("return this.rpcCall(m,q,s,r,c)")({m:i,q:i.resolvedRequestType.ctor,s:i.resolvedResponseType.ctor})}return n}},9867:e=>{"use strict";e.exports=c;var t=/[\s{}=;:[\],'"()<>]/g,r=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,i=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,n=/^ *[*/]+ */,s=/^\s*\*?\/*/,a=/\n/g,o=/\s/,l=/\\(.?)/g,h={0:"\0",r:"\r",n:"\n",t:"	"};function u(e){return e.replace(l,function(e,t){switch(t){case"\\":case"":return t;default:return h[t]||""}})}function c(e,l){e=e.toString();var h=0,c=e.length,d=1,p=0,f={},m=[],g=null;function y(e){return Error("illegal "+e+" (line "+d+")")}function v(){var t="'"===g?i:r;t.lastIndex=h-1;var n=t.exec(e);if(!n)throw y("string");return h=t.lastIndex,C(g),g=null,u(n[1])}function b(t){return e.charAt(t)}function w(t,r,i){var o,h,u={type:e.charAt(t++),lineEmpty:!1,leading:i},c=t-(o=l?2:3);do if(--c<0||"\n"===(h=e.charAt(c))){u.lineEmpty=!0;break}while(" "===h||"	"===h);for(var m=e.substring(t,r).split(a),g=0;g<m.length;++g)m[g]=m[g].replace(l?s:n,"").trim();u.text=m.join("\n").trim(),f[d]=u,p=d}function E(t){var r=S(t),i=e.substring(t,r);return/^\s*\/\//.test(i)}function S(e){for(var t=e;t<c&&"\n"!==b(t);)t++;return t}function T(){if(m.length>0)return m.shift();if(g)return v();var r,i,n,s,a,u=0===h;do{if(h===c)return null;for(r=!1;o.test(n=b(h));)if("\n"===n&&(u=!0,++d),++h===c)return null;if("/"===b(h)){if(++h===c)throw y("comment");if("/"===b(h)){if(l){if(s=h,a=!1,E(h-1)){a=!0;do if((h=S(h))===c||(h++,!u))break;while(E(h))}else h=Math.min(c,S(h)+1);a&&(w(s,h,u),u=!0),d++,r=!0}else{for(a="/"===b(s=h+1);"\n"!==b(++h);)if(h===c)return null;++h,a&&(w(s,h-1,u),u=!0),++d,r=!0}}else{if("*"!==(n=b(h)))return"/";s=h+1,a=l||"*"===b(s);do{if("\n"===n&&++d,++h===c)throw y("comment");i=n,n=b(h)}while("*"!==i||"/"!==n);++h,a&&(w(s,h-2,u),u=!0),r=!0}}}while(r);var p=h;if(t.lastIndex=0,!t.test(b(p++)))for(;p<c&&!t.test(b(p));)++p;var f=e.substring(h,h=p);return('"'===f||"'"===f)&&(g=f),f}function C(e){m.push(e)}function A(){if(!m.length){var e=T();if(null===e)return null;C(e)}return m[0]}function _(e,t){var r=A();if(r===e)return T(),!0;if(!t)throw y("token '"+r+"', '"+e+"' expected");return!1}function x(e){var t,r=null;return void 0===e?(t=f[d-1],delete f[d-1],t&&(l||"*"===t.type||t.lineEmpty)&&(r=t.leading?t.text:null)):(p<e&&A(),t=f[e],delete f[e],t&&!t.lineEmpty&&(l||"/"===t.type)&&(r=t.leading?null:t.text)),r}return Object.defineProperty({next:T,peek:A,push:C,skip:_,cmnt:x},"line",{get:function(){return d}})}c.unescape=u},3839:(e,t,r)=>{"use strict";e.exports=v;var i=r(4943);((v.prototype=Object.create(i.prototype)).constructor=v).className="Type";var n=r(1114),s=r(2695),a=r(7510),o=r(9538),l=r(1631),h=r(2936),u=r(2279),c=r(8458),d=r(4615),p=r(8455),f=r(1526),m=r(4633),g=r(5711),y=r(9579);function v(e,t){i.call(this,e,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function b(e){return e._fieldsById=e._fieldsArray=e._oneofsArray=null,delete e.encode,delete e.decode,delete e.verify,e}Object.defineProperties(v.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var e=Object.keys(this.fields),t=0;t<e.length;++t){var r=this.fields[e[t]],i=r.id;if(this._fieldsById[i])throw Error("duplicate id "+i+" in "+this);this._fieldsById[i]=r}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=d.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=d.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=v.generateConstructor(this)())},set:function(e){var t=e.prototype;t instanceof h||((e.prototype=new h).constructor=e,d.merge(e.prototype,t)),e.$type=e.prototype.$type=this,d.merge(e,h,!0),this._ctor=e;for(var r=0;r<this.fieldsArray.length;++r)this._fieldsArray[r].resolve();var i={};for(r=0;r<this.oneofsArray.length;++r)i[this._oneofsArray[r].resolve().name]={get:d.oneOfGetter(this._oneofsArray[r].oneof),set:d.oneOfSetter(this._oneofsArray[r].oneof)};r&&Object.defineProperties(e.prototype,i)}}}),v.generateConstructor=function(e){for(var t,r=d.codegen(["p"],e.name),i=0;i<e.fieldsArray.length;++i)(t=e._fieldsArray[i]).map?r("this%s={}",d.safeProp(t.name)):t.repeated&&r("this%s=[]",d.safeProp(t.name));return r("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},v.fromJSON=function(e,t){var r=new v(e,t.options);r.extensions=t.extensions,r.reserved=t.reserved;for(var h=Object.keys(t.fields),u=0;u<h.length;++u)r.add((void 0!==t.fields[h[u]].keyType?o.fromJSON:a.fromJSON)(h[u],t.fields[h[u]]));if(t.oneofs)for(h=Object.keys(t.oneofs),u=0;u<h.length;++u)r.add(s.fromJSON(h[u],t.oneofs[h[u]]));if(t.nested)for(h=Object.keys(t.nested),u=0;u<h.length;++u){var c=t.nested[h[u]];r.add((void 0!==c.id?a.fromJSON:void 0!==c.fields?v.fromJSON:void 0!==c.values?n.fromJSON:void 0!==c.methods?l.fromJSON:i.fromJSON)(h[u],c))}return t.extensions&&t.extensions.length&&(r.extensions=t.extensions),t.reserved&&t.reserved.length&&(r.reserved=t.reserved),t.group&&(r.group=!0),t.comment&&(r.comment=t.comment),t.edition&&(r._edition=t.edition),r._defaultEdition="proto3",r},v.prototype.toJSON=function(e){var t=i.prototype.toJSON.call(this,e),r=!!e&&!!e.keepComments;return d.toObject(["edition",this._editionToJSON(),"options",t&&t.options||void 0,"oneofs",i.arrayToJSON(this.oneofsArray,e),"fields",i.arrayToJSON(this.fieldsArray.filter(function(e){return!e.declaringField}),e)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",t&&t.nested||void 0,"comment",r?this.comment:void 0])},v.prototype.resolveAll=function(){if(!this._needsRecursiveResolve)return this;i.prototype.resolveAll.call(this);var e=this.oneofsArray;for(r=0;r<e.length;)e[r++].resolve();for(var t=this.fieldsArray,r=0;r<t.length;)t[r++].resolve();return this},v.prototype._resolveFeaturesRecursive=function(e){return this._needsRecursiveFeatureResolution&&(e=this._edition||e,i.prototype._resolveFeaturesRecursive.call(this,e),this.oneofsArray.forEach(t=>{t._resolveFeatures(e)}),this.fieldsArray.forEach(t=>{t._resolveFeatures(e)})),this},v.prototype.get=function(e){return this.fields[e]||this.oneofs&&this.oneofs[e]||this.nested&&this.nested[e]||null},v.prototype.add=function(e){if(this.get(e.name))throw Error("duplicate name '"+e.name+"' in "+this);if(e instanceof a&&void 0===e.extend){if(this._fieldsById?this._fieldsById[e.id]:this.fieldsById[e.id])throw Error("duplicate id "+e.id+" in "+this);if(this.isReservedId(e.id))throw Error("id "+e.id+" is reserved in "+this);if(this.isReservedName(e.name))throw Error("name '"+e.name+"' is reserved in "+this);return e.parent&&e.parent.remove(e),this.fields[e.name]=e,e.message=this,e.onAdd(this),b(this)}return e instanceof s?(this.oneofs||(this.oneofs={}),this.oneofs[e.name]=e,e.onAdd(this),b(this)):i.prototype.add.call(this,e)},v.prototype.remove=function(e){if(e instanceof a&&void 0===e.extend){if(!this.fields||this.fields[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.fields[e.name],e.parent=null,e.onRemove(this),b(this)}if(e instanceof s){if(!this.oneofs||this.oneofs[e.name]!==e)throw Error(e+" is not a member of "+this);return delete this.oneofs[e.name],e.parent=null,e.onRemove(this),b(this)}return i.prototype.remove.call(this,e)},v.prototype.isReservedId=function(e){return i.isReservedId(this.reserved,e)},v.prototype.isReservedName=function(e){return i.isReservedName(this.reserved,e)},v.prototype.create=function(e){return new this.ctor(e)},v.prototype.setup=function(){for(var e=this.fullName,t=[],r=0;r<this.fieldsArray.length;++r)t.push(this._fieldsArray[r].resolve().resolvedType);this.encode=p(this)({Writer:c,types:t,util:d}),this.decode=f(this)({Reader:u,types:t,util:d}),this.verify=m(this)({types:t,util:d}),this.fromObject=g.fromObject(this)({types:t,util:d}),this.toObject=g.toObject(this)({types:t,util:d});var i=y[e];if(i){var n=Object.create(this);n.fromObject=this.fromObject,this.fromObject=i.fromObject.bind(n),n.toObject=this.toObject,this.toObject=i.toObject.bind(n)}return this},v.prototype.encode=function(e,t){return this.setup().encode(e,t)},v.prototype.encodeDelimited=function(e,t){return this.encode(e,t&&t.len?t.fork():t).ldelim()},v.prototype.decode=function(e,t){return this.setup().decode(e,t)},v.prototype.decodeDelimited=function(e){return e instanceof u||(e=u.create(e)),this.decode(e,e.uint32())},v.prototype.verify=function(e){return this.setup().verify(e)},v.prototype.fromObject=function(e){return this.setup().fromObject(e)},v.prototype.toObject=function(e,t){return this.setup().toObject(e,t)},v.d=function(e){return function(t){d.decorateType(t,e)}}},6160:(e,t,r)=>{"use strict";var i=t,n=r(4615),s=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function a(e,t){var r=0,i={};for(t|=0;r<e.length;)i[s[r+t]]=e[r++];return i}i.basic=a([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),i.defaults=a([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",n.emptyArray,null]),i.long=a([0,0,0,1,1],7),i.mapKey=a([0,0,0,5,5,0,0,0,1,1,0,2],2),i.packed=a([1,5,0,0,0,5,5,0,0,0,1,1,0])},4615:(e,t,r)=>{"use strict";var i,n,s=e.exports=r(745),a=r(9694);s.codegen=r(696),s.fetch=r(7828),s.path=r(2727),s.fs=s.inquire("fs"),s.toArray=function(e){if(e){for(var t=Object.keys(e),r=Array(t.length),i=0;i<t.length;)r[i]=e[t[i++]];return r}return[]},s.toObject=function(e){for(var t={},r=0;r<e.length;){var i=e[r++],n=e[r++];void 0!==n&&(t[i]=n)}return t};var o=/\\/g,l=/"/g;s.isReserved=function(e){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(e)},s.safeProp=function(e){return!/^[$\w_]+$/.test(e)||s.isReserved(e)?'["'+e.replace(o,"\\\\").replace(l,'\\"')+'"]':"."+e},s.ucFirst=function(e){return e.charAt(0).toUpperCase()+e.substring(1)};var h=/_([a-z])/g;s.camelCase=function(e){return e.substring(0,1)+e.substring(1).replace(h,function(e,t){return t.toUpperCase()})},s.compareFieldsById=function(e,t){return e.id-t.id},s.decorateType=function(e,t){if(e.$type)return t&&e.$type.name!==t&&(s.decorateRoot.remove(e.$type),e.$type.name=t,s.decorateRoot.add(e.$type)),e.$type;i||(i=r(3839));var n=new i(t||e.name);return s.decorateRoot.add(n),n.ctor=e,Object.defineProperty(e,"$type",{value:n,enumerable:!1}),Object.defineProperty(e.prototype,"$type",{value:n,enumerable:!1}),n};var u=0;s.decorateEnum=function(e){if(e.$type)return e.$type;n||(n=r(1114));var t=new n("Enum"+u++,e);return s.decorateRoot.add(t),Object.defineProperty(e,"$type",{value:t,enumerable:!1}),t},s.setProperty=function(e,t,r,i){function n(e,t,r){var s=t.shift();if("__proto__"===s||"prototype"===s)return e;if(t.length>0)e[s]=n(e[s]||{},t,r);else{var a=e[s];if(a&&i)return e;a&&(r=[].concat(a).concat(r)),e[s]=r}return e}if("object"!=typeof e)throw TypeError("dst must be an object");if(!t)throw TypeError("path must be specified");return n(e,t=t.split("."),r)},Object.defineProperty(s,"decorateRoot",{get:function(){return a.decorated||(a.decorated=new(r(4343)))}})},3674:(e,t,r)=>{"use strict";e.exports=n;var i=r(745);function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var s=n.zero=new n(0,0);s.toNumber=function(){return 0},s.zzEncode=s.zzDecode=function(){return this},s.length=function(){return 1};var a=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return s;var t=e<0;t&&(e=-e);var r=e>>>0,i=(e-r)/4294967296>>>0;return t&&(i=~i>>>0,r=~r>>>0,++r>4294967295&&(r=0,++i>4294967295&&(i=0))),new n(r,i)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(i.isString(e)){if(!i.Long)return n.fromNumber(parseInt(e,10));e=i.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):s},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=~this.lo+1>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return i.Long?new i.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var o=String.prototype.charCodeAt;n.fromHash=function(e){return e===a?s:new n((o.call(e,0)|o.call(e,1)<<8|o.call(e,2)<<16|o.call(e,3)<<24)>>>0,(o.call(e,4)|o.call(e,5)<<8|o.call(e,6)<<16|o.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},745:function(e,t,r){"use strict";var i=t;function n(e,t,r){for(var i=Object.keys(t),n=0;n<i.length;++n)void 0!==e[i[n]]&&r||(e[i[n]]=t[i[n]]);return e}function s(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:Error().stack||""}),r&&n(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}i.asPromise=r(1417),i.base64=r(5386),i.EventEmitter=r(3478),i.float=r(5256),i.inquire=r(1374),i.utf8=r(3670),i.pool=r(6733),i.LongBits=r(3674),i.isNode=!!("undefined"!=typeof global&&global&&global.process&&global.process.versions&&global.process.versions.node),i.global=i.isNode&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},i.isString=function(e){return"string"==typeof e||e instanceof String},i.isObject=function(e){return e&&"object"==typeof e},i.isset=i.isSet=function(e,t){var r=e[t];return!!(null!=r&&e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},i.Buffer=function(){try{var e=i.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(e){return"number"==typeof e?i.Buffer?i._Buffer_allocUnsafe(e):new i.Array(e):i.Buffer?i._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},i.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,i.Long=i.global.dcodeIO&&i.global.dcodeIO.Long||i.global.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(e){return e?i.LongBits.from(e).toHash():i.LongBits.zeroHash},i.longFromHash=function(e,t){var r=i.LongBits.fromHash(e);return i.Long?i.Long.fromBits(r.lo,r.hi,t):r.toNumber(!!t)},i.merge=n,i.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},i.newError=s,i.ProtocolError=s("ProtocolError"),i.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},i.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var e=i.Buffer;if(!e){i._Buffer_from=i._Buffer_allocUnsafe=null;return}i._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},i._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}}},4633:(e,t,r)=>{"use strict";e.exports=l;var i=r(1114),n=r(4615);function s(e,t){return e.name+": "+t+(e.repeated&&"array"!==t?"[]":e.map&&"object"!==t?"{k:"+e.keyType+"}":"")+" expected"}function a(e,t,r,n){if(t.resolvedType){if(t.resolvedType instanceof i){e("switch(%s){",n)("default:")("return%j",s(t,"enum value"));for(var a=Object.keys(t.resolvedType.values),o=0;o<a.length;++o)e("case %i:",t.resolvedType.values[a[o]]);e("break")("}")}else e("{")("var e=types[%i].verify(%s);",r,n)("if(e)")("return%j+e",t.name+".")("}")}else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.isInteger(%s))",n)("return%j",s(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",s(t,"integer|Long"));break;case"float":case"double":e('if(typeof %s!=="number")',n)("return%j",s(t,"number"));break;case"bool":e('if(typeof %s!=="boolean")',n)("return%j",s(t,"boolean"));break;case"string":e("if(!util.isString(%s))",n)("return%j",s(t,"string"));break;case"bytes":e('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",s(t,"buffer"))}return e}function o(e,t,r){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":e("if(!util.key32Re.test(%s))",r)("return%j",s(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":e("if(!util.key64Re.test(%s))",r)("return%j",s(t,"integer|Long key"));break;case"bool":e("if(!util.key2Re.test(%s))",r)("return%j",s(t,"boolean key"))}return e}function l(e){var t=n.codegen(["m"],e.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),r=e.oneofsArray,i={};r.length&&t("var p={}");for(var l=0;l<e.fieldsArray.length;++l){var h=e._fieldsArray[l].resolve(),u="m"+n.safeProp(h.name);if(h.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",u,h.name),h.map)t("if(!util.isObject(%s))",u)("return%j",s(h,"object"))("var k=Object.keys(%s)",u)("for(var i=0;i<k.length;++i){"),o(t,h,"k[i]"),a(t,h,l,u+"[k[i]]")("}");else if(h.repeated)t("if(!Array.isArray(%s))",u)("return%j",s(h,"array"))("for(var i=0;i<%s.length;++i){",u),a(t,h,l,u+"[i]")("}");else{if(h.partOf){var c=n.safeProp(h.partOf.name);1===i[h.partOf.name]&&t("if(p%s===1)",c)("return%j",h.partOf.name+": multiple values"),i[h.partOf.name]=1,t("p%s=1",c)}a(t,h,l,u)}h.optional&&t("}")}return t("return null")}},9579:(e,t,r)=>{"use strict";var i=t,n=r(2936);i[".google.protobuf.Any"]={fromObject:function(e){if(e&&e["@type"]){var t=e["@type"].substring(e["@type"].lastIndexOf("/")+1),r=this.lookup(t);if(r){var i="."===e["@type"].charAt(0)?e["@type"].slice(1):e["@type"];return -1===i.indexOf("/")&&(i="/"+i),this.create({type_url:i,value:r.encode(r.fromObject(e)).finish()})}}return this.fromObject(e)},toObject:function(e,t){var r="type.googleapis.com/",i="",s="";if(t&&t.json&&e.type_url&&e.value){s=e.type_url.substring(e.type_url.lastIndexOf("/")+1),i=e.type_url.substring(0,e.type_url.lastIndexOf("/")+1);var a=this.lookup(s);a&&(e=a.decode(e.value))}if(!(e instanceof this.ctor)&&e instanceof n){var o=e.$type.toObject(e,t),l="."===e.$type.fullName[0]?e.$type.fullName.slice(1):e.$type.fullName;return""===i&&(i=r),s=i+l,o["@type"]=s,o}return this.toObject(e,t)}}},8458:(e,t,r)=>{"use strict";e.exports=c;var i,n=r(745),s=n.LongBits,a=n.base64,o=n.utf8;function l(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function h(){}function u(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function c(){this.len=0,this.head=new l(h,0,0),this.tail=this.head,this.states=null}var d=function(){return n.Buffer?function(){return(c.create=function(){return new i})()}:function(){return new c}};function p(e,t,r){t[r]=255&e}function f(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e}function m(e,t){this.len=e,this.next=void 0,this.val=t}function g(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function y(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}c.create=d(),c.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(c.alloc=n.pool(c.alloc,n.Array.prototype.subarray)),c.prototype._push=function(e,t,r){return this.tail=this.tail.next=new l(e,t,r),this.len+=t,this},m.prototype=Object.create(l.prototype),m.prototype.fn=f,c.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new m((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},c.prototype.int32=function(e){return e<0?this._push(g,10,s.fromNumber(e)):this.uint32(e)},c.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},c.prototype.uint64=function(e){var t=s.from(e);return this._push(g,t.length(),t)},c.prototype.int64=c.prototype.uint64,c.prototype.sint64=function(e){var t=s.from(e).zzEncode();return this._push(g,t.length(),t)},c.prototype.bool=function(e){return this._push(p,1,e?1:0)},c.prototype.fixed32=function(e){return this._push(y,4,e>>>0)},c.prototype.sfixed32=c.prototype.fixed32,c.prototype.fixed64=function(e){var t=s.from(e);return this._push(y,4,t.lo)._push(y,4,t.hi)},c.prototype.sfixed64=c.prototype.fixed64,c.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},c.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var v=n.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var i=0;i<e.length;++i)t[r+i]=e[i]};c.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(p,1,0);if(n.isString(e)){var r=c.alloc(t=a.length(e));a.decode(e,r,0),e=r}return this.uint32(t)._push(v,t,e)},c.prototype.string=function(e){var t=o.length(e);return t?this.uint32(t)._push(o.write,t,e):this._push(p,1,0)},c.prototype.fork=function(){return this.states=new u(this),this.head=this.tail=new l(h,0,0),this.len=0,this},c.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(h,0,0),this.len=0),this},c.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},c.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},c._configure=function(e){i=e,c.create=d(),i._configure()}},8386:(e,t,r)=>{"use strict";e.exports=s;var i=r(8458);(s.prototype=Object.create(i.prototype)).constructor=s;var n=r(745);function s(){i.call(this)}function a(e,t,r){e.length<40?n.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}s._configure=function(){s.alloc=n._Buffer_allocUnsafe,s.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var i=0;i<e.length;)t[r++]=e[i++]}},s.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(s.writeBytesBuffer,t,e),this},s.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(a,t,e),this},s._configure()},7804:(e,t,r)=>{"use strict";r.d(t,{s:()=>L});var i=r(7577),n=r(7247),s=r.n(n),a=r(326),o=r(962),l=function(){return(l=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},h={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},u={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},c={width:"20px",height:"20px",position:"absolute",zIndex:1},d={top:l(l({},h),{top:"-5px"}),right:l(l({},u),{left:void 0,right:"-5px"}),bottom:l(l({},h),{top:void 0,bottom:"-5px"}),left:l(l({},u),{left:"-5px"}),topRight:l(l({},c),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:l(l({},c),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:l(l({},c),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:l(l({},c),{left:"-10px",top:"-10px",cursor:"nw-resize"})},p=(0,i.memo)(function(e){var t=e.onResizeStart,r=e.direction,n=e.children,s=e.replaceStyles,o=e.className,h=(0,i.useCallback)(function(e){t(e,r)},[t,r]),u=(0,i.useCallback)(function(e){t(e,r)},[t,r]),c=(0,i.useMemo)(function(){return l(l({position:"absolute",userSelect:"none"},d[r]),null!=s?s:{})},[s,r]);return(0,a.jsx)("div",{className:o||void 0,style:c,onMouseDown:h,onTouchStart:u,children:n})}),f=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function i(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),m=function(){return(m=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},g={width:"auto",height:"auto"},y=function(e,t,r){return Math.max(Math.min(e,r),t)},v=function(e,t,r){var i=Math.round(e/t);return i*t+r*(i-1)},b=function(e,t){return RegExp(e,"i").test(t)},w=function(e){return!!(e.touches&&e.touches.length)},E=function(e){return!!((e.clientX||0===e.clientX)&&(e.clientY||0===e.clientY))},S=function(e,t,r){void 0===r&&(r=0);var i=t.reduce(function(r,i,n){return Math.abs(i-e)<Math.abs(t[r]-e)?n:r},0),n=Math.abs(t[i]-e);return 0===r||n<r?t[i]:e},T=function(e){return"auto"===(e=e.toString())||e.endsWith("px")||e.endsWith("%")||e.endsWith("vh")||e.endsWith("vw")||e.endsWith("vmax")||e.endsWith("vmin")?e:"".concat(e,"px")},C=function(e,t,r,i){if(e&&"string"==typeof e){if(e.endsWith("px"))return Number(e.replace("px",""));if(e.endsWith("%")){var n=Number(e.replace("%",""))/100;return t*n}if(e.endsWith("vw")){var n=Number(e.replace("vw",""))/100;return r*n}if(e.endsWith("vh")){var n=Number(e.replace("vh",""))/100;return i*n}}return e},A=function(e,t,r,i,n,s,a){return i=C(i,e.width,t,r),n=C(n,e.height,t,r),s=C(s,e.width,t,r),a=C(a,e.height,t,r),{maxWidth:void 0===i?void 0:Number(i),maxHeight:void 0===n?void 0:Number(n),minWidth:void 0===s?void 0:Number(s),minHeight:void 0===a?void 0:Number(a)}},_=function(e){return Array.isArray(e)?e:[e,e]},x=["as","ref","style","className","grid","gridGap","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],k="__resizable_base__",I=function(e){function t(t){var r,i,n,s,a=e.call(this,t)||this;return a.ratio=1,a.resizable=null,a.parentLeft=0,a.parentTop=0,a.resizableLeft=0,a.resizableRight=0,a.resizableTop=0,a.resizableBottom=0,a.targetLeft=0,a.targetTop=0,a.delta={width:0,height:0},a.appendBase=function(){if(!a.resizable||!a.window)return null;var e=a.parentNode;if(!e)return null;var t=a.window.document.createElement("div");return t.style.width="100%",t.style.height="100%",t.style.position="absolute",t.style.transform="scale(0, 0)",t.style.left="0",t.style.flex="0 0 100%",t.classList?t.classList.add(k):t.className+=k,e.appendChild(t),t},a.removeBase=function(e){var t=a.parentNode;t&&t.removeChild(e)},a.state={isResizing:!1,width:null!==(i=null===(r=a.propsSize)||void 0===r?void 0:r.width)&&void 0!==i?i:"auto",height:null!==(s=null===(n=a.propsSize)||void 0===n?void 0:n.height)&&void 0!==s?s:"auto",direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},a.onResizeStart=a.onResizeStart.bind(a),a.onMouseMove=a.onMouseMove.bind(a),a.onMouseUp=a.onMouseUp.bind(a),a}return f(t,e),Object.defineProperty(t.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return this.resizable&&this.resizable.ownerDocument?this.resizable.ownerDocument.defaultView:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||g},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){var e=0,t=0;if(this.resizable&&this.window){var r=this.resizable.offsetWidth,i=this.resizable.offsetHeight,n=this.resizable.style.position;"relative"!==n&&(this.resizable.style.position="relative"),e="auto"!==this.resizable.style.width?this.resizable.offsetWidth:r,t="auto"!==this.resizable.style.height?this.resizable.offsetHeight:i,this.resizable.style.position=n}return{width:e,height:t}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"sizeStyle",{get:function(){var e=this,t=this.props.size,r=function(t){var r;if(void 0===e.state[t]||"auto"===e.state[t])return"auto";if(e.propsSize&&e.propsSize[t]&&(null===(r=e.propsSize[t])||void 0===r?void 0:r.toString().endsWith("%"))){if(e.state[t].toString().endsWith("%"))return e.state[t].toString();var i=e.getParentSize(),n=Number(e.state[t].toString().replace("px",""))/i[t]*100;return"".concat(n,"%")}return T(e.state[t])};return{width:t&&void 0!==t.width&&!this.state.isResizing?T(t.width):r("width"),height:t&&void 0!==t.height&&!this.state.isResizing?T(t.height):r("height")}},enumerable:!1,configurable:!0}),t.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var e=this.appendBase();if(!e)return{width:0,height:0};var t=!1,r=this.parentNode.style.flexWrap;"wrap"!==r&&(t=!0,this.parentNode.style.flexWrap="wrap"),e.style.position="relative",e.style.minWidth="100%",e.style.minHeight="100%";var i={width:e.offsetWidth,height:e.offsetHeight};return t&&(this.parentNode.style.flexWrap=r),this.removeBase(e),i},t.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},t.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},t.prototype.componentDidMount=function(){if(this.resizable&&this.window){var e=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:"auto"!==e.flexBasis?e.flexBasis:void 0})}},t.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},t.prototype.createSizeForCssProperty=function(e,t){var r=this.propsSize&&this.propsSize[t];return"auto"===this.state[t]&&this.state.original[t]===e&&(void 0===r||"auto"===r)?"auto":e},t.prototype.calculateNewMaxFromBoundary=function(e,t){var r,i,n=this.props.boundsByDirection,s=this.state.direction,a=n&&b("left",s),o=n&&b("top",s);if("parent"===this.props.bounds){var l=this.parentNode;l&&(r=a?this.resizableRight-this.parentLeft:l.offsetWidth+(this.parentLeft-this.resizableLeft),i=o?this.resizableBottom-this.parentTop:l.offsetHeight+(this.parentTop-this.resizableTop))}else"window"===this.props.bounds?this.window&&(r=a?this.resizableRight:this.window.innerWidth-this.resizableLeft,i=o?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(r=a?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),i=o?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return r&&Number.isFinite(r)&&(e=e&&e<r?e:r),i&&Number.isFinite(i)&&(t=t&&t<i?t:i),{maxWidth:e,maxHeight:t}},t.prototype.calculateNewSizeFromDirection=function(e,t){var r=this.props.scale||1,i=_(this.props.resizeRatio||1),n=i[0],s=i[1],a=this.state,o=a.direction,l=a.original,h=this.props,u=h.lockAspectRatio,c=h.lockAspectRatioExtraHeight,d=h.lockAspectRatioExtraWidth,p=l.width,f=l.height,m=c||0,g=d||0;return b("right",o)&&(p=l.width+(e-l.x)*n/r,u&&(f=(p-g)/this.ratio+m)),b("left",o)&&(p=l.width-(e-l.x)*n/r,u&&(f=(p-g)/this.ratio+m)),b("bottom",o)&&(f=l.height+(t-l.y)*s/r,u&&(p=(f-m)*this.ratio+g)),b("top",o)&&(f=l.height-(t-l.y)*s/r,u&&(p=(f-m)*this.ratio+g)),{newWidth:p,newHeight:f}},t.prototype.calculateNewSizeFromAspectRatio=function(e,t,r,i){var n=this.props,s=n.lockAspectRatio,a=n.lockAspectRatioExtraHeight,o=n.lockAspectRatioExtraWidth,l=void 0===i.width?10:i.width,h=void 0===r.width||r.width<0?e:r.width,u=void 0===i.height?10:i.height,c=void 0===r.height||r.height<0?t:r.height,d=a||0,p=o||0;if(s){var f=(u-d)*this.ratio+p,m=(c-d)*this.ratio+p,g=(l-p)/this.ratio+d,v=(h-p)/this.ratio+d,b=Math.max(u,g),w=Math.min(c,v);e=y(e,Math.max(l,f),Math.min(h,m)),t=y(t,b,w)}else e=y(e,l,h),t=y(t,u,c);return{newWidth:e,newHeight:t}},t.prototype.setBoundingClientRect=function(){var e=1/(this.props.scale||1);if("parent"===this.props.bounds){var t=this.parentNode;if(t){var r=t.getBoundingClientRect();this.parentLeft=r.left*e,this.parentTop=r.top*e}}if(this.props.bounds&&"string"!=typeof this.props.bounds){var i=this.props.bounds.getBoundingClientRect();this.targetLeft=i.left*e,this.targetTop=i.top*e}if(this.resizable){var n=this.resizable.getBoundingClientRect(),s=n.left,a=n.top,o=n.right,l=n.bottom;this.resizableLeft=s*e,this.resizableRight=o*e,this.resizableTop=a*e,this.resizableBottom=l*e}},t.prototype.onResizeStart=function(e,t){if(this.resizable&&this.window){var r,i=0,n=0;if(e.nativeEvent&&E(e.nativeEvent)?(i=e.nativeEvent.clientX,n=e.nativeEvent.clientY):e.nativeEvent&&w(e.nativeEvent)&&(i=e.nativeEvent.touches[0].clientX,n=e.nativeEvent.touches[0].clientY),!this.props.onResizeStart||!this.resizable||!1!==this.props.onResizeStart(e,t,this.resizable)){this.props.size&&(void 0!==this.props.size.height&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),void 0!==this.props.size.width&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio="number"==typeof this.props.lockAspectRatio?this.props.lockAspectRatio:this.size.width/this.size.height;var s=this.window.getComputedStyle(this.resizable);if("auto"!==s.flexBasis){var a=this.parentNode;if(a){var o=this.window.getComputedStyle(a).flexDirection;this.flexDir=o.startsWith("row")?"row":"column",r=s.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var l={original:{x:i,y:n,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:m(m({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(e.target).cursor||"auto"}),direction:t,flexBasis:r};this.setState(l)}}},t.prototype.onMouseMove=function(e){var t=this;if(this.state.isResizing&&this.resizable&&this.window){if(this.window.TouchEvent&&w(e))try{e.preventDefault(),e.stopPropagation()}catch(e){}var r=this.props,i=r.maxWidth,n=r.maxHeight,s=r.minWidth,a=r.minHeight,l=w(e)?e.touches[0].clientX:e.clientX,h=w(e)?e.touches[0].clientY:e.clientY,u=this.state,c=u.direction,d=u.original,p=u.width,f=u.height,m=this.getParentSize(),g=A(m,this.window.innerWidth,this.window.innerHeight,i,n,s,a);i=g.maxWidth,n=g.maxHeight,s=g.minWidth,a=g.minHeight;var y=this.calculateNewSizeFromDirection(l,h),b=y.newHeight,E=y.newWidth,T=this.calculateNewMaxFromBoundary(i,n);this.props.snap&&this.props.snap.x&&(E=S(E,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(b=S(b,this.props.snap.y,this.props.snapGap));var C=this.calculateNewSizeFromAspectRatio(E,b,{width:T.maxWidth,height:T.maxHeight},{width:s,height:a});if(E=C.newWidth,b=C.newHeight,this.props.grid){var _=v(E,this.props.grid[0],this.props.gridGap?this.props.gridGap[0]:0),x=v(b,this.props.grid[1],this.props.gridGap?this.props.gridGap[1]:0),k=this.props.snapGap||0,I=0===k||Math.abs(_-E)<=k?_:E,D=0===k||Math.abs(x-b)<=k?x:b;E=I,b=D}var P={width:E-d.width,height:b-d.height};if(this.delta=P,p&&"string"==typeof p){if(p.endsWith("%")){var R=E/m.width*100;E="".concat(R,"%")}else if(p.endsWith("vw")){var N=E/this.window.innerWidth*100;E="".concat(N,"vw")}else if(p.endsWith("vh")){var O=E/this.window.innerHeight*100;E="".concat(O,"vh")}}if(f&&"string"==typeof f){if(f.endsWith("%")){var R=b/m.height*100;b="".concat(R,"%")}else if(f.endsWith("vw")){var N=b/this.window.innerWidth*100;b="".concat(N,"vw")}else if(f.endsWith("vh")){var O=b/this.window.innerHeight*100;b="".concat(O,"vh")}}var M={width:this.createSizeForCssProperty(E,"width"),height:this.createSizeForCssProperty(b,"height")};"row"===this.flexDir?M.flexBasis=M.width:"column"===this.flexDir&&(M.flexBasis=M.height);var L=this.state.width!==M.width,F=this.state.height!==M.height,B=this.state.flexBasis!==M.flexBasis,U=L||F||B;U&&(0,o.flushSync)(function(){t.setState(M)}),this.props.onResize&&U&&this.props.onResize(e,c,this.resizable,P)}},t.prototype.onMouseUp=function(e){var t,r,i=this.state,n=i.isResizing,s=i.direction;i.original,n&&this.resizable&&(this.props.onResizeStop&&this.props.onResizeStop(e,s,this.resizable,this.delta),this.props.size&&this.setState({width:null!==(t=this.props.size.width)&&void 0!==t?t:"auto",height:null!==(r=this.props.size.height)&&void 0!==r?r:"auto"}),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:m(m({},this.state.backgroundStyle),{cursor:"auto"})}))},t.prototype.updateSize=function(e){var t,r;this.setState({width:null!==(t=e.width)&&void 0!==t?t:"auto",height:null!==(r=e.height)&&void 0!==r?r:"auto"})},t.prototype.renderResizer=function(){var e=this,t=this.props,r=t.enable,i=t.handleStyles,n=t.handleClasses,s=t.handleWrapperStyle,o=t.handleWrapperClass,l=t.handleComponent;if(!r)return null;var h=Object.keys(r).map(function(t){return!1!==r[t]?(0,a.jsx)(p,{direction:t,onResizeStart:e.onResizeStart,replaceStyles:i&&i[t],className:n&&n[t],children:l&&l[t]?l[t]:null},t):null});return(0,a.jsx)("div",{className:o,style:s,children:h})},t.prototype.render=function(){var e=this,t=Object.keys(this.props).reduce(function(t,r){return -1!==x.indexOf(r)||(t[r]=e.props[r]),t},{}),r=m(m(m({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(r.flexBasis=this.state.flexBasis);var i=this.props.as||"div";return(0,a.jsxs)(i,m({style:r,className:this.props.className},t,{ref:function(t){t&&(e.resizable=t)},children:[this.state.isResizing&&(0,a.jsx)("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer()]}))},t.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],gridGap:[0,0],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},t}(i.PureComponent),D=function(e,t){return(D=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function P(e,t){function r(){this.constructor=e}D(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var R=function(){return(R=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function N(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}var O={width:"auto",height:"auto",display:"inline-block",position:"absolute",top:0,left:0},M=function(e){return{bottom:e,bottomLeft:e,bottomRight:e,left:e,right:e,top:e,topLeft:e,topRight:e}},L=function(e){function t(t){var r=e.call(this,t)||this;return r.resizingPosition={x:0,y:0},r.offsetFromParent={left:0,top:0},r.resizableElement={current:null},r.originalPosition={x:0,y:0},r.state={resizing:!1,bounds:{top:0,right:0,bottom:0,left:0},maxWidth:t.maxWidth,maxHeight:t.maxHeight},r.onResizeStart=r.onResizeStart.bind(r),r.onResize=r.onResize.bind(r),r.onResizeStop=r.onResizeStop.bind(r),r.onDragStart=r.onDragStart.bind(r),r.onDrag=r.onDrag.bind(r),r.onDragStop=r.onDragStop.bind(r),r.getMaxSizesFromProps=r.getMaxSizesFromProps.bind(r),r}return P(t,e),t.prototype.componentDidMount=function(){this.updateOffsetFromParent();var e=this.offsetFromParent,t=e.left,r=e.top,i=this.getDraggablePosition(),n=i.x,s=i.y;this.draggable.setState({x:n-t,y:s-r}),this.forceUpdate()},t.prototype.getDraggablePosition=function(){var e=this.draggable.state;return{x:e.x,y:e.y}},t.prototype.getParent=function(){return this.resizable&&this.resizable.parentNode},t.prototype.getParentSize=function(){return this.resizable.getParentSize()},t.prototype.getMaxSizesFromProps=function(){return{maxWidth:void 0===this.props.maxWidth?Number.MAX_SAFE_INTEGER:this.props.maxWidth,maxHeight:void 0===this.props.maxHeight?Number.MAX_SAFE_INTEGER:this.props.maxHeight}},t.prototype.getSelfElement=function(){return this.resizable&&this.resizable.resizable},t.prototype.getOffsetHeight=function(e){var t=this.props.scale;switch(this.props.bounds){case"window":return window.innerHeight/t;case"body":return document.body.offsetHeight/t;default:return e.offsetHeight}},t.prototype.getOffsetWidth=function(e){var t=this.props.scale;switch(this.props.bounds){case"window":return window.innerWidth/t;case"body":return document.body.offsetWidth/t;default:return e.offsetWidth}},t.prototype.onDragStart=function(e,t){this.props.onDragStart&&this.props.onDragStart(e,t);var r,i=this.getDraggablePosition();if(this.originalPosition=i,this.props.bounds){var n=this.getParent(),s=this.props.scale;if("parent"===this.props.bounds)r=n;else if("body"===this.props.bounds){var a=n.getBoundingClientRect(),o=a.left,l=a.top,h=document.body.getBoundingClientRect(),u=-(o-n.offsetLeft*s-h.left)/s,c=-(l-n.offsetTop*s-h.top)/s,d=(document.body.offsetWidth-this.resizable.size.width*s)/s+u,p=(document.body.offsetHeight-this.resizable.size.height*s)/s+c;return this.setState({bounds:{top:c,right:d,bottom:p,left:u}})}else if("window"===this.props.bounds){if(!this.resizable)return;var f=n.getBoundingClientRect(),m=f.left,g=f.top,y=-(m-n.offsetLeft*s)/s,v=-(g-n.offsetTop*s)/s,d=(window.innerWidth-this.resizable.size.width*s)/s+y,p=(window.innerHeight-this.resizable.size.height*s)/s+v;return this.setState({bounds:{top:v,right:d,bottom:p,left:y}})}else"string"==typeof this.props.bounds?r=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(r=this.props.bounds);if(r instanceof HTMLElement&&n instanceof HTMLElement){var b=r.getBoundingClientRect(),w=b.left,E=b.top,S=n.getBoundingClientRect(),T=S.left,C=S.top,A=(w-T)/s,_=E-C;if(this.resizable){this.updateOffsetFromParent();var x=this.offsetFromParent;this.setState({bounds:{top:_-x.top,right:A+(r.offsetWidth-this.resizable.size.width)-x.left/s,bottom:_+(r.offsetHeight-this.resizable.size.height)-x.top,left:A-x.left/s}})}}}},t.prototype.onDrag=function(e,t){if(this.props.onDrag){var r=this.offsetFromParent,i=r.left,n=r.top;if(!this.props.dragAxis||"both"===this.props.dragAxis)return this.props.onDrag(e,R(R({},t),{x:t.x+i,y:t.y+n}));if("x"===this.props.dragAxis)return this.props.onDrag(e,R(R({},t),{x:t.x+i,y:this.originalPosition.y+n,deltaY:0}));if("y"===this.props.dragAxis)return this.props.onDrag(e,R(R({},t),{x:this.originalPosition.x+i,y:t.y+n,deltaX:0}))}},t.prototype.onDragStop=function(e,t){if(this.props.onDragStop){var r=this.offsetFromParent,i=r.left,n=r.top;if(!this.props.dragAxis||"both"===this.props.dragAxis)return this.props.onDragStop(e,R(R({},t),{x:t.x+i,y:t.y+n}));if("x"===this.props.dragAxis)return this.props.onDragStop(e,R(R({},t),{x:t.x+i,y:this.originalPosition.y+n,deltaY:0}));if("y"===this.props.dragAxis)return this.props.onDragStop(e,R(R({},t),{x:this.originalPosition.x+i,y:t.y+n,deltaX:0}))}},t.prototype.onResizeStart=function(e,t,r){e.stopPropagation(),this.setState({resizing:!0});var i=this.props.scale,n=this.offsetFromParent,s=this.getDraggablePosition();if(this.resizingPosition={x:s.x+n.left,y:s.y+n.top},this.originalPosition=s,this.props.bounds){var a=this.getParent(),o=void 0;"parent"===this.props.bounds?o=a:"body"===this.props.bounds?o=document.body:"window"===this.props.bounds?o=window:"string"==typeof this.props.bounds?o=document.querySelector(this.props.bounds):this.props.bounds instanceof HTMLElement&&(o=this.props.bounds);var l=this.getSelfElement();if(l instanceof Element&&(o instanceof HTMLElement||o===window)&&a instanceof HTMLElement){var h=this.getMaxSizesFromProps(),u=h.maxWidth,c=h.maxHeight,d=this.getParentSize();if(u&&"string"==typeof u){if(u.endsWith("%")){var p=Number(u.replace("%",""))/100;u=d.width*p}else u.endsWith("px")&&(u=Number(u.replace("px","")))}if(c&&"string"==typeof c){if(c.endsWith("%")){var p=Number(c.replace("%",""))/100;c=d.height*p}else c.endsWith("px")&&(c=Number(c.replace("px","")))}var f=l.getBoundingClientRect(),m=f.left,g=f.top,y="window"===this.props.bounds?{left:0,top:0}:o.getBoundingClientRect(),v=y.left,b=y.top,w=this.getOffsetWidth(o),E=this.getOffsetHeight(o),S=t.toLowerCase().endsWith("left"),T=t.toLowerCase().endsWith("right"),C=t.startsWith("top"),A=t.startsWith("bottom");if((S||C)&&this.resizable){var _=(m-v)/i+this.resizable.size.width;this.setState({maxWidth:_>Number(u)?u:_})}if(T||this.props.lockAspectRatio&&!S&&!C){var _=w+(v-m)/i;this.setState({maxWidth:_>Number(u)?u:_})}if((C||S)&&this.resizable){var _=(g-b)/i+this.resizable.size.height;this.setState({maxHeight:_>Number(c)?c:_})}if(A||this.props.lockAspectRatio&&!C&&!S){var _=E+(b-g)/i;this.setState({maxHeight:_>Number(c)?c:_})}}}else this.setState({maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight});this.props.onResizeStart&&this.props.onResizeStart(e,t,r)},t.prototype.onResize=function(e,t,r,i){var n=this,s={x:this.originalPosition.x,y:this.originalPosition.y},a=-i.width,l=-i.height;["top","left","topLeft","bottomLeft","topRight"].includes(t)&&("bottomLeft"===t?s.x+=a:("topRight"===t||(s.x+=a),s.y+=l));var h=this.draggable.state;(s.x!==h.x||s.y!==h.y)&&(0,o.flushSync)(function(){n.draggable.setState(s)}),this.updateOffsetFromParent();var u=this.offsetFromParent,c=this.getDraggablePosition().x+u.left,d=this.getDraggablePosition().y+u.top;this.resizingPosition={x:c,y:d},this.props.onResize&&this.props.onResize(e,t,r,i,{x:c,y:d})},t.prototype.onResizeStop=function(e,t,r,i){this.setState({resizing:!1});var n=this.getMaxSizesFromProps(),s=n.maxWidth,a=n.maxHeight;this.setState({maxWidth:s,maxHeight:a}),this.props.onResizeStop&&this.props.onResizeStop(e,t,r,i,this.resizingPosition)},t.prototype.updateSize=function(e){this.resizable&&this.resizable.updateSize({width:e.width,height:e.height})},t.prototype.updatePosition=function(e){this.draggable.setState(e)},t.prototype.updateOffsetFromParent=function(){var e=this.props.scale,t=this.getParent(),r=this.getSelfElement();if(!t||null===r)return{top:0,left:0};var i=t.getBoundingClientRect(),n=i.left,s=i.top,a=r.getBoundingClientRect(),o=this.getDraggablePosition(),l=t.scrollLeft,h=t.scrollTop;this.offsetFromParent={left:a.left-n+l-o.x*e,top:a.top-s+h-o.y*e}},t.prototype.render=function(){var e,t=this,r=this.props,n=r.disableDragging,a=r.style,o=r.dragHandleClassName,l=r.position,h=r.onMouseDown,u=r.onMouseUp,c=r.dragAxis,d=r.dragGrid,p=r.bounds,f=r.enableUserSelectHack,m=r.cancel,g=r.children,y=(r.onResizeStart,r.onResize,r.onResizeStop,r.onDragStart,r.onDrag,r.onDragStop,r.resizeHandleStyles),v=r.resizeHandleClasses,b=r.resizeHandleComponent,w=r.enableResizing,E=r.resizeGrid,S=r.resizeHandleWrapperClass,T=r.resizeHandleWrapperStyle,C=r.scale,A=r.allowAnyClick,_=r.dragPositionOffset,x=N(r,["disableDragging","style","dragHandleClassName","position","onMouseDown","onMouseUp","dragAxis","dragGrid","bounds","enableUserSelectHack","cancel","children","onResizeStart","onResize","onResizeStop","onDragStart","onDrag","onDragStop","resizeHandleStyles","resizeHandleClasses","resizeHandleComponent","enableResizing","resizeGrid","resizeHandleWrapperClass","resizeHandleWrapperStyle","scale","allowAnyClick","dragPositionOffset"]),k=this.props.default?R({},this.props.default):void 0;delete x.default;var D=n||o?{cursor:"auto"}:{cursor:"move"},P=R(R(R({},O),D),a),L=this.offsetFromParent,F=L.left,B=L.top;l&&(e={x:l.x-F,y:l.y-B});var U=this.state.resizing?void 0:e,z=this.state.resizing?"both":c;return(0,i.createElement)(s(),{ref:function(e){e&&(t.draggable=e)},handle:o?".".concat(o):void 0,defaultPosition:k,onMouseDown:h,onMouseUp:u,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,axis:z,disabled:n,grid:d,bounds:p?this.state.bounds:void 0,position:U,enableUserSelectHack:f,cancel:m,scale:C,allowAnyClick:A,nodeRef:this.resizableElement,positionOffset:_},(0,i.createElement)(I,R({},x,{ref:function(e){e&&(t.resizable=e,t.resizableElement.current=e.resizable)},defaultSize:k,size:this.props.size,enable:"boolean"==typeof w?M(w):w,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,style:P,minWidth:this.props.minWidth,minHeight:this.props.minHeight,maxWidth:this.state.resizing?this.state.maxWidth:this.props.maxWidth,maxHeight:this.state.resizing?this.state.maxHeight:this.props.maxHeight,grid:E,handleWrapperClass:S,handleWrapperStyle:T,lockAspectRatio:this.props.lockAspectRatio,lockAspectRatioExtraWidth:this.props.lockAspectRatioExtraWidth,lockAspectRatioExtraHeight:this.props.lockAspectRatioExtraHeight,handleStyles:y,handleClasses:v,handleComponent:b,scale:this.props.scale}),g))},t.defaultProps={maxWidth:Number.MAX_SAFE_INTEGER,maxHeight:Number.MAX_SAFE_INTEGER,scale:1,onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){}},t}(i.PureComponent)},8667:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),t.default=void 0;var i=f(r(7577)),n=d(r(8439)),s=d(r(962)),a=d(r(7214)),o=r(4544),l=r(892),h=r(1462),u=d(r(1977)),c=d(r(36));function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function f(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=n?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i}function m(){return(m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e}).apply(this,arguments)}function g(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){var t=v(e,"string");return"symbol"==typeof t?t:String(t)}function v(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}class b extends i.Component{static getDerivedStateFromProps(e,t){let{position:r}=e,{prevPropsPosition:i}=t;return r&&(!i||r.x!==i.x||r.y!==i.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:r,prevPropsPosition:i}),{x:r.x,y:r.y,prevPropsPosition:{...r}}):null}constructor(e){super(e),g(this,"onDragStart",(e,t)=>{if((0,c.default)("Draggable: onDragStart: %j",t),!1===this.props.onStart(e,(0,l.createDraggableData)(this,t)))return!1;this.setState({dragging:!0,dragged:!0})}),g(this,"onDrag",(e,t)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",t);let r=(0,l.createDraggableData)(this,t),i={x:r.x,y:r.y,slackX:0,slackY:0};if(this.props.bounds){let{x:e,y:t}=i;i.x+=this.state.slackX,i.y+=this.state.slackY;let[n,s]=(0,l.getBoundPosition)(this,i.x,i.y);i.x=n,i.y=s,i.slackX=this.state.slackX+(e-i.x),i.slackY=this.state.slackY+(t-i.y),r.x=i.x,r.y=i.y,r.deltaX=i.x-this.state.x,r.deltaY=i.y-this.state.y}if(!1===this.props.onDrag(e,r))return!1;this.setState(i)}),g(this,"onDragStop",(e,t)=>{if(!this.state.dragging||!1===this.props.onStop(e,(0,l.createDraggableData)(this,t)))return!1;(0,c.default)("Draggable: onDragStop: %j",t);let r={dragging:!1,slackX:0,slackY:0};if(this.props.position){let{x:e,y:t}=this.props.position;r.x=e,r.y=t}this.setState(r)}),this.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:{...e.position},slackX:0,slackY:0,isElementSVG:!1},e.position&&!(e.onDrag||e.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){void 0!==window.SVGElement&&this.findDOMNode() instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var e,t;return null!==(e=null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current)&&void 0!==e?e:s.default.findDOMNode(this)}render(){let{axis:e,bounds:t,children:r,defaultPosition:n,defaultClassName:s,defaultClassNameDragging:h,defaultClassNameDragged:c,position:d,positionOffset:p,scale:f,...g}=this.props,y={},v=null,b=!d||this.state.dragging,w=d||n,E={x:(0,l.canDragX)(this)&&b?this.state.x:w.x,y:(0,l.canDragY)(this)&&b?this.state.y:w.y};this.state.isElementSVG?v=(0,o.createSVGTransform)(E,p):y=(0,o.createCSSTransform)(E,p);let S=(0,a.default)(r.props.className||"",s,{[h]:this.state.dragging,[c]:this.state.dragged});return i.createElement(u.default,m({},g,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),i.cloneElement(i.Children.only(r),{className:S,style:{...r.props.style,...y},transform:v}))}}t.default=b,g(b,"displayName","Draggable"),g(b,"propTypes",{...u.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:h.dontSetMe,style:h.dontSetMe,transform:h.dontSetMe}),g(b,"defaultProps",{...u.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})},1977:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=d(r(7577)),n=u(r(8439)),s=u(r(962)),a=r(4544),o=r(892),l=r(1462),h=u(r(36));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(c=function(e){return e?r:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=c(t);if(r&&r.has(e))return r.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var a=n?Object.getOwnPropertyDescriptor(e,s):null;a&&(a.get||a.set)?Object.defineProperty(i,s,a):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i}function p(e,t,r){return(t=f(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){var t=m(e,"string");return"symbol"==typeof t?t:String(t)}function m(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}let g={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},y=g.mouse;class v extends i.Component{constructor(){super(...arguments),p(this,"dragging",!1),p(this,"lastX",NaN),p(this,"lastY",NaN),p(this,"touchIdentifier",null),p(this,"mounted",!1),p(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&"number"==typeof e.button&&0!==e.button)return!1;let t=this.findDOMNode();if(!t||!t.ownerDocument||!t.ownerDocument.body)throw Error("<DraggableCore> not mounted on DragStart!");let{ownerDocument:r}=t;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,a.matchesSelectorAndParentsTo)(e.target,this.props.handle,t)||this.props.cancel&&(0,a.matchesSelectorAndParentsTo)(e.target,this.props.cancel,t))return;"touchstart"===e.type&&e.preventDefault();let i=(0,a.getTouchIdentifier)(e);this.touchIdentifier=i;let n=(0,o.getControlPosition)(e,i,this);if(null==n)return;let{x:s,y:l}=n,u=(0,o.createCoreData)(this,s,l);(0,h.default)("DraggableCore: handleDragStart: %j",u),(0,h.default)("calling",this.props.onStart),!1!==this.props.onStart(e,u)&&!1!==this.mounted&&(this.props.enableUserSelectHack&&(0,a.addUserSelectStyles)(r),this.dragging=!0,this.lastX=s,this.lastY=l,(0,a.addEvent)(r,y.move,this.handleDrag),(0,a.addEvent)(r,y.stop,this.handleDragStop))}),p(this,"handleDrag",e=>{let t=(0,o.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:r,y:i}=t;if(Array.isArray(this.props.grid)){let e=r-this.lastX,t=i-this.lastY;if([e,t]=(0,o.snapToGrid)(this.props.grid,e,t),!e&&!t)return;r=this.lastX+e,i=this.lastY+t}let n=(0,o.createCoreData)(this,r,i);if((0,h.default)("DraggableCore: handleDrag: %j",n),!1===this.props.onDrag(e,n)||!1===this.mounted){try{this.handleDragStop(new MouseEvent("mouseup"))}catch(t){let e=document.createEvent("MouseEvents");e.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(e)}return}this.lastX=r,this.lastY=i}),p(this,"handleDragStop",e=>{if(!this.dragging)return;let t=(0,o.getControlPosition)(e,this.touchIdentifier,this);if(null==t)return;let{x:r,y:i}=t;if(Array.isArray(this.props.grid)){let e=r-this.lastX||0,t=i-this.lastY||0;[e,t]=(0,o.snapToGrid)(this.props.grid,e,t),r=this.lastX+e,i=this.lastY+t}let n=(0,o.createCoreData)(this,r,i);if(!1===this.props.onStop(e,n)||!1===this.mounted)return!1;let s=this.findDOMNode();s&&this.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(s.ownerDocument),(0,h.default)("DraggableCore: handleDragStop: %j",n),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,s&&((0,h.default)("DraggableCore: Removing handlers"),(0,a.removeEvent)(s.ownerDocument,y.move,this.handleDrag),(0,a.removeEvent)(s.ownerDocument,y.stop,this.handleDragStop))}),p(this,"onMouseDown",e=>(y=g.mouse,this.handleDragStart(e))),p(this,"onMouseUp",e=>(y=g.mouse,this.handleDragStop(e))),p(this,"onTouchStart",e=>(y=g.touch,this.handleDragStart(e))),p(this,"onTouchEnd",e=>(y=g.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;let e=this.findDOMNode();e&&(0,a.addEvent)(e,g.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;let e=this.findDOMNode();if(e){let{ownerDocument:t}=e;(0,a.removeEvent)(t,g.mouse.move,this.handleDrag),(0,a.removeEvent)(t,g.touch.move,this.handleDrag),(0,a.removeEvent)(t,g.mouse.stop,this.handleDragStop),(0,a.removeEvent)(t,g.touch.stop,this.handleDragStop),(0,a.removeEvent)(e,g.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,a.removeUserSelectStyles)(t)}}findDOMNode(){var e,t;return null!==(e=this.props)&&void 0!==e&&e.nodeRef?null===(t=this.props)||void 0===t||null===(t=t.nodeRef)||void 0===t?void 0:t.current:s.default.findDOMNode(this)}render(){return i.cloneElement(i.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}t.default=v,p(v,"displayName","DraggableCore"),p(v,"propTypes",{allowAnyClick:n.default.bool,children:n.default.node.isRequired,disabled:n.default.bool,enableUserSelectHack:n.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw Error("Draggable's offsetParent must be a DOM Node.")},grid:n.default.arrayOf(n.default.number),handle:n.default.string,cancel:n.default.string,nodeRef:n.default.object,onStart:n.default.func,onDrag:n.default.func,onStop:n.default.func,onMouseDown:n.default.func,scale:n.default.number,className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe}),p(v,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},7247:(e,t,r)=>{"use strict";let{default:i,DraggableCore:n}=r(8667);e.exports=i,e.exports.default=i,e.exports.DraggableCore=n},4544:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addClassName=C,t.addEvent=u,t.addUserSelectStyles=S,t.createCSSTransform=y,t.createSVGTransform=v,t.getTouch=w,t.getTouchIdentifier=E,t.getTranslation=b,t.innerHeight=f,t.innerWidth=m,t.matchesSelector=l,t.matchesSelectorAndParentsTo=h,t.offsetXYFromParent=g,t.outerHeight=d,t.outerWidth=p,t.removeClassName=A,t.removeEvent=c,t.removeUserSelectStyles=T;var i=r(1462),n=a(r(7972));function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function a(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var o=n?Object.getOwnPropertyDescriptor(e,a):null;o&&(o.get||o.set)?Object.defineProperty(i,a,o):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}let o="";function l(e,t){return o||(o=(0,i.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(t){return(0,i.isFunction)(e[t])})),!!(0,i.isFunction)(e[o])&&e[o](t)}function h(e,t,r){let i=e;do{if(l(i,t))return!0;if(i===r)break;i=i.parentNode}while(i);return!1}function u(e,t,r,i){if(!e)return;let n={capture:!0,...i};e.addEventListener?e.addEventListener(t,r,n):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]=r}function c(e,t,r,i){if(!e)return;let n={capture:!0,...i};e.removeEventListener?e.removeEventListener(t,r,n):e.detachEvent?e.detachEvent("on"+t,r):e["on"+t]=null}function d(e){let t=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return t+((0,i.int)(r.borderTopWidth)+(0,i.int)(r.borderBottomWidth))}function p(e){let t=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return t+((0,i.int)(r.borderLeftWidth)+(0,i.int)(r.borderRightWidth))}function f(e){let t=e.clientHeight,r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,i.int)(r.paddingTop),t-=(0,i.int)(r.paddingBottom)}function m(e){let t=e.clientWidth,r=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,i.int)(r.paddingLeft),t-=(0,i.int)(r.paddingRight)}function g(e,t,r){let i=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect();return{x:(e.clientX+t.scrollLeft-i.left)/r,y:(e.clientY+t.scrollTop-i.top)/r}}function y(e,t){let r=b(e,t,"px");return{[(0,n.browserPrefixToKey)("transform",n.default)]:r}}function v(e,t){return b(e,t,"")}function b(e,t,r){let{x:i,y:n}=e,s="translate(".concat(i).concat(r,",").concat(n).concat(r,")");if(t){let e="".concat("string"==typeof t.x?t.x:t.x+r),i="".concat("string"==typeof t.y?t.y:t.y+r);s="translate(".concat(e,", ").concat(i,")")+s}return s}function w(e,t){return e.targetTouches&&(0,i.findInArray)(e.targetTouches,e=>t===e.identifier)||e.changedTouches&&(0,i.findInArray)(e.changedTouches,e=>t===e.identifier)}function E(e){return e.targetTouches&&e.targetTouches[0]?e.targetTouches[0].identifier:e.changedTouches&&e.changedTouches[0]?e.changedTouches[0].identifier:void 0}function S(e){if(!e)return;let t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t)),e.body&&C(e.body,"react-draggable-transparent-selection")}function T(e){if(e)try{if(e.body&&A(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{let t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}}function C(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function A(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},7972:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.browserPrefixToKey=n,t.browserPrefixToStyle=s,t.default=void 0,t.getPrefix=i;let r=["Moz","Webkit","O","ms"];function i(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";let i=null===(e=window.document)||void 0===e||null===(e=e.documentElement)||void 0===e?void 0:e.style;if(!i||t in i)return"";for(let e=0;e<r.length;e++)if(n(t,r[e]) in i)return r[e];return""}function n(e,t){return t?"".concat(t).concat(a(e)):e}function s(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e}function a(e){let t="",r=!0;for(let i=0;i<e.length;i++)r?(t+=e[i].toUpperCase(),r=!1):"-"===e[i]?r=!0:t+=e[i];return t}t.default=i()},36:(e,t)=>{"use strict";function r(){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},892:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.canDragX=o,t.canDragY=l,t.createCoreData=u,t.createDraggableData=c,t.getBoundPosition=s,t.getControlPosition=h,t.snapToGrid=a;var i=r(1462),n=r(4544);function s(e,t,r){if(!e.props.bounds)return[t,r];let{bounds:s}=e.props;s="string"==typeof s?s:d(s);let a=p(e);if("string"==typeof s){let e;let{ownerDocument:t}=a,r=t.defaultView;if(!((e="parent"===s?a.parentNode:t.querySelector(s))instanceof r.HTMLElement))throw Error('Bounds selector "'+s+'" could not find an element.');let o=e,l=r.getComputedStyle(a),h=r.getComputedStyle(o);s={left:-a.offsetLeft+(0,i.int)(h.paddingLeft)+(0,i.int)(l.marginLeft),top:-a.offsetTop+(0,i.int)(h.paddingTop)+(0,i.int)(l.marginTop),right:(0,n.innerWidth)(o)-(0,n.outerWidth)(a)-a.offsetLeft+(0,i.int)(h.paddingRight)-(0,i.int)(l.marginRight),bottom:(0,n.innerHeight)(o)-(0,n.outerHeight)(a)-a.offsetTop+(0,i.int)(h.paddingBottom)-(0,i.int)(l.marginBottom)}}return(0,i.isNum)(s.right)&&(t=Math.min(t,s.right)),(0,i.isNum)(s.bottom)&&(r=Math.min(r,s.bottom)),(0,i.isNum)(s.left)&&(t=Math.max(t,s.left)),(0,i.isNum)(s.top)&&(r=Math.max(r,s.top)),[t,r]}function a(e,t,r){return[Math.round(t/e[0])*e[0],Math.round(r/e[1])*e[1]]}function o(e){return"both"===e.props.axis||"x"===e.props.axis}function l(e){return"both"===e.props.axis||"y"===e.props.axis}function h(e,t,r){let i="number"==typeof t?(0,n.getTouch)(e,t):null;if("number"==typeof t&&!i)return null;let s=p(r),a=r.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,n.offsetXYFromParent)(i||e,a,r.props.scale)}function u(e,t,r){let n=!(0,i.isNum)(e.lastX),s=p(e);return n?{node:s,deltaX:0,deltaY:0,lastX:t,lastY:r,x:t,y:r}:{node:s,deltaX:t-e.lastX,deltaY:r-e.lastY,lastX:e.lastX,lastY:e.lastY,x:t,y:r}}function c(e,t){let r=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/r,y:e.state.y+t.deltaY/r,deltaX:t.deltaX/r,deltaY:t.deltaY/r,lastX:e.state.x,lastY:e.state.y}}function d(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}function p(e){let t=e.findDOMNode();if(!t)throw Error("<DraggableCore>: Unmounted during event!");return t}},1462:(e,t)=>{"use strict";function r(e,t){for(let r=0,i=e.length;r<i;r++)if(t.apply(t,[e[r],r,e]))return e[r]}function i(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)}function n(e){return"number"==typeof e&&!isNaN(e)}function s(e){return parseInt(e,10)}function a(e,t,r){if(e[t])return Error("Invalid prop ".concat(t," passed to ").concat(r," - do not set this, set it on the child."))}Object.defineProperty(t,"__esModule",{value:!0}),t.dontSetMe=a,t.findInArray=r,t.int=s,t.isFunction=i,t.isNum=n},29:function(e,t){var r;!function(i,n){function s(e){return e.default||e}void 0!==(r=(function(){var e={};return n(e),s(e)}).apply(t,[]))&&(e.exports=r)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;/**
     * @license
     * Copyright 2009 The Closure Library Authors
     * Copyright 2020 Daniel Wirtz / The long.js Authors.
     *
     * Licensed under the Apache License, Version 2.0 (the "License");
     * you may not use this file except in compliance with the License.
     * You may obtain a copy of the License at
     *
     *     http://www.apache.org/licenses/LICENSE-2.0
     *
     * Unless required by applicable law or agreed to in writing, software
     * distributed under the License is distributed on an "AS IS" BASIS,
     * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     * See the License for the specific language governing permissions and
     * limitations under the License.
     *
     * SPDX-License-Identifier: Apache-2.0
     */var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function r(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function i(e){return!0===(e&&e.__isLong__)}function n(e){var t=Math.clz32(e&-e);return e?31-t:t}r.prototype.__isLong__,Object.defineProperty(r.prototype,"__isLong__",{value:!0}),r.isLong=i;var s={},a={};function o(e,t){var r,i,n;return t?(e>>>=0,(n=0<=e&&e<256)&&(i=a[e]))?i:(r=h(e,0,!0),n&&(a[e]=r),r):(e|=0,(n=-128<=e&&e<128)&&(i=s[e]))?i:(r=h(e,e<0?-1:0,!1),n&&(s[e]=r),r)}function l(e,t){if(isNaN(e))return t?v:y;if(t){if(e<0)return v;if(e>=f)return T}else{if(e<=-m)return C;if(e+1>=m)return S}return e<0?l(-e,t).neg():h(e%p|0,e/p|0,t)}function h(e,t,i){return new r(e,t,i)}r.fromInt=o,r.fromNumber=l,r.fromBits=h;var u=Math.pow;function c(e,t,r){if(0===e.length)throw Error("empty string");if("number"==typeof t?(r=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?v:y;if((r=r||10)<2||36<r)throw RangeError("radix");if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return c(e.substring(1),t,r).neg();for(var i,n=l(u(r,8)),s=y,a=0;a<e.length;a+=8){var o=Math.min(8,e.length-a),h=parseInt(e.substring(a,a+o),r);if(o<8){var d=l(u(r,o));s=s.mul(d).add(l(h))}else s=(s=s.mul(n)).add(l(h))}return s.unsigned=t,s}function d(e,t){return"number"==typeof e?l(e,t):"string"==typeof e?c(e,t):h(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}r.fromString=c,r.fromValue=d;var p=4294967296,f=18446744073709552e3,m=0x7fffffffffffffff,g=o(16777216),y=o(0);r.ZERO=y;var v=o(0,!0);r.UZERO=v;var b=o(1);r.ONE=b;var w=o(1,!0);r.UONE=w;var E=o(-1);r.NEG_ONE=E;var S=h(-1,2147483647,!1);r.MAX_VALUE=S;var T=h(-1,-1,!0);r.MAX_UNSIGNED_VALUE=T;var C=h(0,-2147483648,!1);r.MIN_VALUE=C;var A=r.prototype;A.toInt=function(){return this.unsigned?this.low>>>0:this.low},A.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},A.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(!this.eq(C))return"-"+this.neg().toString(e);var t=l(e),r=this.div(t),i=r.mul(t).sub(this);return r.toString(e)+i.toInt().toString(e)}for(var n=l(u(e,6),this.unsigned),s=this,a="";;){var o=s.div(n),h=(s.sub(o.mul(n)).toInt()>>>0).toString(e);if((s=o).isZero())return h+a;for(;h.length<6;)h="0"+h;a=""+h+a}},A.getHighBits=function(){return this.high},A.getHighBitsUnsigned=function(){return this.high>>>0},A.getLowBits=function(){return this.low},A.getLowBitsUnsigned=function(){return this.low>>>0},A.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&(e&1<<t)==0;t--);return 0!=this.high?t+33:t+1},A.isSafeInteger=function(){var e=this.high>>21;return!e||!this.unsigned&&-1===e&&!(0===this.low&&-2097152===this.high)},A.isZero=function(){return 0===this.high&&0===this.low},A.eqz=A.isZero,A.isNegative=function(){return!this.unsigned&&this.high<0},A.isPositive=function(){return this.unsigned||this.high>=0},A.isOdd=function(){return(1&this.low)==1},A.isEven=function(){return(1&this.low)==0},A.equals=function(e){return i(e)||(e=d(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},A.eq=A.equals,A.notEquals=function(e){return!this.eq(e)},A.neq=A.notEquals,A.ne=A.notEquals,A.lessThan=function(e){return 0>this.comp(e)},A.lt=A.lessThan,A.lessThanOrEqual=function(e){return 0>=this.comp(e)},A.lte=A.lessThanOrEqual,A.le=A.lessThanOrEqual,A.greaterThan=function(e){return this.comp(e)>0},A.gt=A.greaterThan,A.greaterThanOrEqual=function(e){return this.comp(e)>=0},A.gte=A.greaterThanOrEqual,A.ge=A.greaterThanOrEqual,A.compare=function(e){if(i(e)||(e=d(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},A.comp=A.compare,A.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(b)},A.neg=A.negate,A.add=function(e){i(e)||(e=d(e));var t,r,n=this.high>>>16,s=65535&this.high,a=this.low>>>16,o=65535&this.low,l=e.high>>>16,u=65535&e.high,c=e.low>>>16,p=65535&e.low,f=0,m=0;return t=0+((r=0+(o+p))>>>16),r&=65535,t+=a+c,m+=t>>>16,t&=65535,m+=s+u,f+=m>>>16,m&=65535,f+=n+l,h(t<<16|r,(f&=65535)<<16|m,this.unsigned)},A.subtract=function(e){return i(e)||(e=d(e)),this.add(e.neg())},A.sub=A.subtract,A.multiply=function(e){if(this.isZero())return this;if(i(e)||(e=d(e)),t)return h(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?v:y;if(this.eq(C))return e.isOdd()?C:y;if(e.eq(C))return this.isOdd()?C:y;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(g)&&e.lt(g))return l(this.toNumber()*e.toNumber(),this.unsigned);var r,n,s=this.high>>>16,a=65535&this.high,o=this.low>>>16,u=65535&this.low,c=e.high>>>16,p=65535&e.high,f=e.low>>>16,m=65535&e.low,b=0,w=0;return r=0+((n=0+u*m)>>>16),n&=65535,r+=o*m,w+=r>>>16,r&=65535,r+=u*f,w+=r>>>16,r&=65535,w+=a*m,b+=w>>>16,w&=65535,w+=o*f,b+=w>>>16,w&=65535,w+=u*p,b+=w>>>16,w&=65535,b+=s*m+a*f+o*p+u*c,h(r<<16|n,(b&=65535)<<16|w,this.unsigned)},A.mul=A.multiply,A.divide=function(e){if(i(e)||(e=d(e)),e.isZero())throw Error("division by zero");if(t){var r,n,s;return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?h((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this}if(this.isZero())return this.unsigned?v:y;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return v;if(e.gt(this.shru(1)))return w;s=v}else{if(this.eq(C))return e.eq(b)||e.eq(E)?C:e.eq(C)?b:(r=this.shr(1).div(e).shl(1)).eq(y)?e.isNegative()?b:E:(n=this.sub(e.mul(r)),s=r.add(n.div(e)));if(e.eq(C))return this.unsigned?v:y;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=y}for(n=this;n.gte(e);){for(var a=Math.ceil(Math.log(r=Math.max(1,Math.floor(n.toNumber()/e.toNumber())))/Math.LN2),o=a<=48?1:u(2,a-48),c=l(r),p=c.mul(e);p.isNegative()||p.gt(n);)r-=o,p=(c=l(r,this.unsigned)).mul(e);c.isZero()&&(c=b),s=s.add(c),n=n.sub(p)}return s},A.div=A.divide,A.modulo=function(e){return(i(e)||(e=d(e)),t)?h((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},A.mod=A.modulo,A.rem=A.modulo,A.not=function(){return h(~this.low,~this.high,this.unsigned)},A.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},A.clz=A.countLeadingZeros,A.countTrailingZeros=function(){return this.low?n(this.low):n(this.high)+32},A.ctz=A.countTrailingZeros,A.and=function(e){return i(e)||(e=d(e)),h(this.low&e.low,this.high&e.high,this.unsigned)},A.or=function(e){return i(e)||(e=d(e)),h(this.low|e.low,this.high|e.high,this.unsigned)},A.xor=function(e){return i(e)||(e=d(e)),h(this.low^e.low,this.high^e.high,this.unsigned)},A.shiftLeft=function(e){return(i(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?h(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):h(0,this.low<<e-32,this.unsigned)},A.shl=A.shiftLeft,A.shiftRight=function(e){return(i(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?h(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):h(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},A.shr=A.shiftRight,A.shiftRightUnsigned=function(e){return(i(e)&&(e=e.toInt()),0==(e&=63))?this:e<32?h(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):32===e?h(this.high,0,this.unsigned):h(this.high>>>e-32,0,this.unsigned)},A.shru=A.shiftRightUnsigned,A.shr_u=A.shiftRightUnsigned,A.rotateLeft=function(e){var t;return(i(e)&&(e=e.toInt()),0==(e&=63))?this:32===e?h(this.high,this.low,this.unsigned):e<32?(t=32-e,h(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(e-=32,t=32-e,h(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},A.rotl=A.rotateLeft,A.rotateRight=function(e){var t;return(i(e)&&(e=e.toInt()),0==(e&=63))?this:32===e?h(this.high,this.low,this.unsigned):e<32?(t=32-e,h(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(e-=32,t=32-e,h(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},A.rotr=A.rotateRight,A.toSigned=function(){return this.unsigned?h(this.low,this.high,!1):this},A.toUnsigned=function(){return this.unsigned?this:h(this.low,this.high,!0)},A.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},A.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},A.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},r.fromBytes=function(e,t,i){return i?r.fromBytesLE(e,t):r.fromBytesBE(e,t)},r.fromBytesLE=function(e,t){return new r(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},r.fromBytesBE=function(e,t){return new r(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)},"function"==typeof BigInt&&(r.fromBigInt=function(e,t){return h(Number(BigInt.asIntN(32,e)),Number(BigInt.asIntN(32,e>>BigInt(32))),t)},r.fromValue=function(e,t){return"bigint"==typeof e?r.fromBigInt(e,t):d(e,t)},A.toBigInt=function(){var e=BigInt(this.low>>>0);return BigInt(this.unsigned?this.high>>>0:this.high)<<BigInt(32)|e}),e.default=r})},3497:(e,t,r)=>{"use strict";let i,n;r.d(t,{Jn:()=>K,qX:()=>j,rh:()=>G,Xd:()=>V,Mq:()=>$,C6:()=>J,ZF:()=>Q,KN:()=>Y});var s=r(7752),a=r(5036),o=r(715);let l=(e,t)=>t.some(t=>e instanceof t);function h(){return i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u(){return n||(n=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}let c=new WeakMap,d=new WeakMap,p=new WeakMap,f=new WeakMap,m=new WeakMap;function g(e){let t=new Promise((t,r)=>{let i=()=>{e.removeEventListener("success",n),e.removeEventListener("error",s)},n=()=>{t(S(e.result)),i()},s=()=>{r(e.error),i()};e.addEventListener("success",n),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&c.set(t,e)}).catch(()=>{}),m.set(t,e),t}function y(e){if(d.has(e))return;let t=new Promise((t,r)=>{let i=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",s),e.removeEventListener("abort",s)},n=()=>{t(),i()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",n),e.addEventListener("error",s),e.addEventListener("abort",s)});d.set(e,t)}let v={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return d.get(e);if("objectStoreNames"===t)return e.objectStoreNames||p.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return S(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function b(e){v=e(v)}function w(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?u().includes(e)?function(...t){return e.apply(T(this),t),S(c.get(this))}:function(...t){return S(e.apply(T(this),t))}:function(t,...r){let i=e.call(T(this),t,...r);return p.set(i,t.sort?t.sort():[t]),S(i)}}function E(e){return"function"==typeof e?w(e):(e instanceof IDBTransaction&&y(e),l(e,h()))?new Proxy(e,v):e}function S(e){if(e instanceof IDBRequest)return g(e);if(f.has(e))return f.get(e);let t=E(e);return t!==e&&(f.set(e,t),m.set(t,e)),t}let T=e=>m.get(e);function C(e,t,{blocked:r,upgrade:i,blocking:n,terminated:s}={}){let a=indexedDB.open(e,t),o=S(a);return i&&a.addEventListener("upgradeneeded",e=>{i(S(a.result),e.oldVersion,e.newVersion,S(a.transaction),e)}),r&&a.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),n&&e.addEventListener("versionchange",e=>n(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}let A=["get","getKey","getAll","getAllKeys","count"],_=["put","add","delete","clear"],x=new Map;function k(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(x.get(t))return x.get(t);let r=t.replace(/FromIndex$/,""),i=t!==r,n=_.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(n||A.includes(r)))return;let s=async function(e,...t){let s=this.transaction(e,n?"readwrite":"readonly"),a=s.store;return i&&(a=a.index(t.shift())),(await Promise.all([a[r](...t),n&&s.done]))[0]};return x.set(t,s),s}b(e=>({...e,get:(t,r,i)=>k(t,r)||e.get(t,r,i),has:(t,r)=>!!k(t,r)||e.has(t,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(!D(e))return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}function D(e){let t=e.getComponent();return(null==t?void 0:t.type)==="VERSION"}let P="@firebase/app",R="0.13.2",N=new a.Yd("@firebase/app"),O="11.10.0",M="[DEFAULT]",L={[P]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/ai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},F=new Map,B=new Map,U=new Map;function z(e,t){try{e.container.addComponent(t)}catch(r){N.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function V(e){let t=e.name;if(U.has(t))return N.debug(`There were multiple attempts to register component ${t}.`),!1;for(let r of(U.set(t,e),F.values()))z(r,e);for(let t of B.values())z(t,e);return!0}function j(e,t){let r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function G(e){return null!=e&&void 0!==e.settings}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let q={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},H=new o.LL("app","Firebase",q);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new s.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw H.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let K=O;function Q(e,t={}){let r=e;"object"!=typeof t&&(t={name:t});let i=Object.assign({name:M,automaticDataCollectionEnabled:!0},t),n=i.name;if("string"!=typeof n||!n)throw H.create("bad-app-name",{appName:String(n)});if(r||(r=(0,o.aH)()),!r)throw H.create("no-options");let a=F.get(n);if(a){if((0,o.vZ)(r,a.options)&&(0,o.vZ)(i,a.config))return a;throw H.create("duplicate-app",{appName:n})}let l=new s.H0(n);for(let e of U.values())l.addComponent(e);let h=new W(r,i,l);return F.set(n,h),h}function $(e=M){let t=F.get(e);if(!t&&e===M&&(0,o.aH)())return Q();if(!t)throw H.create("no-app",{appName:e});return t}function J(){return Array.from(F.values())}function Y(e,t,r){var i;let n=null!==(i=L[e])&&void 0!==i?i:e;r&&(n+=`-${r}`);let a=n.match(/\s|\//),o=t.match(/\s|\//);if(a||o){let e=[`Unable to register library "${n}" with version "${t}":`];a&&e.push(`library name "${n}" contains illegal characters (whitespace or "/")`),a&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),N.warn(e.join(" "));return}V(new s.wA(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let X="firebase-heartbeat-database",Z=1,ee="firebase-heartbeat-store",et=null;function er(){return et||(et=C(X,Z,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ee)}catch(e){console.warn(e)}}}).catch(e=>{throw H.create("idb-open",{originalErrorMessage:e.message})})),et}async function ei(e){try{let t=(await er()).transaction(ee),r=await t.objectStore(ee).get(es(e));return await t.done,r}catch(e){if(e instanceof o.ZR)N.warn(e.message);else{let t=H.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});N.warn(t.message)}}}async function en(e,t){try{let r=(await er()).transaction(ee,"readwrite"),i=r.objectStore(ee);await i.put(t,es(e)),await r.done}catch(e){if(e instanceof o.ZR)N.warn(e.message);else{let t=H.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});N.warn(t.message)}}}function es(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ea=1024,eo=30;class el{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new ec(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=eh();if((null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(e=>e.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:r}),this._heartbeatsCache.heartbeats.length>eo){let e=ep(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){N.warn(e)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)==null||0===this._heartbeatsCache.heartbeats.length)return"";let t=eh(),{heartbeatsToSend:r,unsentEntries:i}=eu(this._heartbeatsCache.heartbeats),n=(0,o.L)(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}catch(e){return N.warn(e),""}}}function eh(){return new Date().toISOString().substring(0,10)}function eu(e,t=ea){let r=[],i=e.slice();for(let n of e){let e=r.find(e=>e.agent===n.agent);if(e){if(e.dates.push(n.date),ed(r)>t){e.dates.pop();break}}else if(r.push({agent:n.agent,dates:[n.date]}),ed(r)>t){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}class ec{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,o.hl)()&&(0,o.eu)().then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await ei(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return en(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){let r=await this.read();return en(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}}}function ed(e){return(0,o.L)(JSON.stringify({version:2,heartbeats:e})).length}function ep(e){if(0===e.length)return -1;let t=0,r=e[0].date;for(let i=1;i<e.length;i++)e[i].date<r&&(r=e[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(e){V(new s.wA("platform-logger",e=>new I(e),"PRIVATE")),V(new s.wA("heartbeat",e=>new el(e),"PRIVATE")),Y(P,R,""),Y(P,R,"esm2017"),Y("fire-js","")})(0)},7752:(e,t,r)=>{"use strict";r.d(t,{H0:()=>h,wA:()=>n});var i=r(715);class n{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new i.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),i=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(e){if(i)return null;throw e}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(l(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}}clearInstance(e=s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=s){return this.instances.has(e)}getOptions(e=s){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[e,t]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(e)&&t.resolve(i);return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),n=null!==(r=this.onInitCallbacks.get(i))&&void 0!==r?r:new Set;n.add(e),this.onInitCallbacks.set(i,n);let s=this.instances.get(i);return s&&e(s,i),()=>{n.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:o(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(e){}return r||null}normalizeInstanceIdentifier(e=s){return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function o(e){return e===s?void 0:e}function l(e){return"EAGER"===e.instantiationMode}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},5036:(e,t,r)=>{"use strict";var i;r.d(t,{Yd:()=>h,in:()=>i});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));let s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},a=i.INFO,o={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=(e,t,...r)=>{if(t<e.logLevel)return;let i=new Date().toISOString(),n=o[t];if(n)console[n](`[${i}]  ${e.name}:`,...r);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class h{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,n.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}},715:(e,t,r)=>{"use strict";r.d(t,{BH:()=>w,LL:()=>F,ZR:()=>L,tV:()=>c,L:()=>u,Sg:()=>T,vZ:()=>z,aH:()=>b,P0:()=>v,Rd:()=>d,m9:()=>j,z$:()=>I,Xx:()=>E,hl:()=>N,G6:()=>P,WO:()=>R,Uo:()=>S,dp:()=>k,eu:()=>O});let i=()=>void 0,n={NODE_CLIENT:!1},s=function(e){let t=[],r=0;for(let i=0;i<e.length;i++){let n=e.charCodeAt(i);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:((64512&n)==55296&&i+1<e.length&&(64512&e.charCodeAt(i+1))==56320?(n=65536+((1023&n)<<10)+(1023&e.charCodeAt(++i)),t[r++]=n>>18|240,t[r++]=n>>12&63|128):t[r++]=n>>12|224,t[r++]=n>>6&63|128),t[r++]=63&n|128)}return t},a=function(e){let t=[],r=0,i=0;for(;r<e.length;){let n=e[r++];if(n<128)t[i++]=String.fromCharCode(n);else if(n>191&&n<224){let s=e[r++];t[i++]=String.fromCharCode((31&n)<<6|63&s)}else if(n>239&&n<365){let s=((7&n)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{let s=e[r++],a=e[r++];t[i++]=String.fromCharCode((15&n)<<12|(63&s)<<6|63&a)}}return t.join("")},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let t=0;t<e.length;t+=3){let n=e[t],s=t+1<e.length,a=s?e[t+1]:0,o=t+2<e.length,l=o?e[t+2]:0,h=n>>2,u=(3&n)<<4|a>>4,c=(15&a)<<2|l>>6,d=63&l;o||(d=64,s||(c=64)),i.push(r[h],r[u],r[c],r[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):a(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let r=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let t=0;t<e.length;){let n=r[e.charAt(t++)],s=t<e.length?r[e.charAt(t)]:0,a=++t<e.length?r[e.charAt(t)]:64,o=++t<e.length?r[e.charAt(t)]:64;if(++t,null==n||null==s||null==a||null==o)throw new l;let h=n<<2|s>>4;if(i.push(h),64!==a){let e=s<<4&240|a>>2;if(i.push(e),64!==o){let e=a<<6&192|o;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class l extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let h=function(e){let t=s(e);return o.encodeByteArray(t,!0)},u=function(e){return h(e).replace(/\./g,"")},c=function(e){try{return o.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let p=()=>d().__FIREBASE_DEFAULTS__,f=()=>{if("undefined"==typeof process||void 0===process.env)return;let e=process.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},m=()=>{let e;if("undefined"==typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&c(e[1]);return t&&JSON.parse(t)},g=()=>{try{return i()||p()||f()||m()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},y=e=>{var t,r;return null===(r=null===(t=g())||void 0===t?void 0:t.emulatorHosts)||void 0===r?void 0:r[e]},v=e=>{let t=y(e);if(!t)return;let r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let i=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),i]:[t.substring(0,r),i]},b=()=>{var e;return null===(e=g())||void 0===e?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(e){return!1}}async function S(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let r={alg:"none",type:"JWT"},i=t||"demo-project",n=e.iat||0,s=e.sub||e.user_id;if(!s)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:n,exp:n+3600,auth_time:n,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e),o="";return[u(JSON.stringify(r)),u(JSON.stringify(a)),o].join(".")}let C={};function A(){let e={prod:[],emulator:[]};for(let t of Object.keys(C))C[t]?e.emulator.push(t):e.prod.push(t);return e}function _(e){let t=document.getElementById(e),r=!1;return t||((t=document.createElement("div")).setAttribute("id",e),r=!0),{created:r,element:t}}let x=!1;function k(e,t){if("undefined"==typeof window||"undefined"==typeof document||!E(window.location.host)||C[e]===t||C[e]||x)return;function r(e){return`__firebase__banner__${e}`}C[e]=t;let i="__firebase__banner",n=A().prod.length>0;function s(){let e=document.getElementById(i);e&&e.remove()}function a(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}function o(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}function l(){let e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{x=!0,s()},e}function h(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}function u(){let e=_(i),t=r("text"),s=document.getElementById(t)||document.createElement("span"),u=r("learnmore"),c=document.getElementById(u)||document.createElement("a"),d=r("preprendIcon"),p=document.getElementById(d)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){let t=e.element;a(t),h(c,u);let r=l();o(p,d),t.append(p,s,c,r),document.body.appendChild(t)}n?(s.innerText="Preview backend disconnected.",p.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(p.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,s.innerText="Preview backend running in this workspace."),s.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",u):u()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function D(){var e;let t=null===(e=g())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function P(){return!D()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function R(){return!D()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function N(){try{return"object"==typeof indexedDB}catch(e){return!1}}function O(){return new Promise((e,t)=>{try{let r=!0,i="validate-browser-context-for-indexeddb-analytics-module",n=self.indexedDB.open(i);n.onsuccess=()=>{n.result.close(),r||self.indexedDB.deleteDatabase(i),e(!0)},n.onupgradeneeded=()=>{r=!1},n.onerror=()=>{var e;t((null===(e=n.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let M="FirebaseError";class L extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=M,Object.setPrototypeOf(this,L.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,F.prototype.create)}}class F{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,n=this.errors[e],s=n?B(n,r):"Error",a=`${this.serviceName}: ${s} (${i}).`;return new L(i,a,r)}}function B(e,t){return e.replace(U,(e,r)=>{let i=t[r];return null!=i?String(i):`<${r}?>`})}let U=/\{\$([^}]+)}/g;function z(e,t){if(e===t)return!0;let r=Object.keys(e),i=Object.keys(t);for(let n of r){if(!i.includes(n))return!1;let r=e[n],s=t[n];if(V(r)&&V(s)){if(!z(r,s))return!1}else if(r!==s)return!1}for(let e of i)if(!r.includes(e))return!1;return!0}function V(e){return null!==e&&"object"==typeof e}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j(e){return e&&e._delegate?e._delegate:e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */n.NODE_CLIENT=!0},8057:(e,t,r)=>{"use strict";let i,n,s,a,o,l,h,u,c,d,p,f,m,g,y,v,b,w,E;r.d(t,{Q:()=>l0});var S={};r.r(S),r.d(S,{dQ:()=>s7,ci:()=>s0,bytesToNumberBE:()=>s3,ty:()=>s4,eV:()=>s8,n$:()=>ar,ql:()=>s9,hexToBytes:()=>s2,tL:()=>s6,S5:()=>s5,FF:()=>an});let T="6.15.0";function C(e,t,r){let i=t.split("|").map(e=>e.trim());for(let r=0;r<i.length;r++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}let n=Error(`invalid value for type ${t}`);throw n.code="INVALID_ARGUMENT",n.argument=`value.${r}`,n.value=e,n}async function A(e){let t=Object.keys(e);return(await Promise.all(t.map(t=>Promise.resolve(e[t])))).reduce((e,r,i)=>(e[t[i]]=r,e),{})}function _(e,t,r){for(let i in t){let n=t[i],s=r?r[i]:null;s&&C(n,s,i),Object.defineProperty(e,i,{enumerable:!0,value:n,writable:!1})}}function x(e,t){if(null==e)return"null";if(null==t&&(t=new Set),"object"==typeof e){if(t.has(e))return"[Circular]";t.add(e)}if(Array.isArray(e))return"[ "+e.map(e=>x(e,t)).join(", ")+" ]";if(e instanceof Uint8Array){let t="0123456789abcdef",r="0x";for(let i=0;i<e.length;i++)r+=t[e[i]>>4]+t[15&e[i]];return r}if("object"==typeof e&&"function"==typeof e.toJSON)return x(e.toJSON(),t);switch(typeof e){case"boolean":case"number":case"symbol":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{let r=Object.keys(e);return r.sort(),"{ "+r.map(r=>`${x(r,t)}: ${x(e[r],t)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function k(e,t){return e&&e.code===t}function I(e){return k(e,"CALL_EXCEPTION")}function D(e,t,r){let i,n=e;{let i=[];if(r){if("message"in r||"code"in r||"name"in r)throw Error(`value will overwrite populated values: ${x(r)}`);for(let e in r){if("shortMessage"===e)continue;let t=r[e];i.push(e+"="+x(t))}}i.push(`code=${t}`),i.push(`version=${T}`),i.length&&(e+=" ("+i.join(", ")+")")}switch(t){case"INVALID_ARGUMENT":i=TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":i=RangeError(e);break;default:i=Error(e)}return _(i,{code:t}),r&&Object.assign(i,r),null==i.shortMessage&&_(i,{shortMessage:n}),i}function P(e,t,r,i){if(!e)throw D(t,r,i)}function R(e,t,r,i){P(e,t,"INVALID_ARGUMENT",{argument:r,value:i})}function N(e,t,r){null==r&&(r=""),r&&(r=": "+r),P(e>=t,"missing argument"+r,"MISSING_ARGUMENT",{count:e,expectedCount:t}),P(e<=t,"too many arguments"+r,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}let O=["NFD","NFC","NFKD","NFKC"].reduce((e,t)=>{try{if("test"!=="test".normalize(t))throw Error("bad");if("NFD"===t){let e=String.fromCharCode(233).normalize("NFD"),t=String.fromCharCode(101,769);if(e!==t)throw Error("broken")}e.push(t)}catch(e){}return e},[]);function M(e){P(O.indexOf(e)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:e}})}function L(e,t,r){if(null==r&&(r=""),e!==t){let e=r,t="new";r&&(e+=".",t+=" "+r),P(!1,`private constructor; use ${e}from* methods`,"UNSUPPORTED_OPERATION",{operation:t})}}function F(e,t,r){if(e instanceof Uint8Array)return r?new Uint8Array(e):e;if("string"==typeof e&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){let t=new Uint8Array((e.length-2)/2),r=2;for(let i=0;i<t.length;i++)t[i]=parseInt(e.substring(r,r+2),16),r+=2;return t}R(!1,"invalid BytesLike value",t||"value",e)}function B(e,t){return F(e,t,!1)}function U(e,t){return F(e,t,!0)}function z(e,t){return!!("string"==typeof e&&e.match(/^0x[0-9A-Fa-f]*$/))&&("number"!=typeof t||e.length===2+2*t)&&(!0!==t||e.length%2==0)}function V(e){return z(e,!0)||e instanceof Uint8Array}let j="0123456789abcdef";function G(e){let t=B(e),r="0x";for(let e=0;e<t.length;e++){let i=t[e];r+=j[(240&i)>>4]+j[15&i]}return r}function q(e){return"0x"+e.map(e=>G(e).substring(2)).join("")}function H(e){return z(e,!0)?(e.length-2)/2:B(e).length}function W(e,t,r){let i=B(e);return null!=r&&r>i.length&&P(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:i,length:i.length,offset:r}),G(i.slice(null==t?0:t,null==r?i.length:r))}function K(e,t,r){let i=B(e);P(t>=i.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(i),length:t,offset:t+1});let n=new Uint8Array(t);return n.fill(0),r?n.set(i,t-i.length):n.set(i,0),G(n)}function Q(e,t){return K(e,t,!0)}function $(e,t){return K(e,t,!1)}let J=BigInt(0),Y=BigInt(1),X=9007199254740991;function Z(e,t){let r=ei(e,"value"),i=BigInt(ea(t,"width"));return(P(r>>i===J,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),r>>i-Y)?-((~r&(Y<<i)-Y)+Y):r}function ee(e,t){let r=er(e,"value"),i=BigInt(ea(t,"width")),n=Y<<i-Y;return r<J?(P((r=-r)<=n,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),(~r&(Y<<i)-Y)+Y):(P(r<n,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),r)}function et(e,t){return ei(e,"value")&(Y<<BigInt(ea(t,"bits")))-Y}function er(e,t){switch(typeof e){case"bigint":return e;case"number":return R(Number.isInteger(e),"underflow",t||"value",e),R(e>=-X&&e<=X,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw Error("empty string");if("-"===e[0]&&"-"!==e[1])return-BigInt(e.substring(1));return BigInt(e)}catch(r){R(!1,`invalid BigNumberish string: ${r.message}`,t||"value",e)}}R(!1,"invalid BigNumberish value",t||"value",e)}function ei(e,t){let r=er(e,t);return P(r>=J,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),r}let en="0123456789abcdef";function es(e){if(e instanceof Uint8Array){let t="0x0";for(let r of e)t+=en[r>>4]+en[15&r];return BigInt(t)}return er(e)}function ea(e,t){switch(typeof e){case"bigint":return R(e>=-X&&e<=X,"overflow",t||"value",e),Number(e);case"number":return R(Number.isInteger(e),"underflow",t||"value",e),R(e>=-X&&e<=X,"overflow",t||"value",e),e;case"string":try{if(""===e)throw Error("empty string");return ea(BigInt(e),t)}catch(r){R(!1,`invalid numeric string: ${r.message}`,t||"value",e)}}R(!1,"invalid numeric value",t||"value",e)}function eo(e){return ea(es(e))}function el(e,t){let r=ei(e,"value").toString(16);if(null==t)r.length%2&&(r="0"+r);else{let i=ea(t,"width");for(P(2*i>=r.length,`value exceeds width (${i} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});r.length<2*i;)r="0"+r}return"0x"+r}function eh(e){let t=ei(e,"value");if(t===J)return new Uint8Array([]);let r=t.toString(16);r.length%2&&(r="0"+r);let i=new Uint8Array(r.length/2);for(let e=0;e<i.length;e++){let t=2*e;i[e]=parseInt(r.substring(t,t+2),16)}return i}function eu(e){let t=G(V(e)?e:eh(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return""===t&&(t="0"),"0x"+t}let ec=32,ed=new Uint8Array(32),ep=["then"],ef={},em=new WeakMap;function eg(e){return em.get(e)}function ey(e,t){em.set(e,t)}function ev(e,t){let r=Error(`deferred error during ABI decoding triggered accessing ${e}`);throw r.error=t,r}function eb(e,t,r){return e.indexOf(null)>=0?t.map((e,t)=>e instanceof ew?eb(eg(e),e,r):e):e.reduce((e,i,n)=>{let s=t.getValue(i);return i in e||(r&&s instanceof ew&&(s=eb(eg(s),s,r)),e[i]=s),e},{})}class ew extends Array{#e;constructor(...e){let t=e[0],r=e[1],i=(e[2]||[]).slice(),n=!0;t!==ef&&(r=e,i=[],n=!1),super(r.length),r.forEach((e,t)=>{this[t]=e});let s=i.reduce((e,t)=>("string"==typeof t&&e.set(t,(e.get(t)||0)+1),e),new Map);if(ey(this,Object.freeze(r.map((e,t)=>{let r=i[t];return null!=r&&1===s.get(r)?r:null}))),this.#e=[],null==this.#e&&this.#e,!n)return;Object.freeze(this);let a=new Proxy(this,{get:(e,t,r)=>{if("string"==typeof t){if(t.match(/^[0-9]+$/)){let r=ea(t,"%index");if(r<0||r>=this.length)throw RangeError("out of result range");let i=e[r];return i instanceof Error&&ev(`index ${r}`,i),i}if(ep.indexOf(t)>=0)return Reflect.get(e,t,r);let i=e[t];if(i instanceof Function)return function(...t){return i.apply(this===r?e:this,t)};if(!(t in e))return e.getValue.apply(this===r?e:this,[t])}return Reflect.get(e,t,r)}});return ey(a,eg(this)),a}toArray(e){let t=[];return this.forEach((r,i)=>{r instanceof Error&&ev(`index ${i}`,r),e&&r instanceof ew&&(r=r.toArray(e)),t.push(r)}),t}toObject(e){let t=eg(this);return t.reduce((r,i,n)=>(P(null!=i,`value at index ${n} unnamed`,"UNSUPPORTED_OPERATION",{operation:"toObject()"}),eb(t,this,e)),{})}slice(e,t){null==e&&(e=0),e<0&&(e+=this.length)<0&&(e=0),null==t&&(t=this.length),t<0&&(t+=this.length)<0&&(t=0),t>this.length&&(t=this.length);let r=eg(this),i=[],n=[];for(let s=e;s<t;s++)i.push(this[s]),n.push(r[s]);return new ew(ef,i,n)}filter(e,t){let r=eg(this),i=[],n=[];for(let s=0;s<this.length;s++){let a=this[s];a instanceof Error&&ev(`index ${s}`,a),e.call(t,a,s,this)&&(i.push(a),n.push(r[s]))}return new ew(ef,i,n)}map(e,t){let r=[];for(let i=0;i<this.length;i++){let n=this[i];n instanceof Error&&ev(`index ${i}`,n),r.push(e.call(t,n,i,this))}return r}getValue(e){let t=eg(this).indexOf(e);if(-1===t)return;let r=this[t];return r instanceof Error&&ev(`property ${JSON.stringify(e)}`,r.error),r}static fromItems(e,t){return new ew(ef,e,t)}}function eE(e){let t=eh(e);return P(t.length<=ec,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:ec,offset:t.length}),t.length!==ec&&(t=U(q([ed.slice(t.length%ec),t]))),t}class eS{name;type;localName;dynamic;constructor(e,t,r,i){_(this,{name:e,type:t,localName:r,dynamic:i},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){R(!1,e,this.localName,t)}}class eT{#t;#r;constructor(){this.#t=[],this.#r=0}get data(){return q(this.#t)}get length(){return this.#r}#i(e){return this.#t.push(e),this.#r+=e.length,e.length}appendWriter(e){return this.#i(U(e.data))}writeBytes(e){let t=U(e),r=t.length%ec;return r&&(t=U(q([t,ed.slice(r)]))),this.#i(t)}writeValue(e){return this.#i(eE(e))}writeUpdatableValue(){let e=this.#t.length;return this.#t.push(ed),this.#r+=ec,t=>{this.#t[e]=eE(t)}}}class eC{allowLoose;#t;#n;#s;#a;#o;constructor(e,t,r){_(this,{allowLoose:!!t}),this.#t=U(e),this.#s=0,this.#a=null,this.#o=null!=r?r:1024,this.#n=0}get data(){return G(this.#t)}get dataLength(){return this.#t.length}get consumed(){return this.#n}get bytes(){return new Uint8Array(this.#t)}#l(e){if(this.#a)return this.#a.#l(e);this.#s+=e,P(this.#o<1||this.#s<=this.#o*this.dataLength,`compressed ABI data exceeds inflation ratio of ${this.#o} ( see: https://github.com/ethers-io/ethers.js/issues/4537 )`,"BUFFER_OVERRUN",{buffer:U(this.#t),offset:this.#n,length:e,info:{bytesRead:this.#s,dataLength:this.dataLength}})}#h(e,t,r){let i=Math.ceil(t/ec)*ec;return this.#n+i>this.#t.length&&(this.allowLoose&&r&&this.#n+t<=this.#t.length?i=t:P(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:U(this.#t),length:this.#t.length,offset:this.#n+i})),this.#t.slice(this.#n,this.#n+i)}subReader(e){let t=new eC(this.#t.slice(this.#n+e),this.allowLoose,this.#o);return t.#a=this,t}readBytes(e,t){let r=this.#h(0,e,!!t);return this.#l(e),this.#n+=r.length,r.slice(0,e)}readValue(){return es(this.readBytes(ec))}readIndex(){return eo(this.readBytes(ec))}}function eA(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`Wrong positive integer: ${e}`)}function e_(e,...t){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function ex(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");eA(e.outputLen),eA(e.blockLen)}function ek(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function eI(e,t){e_(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}let eD=BigInt(4294967296-1),eP=BigInt(32);function eR(e,t=!1){return t?{h:Number(e&eD),l:Number(e>>eP&eD)}:{h:0|Number(e>>eP&eD),l:0|Number(e&eD)}}function eN(e,t=!1){let r=new Uint32Array(e.length),i=new Uint32Array(e.length);for(let n=0;n<e.length;n++){let{h:s,l:a}=eR(e[n],t);[r[n],i[n]]=[s,a]}return[r,i]}let eO=(e,t,r)=>e<<r|t>>>32-r,eM=(e,t,r)=>t<<r|e>>>32-r,eL=(e,t,r)=>t<<r-32|e>>>64-r,eF=(e,t,r)=>e<<r-32|t>>>64-r;var eB=r(6005),eU=r.t(eB,2);let ez=eU&&"object"==typeof eU&&"webcrypto"in eU?eB.webcrypto:void 0,eV=e=>e instanceof Uint8Array,ej=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),eG=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),eq=(e,t)=>e<<32-t|e>>>t;if(68!==new Uint8Array(new Uint32Array([287454020]).buffer)[0])throw Error("Non little-endian hardware is not supported");function eH(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function eW(e){if("string"==typeof e&&(e=eH(e)),!eV(e))throw Error(`expected Uint8Array, got ${typeof e}`);return e}function eK(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!eV(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}class eQ{clone(){return this._cloneInto()}}function e$(e){let t=t=>e().update(eW(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function eJ(e=32){if(ez&&"function"==typeof ez.getRandomValues)return ez.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}let[eY,eX,eZ]=[[],[],[]],e0=BigInt(0),e1=BigInt(1),e2=BigInt(2),e3=BigInt(7),e4=BigInt(256),e6=BigInt(113);for(let e=0,t=e1,r=1,i=0;e<24;e++){[r,i]=[i,(2*r+3*i)%5],eY.push(2*(5*i+r)),eX.push((e+1)*(e+2)/2%64);let n=e0;for(let e=0;e<7;e++)(t=(t<<e1^(t>>e3)*e6)%e4)&e2&&(n^=e1<<(e1<<BigInt(e))-e1);eZ.push(n)}let[e5,e9]=eN(eZ,!0),e8=(e,t,r)=>r>32?eL(e,t,r):eO(e,t,r),e7=(e,t,r)=>r>32?eF(e,t,r):eM(e,t,r);function te(e,t=24){let r=new Uint32Array(10);for(let i=24-t;i<24;i++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let i=(t+8)%10,n=(t+2)%10,s=r[n],a=r[n+1],o=e8(s,a,1)^r[i],l=e7(s,a,1)^r[i+1];for(let r=0;r<50;r+=10)e[t+r]^=o,e[t+r+1]^=l}let t=e[2],n=e[3];for(let r=0;r<24;r++){let i=eX[r],s=e8(t,n,i),a=e7(t,n,i),o=eY[r];t=e[o],n=e[o+1],e[o]=s,e[o+1]=a}for(let t=0;t<50;t+=10){for(let i=0;i<10;i++)r[i]=e[t+i];for(let i=0;i<10;i++)e[t+i]^=~r[(i+2)%10]&r[(i+4)%10]}e[0]^=e5[i],e[1]^=e9[i]}r.fill(0)}class tt extends eQ{constructor(e,t,r,i=!1,n=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=i,this.rounds=n,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,eA(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=ej(this.state)}keccak(){te(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){ek(this);let{blockLen:t,state:r}=this,i=(e=eW(e)).length;for(let n=0;n<i;){let s=Math.min(t-this.pos,i-n);for(let t=0;t<s;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:i}=this;e[r]^=t,(128&t)!=0&&r===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){ek(this,!1),e_(e),this.finish();let t=this.state,{blockLen:r}=this;for(let i=0,n=e.length;i<n;){this.posOut>=r&&this.keccak();let s=Math.min(r-this.posOut,n-i);e.set(t.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return eA(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(eI(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:i,rounds:n,enableXOF:s}=this;return e||(e=new tt(t,r,i,s,n)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=n,e.suffix=r,e.outputLen=i,e.enableXOF=s,e.destroyed=this.destroyed,e}}let tr=(b=1,w=136,E=32,e$(()=>new tt(w,b,E))),ti=!1,tn=function(e){return tr(e)},ts=tn;function ta(e){let t=B(e,"data");return G(ts(t))}ta._=tn,ta.lock=function(){ti=!0},ta.register=function(e){if(ti)throw TypeError("keccak256 is locked");ts=e},Object.freeze(ta);let to=BigInt(0),tl=BigInt(36);function th(e){let t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let e=0;e<40;e++)r[e]=t[e].charCodeAt(0);let i=B(ta(r));for(let e=0;e<40;e+=2)i[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&i[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}let tu={};for(let e=0;e<10;e++)tu[String(e)]=String(e);for(let e=0;e<26;e++)tu[String.fromCharCode(65+e)]=String(10+e);let tc=15;function td(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>tu[e]).join("");for(;t.length>=tc;){let e=t.substring(0,tc);t=parseInt(e,10)%97+t.substring(e.length)}let r=String(98-parseInt(t,10)%97);for(;r.length<2;)r="0"+r;return r}let tp=function(){let e={};for(let t=0;t<36;t++)e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t);return e}();function tf(e){e=e.toLowerCase();let t=to;for(let r=0;r<e.length;r++)t=t*tl+tp[e[r]];return t}function tm(e){if(R("string"==typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);let t=th(e);return R(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){R(e.substring(2,4)===td(e),"bad icap checksum","address",e);let t=tf(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return th("0x"+t)}R(!1,"invalid address","address",e)}let tg={};function ty(e,t){let r=!1;return t<0&&(r=!0,t*=-1),new tw(tg,`${r?"":"u"}int${t}`,e,{signed:r,width:t})}function tv(e,t){return new tw(tg,`bytes${t||""}`,e,{size:t})}let tb=Symbol.for("_ethers_typed");class tw{type;value;#u;_typedSymbol;constructor(e,t,r,i){null==i&&(i=null),L(tg,e,"Typed"),_(this,{_typedSymbol:tb,type:t,value:r}),this.#u=i,this.format()}format(){if("array"===this.type||"dynamicArray"===this.type)throw Error("");return"tuple"===this.type?`tuple(${this.value.map(e=>e.format()).join(",")})`:this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return this.#u}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===this.#u?-1:!1===this.#u?this.value.length:null}static from(e,t){return new tw(tg,e,t)}static uint8(e){return ty(e,8)}static uint16(e){return ty(e,16)}static uint24(e){return ty(e,24)}static uint32(e){return ty(e,32)}static uint40(e){return ty(e,40)}static uint48(e){return ty(e,48)}static uint56(e){return ty(e,56)}static uint64(e){return ty(e,64)}static uint72(e){return ty(e,72)}static uint80(e){return ty(e,80)}static uint88(e){return ty(e,88)}static uint96(e){return ty(e,96)}static uint104(e){return ty(e,104)}static uint112(e){return ty(e,112)}static uint120(e){return ty(e,120)}static uint128(e){return ty(e,128)}static uint136(e){return ty(e,136)}static uint144(e){return ty(e,144)}static uint152(e){return ty(e,152)}static uint160(e){return ty(e,160)}static uint168(e){return ty(e,168)}static uint176(e){return ty(e,176)}static uint184(e){return ty(e,184)}static uint192(e){return ty(e,192)}static uint200(e){return ty(e,200)}static uint208(e){return ty(e,208)}static uint216(e){return ty(e,216)}static uint224(e){return ty(e,224)}static uint232(e){return ty(e,232)}static uint240(e){return ty(e,240)}static uint248(e){return ty(e,248)}static uint256(e){return ty(e,256)}static uint(e){return ty(e,256)}static int8(e){return ty(e,-8)}static int16(e){return ty(e,-16)}static int24(e){return ty(e,-24)}static int32(e){return ty(e,-32)}static int40(e){return ty(e,-40)}static int48(e){return ty(e,-48)}static int56(e){return ty(e,-56)}static int64(e){return ty(e,-64)}static int72(e){return ty(e,-72)}static int80(e){return ty(e,-80)}static int88(e){return ty(e,-88)}static int96(e){return ty(e,-96)}static int104(e){return ty(e,-104)}static int112(e){return ty(e,-112)}static int120(e){return ty(e,-120)}static int128(e){return ty(e,-128)}static int136(e){return ty(e,-136)}static int144(e){return ty(e,-144)}static int152(e){return ty(e,-152)}static int160(e){return ty(e,-160)}static int168(e){return ty(e,-168)}static int176(e){return ty(e,-176)}static int184(e){return ty(e,-184)}static int192(e){return ty(e,-192)}static int200(e){return ty(e,-200)}static int208(e){return ty(e,-208)}static int216(e){return ty(e,-216)}static int224(e){return ty(e,-224)}static int232(e){return ty(e,-232)}static int240(e){return ty(e,-240)}static int248(e){return ty(e,-248)}static int256(e){return ty(e,-256)}static int(e){return ty(e,-256)}static bytes1(e){return tv(e,1)}static bytes2(e){return tv(e,2)}static bytes3(e){return tv(e,3)}static bytes4(e){return tv(e,4)}static bytes5(e){return tv(e,5)}static bytes6(e){return tv(e,6)}static bytes7(e){return tv(e,7)}static bytes8(e){return tv(e,8)}static bytes9(e){return tv(e,9)}static bytes10(e){return tv(e,10)}static bytes11(e){return tv(e,11)}static bytes12(e){return tv(e,12)}static bytes13(e){return tv(e,13)}static bytes14(e){return tv(e,14)}static bytes15(e){return tv(e,15)}static bytes16(e){return tv(e,16)}static bytes17(e){return tv(e,17)}static bytes18(e){return tv(e,18)}static bytes19(e){return tv(e,19)}static bytes20(e){return tv(e,20)}static bytes21(e){return tv(e,21)}static bytes22(e){return tv(e,22)}static bytes23(e){return tv(e,23)}static bytes24(e){return tv(e,24)}static bytes25(e){return tv(e,25)}static bytes26(e){return tv(e,26)}static bytes27(e){return tv(e,27)}static bytes28(e){return tv(e,28)}static bytes29(e){return tv(e,29)}static bytes30(e){return tv(e,30)}static bytes31(e){return tv(e,31)}static bytes32(e){return tv(e,32)}static address(e){return new tw(tg,"address",e)}static bool(e){return new tw(tg,"bool",!!e)}static bytes(e){return new tw(tg,"bytes",e)}static string(e){return new tw(tg,"string",e)}static array(e,t){throw Error("not implemented yet")}static tuple(e,t){throw Error("not implemented yet")}static overrides(e){return new tw(tg,"overrides",Object.assign({},e))}static isTyped(e){return e&&"object"==typeof e&&"_typedSymbol"in e&&e._typedSymbol===tb}static dereference(e,t){if(tw.isTyped(e)){if(e.type!==t)throw Error(`invalid type: expecetd ${t}, got ${e.type}`);return e.value}return e}}class tE extends eS{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let r=tw.dereference(t,"string");try{r=tm(r)}catch(e){return this._throwError(e.message,t)}return e.writeValue(r)}decode(e){return tm(el(e.readValue(),20))}}class tS extends eS{coder;constructor(e){super(e.name,e.type,"_",e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function tT(e,t,r){let i=[];if(Array.isArray(r))i=r;else if(r&&"object"==typeof r){let e={};i=t.map(t=>{let i=t.localName;return P(i,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:r}),P(!e[i],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:r}),e[i]=!0,r[i]})}else R(!1,"invalid tuple value","tuple",r);R(t.length===i.length,"types/value length mismatch","tuple",r);let n=new eT,s=new eT,a=[];return t.forEach((e,t)=>{let r=i[t];if(e.dynamic){let t=s.length;e.encode(s,r);let i=n.writeUpdatableValue();a.push(e=>{i(e+t)})}else e.encode(n,r)}),a.forEach(e=>{e(n.length)}),e.appendWriter(n)+e.appendWriter(s)}function tC(e,t){let r=[],i=[],n=e.subReader(0);return t.forEach(t=>{let s=null;if(t.dynamic){let r=e.readIndex(),i=n.subReader(r);try{s=t.decode(i)}catch(e){if(k(e,"BUFFER_OVERRUN"))throw e;(s=e).baseType=t.name,s.name=t.localName,s.type=t.type}}else try{s=t.decode(e)}catch(e){if(k(e,"BUFFER_OVERRUN"))throw e;(s=e).baseType=t.name,s.name=t.localName,s.type=t.type}if(void 0==s)throw Error("investigate");r.push(s),i.push(t.localName||null)}),ew.fromItems(r,i)}class tA extends eS{coder;length;constructor(e,t,r){super("array",e.type+"["+(t>=0?t:"")+"]",r,-1===t||e.dynamic),_(this,{coder:e,length:t})}defaultValue(){let e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){let r=tw.dereference(t,"array");Array.isArray(r)||this._throwError("expected array value",r);let i=this.length;-1===i&&(i=r.length,e.writeValue(r.length)),N(r.length,i,"coder array"+(this.localName?" "+this.localName:""));let n=[];for(let e=0;e<r.length;e++)n.push(this.coder);return tT(e,n,r)}decode(e){let t=this.length;-1===t&&P((t=e.readIndex())*ec<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*ec,length:e.dataLength});let r=[];for(let e=0;e<t;e++)r.push(new tS(this.coder));return tC(e,r)}}class t_ extends eS{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){let r=tw.dereference(t,"bool");return e.writeValue(r?1:0)}decode(e){return!!e.readValue()}}class tx extends eS{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){return t=U(t),e.writeValue(t.length)+e.writeBytes(t)}decode(e){return e.readBytes(e.readIndex(),!0)}}class tk extends tx{constructor(e){super("bytes",e)}decode(e){return G(super.decode(e))}}class tI extends eS{size;constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),_(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let r=U(tw.dereference(t,this.type));return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return G(e.readBytes(this.size))}}let tD=new Uint8Array([]);class tP extends eS{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes(tD)}decode(e){return e.readBytes(0),null}}let tR=BigInt(0),tN=BigInt(1),tO=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class tM extends eS{size;signed;constructor(e,t,r){let i=(t?"int":"uint")+8*e;super(i,i,r,!1),_(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let r=er(tw.dereference(t,this.type)),i=et(tO,8*ec);if(this.signed){let e=et(i,8*this.size-1);(r>e||r<-(e+tN))&&this._throwError("value out-of-bounds",t),r=ee(r,8*ec)}else(r<tR||r>et(i,8*this.size))&&this._throwError("value out-of-bounds",t);return e.writeValue(r)}decode(e){let t=et(e.readValue(),8*this.size);return this.signed&&(t=Z(t,8*this.size)),t}}function tL(e,t,r,i,n){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let i=t+1;i<r.length&&r[i]>>6==2;i++)e++;return e}return"OVERRUN"===e?r.length-t-1:0}function tF(e,t,r,i,n){return"OVERLONG"===e?(R("number"==typeof n,"invalid bad code point for replacement","badCodepoint",n),i.push(n),0):(i.push(65533),tL(e,t,r,i,n))}let tB=Object.freeze({error:function(e,t,r,i,n){R(!1,`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:tL,replace:tF});function tU(e,t){null==t&&(t=tB.error);let r=B(e,"bytes"),i=[],n=0;for(;n<r.length;){let e=r[n++];if(e>>7==0){i.push(e);continue}let s=null,a=null;if((224&e)==192)s=1,a=127;else if((240&e)==224)s=2,a=2047;else if((248&e)==240)s=3,a=65535;else{(192&e)==128?n+=t("UNEXPECTED_CONTINUE",n-1,r,i):n+=t("BAD_PREFIX",n-1,r,i);continue}if(n-1+s>=r.length){n+=t("OVERRUN",n-1,r,i);continue}let o=e&(1<<8-s-1)-1;for(let e=0;e<s;e++){let e=r[n];if((192&e)!=128){n+=t("MISSING_CONTINUE",n,r,i),o=null;break}o=o<<6|63&e,n++}if(null!==o){if(o>1114111){n+=t("OUT_OF_RANGE",n-1-s,r,i,o);continue}if(o>=55296&&o<=57343){n+=t("UTF16_SURROGATE",n-1-s,r,i,o);continue}if(o<=a){n+=t("OVERLONG",n-1-s,r,i,o);continue}i.push(o)}}return i}function tz(e,t){R("string"==typeof e,"invalid string value","str",e),null!=t&&(M(t),e=e.normalize(t));let r=[];for(let t=0;t<e.length;t++){let i=e.charCodeAt(t);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(63&i|128);else if((64512&i)==55296){t++;let n=e.charCodeAt(t);R(t<e.length&&(64512&n)==56320,"invalid surrogate pair","str",e);let s=65536+((1023&i)<<10)+(1023&n);r.push(s>>18|240),r.push(s>>12&63|128),r.push(s>>6&63|128),r.push(63&s|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(63&i|128)}return new Uint8Array(r)}function tV(e){return e.map(e=>e<=65535?String.fromCharCode(e):String.fromCharCode(((e-=65536)>>10&1023)+55296,(1023&e)+56320)).join("")}function tj(e,t){return tV(tU(e,t))}class tG extends tx{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,tz(tw.dereference(t,"string")))}decode(e){return tj(super.decode(e))}}class tq extends eS{coders;constructor(e,t){let r=!1,i=[];e.forEach(e=>{e.dynamic&&(r=!0),i.push(e.type)}),super("tuple","tuple("+i.join(",")+")",t,r),_(this,{coders:Object.freeze(e.slice())})}defaultValue(){let e=[];this.coders.forEach(t=>{e.push(t.defaultValue())});let t=this.coders.reduce((e,t)=>{let r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});return this.coders.forEach((r,i)=>{let n=r.localName;n&&1===t[n]&&("length"===n&&(n="_length"),null==e[n]&&(e[n]=e[i]))}),Object.freeze(e)}encode(e,t){let r=tw.dereference(t,"tuple");return tT(e,this.coders,r)}decode(e){return tC(e,this.coders)}}function tH(e){return ta(tz(e))}function tW(e){let t=new Set;return e.forEach(e=>t.add(e)),Object.freeze(t)}let tK=tW("external public payable override".split(" ")),tQ="constant external internal payable private public pure view override",t$=tW(tQ.split(" ")),tJ="constructor error event fallback function receive struct",tY=tW(tJ.split(" ")),tX="calldata memory storage payable indexed",tZ=tW(tX.split(" ")),t0=tW([tJ,tX,"tuple returns",tQ].join(" ").split(" ")),t1={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},t2=RegExp("^(\\s*)"),t3=RegExp("^([0-9]+)"),t4=RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),t6=RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),t5=RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");class t9{#n;#c;get offset(){return this.#n}get length(){return this.#c.length-this.#n}constructor(e){this.#n=0,this.#c=e.slice()}clone(){return new t9(this.#c)}reset(){this.#n=0}#d(e=0,t=0){return new t9(this.#c.slice(e,t).map(t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e}))))}popKeyword(e){let t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw Error(`expected keyword ${t.text}`);return this.pop().text}popType(e){if(this.peek().type!==e){let t=this.peek();throw Error(`expected ${e}; got ${t.type} ${JSON.stringify(t.text)}`)}return this.pop().text}popParen(){let e=this.peek();if("OPEN_PAREN"!==e.type)throw Error("bad start");let t=this.#d(this.#n+1,e.match+1);return this.#n=e.match+1,t}popParams(){let e=this.peek();if("OPEN_PAREN"!==e.type)throw Error("bad start");let t=[];for(;this.#n<e.match-1;){let e=this.peek().linkNext;t.push(this.#d(this.#n+1,e)),this.#n=e}return this.#n=e.match+1,t}peek(){if(this.#n>=this.#c.length)throw Error("out-of-bounds");return this.#c[this.#n]}peekKeyword(e){let t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}peekType(e){if(0===this.length)return null;let t=this.peek();return t.type===e?t.text:null}pop(){let e=this.peek();return this.#n++,e}toString(){let e=[];for(let t=this.#n;t<this.#c.length;t++){let r=this.#c[t];e.push(`${r.type}:${r.text}`)}return`<TokenString ${e.join(" ")}>`}}function t8(e){let t=[],r=t=>{let r=s<e.length?JSON.stringify(e[s]):"$EOI";throw Error(`invalid token ${r} at ${s}: ${t}`)},i=[],n=[],s=0;for(;s<e.length;){let a=e.substring(s),o=a.match(t2);o&&(s+=o[1].length,a=e.substring(s));let l={depth:i.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:s,value:-1};t.push(l);let h=t1[a[0]]||"";if(h){if(l.type=h,l.text=a[0],s++,"OPEN_PAREN"===h)i.push(t.length-1),n.push(t.length-1);else if("CLOSE_PAREN"==h)0===i.length&&r("no matching open bracket"),l.match=i.pop(),t[l.match].match=t.length-1,l.depth--,l.linkBack=n.pop(),t[l.linkBack].linkNext=t.length-1;else if("COMMA"===h)l.linkBack=n.pop(),t[l.linkBack].linkNext=t.length-1,n.push(t.length-1);else if("OPEN_BRACKET"===h)l.type="BRACKET";else if("CLOSE_BRACKET"===h){let e=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){let r=t.pop().text;e=r+e,t[t.length-1].value=ea(r)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw Error("missing opening bracket");t[t.length-1].text+=e}continue}if(o=a.match(t4)){if(l.text=o[1],s+=l.text.length,t0.has(l.text)){l.type="KEYWORD";continue}if(l.text.match(t5)){l.type="TYPE";continue}l.type="ID";continue}if(o=a.match(t3)){l.text=o[1],l.type="NUMBER",s+=l.text.length;continue}throw Error(`unexpected token ${JSON.stringify(a[0])} at position ${s}`)}return new t9(t.map(e=>Object.freeze(e)))}function t7(e,t){let r=[];for(let i in t.keys())e.has(i)&&r.push(i);if(r.length>1)throw Error(`conflicting types: ${r.join(", ")}`)}function re(e,t){if(t.peekKeyword(tY)){let r=t.pop().text;if(r!==e)throw Error(`expected ${e}, got ${r}`)}return t.popType("ID")}function rt(e,t){let r=new Set;for(;;){let i=e.peekType("KEYWORD");if(null==i||t&&!t.has(i))break;if(e.pop(),r.has(i))throw Error(`duplicate keywords: ${JSON.stringify(i)}`);r.add(i)}return Object.freeze(r)}function rr(e){let t=rt(e,t$);return(t7(t,tW("constant payable nonpayable".split(" "))),t7(t,tW("pure view payable nonpayable".split(" "))),t.has("view"))?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function ri(e,t){return e.popParams().map(e=>ry.from(e,t))}function rn(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return er(e.pop().text);throw Error("invalid gas")}return null}function rs(e){if(e.length)throw Error(`unexpected tokens at offset ${e.offset}: ${e.toString()}`)}let ra=new RegExp(/^(.*)\[([0-9]*)\]$/);function ro(e){let t=e.match(t5);if(R(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){let r=parseInt(t[2]);R(0!==r&&r<=32,"invalid bytes length","type",e)}else if(t[3]){let r=parseInt(t[3]);R(0!==r&&r<=256&&r%8==0,"invalid numeric width","type",e)}return e}let rl={},rh=Symbol.for("_ethers_internal"),ru="_ParamTypeInternal",rc="_ErrorInternal",rd="_EventInternal",rp="_ConstructorInternal",rf="_FallbackInternal",rm="_FunctionInternal",rg="_StructInternal";class ry{name;type;baseType;indexed;components;arrayLength;arrayChildren;constructor(e,t,r,i,n,s,a,o){if(L(e,rl,"ParamType"),Object.defineProperty(this,rh,{value:ru}),s&&(s=Object.freeze(s.slice())),"array"===i){if(null==a||null==o)throw Error("")}else if(null!=a||null!=o)throw Error("");if("tuple"===i){if(null==s)throw Error("")}else if(null!=s)throw Error("");_(this,{name:t,type:r,baseType:i,indexed:n,components:s,arrayLength:a,arrayChildren:o})}format(e){if(null==e&&(e="sighash"),"json"===e){let t=this.name||"";if(this.isArray()){let e=JSON.parse(this.arrayChildren.format("json"));return e.name=t,e.type+=`[${this.arrayLength<0?"":String(this.arrayLength)}]`,JSON.stringify(e)}let r={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"==typeof this.indexed&&(r.indexed=this.indexed),this.isTuple()&&(r.components=this.components.map(t=>JSON.parse(t.format(e)))),JSON.stringify(r)}let t="";return this.isArray()?t+=this.arrayChildren.format(e)+`[${this.arrayLength<0?"":String(this.arrayLength)}]`:this.isTuple()?t+="("+this.components.map(t=>t.format(e)).join("full"===e?", ":",")+")":t+=this.type,"sighash"!==e&&(!0===this.indexed&&(t+=" indexed"),"full"===e&&this.name&&(t+=" "+this.name)),t}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw Error("array is wrong length");let r=this;return e.map(e=>r.arrayChildren.walk(e,t))}if(this.isTuple()){if(!Array.isArray(e))throw Error("invalid tuple value");if(e.length!==this.components.length)throw Error("array is wrong length");let r=this;return e.map((e,i)=>r.components[i].walk(e,t))}return t(this.type,e)}#p(e,t,r,i){if(this.isArray()){if(!Array.isArray(t))throw Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw Error("array is wrong length");let n=this.arrayChildren,s=t.slice();s.forEach((t,i)=>{n.#p(e,t,r,e=>{s[i]=e})}),i(s);return}if(this.isTuple()){let n;let s=this.components;if(Array.isArray(t))n=t.slice();else{if(null==t||"object"!=typeof t)throw Error("invalid tuple value");n=s.map(e=>{if(!e.name)throw Error("cannot use object value with unnamed components");if(!(e.name in t))throw Error(`missing value for component ${e.name}`);return t[e.name]})}if(n.length!==this.components.length)throw Error("array is wrong length");n.forEach((t,i)=>{s[i].#p(e,t,r,e=>{n[i]=e})}),i(n);return}let n=r(this.type,t);n.then?e.push(async function(){i(await n)}()):i(n)}async walkAsync(e,t){let r=[],i=[e];return this.#p(r,e,t,e=>{i[0]=e}),r.length&&await Promise.all(r),i[0]}static from(e,t){if(ry.isParamType(e))return e;if("string"==typeof e)try{return ry.from(t8(e),t)}catch(t){R(!1,"invalid param type","obj",e)}else if(e instanceof t9){let r="",i="",n=null;rt(e,tW(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(i="tuple",n=e.popParams().map(e=>ry.from(e)),r=`tuple(${n.map(e=>e.format()).join(",")})`):i=r=ro(e.popType("TYPE"));let s=null,a=null;for(;e.length&&e.peekType("BRACKET");){let t=e.pop();s=new ry(rl,"",r,i,null,n,a,s),a=t.value,r+=t.text,i="array",n=null}let o=null;if(rt(e,tZ).has("indexed")){if(!t)throw Error("");o=!0}let l=e.peekType("ID")?e.pop().text:"";if(e.length)throw Error("leftover tokens");return new ry(rl,l,r,i,o,n,a,s)}let r=e.name;R(!r||"string"==typeof r&&r.match(t6),"invalid name","obj.name",r);let i=e.indexed;null!=i&&(R(t,"parameter cannot be indexed","obj.indexed",e.indexed),i=!!i);let n=e.type,s=n.match(ra);if(s){let t=parseInt(s[2]||"-1"),a=ry.from({type:s[1],components:e.components});return new ry(rl,r||"",n,"array",i,null,t,a)}if("tuple"===n||n.startsWith("tuple(")||n.startsWith("(")){let t=null!=e.components?e.components.map(e=>ry.from(e)):null;return new ry(rl,r||"",n,"tuple",i,t,null,null)}return new ry(rl,r||"",n=ro(e.type),n,i,null,null,null)}static isParamType(e){return e&&e[rh]===ru}}class rv{type;inputs;constructor(e,t,r){L(e,rl,"Fragment"),_(this,{type:t,inputs:r=Object.freeze(r.slice())})}static from(e){if("string"==typeof e){try{rv.from(JSON.parse(e))}catch(e){}return rv.from(t8(e))}if(e instanceof t9)switch(e.peekKeyword(tY)){case"constructor":return rT.from(e);case"error":return rE.from(e);case"event":return rS.from(e);case"fallback":case"receive":return rC.from(e);case"function":return rA.from(e);case"struct":return r_.from(e)}else if("object"==typeof e){switch(e.type){case"constructor":return rT.from(e);case"error":return rE.from(e);case"event":return rS.from(e);case"fallback":case"receive":return rC.from(e);case"function":return rA.from(e);case"struct":return r_.from(e)}P(!1,`unsupported type: ${e.type}`,"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}R(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return rT.isFragment(e)}static isError(e){return rE.isFragment(e)}static isEvent(e){return rS.isFragment(e)}static isFunction(e){return rA.isFragment(e)}static isStruct(e){return r_.isFragment(e)}}class rb extends rv{name;constructor(e,t,r,i){super(e,t,i),R("string"==typeof r&&r.match(t6),"invalid identifier","name",r),i=Object.freeze(i.slice()),_(this,{name:r})}}function rw(e,t){return"("+t.map(t=>t.format(e)).join("full"===e?", ":",")+")"}class rE extends rb{constructor(e,t,r){super(e,"error",t,r),Object.defineProperty(this,rh,{value:rc})}get selector(){return tH(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("error"),t.push(this.name+rw(e,this.inputs)),t.join(" ")}static from(e){if(rE.isFragment(e))return e;if("string"==typeof e)return rE.from(t8(e));if(e instanceof t9){let t=re("error",e),r=ri(e);return rs(e),new rE(rl,t,r)}return new rE(rl,e.name,e.inputs?e.inputs.map(ry.from):[])}static isFragment(e){return e&&e[rh]===rc}}class rS extends rb{anonymous;constructor(e,t,r,i){super(e,"event",t,r),Object.defineProperty(this,rh,{value:rd}),_(this,{anonymous:i})}get topicHash(){return tH(this.format("sighash"))}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("event"),t.push(this.name+rw(e,this.inputs)),"sighash"!==e&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){return new rS(rl,e,t=(t||[]).map(e=>ry.from(e)),!1).topicHash}static from(e){if(rS.isFragment(e))return e;if("string"==typeof e)try{return rS.from(t8(e))}catch(t){R(!1,"invalid event fragment","obj",e)}else if(e instanceof t9){let t=re("event",e),r=ri(e,!0),i=!!rt(e,tW(["anonymous"])).has("anonymous");return rs(e),new rS(rl,t,r,i)}return new rS(rl,e.name,e.inputs?e.inputs.map(e=>ry.from(e,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[rh]===rd}}class rT extends rv{payable;gas;constructor(e,t,r,i,n){super(e,t,r),Object.defineProperty(this,rh,{value:rp}),_(this,{payable:i,gas:n})}format(e){if(P(null!=e&&"sighash"!==e,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===e)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t=[`constructor${rw(e,this.inputs)}`];return this.payable&&t.push("payable"),null!=this.gas&&t.push(`@${this.gas.toString()}`),t.join(" ")}static from(e){if(rT.isFragment(e))return e;if("string"==typeof e)try{return rT.from(t8(e))}catch(t){R(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof t9){rt(e,tW(["constructor"]));let t=ri(e),r=!!rt(e,tK).has("payable"),i=rn(e);return rs(e),new rT(rl,"constructor",t,r,i)}return new rT(rl,"constructor",e.inputs?e.inputs.map(ry.from):[],!!e.payable,null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[rh]===rp}}class rC extends rv{payable;constructor(e,t,r){super(e,"fallback",t),Object.defineProperty(this,rh,{value:rf}),_(this,{payable:r})}format(e){let t=0===this.inputs.length?"receive":"fallback";return"json"===e?JSON.stringify({type:t,stateMutability:this.payable?"payable":"nonpayable"}):`${t}()${this.payable?" payable":""}`}static from(e){if(rC.isFragment(e))return e;if("string"==typeof e)try{return rC.from(t8(e))}catch(t){R(!1,"invalid fallback fragment","obj",e)}else if(e instanceof t9){let t=e.toString();if(R(e.peekKeyword(tW(["fallback","receive"])),"type must be fallback or receive","obj",t),"receive"===e.popKeyword(tW(["fallback","receive"]))){let t=ri(e);return R(0===t.length,"receive cannot have arguments","obj.inputs",t),rt(e,tW(["payable"])),rs(e),new rC(rl,[],!0)}let r=ri(e);r.length?R(1===r.length&&"bytes"===r[0].type,"invalid fallback inputs","obj.inputs",r.map(e=>e.format("minimal")).join(", ")):r=[ry.from("bytes")];let i=rr(e);if(R("nonpayable"===i||"payable"===i,"fallback cannot be constants","obj.stateMutability",i),rt(e,tW(["returns"])).has("returns")){let t=ri(e);R(1===t.length&&"bytes"===t[0].type,"invalid fallback outputs","obj.outputs",t.map(e=>e.format("minimal")).join(", "))}return rs(e),new rC(rl,r,"payable"===i)}return"receive"===e.type?new rC(rl,[],!0):"fallback"===e.type?new rC(rl,[ry.from("bytes")],"payable"===e.stateMutability):void R(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[rh]===rf}}class rA extends rb{constant;outputs;stateMutability;payable;gas;constructor(e,t,r,i,n,s){super(e,"function",t,i),Object.defineProperty(this,rh,{value:rm}),_(this,{constant:"view"===r||"pure"===r,gas:s,outputs:n=Object.freeze(n.slice()),payable:"payable"===r,stateMutability:r})}get selector(){return tH(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e))),outputs:this.outputs.map(t=>JSON.parse(t.format(e)))});let t=[];return"sighash"!==e&&t.push("function"),t.push(this.name+rw(e,this.inputs)),"sighash"!==e&&("nonpayable"!==this.stateMutability&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(rw(e,this.outputs))),null!=this.gas&&t.push(`@${this.gas.toString()}`)),t.join(" ")}static getSelector(e,t){return new rA(rl,e,"view",t=(t||[]).map(e=>ry.from(e)),[],null).selector}static from(e){if(rA.isFragment(e))return e;if("string"==typeof e)try{return rA.from(t8(e))}catch(t){R(!1,"invalid function fragment","obj",e)}else if(e instanceof t9){let t=re("function",e),r=ri(e),i=rr(e),n=[];rt(e,tW(["returns"])).has("returns")&&(n=ri(e));let s=rn(e);return rs(e),new rA(rl,t,i,r,n,s)}let t=e.stateMutability;return null!=t||(t="payable","boolean"==typeof e.constant?(t="view",e.constant||(t="payable","boolean"!=typeof e.payable||e.payable||(t="nonpayable"))):"boolean"!=typeof e.payable||e.payable||(t="nonpayable")),new rA(rl,e.name,t,e.inputs?e.inputs.map(ry.from):[],e.outputs?e.outputs.map(ry.from):[],null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[rh]===rm}}class r_ extends rb{constructor(e,t,r){super(e,"struct",t,r),Object.defineProperty(this,rh,{value:rg})}format(){throw Error("@TODO")}static from(e){if("string"==typeof e)try{return r_.from(t8(e))}catch(t){R(!1,"invalid struct fragment","obj",e)}else if(e instanceof t9){let t=re("struct",e),r=ri(e);return rs(e),new r_(rl,t,r)}return new r_(rl,e.name,e.inputs?e.inputs.map(ry.from):[])}static isFragment(e){return e&&e[rh]===rg}}let rx=new Map;rx.set(0,"GENERIC_PANIC"),rx.set(1,"ASSERT_FALSE"),rx.set(17,"OVERFLOW"),rx.set(18,"DIVIDE_BY_ZERO"),rx.set(33,"ENUM_RANGE_ERROR"),rx.set(34,"BAD_STORAGE_DATA"),rx.set(49,"STACK_UNDERFLOW"),rx.set(50,"ARRAY_RANGE_ERROR"),rx.set(65,"OUT_OF_MEMORY"),rx.set(81,"UNINITIALIZED_FUNCTION_CALL");let rk=new RegExp(/^bytes([0-9]*)$/),rI=new RegExp(/^(u?int)([0-9]*)$/),rD=null,rP=1024;function rR(e,t,r,i){let n="missing revert data",s=null,a=null,o=null;if(r){n="execution reverted";let e=B(r);if(r=G(r),0===e.length)n+=" (no data present; likely require(false) occurred",s="require(false)";else if(e.length%32!=4)n+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===G(e.slice(0,4)))try{s=i.decode(["string"],e.slice(4))[0],o={signature:"Error(string)",name:"Error",args:[s]},n+=`: ${JSON.stringify(s)}`}catch(e){n+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===G(e.slice(0,4)))try{let t=Number(i.decode(["uint256"],e.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[t]},s=`Panic due to ${rx.get(t)||"UNKNOWN"}(${t})`,n+=`: ${s}`}catch(e){n+=" (could not decode panic code)"}else n+=" (unknown custom error)"}let l={to:t.to?tm(t.to):null,data:t.data||"0x"};return t.from&&(l.from=tm(t.from)),D(n,"CALL_EXCEPTION",{action:e,data:r,reason:s,transaction:l,invocation:a,revert:o})}class rN{#f(e){if(e.isArray())return new tA(this.#f(e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new tq(e.components.map(e=>this.#f(e)),e.name);switch(e.baseType){case"address":return new tE(e.name);case"bool":return new t_(e.name);case"string":return new tG(e.name);case"bytes":return new tk(e.name);case"":return new tP(e.name)}let t=e.type.match(rI);if(t){let r=parseInt(t[2]||"256");return R(0!==r&&r<=256&&r%8==0,"invalid "+t[1]+" bit length","param",e),new tM(r/8,"int"===t[1],e.name)}if(t=e.type.match(rk)){let r=parseInt(t[1]);return R(0!==r&&r<=32,"invalid bytes length","param",e),new tI(r,e.name)}R(!1,"invalid type","type",e.type)}getDefaultValue(e){return new tq(e.map(e=>this.#f(ry.from(e))),"_").defaultValue()}encode(e,t){N(t.length,e.length,"types/values length mismatch");let r=new tq(e.map(e=>this.#f(ry.from(e))),"_"),i=new eT;return r.encode(i,t),i.data}decode(e,t,r){return new tq(e.map(e=>this.#f(ry.from(e))),"_").decode(new eC(t,r,rP))}static _setDefaultMaxInflation(e){R("number"==typeof e&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),rP=e}static defaultAbiCoder(){return null==rD&&(rD=new rN),rD}static getBuiltinCallException(e,t,r){return rR(e,t,r,rN.defaultAbiCoder())}}function rO(e){return e&&"function"==typeof e.getAddress}async function rM(e,t){let r=await t;return(null==r||"0x0000000000000000000000000000000000000000"===r)&&(P("string"!=typeof e,"unconfigured name","UNCONFIGURED_NAME",{value:e}),R(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),tm(r)}function rL(e,t){return"string"==typeof e?e.match(/^0x[0-9a-f]{40}$/i)?tm(e):(P(null!=t,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),rM(e,t.resolveName(e))):rO(e)?rM(e,e.getAddress()):e&&"function"==typeof e.then?rM(e,e):void R(!1,"unsupported addressable value","target",e)}let rF=new Uint8Array(32);rF.fill(0);let rB=BigInt(-1),rU=BigInt(0),rz=BigInt(1),rV=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function rj(e){let t=B(e),r=t.length%32;return r?q([t,rF.slice(r)]):G(t)}let rG=el(rz,32),rq=el(rU,32),rH={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},rW=["name","version","chainId","verifyingContract","salt"];function rK(e){return function(t){return R("string"==typeof t,`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}let rQ={name:rK("name"),version:rK("version"),chainId:function(e){let t=er(e,"domain.chainId");return(R(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t))?Number(t):eu(t)},verifyingContract:function(e){try{return tm(e).toLowerCase()}catch(e){}R(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){let t=B(e,"domain.salt");return R(32===t.length,'invalid domain value "salt"',"domain.salt",e),G(t)}};function r$(e){{let t=e.match(/^(u?)int(\d+)$/);if(t){let r=""===t[1],i=parseInt(t[2]);R(i%8==0&&0!==i&&i<=256&&t[2]===String(i),"invalid numeric width","type",e);let n=et(rV,r?i-1:i),s=r?(n+rz)*rB:rU;return function(t){let i=er(t,"value");return R(i>=s&&i<=n,`value out-of-bounds for ${e}`,"value",i),el(r?ee(i,256):i,32)}}}{let t=e.match(/^bytes(\d+)$/);if(t){let r=parseInt(t[1]);return R(0!==r&&r<=32&&t[1]===String(r),"invalid bytes width","type",e),function(t){return R(B(t).length===r,`invalid length for ${e}`,"value",t),rj(t)}}}switch(e){case"address":return function(e){return Q(tm(e),32)};case"bool":return function(e){return e?rG:rq};case"bytes":return function(e){return ta(e)};case"string":return function(e){return tH(e)}}return null}function rJ(e,t){return`${e}(${t.map(({name:e,type:t})=>t+" "+e).join(",")})`}function rY(e){let t=e.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:e}}class rX{primaryType;#m;get types(){return JSON.parse(this.#m)}#g;#y;constructor(e){this.#g=new Map,this.#y=new Map;let t=new Map,r=new Map,i=new Map,n={};for(let s in Object.keys(e).forEach(s=>{n[s]=e[s].map(({name:t,type:r})=>{let{base:i,index:n}=rY(r);return"int"!==i||e.int||(i="int256"),"uint"!==i||e.uint||(i="uint256"),{name:t,type:i+(n||"")}}),t.set(s,new Set),r.set(s,[]),i.set(s,new Set)}),this.#m=JSON.stringify(n),n){let i=new Set;for(let a of n[s]){R(!i.has(a.name),`duplicate variable name ${JSON.stringify(a.name)} in ${JSON.stringify(s)}`,"types",e),i.add(a.name);let n=rY(a.type).base;R(n!==s,`circular type reference to ${JSON.stringify(n)}`,"types",e),r$(n)||(R(r.has(n),`unknown type ${JSON.stringify(n)}`,"types",e),r.get(n).push(s),t.get(s).add(n))}}let s=Array.from(r.keys()).filter(e=>0===r.get(e).length);function a(n,s){for(let o of(R(!s.has(n),`circular type reference to ${JSON.stringify(n)}`,"types",e),s.add(n),t.get(n)))if(r.has(o))for(let e of(a(o,s),s))i.get(e).add(o);s.delete(n)}for(let[t,r]of(R(0!==s.length,"missing primary type","types",e),R(1===s.length,`ambiguous primary types or unused types: ${s.map(e=>JSON.stringify(e)).join(", ")}`,"types",e),_(this,{primaryType:s[0]}),a(this.primaryType,new Set),i)){let e=Array.from(r);e.sort(),this.#g.set(t,rJ(t,n[t])+e.map(e=>rJ(e,n[e])).join(""))}}getEncoder(e){let t=this.#y.get(e);return t||(t=this.#v(e),this.#y.set(e,t)),t}#v(e){{let t=r$(e);if(t)return t}let t=rY(e).array;if(t){let e=t.prefix,r=this.getEncoder(e);return i=>{R(-1===t.count||t.count===i.length,`array length mismatch; expected length ${t.count}`,"value",i);let n=i.map(r);return this.#g.has(e)&&(n=n.map(ta)),ta(q(n))}}let r=this.types[e];if(r){let t=tH(this.#g.get(e));return e=>{let i=r.map(({name:t,type:r})=>{let i=this.getEncoder(r)(e[t]);return this.#g.has(r)?ta(i):i});return i.unshift(t),q(i)}}R(!1,`unknown type: ${e}`,"type",e)}encodeType(e){let t=this.#g.get(e);return R(t,`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return ta(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(r$(e))return r(e,t);let i=rY(e).array;if(i)return R(-1===i.count||i.count===t.length,`array length mismatch; expected length ${i.count}`,"value",t),t.map(e=>this._visit(i.prefix,e,r));let n=this.types[e];if(n)return n.reduce((e,{name:i,type:n})=>(e[i]=this._visit(n,t[i],r),e),{});R(!1,`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new rX(e)}static getPrimaryType(e){return rX.from(e).primaryType}static hashStruct(e,t,r){return rX.from(t).hashStruct(e,r)}static hashDomain(e){let t=[];for(let r in e){if(null==e[r])continue;let i=rH[r];R(i,`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((e,t)=>rW.indexOf(e.name)-rW.indexOf(t.name)),rX.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return q(["0x1901",rX.hashDomain(e),rX.from(t).hash(r)])}static hash(e,t,r){return ta(rX.encode(e,t,r))}static async resolveNames(e,t,r,i){for(let t in e=Object.assign({},e))null==e[t]&&delete e[t];let n={};e.verifyingContract&&!z(e.verifyingContract,20)&&(n[e.verifyingContract]="0x");let s=rX.from(t);for(let e in s.visit(r,(e,t)=>("address"!==e||z(t,20)||(n[t]="0x"),t)),n)n[e]=await i(e);return e.verifyingContract&&n[e.verifyingContract]&&(e.verifyingContract=n[e.verifyingContract]),r=s.visit(r,(e,t)=>"address"===e&&n[t]?n[t]:t),{domain:e,value:r}}static getPayload(e,t,r){rX.hashDomain(e);let i={},n=[];rW.forEach(t=>{let r=e[t];null!=r&&(i[t]=rQ[t](r),n.push({name:t,type:rH[t]}))});let s=rX.from(t),a=Object.assign({},t=s.types);return R(null==a.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",t),a.EIP712Domain=n,s.encode(r),{types:a,domain:i,primaryType:s.primaryType,message:s.visit(r,(e,t)=>{if(e.match(/^bytes(\d*)/))return G(B(t));if(e.match(/^u?int/))return er(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return R("string"==typeof t,"invalid string","value",t),t}R(!1,"unsupported type","type",e)})}}}function rZ(e,t){return{address:tm(e),storageKeys:t.map((e,t)=>(R(z(e,32),"invalid slot",`storageKeys[${t}]`,e),e.toLowerCase()))}}function r0(e){if(Array.isArray(e))return e.map((t,r)=>Array.isArray(t)?(R(2===t.length,"invalid slot set",`value[${r}]`,t),rZ(t[0],t[1])):(R(null!=t&&"object"==typeof t,"invalid address-slot set","value",e),rZ(t.address,t.storageKeys)));R(null!=e&&"object"==typeof e,"invalid access list","value",e);let t=Object.keys(e).map(t=>{let r=e[t].reduce((e,t)=>(e[t]=!0,e),{});return rZ(t,Object.keys(r).sort())});return t.sort((e,t)=>e.address.localeCompare(t.address)),t}let r1="0x0000000000000000000000000000000000000000000000000000000000000000",r2=BigInt(0),r3=BigInt(1),r4=BigInt(2),r6=BigInt(27),r5=BigInt(28),r9=BigInt(35),r8={};function r7(e){return Q(eh(e),32)}class ie{#b;#w;#E;#S;get r(){return this.#b}set r(e){R(32===H(e),"invalid r","value",e),this.#b=G(e)}get s(){return R(8>parseInt(this.#w.substring(0,3)),"non-canonical s; use ._s","s",this.#w),this.#w}set s(e){R(32===H(e),"invalid s","value",e),this.#w=G(e)}get _s(){return this.#w}isValid(){return 8>parseInt(this.#w.substring(0,3))}get v(){return this.#E}set v(e){let t=ea(e,"value");R(27===t||28===t,"invalid v","v",e),this.#E=t}get networkV(){return this.#S}get legacyChainId(){let e=this.networkV;return null==e?null:ie.getChainId(e)}get yParity(){return 27===this.v?0:1}get yParityAndS(){let e=B(this.s);return this.yParity&&(e[0]|=128),G(e)}get compactSerialized(){return q([this.r,this.yParityAndS])}get serialized(){return q([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,r,i){L(e,r8,"Signature"),this.#b=t,this.#w=r,this.#E=i,this.#S=null}[Symbol.for("nodejs.util.inspect.custom")](){return`Signature { r: "${this.r}", s: "${this._s}"${this.isValid()?"":', valid: "false"'}, yParity: ${this.yParity}, networkV: ${this.networkV} }`}clone(){let e=new ie(r8,this.r,this._s,this.v);return this.networkV&&(e.#S=this.networkV),e}toJSON(){let e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){let t=er(e,"v");return t==r6||t==r5?r2:(R(t>=r9,"invalid EIP-155 v","v",e),(t-r9)/r4)}static getChainIdV(e,t){return er(e)*r4+BigInt(35+t-27)}static getNormalizedV(e){let t=er(e);return t===r2||t===r6?27:t===r3||t===r5?28:(R(t>=r9,"invalid v","v",e),t&r3?27:28)}static from(e){function t(t,r){R(t,r,"signature",e)}if(null==e)return new ie(r8,r1,r1,27);if("string"==typeof e){let r=B(e,"signature");if(64===r.length){let e=G(r.slice(0,32)),t=r.slice(32,64),i=128&t[0]?28:27;return t[0]&=127,new ie(r8,e,G(t),i)}if(65===r.length){let e=G(r.slice(0,32)),t=G(r.slice(32,64)),i=ie.getNormalizedV(r[64]);return new ie(r8,e,t,i)}t(!1,"invalid raw signature length")}if(e instanceof ie)return e.clone();let r=e.r;t(null!=r,"missing r");let i=r7(r),n=function(e,r){if(null!=e)return r7(e);if(null!=r){t(z(r,32),"invalid yParityAndS");let e=B(r);return e[0]&=127,G(e)}t(!1,"missing s")}(e.s,e.yParityAndS),{networkV:s,v:a}=function(e,r,i){if(null!=e){let t=er(e);return{networkV:t>=r9?t:void 0,v:ie.getNormalizedV(t)}}if(null!=r)return t(z(r,32),"invalid yParityAndS"),{v:128&B(r)[0]?28:27};if(null!=i){switch(ea(i,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),o=new ie(r8,i,n,a);return s&&(o.#S=s),t(null==e.yParity||ea(e.yParity,"sig.yParity")===o.yParity,"yParity mismatch"),t(null==e.yParityAndS||e.yParityAndS===o.yParityAndS,"yParityAndS mismatch"),o}}function it(e){return{address:tm(e.address),nonce:er(null!=e.nonce?e.nonce:0),chainId:er(null!=e.chainId?e.chainId:0),signature:ie.from(e.signature)}}function ir(e){return U(Buffer.from(e,"base64"))}function ii(e){return Buffer.from(B(e)).toString("base64")}var is=r(3685),ia=r(5687),io=r(9796);function il(e){return async function(t,r){P(null==r||!r.cancelled,"request cancelled before sending","CANCELLED");let i=t.url.split(":")[0].toLowerCase();P("http"===i||"https"===i,`unsupported protocol ${i}`,"UNSUPPORTED_OPERATION",{info:{protocol:i},operation:"request"}),P("https"===i||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let n={method:t.method,headers:Object.assign({},t.headers)};e&&e.agent&&(n.agent=e.agent);let s=null;try{s=new AbortController,n.abort=s.signal}catch(e){console.log(e)}let a=("http"===i?is:ia).request(t.url,n);a.setTimeout(t.timeout);let o=t.body;return o&&a.write(Buffer.from(o)),a.end(),new Promise((e,i)=>{r&&r.addListener(()=>{s&&s.abort(),i(D("request cancelled","CANCELLED"))}),a.on("timeout",()=>{i(D("request timeout","TIMEOUT"))}),a.once("response",n=>{let s=n.statusCode||0,a=n.statusMessage||"",o=Object.keys(n.headers||{}).reduce((e,t)=>{let r=n.headers[t]||"";return Array.isArray(r)&&(r=r.join(", ")),e[t]=r,e},{}),l=null;n.on("data",e=>{if(r)try{r.checkSignal()}catch(e){return i(e)}if(null==l)l=e;else{let t=new Uint8Array(l.length+e.length);t.set(l,0),t.set(e,l.length),l=t}}),n.on("end",()=>{try{"gzip"===o["content-encoding"]&&l&&(l=B((0,io.gunzipSync)(l))),e({statusCode:s,statusMessage:a,headers:o,body:l})}catch(e){i(D("bad response data","SERVER_ERROR",{request:t,info:{response:n,error:e}}))}}),n.on("error",e=>{e.response={statusCode:s,statusMessage:a,headers:o,body:l},i(e)})}),a.on("error",e=>{i(e)})})}}il({});let ih=12,iu=250,ic=il(),id=RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),ip=RegExp("^ipfs://(ipfs/)?(.*)$","i"),im=!1;async function ig(e,t){try{let t=e.match(id);if(!t)throw Error("invalid data");return new iT(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?ir(t[3]):iA(t[3]))}catch(t){return new iT(599,"BAD REQUEST (invalid data: URI)",{},null,new iS(e))}}function iy(e){return async function(t,r){try{let r=t.match(ip);if(!r)throw Error("invalid link");return new iS(`${e}${r[2]}`)}catch(e){return new iT(599,"BAD REQUEST (invalid IPFS URI)",{},null,new iS(t))}}}let iv={data:ig,ipfs:iy("https://gateway.ipfs.io/ipfs/")},ib=new WeakMap;class iw{#T;#C;constructor(e){this.#T=[],this.#C=!1,ib.set(e,()=>{if(!this.#C){for(let e of(this.#C=!0,this.#T))setTimeout(()=>{e()},0);this.#T=[]}})}addListener(e){P(!this.#C,"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),this.#T.push(e)}get cancelled(){return this.#C}checkSignal(){P(!this.cancelled,"cancelled","CANCELLED",{})}}function iE(e){if(null==e)throw Error("missing signal; should not happen");return e.checkSignal(),e}class iS{#A;#_;#x;#k;#I;#D;#P;#R;#N;#O;#M;#L;#F;#B;#U;get url(){return this.#D}set url(e){this.#D=String(e)}get body(){return null==this.#P?null:new Uint8Array(this.#P)}set body(e){if(null==e)this.#P=void 0,this.#R=void 0;else if("string"==typeof e)this.#P=tz(e),this.#R="text/plain";else if(e instanceof Uint8Array)this.#P=e,this.#R="application/octet-stream";else if("object"==typeof e)this.#P=tz(JSON.stringify(e)),this.#R="application/json";else throw Error("invalid body")}hasBody(){return null!=this.#P}get method(){return this.#k?this.#k:this.hasBody()?"POST":"GET"}set method(e){null==e&&(e=""),this.#k=String(e).toUpperCase()}get headers(){let e=Object.assign({},this.#x);return this.#N&&(e.authorization=`Basic ${ii(tz(this.#N))}`),this.allowGzip&&(e["accept-encoding"]="gzip"),null==e["content-type"]&&this.#R&&(e["content-type"]=this.#R),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){this.#x[String(e).toLowerCase()]=String(t)}clearHeaders(){this.#x={}}[Symbol.iterator](){let e=this.headers,t=Object.keys(e),r=0;return{next:()=>{if(r<t.length){let i=t[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return this.#N||null}setCredentials(e,t){R(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),this.#N=`${e}:${t}`}get allowGzip(){return this.#_}set allowGzip(e){this.#_=!!e}get allowInsecureAuthentication(){return!!this.#A}set allowInsecureAuthentication(e){this.#A=!!e}get timeout(){return this.#I}set timeout(e){R(e>=0,"timeout must be non-zero","timeout",e),this.#I=e}get preflightFunc(){return this.#O||null}set preflightFunc(e){this.#O=e}get processFunc(){return this.#M||null}set processFunc(e){this.#M=e}get retryFunc(){return this.#L||null}set retryFunc(e){this.#L=e}get getUrlFunc(){return this.#U||ic}set getUrlFunc(e){this.#U=e}constructor(e){this.#D=String(e),this.#A=!1,this.#_=!0,this.#x={},this.#k="",this.#I=3e5,this.#B={slotInterval:iu,maxAttempts:ih},this.#U=null}toString(){return`<FetchRequest method=${JSON.stringify(this.method)} url=${JSON.stringify(this.url)} headers=${JSON.stringify(this.headers)} body=${this.#P?G(this.#P):"null"}>`}setThrottleParams(e){null!=e.slotInterval&&(this.#B.slotInterval=e.slotInterval),null!=e.maxAttempts&&(this.#B.maxAttempts=e.maxAttempts)}async #z(e,t,r,i,n){if(e>=this.#B.maxAttempts)return n.makeServerError("exceeded maximum retry limit");P(iC()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:i}),r>0&&await i_(r);let s=this.clone(),a=(s.url.split(":")[0]||"").toLowerCase();if(a in iv){let e=await iv[a](s.url,iE(i.#F));if(e instanceof iT){let t=e;if(this.processFunc){iE(i.#F);try{t=await this.processFunc(s,t)}catch(e){(null==e.throttle||"number"!=typeof e.stall)&&t.makeServerError("error in post-processing function",e).assertOk()}}return t}s=e}this.preflightFunc&&(s=await this.preflightFunc(s));let o=await this.getUrlFunc(s,iE(i.#F)),l=new iT(o.statusCode,o.statusMessage,o.headers,o.body,i);if(301===l.statusCode||302===l.statusCode){try{let r=l.headers.location||"";return s.redirect(r).#z(e+1,t,0,i,l)}catch(e){}return l}if(429===l.statusCode&&(null==this.retryFunc||await this.retryFunc(s,l,e))){let r=l.headers["retry-after"],n=this.#B.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return"string"==typeof r&&r.match(/^[1-9][0-9]*$/)&&(n=parseInt(r)),s.clone().#z(e+1,t,n,i,l)}if(this.processFunc){iE(i.#F);try{l=await this.processFunc(s,l)}catch(n){(null==n.throttle||"number"!=typeof n.stall)&&l.makeServerError("error in post-processing function",n).assertOk();let r=this.#B.slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return n.stall>=0&&(r=n.stall),s.clone().#z(e+1,t,r,i,l)}}return l}send(){return P(null==this.#F,"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),this.#F=new iw(this),this.#z(0,iC()+this.timeout,0,this,new iT(0,"",{},null,this))}cancel(){P(null!=this.#F,"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});let e=ib.get(this);if(!e)throw Error("missing signal; should not happen");e()}redirect(e){let t=this.url.split(":")[0].toLowerCase(),r=e.split(":")[0].toLowerCase();P("GET"===this.method&&("https"!==t||"http"!==r)&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:`redirect(${this.method} ${JSON.stringify(this.url)} => ${JSON.stringify(e)})`});let i=new iS(e);return i.method="GET",i.allowGzip=this.allowGzip,i.timeout=this.timeout,i.#x=Object.assign({},this.#x),this.#P&&(i.#P=new Uint8Array(this.#P)),i.#R=this.#R,i}clone(){let e=new iS(this.url);return e.#k=this.#k,this.#P&&(e.#P=this.#P),e.#R=this.#R,e.#x=Object.assign({},this.#x),e.#N=this.#N,this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),e.#O=this.#O,e.#M=this.#M,e.#L=this.#L,e.#B=Object.assign({},this.#B),e.#U=this.#U,e}static lockConfig(){im=!0}static getGateway(e){return iv[e.toLowerCase()]||null}static registerGateway(e,t){if("http"===(e=e.toLowerCase())||"https"===e)throw Error(`cannot intercept ${e}; use registerGetUrl`);if(im)throw Error("gateways locked");iv[e]=t}static registerGetUrl(e){if(im)throw Error("gateways locked");ic=e}static createGetUrlFunc(e){return il(e)}static createDataGateway(){return ig}static createIpfsGatewayFunc(e){return iy(e)}}class iT{#V;#j;#x;#P;#G;#q;toString(){return`<FetchResponse status=${this.statusCode} body=${this.#P?G(this.#P):"null"}>`}get statusCode(){return this.#V}get statusMessage(){return this.#j}get headers(){return Object.assign({},this.#x)}get body(){return null==this.#P?null:new Uint8Array(this.#P)}get bodyText(){try{return null==this.#P?"":tj(this.#P)}catch(e){P(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(e){P(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){let e=this.headers,t=Object.keys(e),r=0;return{next:()=>{if(r<t.length){let i=t[r++];return{value:[i,e[i]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,r,i,n){this.#V=e,this.#j=t,this.#x=Object.keys(r).reduce((e,t)=>(e[t.toLowerCase()]=String(r[t]),e),{}),this.#P=null==i?null:new Uint8Array(i),this.#G=n||null,this.#q={message:""}}makeServerError(e,t){let r;e?r=`CLIENT ESCALATED SERVER ERROR (${this.statusCode} ${this.statusMessage}; ${e})`:(e=`${this.statusCode} ${this.statusMessage}`,r=`CLIENT ESCALATED SERVER ERROR (${e})`);let i=new iT(599,r,this.headers,this.body,this.#G||void 0);return i.#q={message:e,error:t},i}throwThrottleError(e,t){null==t?t=-1:R(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);let r=Error(e||"throttling requests");throw _(r,{stall:t,throttle:!0}),r}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return null!=this.#P}get request(){return this.#G}ok(){return""===this.#q.message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=this.#q;""===e&&(e=`server response ${this.statusCode} ${this.statusMessage}`);let r=null;this.request&&(r=this.request.url);let i=null;try{this.#P&&(i=tj(this.#P))}catch(e){}P(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:r,responseBody:i,responseStatus:`${this.statusCode} ${this.statusMessage}`}})}}function iC(){return new Date().getTime()}function iA(e){return tz(e.replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16))))}function i_(e){return new Promise(t=>setTimeout(t,e))}let ix="0x0000000000000000000000000000000000000000";class ik{fragment;name;signature;topic;args;constructor(e,t,r){let i=e.name,n=e.format();_(this,{fragment:e,name:i,signature:n,topic:t,args:r})}}class iI{fragment;name;args;signature;selector;value;constructor(e,t,r,i){let n=e.name,s=e.format();_(this,{fragment:e,name:n,args:r,signature:s,selector:t,value:i})}}class iD{fragment;name;args;signature;selector;constructor(e,t,r){let i=e.name,n=e.format();_(this,{fragment:e,name:i,args:r,signature:n,selector:t})}}class iP{hash;_isIndexed;static isIndexed(e){return!!(e&&e._isIndexed)}constructor(e){_(this,{hash:e,_isIndexed:!0})}}let iR={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},iN={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>`reverted with reason string ${JSON.stringify(e)}`},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&iR[e.toString()]&&(t=iR[e.toString()]),`reverted with panic code 0x${e.toString(16)} (${t})`}}};class iO{fragments;deploy;fallback;receive;#H;#W;#K;#Q;constructor(e){let t=[];t="string"==typeof e?JSON.parse(e):e,this.#K=new Map,this.#H=new Map,this.#W=new Map;let r=[];for(let e of t)try{r.push(rv.from(e))}catch(t){console.log(`[Warning] Invalid Fragment ${JSON.stringify(e)}:`,t.message)}_(this,{fragments:Object.freeze(r)});let i=null,n=!1;this.#Q=this.getAbiCoder(),this.fragments.forEach((e,t)=>{let r;switch(e.type){case"constructor":if(this.deploy){console.log("duplicate definition - constructor");return}_(this,{deploy:e});return;case"fallback":0===e.inputs.length?n=!0:(R(!i||e.payable!==i.payable,"conflicting fallback fragments",`fragments[${t}]`,e),n=(i=e).payable);return;case"function":r=this.#K;break;case"event":r=this.#W;break;case"error":r=this.#H;break;default:return}let s=e.format();r.has(s)||r.set(s,e)}),this.deploy||_(this,{deploy:rT.from("constructor()")}),_(this,{fallback:i,receive:n})}format(e){let t=e?"minimal":"full";return this.fragments.map(e=>e.format(t))}formatJson(){return JSON.stringify(this.fragments.map(e=>e.format("json")).map(e=>JSON.parse(e)))}getAbiCoder(){return rN.defaultAbiCoder()}#$(e,t,r){if(z(e)){let t=e.toLowerCase();for(let e of this.#K.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){let i=[];for(let[t,r]of this.#K)t.split("(")[0]===e&&i.push(r);if(t){let e=t.length>0?t[t.length-1]:null,r=t.length,n=!0;tw.isTyped(e)&&"overrides"===e.type&&(n=!1,r--);for(let e=i.length-1;e>=0;e--){let t=i[e].inputs.length;t===r||n&&t===r-1||i.splice(e,1)}for(let e=i.length-1;e>=0;e--){let r=i[e].inputs;for(let n=0;n<t.length;n++)if(tw.isTyped(t[n])){if(n>=r.length){if("overrides"===t[n].type)continue;i.splice(e,1);break}if(t[n].type!==r[n].baseType){i.splice(e,1);break}}}}if(1===i.length&&t&&t.length!==i[0].inputs.length){let e=t[t.length-1];(null==e||Array.isArray(e)||"object"!=typeof e)&&i.splice(0,1)}if(0===i.length)return null;if(i.length>1&&r){let t=i.map(e=>JSON.stringify(e.format())).join(", ");R(!1,`ambiguous function description (i.e. matches ${t})`,"key",e)}return i[0]}return this.#K.get(rA.from(e).format())||null}getFunctionName(e){let t=this.#$(e,null,!1);return R(t,"no matching function","key",e),t.name}hasFunction(e){return!!this.#$(e,null,!1)}getFunction(e,t){return this.#$(e,t||null,!0)}forEachFunction(e){let t=Array.from(this.#K.keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let i=t[r];e(this.#K.get(i),r)}}#J(e,t,r){if(z(e)){let t=e.toLowerCase();for(let e of this.#W.values())if(t===e.topicHash)return e;return null}if(-1===e.indexOf("(")){let i=[];for(let[t,r]of this.#W)t.split("(")[0]===e&&i.push(r);if(t){for(let e=i.length-1;e>=0;e--)i[e].inputs.length<t.length&&i.splice(e,1);for(let e=i.length-1;e>=0;e--){let r=i[e].inputs;for(let n=0;n<t.length;n++)if(tw.isTyped(t[n])&&t[n].type!==r[n].baseType){i.splice(e,1);break}}}if(0===i.length)return null;if(i.length>1&&r){let t=i.map(e=>JSON.stringify(e.format())).join(", ");R(!1,`ambiguous event description (i.e. matches ${t})`,"key",e)}return i[0]}return this.#W.get(rS.from(e).format())||null}getEventName(e){let t=this.#J(e,null,!1);return R(t,"no matching event","key",e),t.name}hasEvent(e){return!!this.#J(e,null,!1)}getEvent(e,t){return this.#J(e,t||null,!0)}forEachEvent(e){let t=Array.from(this.#W.keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let i=t[r];e(this.#W.get(i),r)}}getError(e,t){if(z(e)){let t=e.toLowerCase();if(iN[t])return rE.from(iN[t].signature);for(let e of this.#H.values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){let t=[];for(let[r,i]of this.#H)r.split("(")[0]===e&&t.push(i);if(0===t.length)return"Error"===e?rE.from("error Error(string)"):"Panic"===e?rE.from("error Panic(uint256)"):null;if(t.length>1){let r=t.map(e=>JSON.stringify(e.format())).join(", ");R(!1,`ambiguous error description (i.e. ${r})`,"name",e)}return t[0]}return"Error(string)"===(e=rE.from(e).format())?rE.from("error Error(string)"):"Panic(uint256)"===e?rE.from("error Panic(uint256)"):this.#H.get(e)||null}forEachError(e){let t=Array.from(this.#H.keys());t.sort((e,t)=>e.localeCompare(t));for(let r=0;r<t.length;r++){let i=t[r];e(this.#H.get(i),r)}}_decodeParams(e,t){return this.#Q.decode(e,t)}_encodeParams(e,t){return this.#Q.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if("string"==typeof e){let t=this.getError(e);R(t,"unknown error","fragment",e),e=t}return R(W(t,0,4)===e.selector,`data signature does not match error ${e.name}.`,"data",t),this._decodeParams(e.inputs,W(t,4))}encodeErrorResult(e,t){if("string"==typeof e){let t=this.getError(e);R(t,"unknown error","fragment",e),e=t}return q([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if("string"==typeof e){let t=this.getFunction(e);R(t,"unknown function","fragment",e),e=t}return R(W(t,0,4)===e.selector,`data signature does not match function ${e.name}.`,"data",t),this._decodeParams(e.inputs,W(t,4))}encodeFunctionData(e,t){if("string"==typeof e){let t=this.getFunction(e);R(t,"unknown function","fragment",e),e=t}return q([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if("string"==typeof e){let t=this.getFunction(e);R(t,"unknown function","fragment",e),e=t}let r="invalid length for result data",i=U(t);if(i.length%32==0)try{return this.#Q.decode(e.outputs,i)}catch(e){r="could not decode result data"}P(!1,r,"BAD_DATA",{value:G(i),info:{method:e.name,signature:e.format()}})}makeError(e,t){let r=B(e,"data"),i=rN.getBuiltinCallException("call",t,r),n="execution reverted (unknown custom error)";if(i.message.startsWith(n)){let e=G(r.slice(0,4)),t=this.getError(e);if(t)try{let e=this.#Q.decode(t.inputs,r.slice(4));i.revert={name:t.name,signature:t.format(),args:e},i.reason=i.revert.signature,i.message=`execution reverted: ${i.reason}`}catch(e){i.message="execution reverted (coult not decode custom error)"}}let s=this.parseTransaction(t);return s&&(i.invocation={method:s.name,signature:s.signature,args:s.args}),i}encodeFunctionResult(e,t){if("string"==typeof e){let t=this.getFunction(e);R(t,"unknown function","fragment",e),e=t}return G(this.#Q.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if("string"==typeof e){let t=this.getEvent(e);R(t,"unknown event","eventFragment",e),e=t}P(t.length<=e.inputs.length,`too many arguments for ${e.format()}`,"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});let r=[];e.anonymous||r.push(e.topicHash);let i=(e,t)=>"string"===e.type?tH(t):"bytes"===e.type?ta(G(t)):("bool"===e.type&&"boolean"==typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=el(t):e.type.match(/^bytes/)?t=$(t,32):"address"===e.type&&this.#Q.encode(["address"],[t]),Q(G(t),32));for(t.forEach((t,n)=>{let s=e.inputs[n];if(!s.indexed){R(null==t,"cannot filter non-indexed parameters; must be null","contract."+s.name,t);return}null==t?r.push(null):"array"===s.baseType||"tuple"===s.baseType?R(!1,"filtering with tuples or arrays not supported","contract."+s.name,t):Array.isArray(t)?r.push(t.map(e=>i(s,e))):r.push(i(s,t))});r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(e,t){if("string"==typeof e){let t=this.getEvent(e);R(t,"unknown event","eventFragment",e),e=t}let r=[],i=[],n=[];return e.anonymous||r.push(e.topicHash),R(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((e,s)=>{let a=t[s];if(e.indexed){if("string"===e.type)r.push(tH(a));else if("bytes"===e.type)r.push(ta(a));else if("tuple"===e.baseType||"array"===e.baseType)throw Error("not implemented");else r.push(this.#Q.encode([e.type],[a]))}else i.push(e),n.push(a)}),{data:this.#Q.encode(i,n),topics:r}}decodeEventLog(e,t,r){if("string"==typeof e){let t=this.getEvent(e);R(t,"unknown event","eventFragment",e),e=t}if(null!=r&&!e.anonymous){let t=e.topicHash;R(z(r[0],32)&&r[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",r[0]),r=r.slice(1)}let i=[],n=[],s=[];e.inputs.forEach((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(i.push(ry.from({type:"bytes32",name:e.name})),s.push(!0)):(i.push(e),s.push(!1)):(n.push(e),s.push(!1))});let a=null!=r?this.#Q.decode(i,q(r)):null,o=this.#Q.decode(n,t,!0),l=[],h=[],u=0,c=0;return e.inputs.forEach((e,t)=>{let r=null;if(e.indexed){if(null==a)r=new iP(null);else if(s[t])r=new iP(a[c++]);else try{r=a[c++]}catch(e){r=e}}else try{r=o[u++]}catch(e){r=e}l.push(r),h.push(e.name||null)}),ew.fromItems(l,h)}parseTransaction(e){let t=B(e.data,"tx.data"),r=er(null!=e.value?e.value:0,"tx.value"),i=this.getFunction(G(t.slice(0,4)));if(!i)return null;let n=this.#Q.decode(i.inputs,t.slice(4));return new iI(i,i.selector,n,r)}parseCallResult(e){throw Error("@TODO")}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new ik(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){let t=G(e),r=this.getError(W(t,0,4));if(!r)return null;let i=this.#Q.decode(r.inputs,W(t,4));return new iD(r,r.selector,i)}static from(e){return e instanceof iO?e:new iO("string"==typeof e?JSON.parse(e):"function"==typeof e.formatJson?e.formatJson():"function"==typeof e.format?e.format("json"):e)}}let iM=BigInt(0);function iL(e){return null==e?null:e}function iF(e){return null==e?null:e.toString()}class iB{gasPrice;maxFeePerGas;maxPriorityFeePerGas;constructor(e,t,r){_(this,{gasPrice:iL(e),maxFeePerGas:iL(t),maxPriorityFeePerGas:iL(r)})}toJSON(){let{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:r}=this;return{_type:"FeeData",gasPrice:iF(e),maxFeePerGas:iF(t),maxPriorityFeePerGas:iF(r)}}}function iU(e){let t={};for(let r of(e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=G(e.data)),"chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/)))r in e&&null!=e[r]&&(t[r]=er(e[r],`request.${r}`));for(let r of"type,nonce".split(/,/))r in e&&null!=e[r]&&(t[r]=ea(e[r],`request.${r}`));return e.accessList&&(t.accessList=r0(e.accessList)),e.authorizationList&&(t.authorizationList=e.authorizationList.slice()),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),"blobVersionedHashes"in e&&e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.slice()),"kzg"in e&&(t.kzg=e.kzg),"blobs"in e&&e.blobs&&(t.blobs=e.blobs.map(e=>V(e)?G(e):Object.assign({},e))),t}class iz{provider;number;hash;timestamp;parentHash;parentBeaconBlockRoot;nonce;difficulty;gasLimit;gasUsed;stateRoot;receiptsRoot;blobGasUsed;excessBlobGas;miner;prevRandao;extraData;baseFeePerGas;#Y;constructor(e,t){this.#Y=e.transactions.map(e=>"string"!=typeof e?new iG(e,t):e),_(this,{provider:t,hash:iL(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:iL(e.prevRandao),extraData:e.extraData,baseFeePerGas:iL(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return this.#Y.map(e=>"string"==typeof e?e:e.hash)}get prefetchedTransactions(){let e=this.#Y.slice();return 0===e.length?[]:(P("object"==typeof e[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){let{baseFeePerGas:e,difficulty:t,extraData:r,gasLimit:i,gasUsed:n,hash:s,miner:a,prevRandao:o,nonce:l,number:h,parentHash:u,parentBeaconBlockRoot:c,stateRoot:d,receiptsRoot:p,timestamp:f,transactions:m}=this;return{_type:"Block",baseFeePerGas:iF(e),difficulty:iF(t),extraData:r,gasLimit:iF(i),gasUsed:iF(n),blobGasUsed:iF(this.blobGasUsed),excessBlobGas:iF(this.excessBlobGas),hash:s,miner:a,prevRandao:o,nonce:l,number:h,parentHash:u,timestamp:f,parentBeaconBlockRoot:c,stateRoot:d,receiptsRoot:p,transactions:m}}[Symbol.iterator](){let e=0,t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return this.#Y.length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(e){let t;if("number"==typeof e)t=this.#Y[e];else{let r=e.toLowerCase();for(let e of this.#Y){if("string"==typeof e){if(e!==r)continue;t=e;break}if(e.hash===r){t=e;break}}}if(null==t)throw Error("no such tx");return"string"==typeof t?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){let t=this.prefetchedTransactions;if("number"==typeof e)return t[e];for(let r of(e=e.toLowerCase(),t))if(r.hash===e)return r;R(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw Error("");return iq(this)}}class iV{provider;transactionHash;blockHash;blockNumber;removed;address;data;topics;index;transactionIndex;constructor(e,t){this.provider=t;let r=Object.freeze(e.topics.slice());_(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:r,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){let{address:e,blockHash:t,blockNumber:r,data:i,index:n,removed:s,topics:a,transactionHash:o,transactionIndex:l}=this;return{_type:"log",address:e,blockHash:t,blockNumber:r,data:i,index:n,removed:s,topics:a,transactionHash:o,transactionIndex:l}}async getBlock(){let e=await this.provider.getBlock(this.blockHash);return P(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){let e=await this.provider.getTransaction(this.transactionHash);return P(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){let e=await this.provider.getTransactionReceipt(this.transactionHash);return P(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return iK(this)}}class ij{provider;to;from;contractAddress;hash;index;blockHash;blockNumber;logsBloom;gasUsed;blobGasUsed;cumulativeGasUsed;gasPrice;blobGasPrice;type;status;root;#X;constructor(e,t){this.#X=Object.freeze(e.logs.map(e=>new iV(e,t)));let r=iM;null!=e.effectiveGasPrice?r=e.effectiveGasPrice:null!=e.gasPrice&&(r=e.gasPrice),_(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:r,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return this.#X}toJSON(){let{to:e,from:t,contractAddress:r,hash:i,index:n,blockHash:s,blockNumber:a,logsBloom:o,logs:l,status:h,root:u}=this;return{_type:"TransactionReceipt",blockHash:s,blockNumber:a,contractAddress:r,cumulativeGasUsed:iF(this.cumulativeGasUsed),from:t,gasPrice:iF(this.gasPrice),blobGasUsed:iF(this.blobGasUsed),blobGasPrice:iF(this.blobGasPrice),gasUsed:iF(this.gasUsed),hash:i,index:n,logs:l,logsBloom:o,root:u,status:h,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){let e=await this.provider.getBlock(this.blockHash);if(null==e)throw Error("TODO");return e}async getTransaction(){let e=await this.provider.getTransaction(this.hash);if(null==e)throw Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return iW(this)}reorderedEvent(e){return P(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),iH(this,e)}}class iG{provider;blockNumber;blockHash;index;hash;type;to;from;nonce;gasLimit;gasPrice;maxPriorityFeePerGas;maxFeePerGas;maxFeePerBlobGas;data;value;chainId;signature;accessList;blobVersionedHashes;authorizationList;#Z;constructor(e,t){this.provider=t,this.blockNumber=null!=e.blockNumber?e.blockNumber:null,this.blockHash=null!=e.blockHash?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=null!=e.maxPriorityFeePerGas?e.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=e.maxFeePerGas?e.maxFeePerGas:null,this.maxFeePerBlobGas=null!=e.maxFeePerBlobGas?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=null!=e.accessList?e.accessList:null,this.blobVersionedHashes=null!=e.blobVersionedHashes?e.blobVersionedHashes:null,this.authorizationList=null!=e.authorizationList?e.authorizationList:null,this.#Z=-1}toJSON(){let{blockNumber:e,blockHash:t,index:r,hash:i,type:n,to:s,from:a,nonce:o,data:l,signature:h,accessList:u,blobVersionedHashes:c}=this;return{_type:"TransactionResponse",accessList:u,blockNumber:e,blockHash:t,blobVersionedHashes:c,chainId:iF(this.chainId),data:l,from:a,gasLimit:iF(this.gasLimit),gasPrice:iF(this.gasPrice),hash:i,maxFeePerGas:iF(this.maxFeePerGas),maxPriorityFeePerGas:iF(this.maxPriorityFeePerGas),maxFeePerBlobGas:iF(this.maxFeePerBlobGas),nonce:o,signature:h,to:s,index:r,type:n,value:iF(this.value)}}async getBlock(){let e=this.blockNumber;if(null==e){let t=await this.getTransaction();t&&(e=t.blockNumber)}if(null==e)return null;let t=this.provider.getBlock(e);if(null==t)throw Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){let{tx:e,blockNumber:t}=await A({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==e||null==e.blockNumber?0:t-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){let r=null==e?1:e,i=null==t?0:t,n=this.#Z,s=-1,a=-1===n,o=async()=>{if(a)return null;let{blockNumber:e,nonce:t}=await A({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(t<this.nonce){n=e;return}if(a)return null;let i=await this.getTransaction();if(!i||null==i.blockNumber)for(-1===s&&(s=n-3)<this.#Z&&(s=this.#Z);s<=e;){if(a)return null;let t=await this.provider.getBlock(s,!0);if(null==t)break;for(let e of t)if(e===this.hash)return;for(let i=0;i<t.length;i++){let s=await t.getTransaction(i);if(s.from===this.from&&s.nonce===this.nonce){if(a)return null;let t=await this.provider.getTransactionReceipt(s.hash);if(null==t||e-t.blockNumber+1<r)return;let i="replaced";s.data===this.data&&s.to===this.to&&s.value===this.value?i="repriced":"0x"===s.data&&s.from===s.to&&s.value===iM&&(i="cancelled"),P(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===i||"cancelled"===i,reason:i,replacement:s.replaceableTransaction(n),hash:s.hash,receipt:t})}}s++}},l=e=>{if(null==e||0!==e.status)return e;P(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})},h=await this.provider.getTransactionReceipt(this.hash);if(0===r)return l(h);if(h){if(1===r||await h.confirmations()>=r)return l(h)}else if(await o(),0===r)return null;let u=new Promise((e,t)=>{let s=[],h=()=>{s.forEach(e=>e())};if(s.push(()=>{a=!0}),i>0){let e=setTimeout(()=>{h(),t(D("wait for transaction timeout","TIMEOUT"))},i);s.push(()=>{clearTimeout(e)})}let u=async i=>{if(await i.confirmations()>=r){h();try{e(l(i))}catch(e){t(e)}}};if(s.push(()=>{this.provider.off(this.hash,u)}),this.provider.on(this.hash,u),n>=0){let e=async()=>{try{await o()}catch(e){if(k(e,"TRANSACTION_REPLACED")){h(),t(e);return}}a||this.provider.once("block",e)};s.push(()=>{this.provider.off("block",e)}),this.provider.once("block",e)}});return await u}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}removedEvent(){return P(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),iW(this)}reorderedEvent(e){return P(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),P(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),iH(this,e)}replaceableTransaction(e){R(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);let t=new iG(this,this.provider);return t.#Z=e,t}}function iq(e){return{orphan:"drop-block",hash:e.hash,number:e.number}}function iH(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function iW(e){return{orphan:"drop-transaction",tx:e}}function iK(e){return{orphan:"drop-log",log:{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}}}class iQ{filter;emitter;#ee;constructor(e,t,r){this.#ee=t,_(this,{emitter:e,filter:r})}async removeListener(){null!=this.#ee&&await this.emitter.off(this.filter,this.#ee)}}class i$ extends iV{interface;fragment;args;constructor(e,t,r){super(e,e.provider),_(this,{args:t.decodeEventLog(r,e.data,e.topics),fragment:r,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class iJ extends iV{error;constructor(e,t){super(e,e.provider),_(this,{error:t})}}class iY extends ij{#et;constructor(e,t,r){super(r,t),this.#et=e}get logs(){return super.logs.map(e=>{let t=e.topics.length?this.#et.getEvent(e.topics[0]):null;if(t)try{return new i$(e,this.#et,t)}catch(t){return new iJ(e,t)}return e})}}class iX extends iG{#et;constructor(e,t,r){super(r,t),this.#et=e}async wait(e,t){let r=await super.wait(e,t);return null==r?null:new iY(this.#et,this.provider,r)}}class iZ extends iQ{log;constructor(e,t,r,i){super(e,t,r),_(this,{log:i})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class i0 extends iZ{constructor(e,t,r,i,n){super(e,t,r,new i$(n,e.interface,i)),_(this,{args:e.interface.decodeEventLog(i,this.log.data,this.log.topics),fragment:i})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}let i1=BigInt(0);function i2(e){return e&&"function"==typeof e.call}function i3(e){return e&&"function"==typeof e.estimateGas}function i4(e){return e&&"function"==typeof e.resolveName}function i6(e){return e&&"function"==typeof e.sendTransaction}function i5(e){if(null!=e){if(i4(e))return e;if(e.provider)return e.provider}}class i9{#er;fragment;constructor(e,t,r){if(_(this,{fragment:t}),t.inputs.length<r.length)throw Error("too many arguments");let i=i8(e.runner,"resolveName"),n=i4(i)?i:null;this.#er=async function(){let i=await Promise.all(t.inputs.map((e,t)=>null==r[t]?null:e.walkAsync(r[t],(e,t)=>"address"===e?Array.isArray(t)?Promise.all(t.map(e=>rL(e,n))):rL(t,n):t)));return e.interface.encodeFilterTopics(t,i)}()}getTopicFilter(){return this.#er}}function i8(e,t){return null==e?null:"function"==typeof e[t]?e:e.provider&&"function"==typeof e.provider[t]?e.provider:null}function i7(e){return null==e?null:e.provider||null}async function ne(e,t){let r=tw.dereference(e,"overrides");R("object"==typeof r,"invalid overrides parameter","overrides",e);let i=iU(r);return R(null==i.to||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",i.to),R(null==i.data||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",i.data),i.from&&(i.from=i.from),i}async function nt(e,t,r){let i=i8(e,"resolveName"),n=i4(i)?i:null;return await Promise.all(t.map((e,t)=>e.walkAsync(r[t],(e,t)=>(t=tw.dereference(t,e),"address"===e)?rL(t,n):t)))}function nr(e){let t=async function(t){let r=await ne(t,["data"]);r.to=await e.getAddress(),r.from&&(r.from=await rL(r.from,i5(e.runner)));let i=e.interface,n=er(r.value||i1,"overrides.value")===i1,s="0x"===(r.data||"0x");return!i.fallback||i.fallback.payable||!i.receive||s||n||R(!1,"cannot send data to receive or send value to non-payable fallback","overrides",t),R(i.fallback||s,"cannot send data to receive-only contract","overrides.data",r.data),R(i.receive||i.fallback&&i.fallback.payable||n,"cannot send value to non-payable fallback","overrides.value",r.value),R(i.fallback||s,"cannot send data to receive-only contract","overrides.data",r.data),r},r=async function(r){let i=i8(e.runner,"call");P(i2(i),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let n=await t(r);try{return await i.call(n)}catch(t){if(I(t)&&t.data)throw e.interface.makeError(t.data,n);throw t}},i=async function(r){let i=e.runner;P(i6(i),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let n=await i.sendTransaction(await t(r)),s=i7(e.runner);return new iX(e.interface,s,n)},n=async function(r){let i=i8(e.runner,"estimateGas");return P(i3(i),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await i.estimateGas(await t(r))},s=async e=>await i(e);return _(s,{_contract:e,estimateGas:n,populateTransaction:t,send:i,staticCall:r}),s}function ni(e,t){let r=function(...r){let i=e.interface.getFunction(t,r);return P(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),i},i=async function(...t){let i=r(...t),n={};if(i.inputs.length+1===t.length&&(n=await ne(t.pop())).from&&(n.from=await rL(n.from,i5(e.runner))),i.inputs.length!==t.length)throw Error("internal error: fragment inputs doesn't match arguments; should not happen");let s=await nt(e.runner,i.inputs,t);return Object.assign({},n,await A({to:e.getAddress(),data:e.interface.encodeFunctionData(i,s)}))},n=async function(...e){let t=await o(...e);return 1===t.length?t[0]:t},s=async function(...t){let r=e.runner;P(i6(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});let n=await r.sendTransaction(await i(...t)),s=i7(e.runner);return new iX(e.interface,s,n)},a=async function(...t){let r=i8(e.runner,"estimateGas");return P(i3(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await r.estimateGas(await i(...t))},o=async function(...t){let n=i8(e.runner,"call");P(i2(n),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});let s=await i(...t),a="0x";try{a=await n.call(s)}catch(t){if(I(t)&&t.data)throw e.interface.makeError(t.data,s);throw t}let o=r(...t);return e.interface.decodeFunctionResult(o,a)},l=async(...e)=>r(...e).constant?await n(...e):await s(...e);return _(l,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:r,estimateGas:a,populateTransaction:i,send:s,staticCall:n,staticCallResult:o}),Object.defineProperty(l,"fragment",{configurable:!1,enumerable:!0,get:()=>{let r=e.interface.getFunction(t);return P(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),r}}),l}function nn(e,t){let r=function(...r){let i=e.interface.getEvent(t,r);return P(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),i},i=function(...t){return new i9(e,r(...t),t)};return _(i,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:r}),Object.defineProperty(i,"fragment",{configurable:!1,enumerable:!0,get:()=>{let r=e.interface.getEvent(t);return P(r,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),r}}),i}let ns=Symbol.for("_ethersInternal_contract"),na=new WeakMap;function no(e,t){na.set(e[ns],t)}function nl(e){return na.get(e[ns])}function nh(e){return e&&"object"==typeof e&&"getTopicFilter"in e&&"function"==typeof e.getTopicFilter&&e.fragment}async function nu(e,t){let r;let i=null;if(Array.isArray(t)){let i=function(t){if(z(t,32))return t;let r=e.interface.getEvent(t);return R(r,"unknown fragment","name",t),r.topicHash};r=t.map(e=>null==e?null:Array.isArray(e)?e.map(i):i(e))}else"*"===t?r=[null]:"string"==typeof t?z(t,32)?r=[t]:(R(i=e.interface.getEvent(t),"unknown fragment","event",t),r=[i.topicHash]):nh(t)?r=await t.getTopicFilter():"fragment"in t?r=[(i=t.fragment).topicHash]:R(!1,"unknown event name","event",t);return{fragment:i,tag:(r=r.map(e=>{if(null==e)return null;if(Array.isArray(e)){let t=Array.from(new Set(e.map(e=>e.toLowerCase())).values());return 1===t.length?t[0]:(t.sort(),t)}return e.toLowerCase()})).map(e=>null==e?"null":Array.isArray(e)?e.join("|"):e).join("&"),topics:r}}async function nc(e,t){let{subs:r}=nl(e);return r.get((await nu(e,t)).tag)||null}async function nd(e,t,r){let i=i7(e.runner);P(i,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});let{fragment:n,tag:s,topics:a}=await nu(e,r),{addr:o,subs:l}=nl(e),h=l.get(s);if(!h){let t={address:o||e,topics:a},u=t=>{let i=n;if(null==i)try{i=e.interface.getEvent(t.topics[0])}catch(e){}if(i){let s=i,a=n?e.interface.decodeEventLog(n,t.data,t.topics):[];nm(e,r,a,i=>new i0(e,i,r,s,t))}else nm(e,r,[],i=>new iZ(e,i,r,t))},c=[];h={tag:s,listeners:[],start:()=>{c.length||c.push(i.on(t,u))},stop:async()=>{if(0==c.length)return;let e=c;c=[],await Promise.all(e),i.off(t,u)}},l.set(s,h)}return h}let np=Promise.resolve();async function nf(e,t,r,i){await np;let n=await nc(e,t);if(!n)return!1;let s=n.listeners.length;return n.listeners=n.listeners.filter(({listener:t,once:n})=>{let s=Array.from(r);i&&s.push(i(n?null:t));try{t.call(e,...s)}catch(e){}return!n}),0===n.listeners.length&&(n.stop(),nl(e).subs.delete(n.tag)),s>0}async function nm(e,t,r,i){try{await np}catch(e){}let n=nf(e,t,r,i);return np=n,await n}let ng=["then"];class ny{target;interface;runner;filters;[ns];fallback;constructor(e,t,r,i){let n;R("string"==typeof e||rO(e),"invalid value for Contract target","target",e),null==r&&(r=null);let s=iO.from(t);_(this,{target:e,runner:r,interface:s}),Object.defineProperty(this,ns,{value:{}});let a=null,o=null;if(i){let e=i7(r);o=new iX(this.interface,e,i)}let l=new Map;if("string"==typeof e){if(z(e))a=e,n=Promise.resolve(e);else{let t=i8(r,"resolveName");if(!i4(t))throw D("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});n=t.resolveName(e).then(t=>{if(null==t)throw D("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return nl(this).addr=t,t})}}else n=e.getAddress().then(e=>{if(null==e)throw Error("TODO");return nl(this).addr=e,e});return no(this,{addrPromise:n,addr:a,deployTx:o,subs:l}),_(this,{filters:new Proxy({},{get:(e,t,r)=>{if("symbol"==typeof t||ng.indexOf(t)>=0)return Reflect.get(e,t,r);try{return this.getEvent(t)}catch(e){if(!k(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>ng.indexOf(t)>=0?Reflect.has(e,t):Reflect.has(e,t)||this.interface.hasEvent(String(t))})}),_(this,{fallback:s.receive||s.fallback?nr(this):null}),new Proxy(this,{get:(e,t,r)=>{if("symbol"==typeof t||t in e||ng.indexOf(t)>=0)return Reflect.get(e,t,r);try{return e.getFunction(t)}catch(e){if(!k(e,"INVALID_ARGUMENT")||"key"!==e.argument)throw e}},has:(e,t)=>"symbol"==typeof t||t in e||ng.indexOf(t)>=0?Reflect.has(e,t):e.interface.hasFunction(t)})}connect(e){return new ny(this.target,this.interface,e)}attach(e){return new ny(e,this.interface,this.runner)}async getAddress(){return await nl(this).addrPromise}async getDeployedCode(){let e=i7(this.runner);P(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});let t=await e.getCode(await this.getAddress());return"0x"===t?null:t}async waitForDeployment(){let e=this.deploymentTransaction();if(e)return await e.wait(),this;if(null!=await this.getDeployedCode())return this;let t=i7(this.runner);return P(null!=t,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((e,r)=>{let i=async()=>{try{let r=await this.getDeployedCode();if(null!=r)return e(this);t.once("block",i)}catch(e){r(e)}};i()})}deploymentTransaction(){return nl(this).deployTx}getFunction(e){return"string"!=typeof e&&(e=e.format()),ni(this,e)}getEvent(e){return"string"!=typeof e&&(e=e.format()),nn(this,e)}async queryTransaction(e){throw Error("@TODO")}async queryFilter(e,t,r){null==t&&(t=0),null==r&&(r="latest");let{addr:i,addrPromise:n}=nl(this),s=i||await n,{fragment:a,topics:o}=await nu(this,e),l={address:s,topics:o,fromBlock:t,toBlock:r},h=i7(this.runner);return P(h,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await h.getLogs(l)).map(e=>{let t=a;if(null==t)try{t=this.interface.getEvent(e.topics[0])}catch(e){}if(t)try{return new i$(e,this.interface,t)}catch(t){return new iJ(e,t)}return new iV(e,h)})}async on(e,t){let r=await nd(this,"on",e);return r.listeners.push({listener:t,once:!1}),r.start(),this}async once(e,t){let r=await nd(this,"once",e);return r.listeners.push({listener:t,once:!0}),r.start(),this}async emit(e,...t){return await nm(this,e,t,null)}async listenerCount(e){if(e){let t=await nc(this,e);return t?t.listeners.length:0}let{subs:t}=nl(this),r=0;for(let{listeners:e}of t.values())r+=e.length;return r}async listeners(e){if(e){let t=await nc(this,e);return t?t.listeners.map(({listener:e})=>e):[]}let{subs:t}=nl(this),r=[];for(let{listeners:e}of t.values())r=r.concat(e.map(({listener:e})=>e));return r}async off(e,t){let r=await nc(this,e);if(!r)return this;if(t){let e=r.listeners.map(({listener:e})=>e).indexOf(t);e>=0&&r.listeners.splice(e,1)}return(null==t||0===r.listeners.length)&&(r.stop(),nl(this).subs.delete(r.tag)),this}async removeAllListeners(e){if(e){let t=await nc(this,e);if(!t)return this;t.stop(),nl(this).subs.delete(t.tag)}else{let{subs:e}=nl(this);for(let{tag:t,stop:r}of e.values())r(),e.delete(t)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){class t extends ny{constructor(t,r=null){super(t,e,r)}}return t}static from(e,t,r){return null==r&&(r=null),new this(e,t,r)}}function nv(){return ny}class nb extends nv(){}var nw="AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI";let nE=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]),nS=4;function nT(e){let t=0;function r(){return e[t++]<<8|e[t++]}let i=r(),n=1,s=[0,1];for(let e=1;e<i;e++)s.push(n+=r());let a=r(),o=t;t+=a;let l=0,h=0;function u(){return 0==l&&(h=h<<8|e[t++],l=8),h>>--l&1}let c=31,d=2147483648,p=1073741824,f=536870912,m=2147483648-1,g=0;for(let e=0;e<c;e++)g=g<<1|u();let y=[],v=0,b=d;for(;;){let e=Math.floor(((g-v+1)*n-1)/b),t=0,r=i;for(;r-t>1;){let i=t+r>>>1;e<s[i]?r=i:t=i}if(0==t)break;y.push(t);let a=v+Math.floor(b*s[t]/n),o=v+Math.floor(b*s[t+1]/n)-1;for(;((a^o)&p)==0;)g=g<<1&m|u(),a=a<<1&m,o=o<<1&m|1;for(;a&~o&f;)g=g&p|g<<1&m>>>1|u(),a=a<<1^p,o=(o^p)<<1|p|1;v=a,b=1+o-a}let w=i-4;return y.map(t=>{switch(t-w){case 3:return w+65792+(e[o++]<<16|e[o++]<<8|e[o++]);case 2:return w+256+(e[o++]<<8|e[o++]);case 1:return w+e[o++];default:return t-1}})}function nC(e){let t=0;return()=>e[t++]}function nA(e){return nC(nT(n_(e)))}function n_(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((e,r)=>t[e.charCodeAt(0)]=r);let r=e.length,i=new Uint8Array(6*r>>3);for(let n=0,s=0,a=0,o=0;n<r;n++)o=o<<6|t[e.charCodeAt(n)],(a+=6)>=8&&(i[s++]=o>>(a-=8));return i}function nx(e){return 1&e?~e>>1:e>>1}function nk(e,t){let r=Array(e);for(let i=0,n=0;i<e;i++)r[i]=n+=nx(t());return r}function nI(e,t=0){let r=[];for(;;){let i=e(),n=e();if(!n)break;t+=i;for(let e=0;e<n;e++)r.push(t+e);t+=n+1}return r}function nD(e){return nR(()=>{let t=nI(e);if(t.length)return t})}function nP(e){let t=[];for(;;){let r=e();if(0==r)break;t.push(nO(r,e))}for(;;){let r=e()-1;if(r<0)break;t.push(nM(r,e))}return t.flat()}function nR(e){let t=[];for(;;){let r=e(t.length);if(!r)break;t.push(r)}return t}function nN(e,t,r){let i=Array(e).fill().map(()=>[]);for(let n=0;n<t;n++)nk(e,r).forEach((e,t)=>i[t].push(e));return i}function nO(e,t){let r=1+t(),i=t(),n=nR(t);return nN(n.length,1+e,t).flatMap((e,t)=>{let[s,...a]=e;return Array(n[t]).fill().map((e,t)=>{let n=t*i;return[s+t*r,a.map(e=>e+n)]})})}function nM(e,t){return nN(1+t(),1+e,t).map(e=>[e[0],e.slice(1)])}function nL(e){let t=[],r=nI(e);return n(i([]),[]),t;function i(t){return{S:e(),B:nR(()=>{let t=nI(e).map(e=>r[e]);if(t.length)return i(t)}),Q:t}}function n({S:e,B:r},i,s){if(!(4&e)||s!==i[i.length-1])for(let a of(2&e&&(s=i[i.length-1]),1&e&&t.push(i),r))for(let e of a.Q)n(a,[...i,e],s)}}function nF(e){return e.toString(16).toUpperCase().padStart(2,"0")}function nB(e){return`{${nF(e)}}`}function nU(e){let t=[];for(let r=0,i=e.length;r<i;){let i=e.codePointAt(r);r+=i<65536?1:2,t.push(i)}return t}function nz(e){let t=4096,r=e.length;if(r<t)return String.fromCodePoint(...e);let i=[];for(let n=0;n<r;)i.push(String.fromCodePoint(...e.slice(n,n+=t)));return i.join("")}function nV(e,t){let r=e.length,i=r-t.length;for(let n=0;0==i&&n<r;n++)i=e[n]-t[n];return i}var nj="AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g";let nG=44032,nq=4352,nH=4449,nW=4519,nK=28,nQ=588,n$=55204,nJ=4371,nY=4470,nX=4547;function nZ(e){return e>>24&255}function n0(e){return 16777215&e}function n1(){let e=nA(nj);for(let[t,r]of(i=new Map(nD(e).flatMap((e,t)=>e.map(e=>[e,t+1<<24]))),n=new Set(nI(e)),s=new Map,a=new Map,nP(e))){if(!n.has(t)&&2==r.length){let[e,i]=r,n=a.get(e);n||(n=new Map,a.set(e,n)),n.set(i,t)}s.set(t,r.reverse())}}function n2(e){return e>=nG&&e<n$}function n3(e,t){if(e>=nq&&e<nJ&&t>=nH&&t<nY)return nG+(e-nq)*nQ+(t-nH)*nK;if(n2(e)&&t>nW&&t<nX&&(e-nG)%nK==0)return e+(t-nW);{let r=a.get(e);return r&&(r=r.get(t))?r:-1}}function n4(e){i||n1();let t=[],r=[],n=!1;function a(e){let r=i.get(e);r&&(n=!0,e|=r),t.push(e)}for(let i of e)for(;;){if(i<128)t.push(i);else if(n2(i)){let e=i-nG,t=e/nQ|0,r=e%nQ/nK|0,n=e%nK;a(nq+t),a(nH+r),n>0&&a(nW+n)}else{let e=s.get(i);e?r.push(...e):a(i)}if(!r.length)break;i=r.pop()}if(n&&t.length>1){let e=nZ(t[0]);for(let r=1;r<t.length;r++){let i=nZ(t[r]);if(0==i||e<=i){e=i;continue}let n=r-1;for(;;){let r=t[n+1];if(t[n+1]=t[n],t[n]=r,!n||(e=nZ(t[--n]))<=i)break}e=nZ(t[r])}}return t}function n6(e){let t=[],r=[],i=-1,n=0;for(let s of e){let e=nZ(s),a=n0(s);if(-1==i)0==e?i=a:t.push(a);else if(n>0&&n>=e)0==e?(t.push(i,...r),r.length=0,i=a):r.push(a),n=e;else{let s=n3(i,a);s>=0?i=s:0==n&&0==e?(t.push(i),i=a):(r.push(a),n=e)}}return i>=0&&t.push(i,...r),t}function n5(e){return n4(e).map(n0)}function n9(e){return n6(n4(e))}let n8=45,n7=".",se=65039,st=1,sr=e=>Array.from(e);function si(e,t){return e.P.has(t)||e.Q.has(t)}class sn extends Array{get is_emoji(){return!0}}function ss(){if(o)return;let e=nA(nw),t=()=>nI(e),r=()=>new Set(t()),i=(e,t)=>t.forEach(t=>e.add(t));o=new Map(nP(e)),l=r(),h=t(),u=new Set(t().map(e=>h[e])),h=new Set(h),c=r(),d=r();let n=nD(e),s=e(),a=()=>{let e=new Set;return t().forEach(t=>i(e,n[t])),i(e,t()),e};p=nR(t=>{let r=nR(e).map(e=>e+96);if(r.length){let i=t>=s;return r[0]-=32,r=nz(r),i&&(r=`Restricted[${r}]`),{N:r,P:a(),Q:a(),M:!e(),R:i}}}),f=r(),m=new Map;let b=t().concat(sr(f)).sort((e,t)=>e-t);for(let{V:t,M:r}of(b.forEach((t,r)=>{let i=e(),n=b[r]=i?b[r-i]:{V:[],M:new Map};n.V.push(t),f.has(t)||m.set(t,n)}),new Set(m.values()))){let e=[];for(let r of t){let t=p.filter(e=>si(e,r)),n=e.find(({G:e})=>t.some(t=>e.has(t)));n||(n={G:new Set,V:[]},e.push(n)),n.V.push(r),i(n.G,t)}let n=e.flatMap(e=>sr(e.G));for(let{G:t,V:i}of e){let e=new Set(n.filter(e=>!t.has(e)));for(let t of i)r.set(t,e)}}g=new Set;let w=new Set,E=e=>g.has(e)?w.add(e):g.add(e);for(let e of p){for(let t of e.P)E(t);for(let t of e.Q)E(t)}for(let e of g)m.has(e)||w.has(e)||m.set(e,st);for(let t of(i(g,n5(g)),y=nL(e).map(e=>sn.from(e)).sort(nV),v=new Map,y)){let e=[v];for(let r of t){let t=e.map(e=>{let t=e.get(r);return t||(t=new Map,e.set(r,t)),t});r===se?e.push(...t):e=t}for(let r of e)r.V=t}}function sa(e){return(sp(e)?"":`${so(sc([e]))} `)+nB(e)}function so(e){return`"${e}"\u200E`}function sl(e){if(e.length>=4&&e[2]==n8&&e[3]==n8)throw Error(`invalid label extension: "${nz(e.slice(0,4))}"`)}function sh(e){let t=95;for(let r=e.lastIndexOf(t);r>0;)if(e[--r]!==t)throw Error("underscore allowed only at start")}function su(e){let t=e[0],r=nE.get(t);if(r)throw sE(`leading ${r}`);let i=e.length,n=-1;for(let s=1;s<i;s++){t=e[s];let i=nE.get(t);if(i){if(n==s)throw sE(`${r} + ${i}`);n=s+1,r=i}}if(n==i)throw sE(`trailing ${r}`)}function sc(e,t=1/0,r=nB){let i=[];sd(e[0])&&i.push(""),e.length>t&&(t>>=1,e=[...e.slice(0,t),8230,...e.slice(-t)]);let n=0,s=e.length;for(let t=0;t<s;t++){let s=e[t];sp(s)&&(i.push(nz(e.slice(n,t))),i.push(r(s)),n=t+1)}return i.push(nz(e.slice(n,s))),i.join("")}function sd(e){return ss(),h.has(e)}function sp(e){return ss(),c.has(e)}function sf(e){return sv(sm(e,n9,sC))}function sm(e,t,r){if(!e)return[];ss();let i=0;return e.split(n7).map(e=>{let n=nU(e),s={input:n,offset:i};i+=n.length+1;try{let e,i=s.tokens=sT(n,t,r),a=i.length;if(!a)throw Error("empty label");let o=s.output=i.flat();if(sh(o),!(s.emoji=a>1||i[0].is_emoji)&&o.every(e=>e<128))sl(o),e="ASCII";else{let t=i.flatMap(e=>e.is_emoji?[]:e);if(t.length){if(h.has(o[0]))throw sE("leading combining mark");for(let e=1;e<a;e++){let t=i[e];if(!t.is_emoji&&h.has(t[0]))throw sE(`emoji + combining mark: "${nz(i[e-1])} + ${sc([t[0]])}"`)}su(o);let r=sr(new Set(t)),[n]=sy(r);sS(n,t),sg(n,r),e=n.N}else e="Emoji"}s.type=e}catch(e){s.error=e}return s})}function sg(e,t){let r;let i=[];for(let e of t){let t=m.get(e);if(t===st)return;if(t){let i=t.M.get(e);if(!(r=r?r.filter(e=>i.has(e)):sr(i)).length)return}else i.push(e)}if(r){for(let t of r)if(i.every(e=>si(t,e)))throw Error(`whole-script confusable: ${e.N}/${t.N}`)}}function sy(e){let t=p;for(let r of e){let e=t.filter(e=>si(e,r));if(!e.length){if(p.some(e=>si(e,r)))throw sw(t[0],r);throw sb(r)}if(t=e,1==e.length)break}return t}function sv(e){return e.map(({input:t,error:r,output:i})=>{if(r){let i=r.message;throw Error(1==e.length?i:`Invalid label ${so(sc(t,63))}: ${i}`)}return nz(i)}).join(n7)}function sb(e){return Error(`disallowed character: ${sa(e)}`)}function sw(e,t){let r=sa(t),i=p.find(e=>e.P.has(t));return i&&(r=`${i.N} ${r}`),Error(`illegal mixture: ${e.N} + ${r}`)}function sE(e){return Error(`illegal placement: ${e}`)}function sS(e,t){for(let r of t)if(!si(e,r))throw sw(e,r);if(e.M){let e=n5(t);for(let t=1,r=e.length;t<r;t++)if(u.has(e[t])){let i=t+1;for(let n;i<r&&u.has(n=e[i]);i++)for(let r=t;r<i;r++)if(e[r]==n)throw Error(`duplicate non-spacing marks: ${sa(n)}`);if(i-t>nS)throw Error(`excessive non-spacing marks: ${so(sc(e.slice(t-1,i)))} (${i-t}/${nS})`);t=i}}}function sT(e,t,r){let i=[],n=[];for(e=e.slice().reverse();e.length;){let s=sA(e);if(s)n.length&&(i.push(t(n)),n=[]),i.push(r(s));else{let t=e.pop();if(g.has(t))n.push(t);else{let e=o.get(t);if(e)n.push(...e);else if(!l.has(t))throw sb(t)}}}return n.length&&i.push(t(n)),i}function sC(e){return e.filter(e=>e!=se)}function sA(e,t){let r,i=v,n=e.length;for(;n&&(i=i.get(e[--n]));){let{V:s}=i;s&&(r=s,t&&t.push(...e.slice(n).reverse()),e.length=n)}return r}let s_=new Uint8Array(32);function sx(e){return R(0!==e.length,"invalid ENS name; empty component","comp",e),e}function sk(e){let t=tz(sI(e)),r=[];if(0===e.length)return r;let i=0;for(let e=0;e<t.length;e++)46===t[e]&&(r.push(sx(t.slice(i,e))),i=e+1);return R(i<t.length,"invalid ENS name; empty component","name",e),r.push(sx(t.slice(i))),r}function sI(e){try{if(0===e.length)throw Error("empty label");return sf(e)}catch(t){R(!1,`invalid ENS name (${t.message})`,"name",e)}}function sD(e){R("string"==typeof e,"invalid ENS name; not a string","name",e),R(e.length,"invalid ENS name (empty label)","name",e);let t=s_,r=sk(e);for(;r.length;)t=ta(q([t,ta(r.pop())]));return G(t)}function sP(e,t){let r=null!=t?t:63;return R(r<=255,"DNS encoded label cannot exceed 255","length",r),G(q(sk(e).map(t=>{R(t.length<=r,`label ${JSON.stringify(e)} exceeds ${r} bytes`,"name",e);let i=new Uint8Array(t.length+1);return i.set(t,1),i[0]=i.length-1,i})))+"00"}s_.fill(0);var sR=r(6113);let sN=function(e){return(0,sR.createHash)("sha256").update(e).digest()},sO=function(e){return(0,sR.createHash)("sha512").update(e).digest()},sM=sN,sL=sO,sF=!1,sB=!1;function sU(e){let t=B(e,"data");return G(sM(t))}function sz(e){let t=B(e,"data");return G(sL(t))}function sV(e,t,r,i){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,i);let n=BigInt(32),s=BigInt(4294967295),a=Number(r>>n&s),o=Number(r&s),l=i?4:0,h=i?0:4;e.setUint32(t+l,a,i),e.setUint32(t+h,o,i)}sU._=sN,sU.lock=function(){sF=!0},sU.register=function(e){if(sF)throw Error("sha256 is locked");sM=e},Object.freeze(sU),sz._=sO,sz.lock=function(){sB=!0},sz.register=function(e){if(sB)throw Error("sha512 is locked");sL=e},Object.freeze(sU);class sj extends eQ{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=eG(this.buffer)}update(e){ek(this);let{view:t,buffer:r,blockLen:i}=this,n=(e=eW(e)).length;for(let s=0;s<n;){let a=Math.min(i-this.pos,n-s);if(a===i){let t=eG(e);for(;i<=n-s;s+=i)this.process(t,s);continue}r.set(e.subarray(s,s+a),this.pos),this.pos+=a,s+=a,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ek(this),eI(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:n}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;sV(r,i-8,BigInt(8*this.length),n),this.process(r,0);let a=eG(e),o=this.outputLen;if(o%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=o/4,h=this.get();if(l>h.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)a.setUint32(4*e,h[e],n)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:i,finished:n,destroyed:s,pos:a}=this;return e.length=i,e.pos=a,e.finished=n,e.destroyed=s,i%t&&e.buffer.set(r),e}}let sG=(e,t,r)=>e&t^~e&r,sq=(e,t,r)=>e&t^e&r^t&r,sH=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),sW=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),sK=new Uint32Array(64);class sQ extends sj{constructor(){super(64,32,8,!1),this.A=0|sW[0],this.B=0|sW[1],this.C=0|sW[2],this.D=0|sW[3],this.E=0|sW[4],this.F=0|sW[5],this.G=0|sW[6],this.H=0|sW[7]}get(){let{A:e,B:t,C:r,D:i,E:n,F:s,G:a,H:o}=this;return[e,t,r,i,n,s,a,o]}set(e,t,r,i,n,s,a,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|i,this.E=0|n,this.F=0|s,this.G=0|a,this.H=0|o}process(e,t){for(let r=0;r<16;r++,t+=4)sK[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=sK[e-15],r=sK[e-2],i=eq(t,7)^eq(t,18)^t>>>3,n=eq(r,17)^eq(r,19)^r>>>10;sK[e]=n+sK[e-7]+i+sK[e-16]|0}let{A:r,B:i,C:n,D:s,E:a,F:o,G:l,H:h}=this;for(let e=0;e<64;e++){let t=h+(eq(a,6)^eq(a,11)^eq(a,25))+sG(a,o,l)+sH[e]+sK[e]|0,u=(eq(r,2)^eq(r,13)^eq(r,22))+sq(r,i,n)|0;h=l,l=o,o=a,a=s+t|0,s=n,n=i,i=r,r=t+u|0}r=r+this.A|0,i=i+this.B|0,n=n+this.C|0,s=s+this.D|0,a=a+this.E|0,o=o+this.F|0,l=l+this.G|0,h=h+this.H|0,this.set(r,i,n,s,a,o,l,h)}roundClean(){sK.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let s$=e$(()=>new sQ),sJ=(BigInt(0),BigInt(1)),sY=BigInt(2),sX=e=>e instanceof Uint8Array,sZ=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function s0(e){if(!sX(e))throw Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=sZ[e[r]];return t}function s1(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}function s2(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let t=0;t<r.length;t++){let i=2*t,n=Number.parseInt(e.slice(i,i+2),16);if(Number.isNaN(n)||n<0)throw Error("Invalid byte sequence");r[t]=n}return r}function s3(e){return s1(s0(e))}function s4(e){if(!sX(e))throw Error("Uint8Array expected");return s1(s0(Uint8Array.from(e).reverse()))}function s6(e,t){return s2(e.toString(16).padStart(2*t,"0"))}function s5(e,t){return s6(e,t).reverse()}function s9(e,t,r){let i;if("string"==typeof t)try{i=s2(t)}catch(r){throw Error(`${e} must be valid hex string, got "${t}". Cause: ${r}`)}else if(sX(t))i=Uint8Array.from(t);else throw Error(`${e} must be hex string or Uint8Array`);let n=i.length;if("number"==typeof r&&n!==r)throw Error(`${e} expected ${r} bytes, got ${n}`);return i}function s8(...e){let t=new Uint8Array(e.reduce((e,t)=>e+t.length,0)),r=0;return e.forEach(e=>{if(!sX(e))throw Error("Uint8Array expected");t.set(e,r),r+=e.length}),t}let s7=e=>(sY<<BigInt(e-1))-sJ,ae=e=>new Uint8Array(e),at=e=>Uint8Array.from(e);function ar(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let i=ae(e),n=ae(e),s=0,a=()=>{i.fill(1),n.fill(0),s=0},o=(...e)=>r(n,i,...e),l=(e=ae())=>{n=o(at([0]),e),i=o(),0!==e.length&&(n=o(at([1]),e),i=o())},h=()=>{if(s++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(i=o()).slice();r.push(t),e+=i.length}return s8(...r)};return(e,t)=>{let r;for(a(),l(e);!(r=t(h()));)l();return a(),r}}let ai={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function an(e,t,r={}){let i=(t,r,i)=>{let n=ai[r];if("function"!=typeof n)throw Error(`Invalid validator "${r}", expected function`);let s=e[t];if((!i||void 0!==s)&&!n(s,e))throw Error(`Invalid param ${String(t)}=${s} (${typeof s}), expected ${r}`)};for(let[e,r]of Object.entries(t))i(e,r,!1);for(let[e,t]of Object.entries(r))i(e,t,!0);return e}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let as=BigInt(0),aa=BigInt(1),ao=BigInt(2),al=BigInt(3),ah=BigInt(4),au=BigInt(5),ac=BigInt(8);function ad(e,t){let r=e%t;return r>=as?r:t+r}function ap(e,t,r){if(r<=as||t<as)throw Error("Expected power/modulo > 0");if(r===aa)return as;let i=aa;for(;t>as;)t&aa&&(i=i*e%r),e=e*e%r,t>>=aa;return i}function af(e,t,r){let i=e;for(;t-- >as;)i*=i,i%=r;return i}function am(e,t){if(e===as||t<=as)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=ad(e,t),i=t,n=as,s=aa,a=aa,o=as;for(;r!==as;){let e=i/r,t=i%r,l=n-a*e,h=s-o*e;i=r,r=t,n=a,s=o,a=l,o=h}if(i!==aa)throw Error("invert: does not exist");return ad(n,t)}function ag(e){let t,r,i;let n=(e-aa)/ao;for(t=e-aa,r=0;t%ao===as;t/=ao,r++);for(i=ao;i<e&&ap(i,n,e)!==e-aa;i++);if(1===r){let t=(e+aa)/ah;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}let s=(t+aa)/ao;return function(e,a){if(e.pow(a,n)===e.neg(e.ONE))throw Error("Cannot find square root");let o=r,l=e.pow(e.mul(e.ONE,i),t),h=e.pow(a,s),u=e.pow(a,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<o&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,aa<<BigInt(o-t-1));l=e.sqr(r),h=e.mul(h,r),u=e.mul(u,l),o=t}return h}}function ay(e){if(e%ah===al){let t=(e+aa)/ah;return function(e,r){let i=e.pow(r,t);if(!e.eql(e.sqr(i),r))throw Error("Cannot find square root");return i}}if(e%ac===au){let t=(e-au)/ac;return function(e,r){let i=e.mul(r,ao),n=e.pow(i,t),s=e.mul(r,n),a=e.mul(e.mul(s,ao),n),o=e.mul(s,e.sub(a,e.ONE));if(!e.eql(e.sqr(o),r))throw Error("Cannot find square root");return o}}return ag(e)}BigInt(9),BigInt(16);let av=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ab(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"};return an(e,av.reduce((e,t)=>(e[t]="function",e),t))}function aw(e,t,r){if(r<as)throw Error("Expected power > 0");if(r===as)return e.ONE;if(r===aa)return t;let i=e.ONE,n=t;for(;r>as;)r&aa&&(i=e.mul(i,n)),n=e.sqr(n),r>>=aa;return i}function aE(e,t){let r=Array(t.length),i=t.reduce((t,i,n)=>e.is0(i)?t:(r[n]=t,e.mul(t,i)),e.ONE),n=e.inv(i);return t.reduceRight((t,i,n)=>e.is0(i)?t:(r[n]=e.mul(t,r[n]),e.mul(t,i)),n),r}function aS(e,t){let r=void 0!==t?t:e.toString(2).length,i=Math.ceil(r/8);return{nBitLength:r,nByteLength:i}}function aT(e,t,r=!1,i={}){if(e<=as)throw Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:n,nByteLength:s}=aS(e,t);if(s>2048)throw Error("Field lengths over 2048 bytes are not supported");let a=ay(e),o=Object.freeze({ORDER:e,BITS:n,BYTES:s,MASK:s7(n),ZERO:as,ONE:aa,create:t=>ad(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error(`Invalid field element: expected bigint, got ${typeof t}`);return as<=t&&t<e},is0:e=>e===as,isOdd:e=>(e&aa)===aa,neg:t=>ad(-t,e),eql:(e,t)=>e===t,sqr:t=>ad(t*t,e),add:(t,r)=>ad(t+r,e),sub:(t,r)=>ad(t-r,e),mul:(t,r)=>ad(t*r,e),pow:(e,t)=>aw(o,e,t),div:(t,r)=>ad(t*am(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>am(t,e),sqrt:i.sqrt||(e=>a(o,e)),invertBatch:e=>aE(o,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?s5(e,s):s6(e,s),fromBytes:e=>{if(e.length!==s)throw Error(`Fp.fromBytes: expected ${s}, got ${e.length}`);return r?s4(e):s3(e)}});return Object.freeze(o)}function aC(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function aA(e){let t=aC(e);return t+Math.ceil(t/2)}function a_(e,t,r=!1){let i=e.length,n=aC(t),s=aA(t);if(i<16||i<s||i>1024)throw Error(`expected ${s}-1024 bytes of input, got ${i}`);let a=ad(r?s3(e):s4(e),t-aa)+aa;return r?s5(a,n):s6(a,n)}class ax extends eQ{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,ex(e);let r=eW(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,n=new Uint8Array(i);n.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<n.length;e++)n[e]^=54;this.iHash.update(n),this.oHash=e.create();for(let e=0;e<n.length;e++)n[e]^=106;this.oHash.update(n),n.fill(0)}update(e){return ek(this),this.iHash.update(e),this}digestInto(e){ek(this),e_(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:i,destroyed:n,blockLen:s,outputLen:a}=this;return e.finished=i,e.destroyed=n,e.blockLen=s,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let ak=(e,t,r)=>new ax(e,t).update(r).digest();ak.create=(e,t)=>new ax(e,t);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let aI=BigInt(0),aD=BigInt(1);function aP(e,t){let r=(e,t)=>{let r=t.negate();return e?r:t},i=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:r,unsafeLadder(t,r){let i=e.ZERO,n=t;for(;r>aI;)r&aD&&(i=i.add(n)),n=n.double(),r>>=aD;return i},precomputeWindow(e,t){let{windows:r,windowSize:n}=i(t),s=[],a=e,o=a;for(let e=0;e<r;e++){o=a,s.push(o);for(let e=1;e<n;e++)o=o.add(a),s.push(o);a=o.double()}return s},wNAF(t,n,s){let{windows:a,windowSize:o}=i(t),l=e.ZERO,h=e.BASE,u=BigInt(2**t-1),c=2**t,d=BigInt(t);for(let e=0;e<a;e++){let t=e*o,i=Number(s&u);s>>=d,i>o&&(i-=c,s+=aD);let a=t,p=t+Math.abs(i)-1,f=e%2!=0,m=i<0;0===i?h=h.add(r(f,n[a])):l=l.add(r(m,n[p]))}return{p:l,f:h}},wNAFCached(e,t,r,i){let n=e._WINDOW_SIZE||1,s=t.get(e);return s||(s=this.precomputeWindow(e,n),1!==n&&t.set(e,i(s))),this.wNAF(n,s,r)}}}function aR(e){return ab(e.Fp),an(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...aS(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function aN(e){let t=aR(e);an(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:i,a:n}=t;if(r){if(!i.eql(n,i.ZERO))throw Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}let{bytesToNumberBE:aO,hexToBytes:aM}=S,aL={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){let{Err:t}=aL;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");let r=e[1],i=e.subarray(2,r+2);if(!r||i.length!==r)throw new t("Invalid signature integer: wrong length");if(128&i[0])throw new t("Invalid signature integer: negative");if(0===i[0]&&!(128&i[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:aO(i),l:e.subarray(r+2)}},toSig(e){let{Err:t}=aL,r="string"==typeof e?aM(e):e;if(!(r instanceof Uint8Array))throw Error("ui8a expected");let i=r.length;if(i<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==i-2)throw new t("Invalid signature: incorrect length");let{d:n,l:s}=aL._parseInt(r.subarray(2)),{d:a,l:o}=aL._parseInt(s);if(o.length)throw new t("Invalid signature: left bytes after parsing");return{r:n,s:a}},hexFromSig(e){let t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,r=e=>{let t=e.toString(16);return 1&t.length?`0${t}`:t},i=t(r(e.s)),n=t(r(e.r)),s=i.length/2,a=n.length/2,o=r(s),l=r(a);return`30${r(a+s+4)}02${l}${n}02${o}${i}`}},aF=BigInt(0),aB=BigInt(1),aU=(BigInt(2),BigInt(3));function az(e){let t=aN(e),{Fp:r}=t,i=t.toBytes||((e,t,i)=>{let n=t.toAffine();return s8(Uint8Array.from([4]),r.toBytes(n.x),r.toBytes(n.y))}),n=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function s(e){let{a:i,b:n}=t,s=r.sqr(e),a=r.mul(s,e);return r.add(r.add(a,r.mul(e,i)),n)}if(!r.eql(r.sqr(t.Gy),s(t.Gx)))throw Error("bad generator point: equation left != right");function a(e){return"bigint"==typeof e&&aF<e&&e<t.n}function o(e){if(!a(e))throw Error("Expected valid bigint: 0 < bigint < curve.n")}function l(e){let r;let{allowedPrivateKeyLengths:i,nByteLength:n,wrapPrivateKey:s,n:a}=t;if(i&&"bigint"!=typeof e){if(e instanceof Uint8Array&&(e=s0(e)),"string"!=typeof e||!i.includes(e.length))throw Error("Invalid key");e=e.padStart(2*n,"0")}try{r="bigint"==typeof e?e:s3(s9("private key",e,n))}catch(t){throw Error(`private key must be ${n} bytes, hex or bigint, not ${typeof e}`)}return s&&(r=ad(r,a)),o(r),r}let h=new Map;function u(e){if(!(e instanceof c))throw Error("ProjectivePoint expected")}class c{constructor(e,t,i){if(this.px=e,this.py=t,this.pz=i,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==i||!r.isValid(i))throw Error("z required")}static fromAffine(e){let{x:t,y:i}=e||{};if(!e||!r.isValid(t)||!r.isValid(i))throw Error("invalid affine point");if(e instanceof c)throw Error("projective point not allowed");let n=e=>r.eql(e,r.ZERO);return n(t)&&n(i)?c.ZERO:new c(t,i,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(c.fromAffine)}static fromHex(e){let t=c.fromAffine(n(s9("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return c.BASE.multiply(l(e))}_setWindowSize(e){this._WINDOW_SIZE=e,h.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw Error("bad point: ZERO")}let{x:e,y:i}=this.toAffine();if(!r.isValid(e)||!r.isValid(i))throw Error("bad point: x or y not FE");let n=r.sqr(i),a=s(e);if(!r.eql(n,a))throw Error("bad point: equation left != right");if(!this.isTorsionFree())throw Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){u(e);let{px:t,py:i,pz:n}=this,{px:s,py:a,pz:o}=e,l=r.eql(r.mul(t,o),r.mul(s,n)),h=r.eql(r.mul(i,o),r.mul(a,n));return l&&h}negate(){return new c(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:i}=t,n=r.mul(i,aU),{px:s,py:a,pz:o}=this,l=r.ZERO,h=r.ZERO,u=r.ZERO,d=r.mul(s,s),p=r.mul(a,a),f=r.mul(o,o),m=r.mul(s,a);return m=r.add(m,m),u=r.mul(s,o),u=r.add(u,u),l=r.mul(e,u),h=r.mul(n,f),h=r.add(l,h),l=r.sub(p,h),h=r.add(p,h),h=r.mul(l,h),l=r.mul(m,l),u=r.mul(n,u),f=r.mul(e,f),m=r.sub(d,f),m=r.mul(e,m),m=r.add(m,u),u=r.add(d,d),d=r.add(u,d),d=r.add(d,f),d=r.mul(d,m),h=r.add(h,d),f=r.mul(a,o),f=r.add(f,f),d=r.mul(f,m),l=r.sub(l,d),u=r.mul(f,p),u=r.add(u,u),new c(l,h,u=r.add(u,u))}add(e){u(e);let{px:i,py:n,pz:s}=this,{px:a,py:o,pz:l}=e,h=r.ZERO,d=r.ZERO,p=r.ZERO,f=t.a,m=r.mul(t.b,aU),g=r.mul(i,a),y=r.mul(n,o),v=r.mul(s,l),b=r.add(i,n),w=r.add(a,o);b=r.mul(b,w),w=r.add(g,y),b=r.sub(b,w),w=r.add(i,s);let E=r.add(a,l);return w=r.mul(w,E),E=r.add(g,v),w=r.sub(w,E),E=r.add(n,s),h=r.add(o,l),E=r.mul(E,h),h=r.add(y,v),E=r.sub(E,h),p=r.mul(f,w),h=r.mul(m,v),p=r.add(h,p),h=r.sub(y,p),p=r.add(y,p),d=r.mul(h,p),y=r.add(g,g),y=r.add(y,g),v=r.mul(f,v),w=r.mul(m,w),y=r.add(y,v),v=r.sub(g,v),v=r.mul(f,v),w=r.add(w,v),g=r.mul(y,w),d=r.add(d,g),g=r.mul(E,w),h=r.mul(b,h),h=r.sub(h,g),g=r.mul(b,y),p=r.mul(E,p),new c(h,d,p=r.add(p,g))}subtract(e){return this.add(e.negate())}is0(){return this.equals(c.ZERO)}wNAF(e){return p.wNAFCached(this,h,e,e=>{let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(c.fromAffine)})}multiplyUnsafe(e){let i=c.ZERO;if(e===aF)return i;if(o(e),e===aB)return this;let{endo:n}=t;if(!n)return p.unsafeLadder(this,e);let{k1neg:s,k1:a,k2neg:l,k2:h}=n.splitScalar(e),u=i,d=i,f=this;for(;a>aF||h>aF;)a&aB&&(u=u.add(f)),h&aB&&(d=d.add(f)),f=f.double(),a>>=aB,h>>=aB;return s&&(u=u.negate()),l&&(d=d.negate()),d=new c(r.mul(d.px,n.beta),d.py,d.pz),u.add(d)}multiply(e){let i,n;o(e);let s=e,{endo:a}=t;if(a){let{k1neg:e,k1:t,k2neg:o,k2:l}=a.splitScalar(s),{p:h,f:u}=this.wNAF(t),{p:d,f:f}=this.wNAF(l);h=p.constTimeNegate(e,h),d=p.constTimeNegate(o,d),d=new c(r.mul(d.px,a.beta),d.py,d.pz),i=h.add(d),n=u.add(f)}else{let{p:e,f:t}=this.wNAF(s);i=e,n=t}return c.normalizeZ([i,n])[0]}multiplyAndAddUnsafe(e,t,r){let i=c.BASE,n=(e,t)=>t!==aF&&t!==aB&&e.equals(i)?e.multiply(t):e.multiplyUnsafe(t),s=n(this,t).add(n(e,r));return s.is0()?void 0:s}toAffine(e){let{px:t,py:i,pz:n}=this,s=this.is0();null==e&&(e=s?r.ONE:r.inv(n));let a=r.mul(t,e),o=r.mul(i,e),l=r.mul(n,e);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw Error("invZ was invalid");return{x:a,y:o}}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===aB)return!0;if(r)return r(c,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===aB?this:r?r(c,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),i(c,this,e)}toHex(e=!0){return s0(this.toRawBytes(e))}}c.BASE=new c(t.Gx,t.Gy,r.ONE),c.ZERO=new c(r.ZERO,r.ONE,r.ZERO);let d=t.nBitLength,p=aP(c,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:s,isWithinCurveOrder:a}}function aV(e){let t=aR(e);return an(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function aj(e){let t=aV(e),{Fp:r,n:i}=t,n=r.BYTES+1,s=2*r.BYTES+1;function a(e){return aF<e&&e<r.ORDER}function o(e){return ad(e,i)}function l(e){return am(e,i)}let{ProjectivePoint:h,normPrivateKeyToScalar:u,weierstrassEquation:c,isWithinCurveOrder:d}=az({...t,toBytes(e,t,i){let n=t.toAffine(),s=r.toBytes(n.x),a=s8;return i?a(Uint8Array.from([t.hasEvenY()?2:3]),s):a(Uint8Array.from([4]),s,r.toBytes(n.y))},fromBytes(e){let t=e.length,i=e[0],o=e.subarray(1);if(t===n&&(2===i||3===i)){let e=s3(o);if(!a(e))throw Error("Point is not on curve");let t=c(e),n=r.sqrt(t);return(1&i)==1!=((n&aB)===aB)&&(n=r.neg(n)),{x:e,y:n}}if(t===s&&4===i)return{x:r.fromBytes(o.subarray(0,r.BYTES)),y:r.fromBytes(o.subarray(r.BYTES,2*r.BYTES))};throw Error(`Point of length ${t} was invalid. Expected ${n} compressed bytes or ${s} uncompressed bytes`)}}),p=e=>s0(s6(e,t.nByteLength));function f(e){return e>i>>aB}function m(e){return f(e)?o(-e):e}let g=(e,t,r)=>s3(e.slice(t,r));class y{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new y(g(e=s9("compactSignature",e,2*r),0,r),g(e,r,2*r))}static fromDER(e){let{r:t,s:r}=aL.toSig(s9("DER",e));return new y(t,r)}assertValidity(){if(!d(this.r))throw Error("r must be 0 < r < CURVE.n");if(!d(this.s))throw Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new y(this.r,this.s,e)}recoverPublicKey(e){let{r:i,s:n,recovery:s}=this,a=T(s9("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw Error("recovery id invalid");let u=2===s||3===s?i+t.n:i;if(u>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let c=(1&s)==0?"02":"03",d=h.fromHex(c+p(u)),f=l(u),m=o(-a*f),g=o(n*f),y=h.BASE.multiplyAndAddUnsafe(d,m,g);if(!y)throw Error("point at infinify");return y.assertValidity(),y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new y(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return s2(this.toDERHex())}toDERHex(){return aL.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return s2(this.toCompactHex())}toCompactHex(){return p(this.r)+p(this.s)}}let v={isValidPrivateKey(e){try{return u(e),!0}catch(e){return!1}},normPrivateKeyToScalar:u,randomPrivateKey:()=>{let e=aA(t.n);return a_(t.randomBytes(e),t.n)},precompute:(e=8,t=h.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function b(e,t=!0){return h.fromPrivateKey(e).toRawBytes(t)}function w(e){let t=e instanceof Uint8Array,r="string"==typeof e,i=(t||r)&&e.length;return t?i===n||i===s:r?i===2*n||i===2*s:e instanceof h}function E(e,t,r=!0){if(w(e))throw Error("first arg must be private key");if(!w(t))throw Error("second arg must be public key");return h.fromHex(t).multiply(u(e)).toRawBytes(r)}let S=t.bits2int||function(e){let r=s3(e),i=8*e.length-t.nBitLength;return i>0?r>>BigInt(i):r},T=t.bits2int_modN||function(e){return o(S(e))},C=s7(t.nBitLength);function A(e){if("bigint"!=typeof e)throw Error("bigint expected");if(!(aF<=e&&e<C))throw Error(`bigint expected < 2^${t.nBitLength}`);return s6(e,t.nByteLength)}function _(e,i,n=x){if(["recovered","canonical"].some(e=>e in n))throw Error("sign() legacy options not supported");let{hash:s,randomBytes:a}=t,{lowS:c,prehash:p,extraEntropy:g}=n;null==c&&(c=!0),e=s9("msgHash",e),p&&(e=s9("prehashed msgHash",s(e)));let v=T(e),b=u(i),w=[A(b),A(v)];if(null!=g){let e=!0===g?a(r.BYTES):g;w.push(s9("extraEntropy",e))}let E=s8(...w),C=v;return{seed:E,k2sig:function(e){let t=S(e);if(!d(t))return;let r=l(t),i=h.BASE.multiply(t).toAffine(),n=o(i.x);if(n===aF)return;let s=o(r*o(C+n*b));if(s===aF)return;let a=(i.x===n?0:2)|Number(i.y&aB),u=s;return c&&f(s)&&(u=m(s),a^=1),new y(n,u,a)}}}let x={lowS:t.lowS,prehash:!1},k={lowS:t.lowS,prehash:!1};function I(e,r,i=x){let{seed:n,k2sig:s}=_(e,r,i),a=t;return ar(a.hash.outputLen,a.nByteLength,a.hmac)(n,s)}function D(e,r,i,n=k){let s,a;let u=e;if(r=s9("msgHash",r),i=s9("publicKey",i),"strict"in n)throw Error("options.strict was renamed to lowS");let{lowS:c,prehash:d}=n;try{if("string"==typeof u||u instanceof Uint8Array)try{a=y.fromDER(u)}catch(e){if(!(e instanceof aL.Err))throw e;a=y.fromCompact(u)}else if("object"==typeof u&&"bigint"==typeof u.r&&"bigint"==typeof u.s){let{r:e,s:t}=u;a=new y(e,t)}else throw Error("PARSE");s=h.fromHex(i)}catch(e){if("PARSE"===e.message)throw Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(c&&a.hasHighS())return!1;d&&(r=t.hash(r));let{r:p,s:f}=a,m=T(r),g=l(f),v=o(m*g),b=o(p*g),w=h.BASE.multiplyAndAddUnsafe(s,v,b)?.toAffine();return!!w&&o(w.x)===p}return h.BASE._setWindowSize(8),{CURVE:t,getPublicKey:b,getSharedSecret:E,sign:I,verify:D,ProjectivePoint:h,Signature:y,utils:v}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function aG(e){return{hash:e,hmac:(t,...r)=>ak(e,t,eK(...r)),randomBytes:eJ}}function aq(e,t){let r=t=>aj({...e,...aG(t)});return Object.freeze({...r(t),create:r})}BigInt(4);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */let aH=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),aW=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),aK=BigInt(1),aQ=BigInt(2),a$=(e,t)=>(e+t/aQ)/t;function aJ(e){let t=aH,r=BigInt(3),i=BigInt(6),n=BigInt(11),s=BigInt(22),a=BigInt(23),o=BigInt(44),l=BigInt(88),h=e*e*e%t,u=h*h*e%t,c=af(u,r,t)*u%t,d=af(c,r,t)*u%t,p=af(d,aQ,t)*h%t,f=af(p,n,t)*p%t,m=af(f,s,t)*f%t,g=af(m,o,t)*m%t,y=af(g,l,t)*g%t,v=af(y,o,t)*m%t,b=af(v,r,t)*u%t,w=af(b,a,t)*f%t,E=af(w,i,t)*h%t,S=af(E,aQ,t);if(!aY.eql(aY.sqr(S),e))throw Error("Cannot find square root");return S}let aY=aT(aH,void 0,void 0,{sqrt:aJ}),aX=aq({a:BigInt(0),b:BigInt(7),Fp:aY,n:aW,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=aW,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-aK*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,a=BigInt("0x100000000000000000000000000000000"),o=a$(s*e,t),l=a$(-i*e,t),h=ad(e-o*r-l*n,t),u=ad(-o*i-l*s,t),c=h>a,d=u>a;if(c&&(h=t-h),d&&(u=t-u),h>a||u>a)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:h,k2neg:d,k2:u}}}},s$),aZ=BigInt(0),a0=e=>"bigint"==typeof e&&aZ<e&&e<aH,a1={};function a2(e,...t){let r=a1[e];if(void 0===r){let t=sha256(Uint8Array.from(e,e=>e.charCodeAt(0)));r=concatBytes(t,t),a1[e]=r}return sha256(concatBytes(r,...t))}let a3=e=>mod(e,aH),a4=e=>mod(e,aW),a6=aX.ProjectivePoint;class a5{#ei;constructor(e){R(32===H(e),"invalid private key","privateKey","[REDACTED]"),this.#ei=G(e)}get privateKey(){return this.#ei}get publicKey(){return a5.computePublicKey(this.#ei)}get compressedPublicKey(){return a5.computePublicKey(this.#ei,!0)}sign(e){R(32===H(e),"invalid digest length","digest",e);let t=aX.sign(U(e),U(this.#ei),{lowS:!0});return ie.from({r:el(t.r,32),s:el(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){let t=a5.computePublicKey(e);return G(aX.getSharedSecret(U(this.#ei),B(t),!1))}static computePublicKey(e,t){let r=B(e,"key");if(32===r.length)return G(aX.getPublicKey(r,!!t));if(64===r.length){let e=new Uint8Array(65);e[0]=4,e.set(r,1),r=e}return G(aX.ProjectivePoint.fromHex(r).toRawBytes(t))}static recoverPublicKey(e,t){R(32===H(e),"invalid digest length","digest",e);let r=ie.from(t),i=aX.Signature.fromCompact(U(q([r.r,r.s]))),n=(i=i.addRecoveryBit(r.yParity)).recoverPublicKey(U(e));return R(null!=n,"invalid signature for digest","signature",t),"0x"+n.toHex(!1)}static addPoints(e,t,r){let i=aX.ProjectivePoint.fromHex(a5.computePublicKey(e).substring(2)),n=aX.ProjectivePoint.fromHex(a5.computePublicKey(t).substring(2));return"0x"+i.add(n).toHex(!!r)}}function a9(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function a8(e,t,r){let i=0;for(let n=0;n<r;n++)i=256*i+e[t+n];return i}function a7(e,t,r,i){let n=[];for(;r<t+1+i;){let s=oe(e,r);n.push(s.result),P((r+=s.consumed)<=t+1+i,"child data too short","BUFFER_OVERRUN",{buffer:e,length:i,offset:t})}return{consumed:1+i,result:n}}function oe(e,t){P(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});let r=t=>{P(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){let i=e[t]-247;r(t+1+i);let n=a8(e,t+1,i);return r(t+1+i+n),a7(e,t,t+1+i,i+n)}if(e[t]>=192){let i=e[t]-192;return r(t+1+i),a7(e,t,t+1,i)}if(e[t]>=184){let i=e[t]-183;r(t+1+i);let n=a8(e,t+1,i);r(t+1+i+n);let s=G(e.slice(t+1+i,t+1+i+n));return{consumed:1+i+n,result:s}}if(e[t]>=128){let i=e[t]-128;r(t+1+i);let n=G(e.slice(t+1,t+1+i));return{consumed:1+i,result:n}}return{consumed:1,result:a9(e[t])}}function ot(e){let t=B(e,"data"),r=oe(t,0);return R(r.consumed===t.length,"unexpected junk after rlp payload","data",e),r.result}function or(e){let t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function oi(e){if(Array.isArray(e)){let t=[];if(e.forEach(function(e){t=t.concat(oi(e))}),t.length<=55)return t.unshift(192+t.length),t;let r=or(t.length);return r.unshift(247+r.length),r.concat(t)}let t=Array.prototype.slice.call(B(e,"object"));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;let r=or(t.length);return r.unshift(183+r.length),r.concat(t)}let on="0123456789abcdef";function os(e){let t="0x";for(let r of oi(e))t+=on[r>>4]+on[15&r];return t}function oa(e){let t;return tm(ta("0x"+(t="string"==typeof e?a5.computePublicKey(e,!1):e.publicKey).substring(4)).substring(26))}function oo(e,t){return oa(a5.recoverPublicKey(e,t))}let ol=BigInt(0),oh=BigInt(2),ou=BigInt(27),oc=BigInt(28),od=BigInt(35),op=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),of=131072;function om(e){return{blobToKzgCommitment:t=>{if("computeBlobProof"in e){if("blobToKzgCommitment"in e&&"function"==typeof e.blobToKzgCommitment)return B(e.blobToKzgCommitment(G(t)))}else if("blobToKzgCommitment"in e&&"function"==typeof e.blobToKzgCommitment)return B(e.blobToKzgCommitment(t));if("blobToKZGCommitment"in e&&"function"==typeof e.blobToKZGCommitment)return B(e.blobToKZGCommitment(G(t)));R(!1,"unsupported KZG library","kzg",e)},computeBlobKzgProof:(t,r)=>"computeBlobProof"in e&&"function"==typeof e.computeBlobProof?B(e.computeBlobProof(G(t),G(r))):"computeBlobKzgProof"in e&&"function"==typeof e.computeBlobKzgProof?e.computeBlobKzgProof(t,r):"computeBlobKZGProof"in e&&"function"==typeof e.computeBlobKZGProof?B(e.computeBlobKZGProof(G(t),G(r))):void R(!1,"unsupported KZG library","kzg",e)}}function og(e,t){let r=e.toString(16);for(;r.length<2;)r="0"+r;return"0x"+(r+=sU(t).substring(4))}function oy(e){return"0x"===e?null:tm(e)}function ov(e,t){try{return r0(e)}catch(r){R(!1,r.message,t,e)}}function ob(e,t){try{if(!Array.isArray(e))throw Error("authorizationList: invalid array");let t=[];for(let r=0;r<e.length;r++){let i=e[r];if(!Array.isArray(i))throw Error(`authorization[${r}]: invalid array`);if(6!==i.length)throw Error(`authorization[${r}]: wrong length`);if(!i[1])throw Error(`authorization[${r}]: null address`);t.push({address:oy(i[1]),nonce:oE(i[2],"nonce"),chainId:oE(i[0],"chainId"),signature:ie.from({yParity:ow(i[3],"yParity"),r:Q(i[4],32),s:Q(i[5],32)})})}return t}catch(r){R(!1,r.message,t,e)}}function ow(e,t){return"0x"===e?0:ea(e,t)}function oE(e,t){if("0x"===e)return ol;let r=er(e,t);return R(r<=op,"value exceeds uint size",t,r),r}function oS(e,t){let r=er(e,"value"),i=eh(r);return R(i.length<=32,"value too large",`tx.${t}`,r),i}function oT(e){return r0(e).map(e=>[e.address,e.storageKeys])}function oC(e){return e.map(e=>[oS(e.chainId,"chainId"),e.address,oS(e.nonce,"nonce"),oS(e.signature.yParity,"yParity"),eh(e.signature.r),eh(e.signature.s)])}function oA(e,t){R(Array.isArray(e),`invalid ${t}`,"value",e);for(let t=0;t<e.length;t++)R(z(e[t],32),"invalid ${ param } hash",`value[${t}]`,e[t]);return e}function o_(e){let t=ot(e);R(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);let r={type:0,nonce:ow(t[0],"nonce"),gasPrice:oE(t[1],"gasPrice"),gasLimit:oE(t[2],"gasLimit"),to:oy(t[3]),value:oE(t[4],"value"),data:G(t[5]),chainId:ol};if(6===t.length)return r;let i=oE(t[6],"v"),n=oE(t[7],"r"),s=oE(t[8],"s");if(n===ol&&s===ol)r.chainId=i;else{let e=(i-od)/oh;e<ol&&(e=ol),r.chainId=e,R(e!==ol||i===ou||i===oc,"non-canonical legacy v","v",t[6]),r.signature=ie.from({r:Q(t[7],32),s:Q(t[8],32),v:i})}return r}function ox(e,t){let r=[oS(e.nonce,"nonce"),oS(e.gasPrice||0,"gasPrice"),oS(e.gasLimit,"gasLimit"),e.to||"0x",oS(e.value,"value"),e.data],i=ol;if(e.chainId!=ol)i=er(e.chainId,"tx.chainId"),R(!t||null==t.networkV||t.legacyChainId===i,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){let t=e.signature.legacyChainId;null!=t&&(i=t)}if(!t)return i!==ol&&(r.push(eh(i)),r.push("0x"),r.push("0x")),os(r);let n=BigInt(27+t.yParity);return i!==ol?n=ie.getChainIdV(i,t.v):BigInt(t.v)!==n&&R(!1,"tx.chainId/sig.v mismatch","sig",t),r.push(eh(n)),r.push(eh(t.r)),r.push(eh(t.s)),os(r)}function ok(e,t){let r;try{if(r=ow(t[0],"yParity"),0!==r&&1!==r)throw Error("bad yParity")}catch(e){R(!1,"invalid yParity","yParity",t[0])}let i=Q(t[1],32),n=Q(t[2],32),s=ie.from({r:i,s:n,yParity:r});e.signature=s}function oI(e){let t=ot(B(e).slice(1));R(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",G(e));let r={type:2,chainId:oE(t[0],"chainId"),nonce:ow(t[1],"nonce"),maxPriorityFeePerGas:oE(t[2],"maxPriorityFeePerGas"),maxFeePerGas:oE(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:oE(t[4],"gasLimit"),to:oy(t[5]),value:oE(t[6],"value"),data:G(t[7]),accessList:ov(t[8],"accessList")};return 9===t.length||ok(r,t.slice(9)),r}function oD(e,t){let r=[oS(e.chainId,"chainId"),oS(e.nonce,"nonce"),oS(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),oS(e.maxFeePerGas||0,"maxFeePerGas"),oS(e.gasLimit,"gasLimit"),e.to||"0x",oS(e.value,"value"),e.data,oT(e.accessList||[])];return t&&(r.push(oS(t.yParity,"yParity")),r.push(eh(t.r)),r.push(eh(t.s))),q(["0x02",os(r)])}function oP(e){let t=ot(B(e).slice(1));R(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",G(e));let r={type:1,chainId:oE(t[0],"chainId"),nonce:ow(t[1],"nonce"),gasPrice:oE(t[2],"gasPrice"),gasLimit:oE(t[3],"gasLimit"),to:oy(t[4]),value:oE(t[5],"value"),data:G(t[6]),accessList:ov(t[7],"accessList")};return 8===t.length||ok(r,t.slice(8)),r}function oR(e,t){let r=[oS(e.chainId,"chainId"),oS(e.nonce,"nonce"),oS(e.gasPrice||0,"gasPrice"),oS(e.gasLimit,"gasLimit"),e.to||"0x",oS(e.value,"value"),e.data,oT(e.accessList||[])];return t&&(r.push(oS(t.yParity,"recoveryParam")),r.push(eh(t.r)),r.push(eh(t.s))),q(["0x01",os(r)])}function oN(e){let t=ot(B(e).slice(1)),r="3",i=null;if(4===t.length&&Array.isArray(t[0])){r="3 (network format)";let e=t[1],n=t[2],s=t[3];R(Array.isArray(e),"invalid network format: blobs not an array","fields[1]",e),R(Array.isArray(n),"invalid network format: commitments not an array","fields[2]",n),R(Array.isArray(s),"invalid network format: proofs not an array","fields[3]",s),R(e.length===n.length,"invalid network format: blobs/commitments length mismatch","fields",t),R(e.length===s.length,"invalid network format: blobs/proofs length mismatch","fields",t),i=[];for(let r=0;r<t[1].length;r++)i.push({data:e[r],commitment:n[r],proof:s[r]});t=t[0]}R(Array.isArray(t)&&(11===t.length||14===t.length),`invalid field count for transaction type: ${r}`,"data",G(e));let n={type:3,chainId:oE(t[0],"chainId"),nonce:ow(t[1],"nonce"),maxPriorityFeePerGas:oE(t[2],"maxPriorityFeePerGas"),maxFeePerGas:oE(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:oE(t[4],"gasLimit"),to:oy(t[5]),value:oE(t[6],"value"),data:G(t[7]),accessList:ov(t[8],"accessList"),maxFeePerBlobGas:oE(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};i&&(n.blobs=i),R(null!=n.to,`invalid address for transaction type: ${r}`,"data",e),R(Array.isArray(n.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let t=0;t<n.blobVersionedHashes.length;t++)R(z(n.blobVersionedHashes[t],32),`invalid blobVersionedHash at index ${t}: must be length 32`,"data",e);return 11===t.length||ok(n,t.slice(11)),n}function oO(e,t,r){let i=[oS(e.chainId,"chainId"),oS(e.nonce,"nonce"),oS(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),oS(e.maxFeePerGas||0,"maxFeePerGas"),oS(e.gasLimit,"gasLimit"),e.to||ix,oS(e.value,"value"),e.data,oT(e.accessList||[]),oS(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),oA(e.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(i.push(oS(t.yParity,"yParity")),i.push(eh(t.r)),i.push(eh(t.s)),r)?q(["0x03",os([i,r.map(e=>e.data),r.map(e=>e.commitment),r.map(e=>e.proof)])]):q(["0x03",os(i)])}function oM(e){let t=ot(B(e).slice(1));R(Array.isArray(t)&&(10===t.length||13===t.length),"invalid field count for transaction type: 4","data",G(e));let r={type:4,chainId:oE(t[0],"chainId"),nonce:ow(t[1],"nonce"),maxPriorityFeePerGas:oE(t[2],"maxPriorityFeePerGas"),maxFeePerGas:oE(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:oE(t[4],"gasLimit"),to:oy(t[5]),value:oE(t[6],"value"),data:G(t[7]),accessList:ov(t[8],"accessList"),authorizationList:ob(t[9],"authorizationList")};return 10===t.length||ok(r,t.slice(10)),r}function oL(e,t){let r=[oS(e.chainId,"chainId"),oS(e.nonce,"nonce"),oS(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),oS(e.maxFeePerGas||0,"maxFeePerGas"),oS(e.gasLimit,"gasLimit"),e.to||"0x",oS(e.value,"value"),e.data,oT(e.accessList||[]),oC(e.authorizationList||[])];return t&&(r.push(oS(t.yParity,"yParity")),r.push(eh(t.r)),r.push(eh(t.s))),q(["0x04",os(r)])}class oF{#en;#es;#t;#ea;#eo;#el;#eh;#eu;#ec;#ed;#ep;#ef;#em;#eg;#ey;#ev;#eb;get type(){return this.#en}set type(e){switch(e){case null:this.#en=null;break;case 0:case"legacy":this.#en=0;break;case 1:case"berlin":case"eip-2930":this.#en=1;break;case 2:case"london":case"eip-1559":this.#en=2;break;case 3:case"cancun":case"eip-4844":this.#en=3;break;case 4:case"pectra":case"eip-7702":this.#en=4;break;default:R(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){let e=this.#es;return null==e&&3===this.type?ix:e}set to(e){this.#es=null==e?null:tm(e)}get nonce(){return this.#ea}set nonce(e){this.#ea=ea(e,"value")}get gasLimit(){return this.#eo}set gasLimit(e){this.#eo=er(e)}get gasPrice(){let e=this.#el;return null==e&&(0===this.type||1===this.type)?ol:e}set gasPrice(e){this.#el=null==e?null:er(e,"gasPrice")}get maxPriorityFeePerGas(){let e=this.#eh;return null==e?2===this.type||3===this.type?ol:null:e}set maxPriorityFeePerGas(e){this.#eh=null==e?null:er(e,"maxPriorityFeePerGas")}get maxFeePerGas(){let e=this.#eu;return null==e?2===this.type||3===this.type?ol:null:e}set maxFeePerGas(e){this.#eu=null==e?null:er(e,"maxFeePerGas")}get data(){return this.#t}set data(e){this.#t=G(e)}get value(){return this.#ec}set value(e){this.#ec=er(e,"value")}get chainId(){return this.#ed}set chainId(e){this.#ed=er(e)}get signature(){return this.#ep||null}set signature(e){this.#ep=null==e?null:ie.from(e)}get accessList(){let e=this.#ef||null;return null==e?1===this.type||2===this.type||3===this.type?[]:null:e}set accessList(e){this.#ef=null==e?null:r0(e)}get authorizationList(){let e=this.#eb||null;return null==e&&4===this.type?[]:e}set authorizationList(e){this.#eb=null==e?null:e.map(e=>it(e))}get maxFeePerBlobGas(){let e=this.#em;return null==e&&3===this.type?ol:e}set maxFeePerBlobGas(e){this.#em=null==e?null:er(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#eg;return null==e&&3===this.type?[]:e}set blobVersionedHashes(e){if(null!=e){R(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)R(z(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}this.#eg=e}get blobs(){return null==this.#ev?null:this.#ev.map(e=>Object.assign({},e))}set blobs(e){if(null==e){this.#ev=null;return}let t=[],r=[];for(let i=0;i<e.length;i++){let n=e[i];if(V(n)){P(this.#ey,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let e=B(n);if(R(e.length<=of,"blob is too large",`blobs[${i}]`,n),e.length!==of){let t=new Uint8Array(of);t.set(e),e=t}let s=this.#ey.blobToKzgCommitment(e),a=G(this.#ey.computeBlobKzgProof(e,s));t.push({data:G(e),commitment:G(s),proof:a}),r.push(og(1,s))}else{let e=G(n.commitment);t.push({data:G(n.data),commitment:e,proof:G(n.proof)}),r.push(og(1,e))}}this.#ev=t,this.#eg=r}get kzg(){return this.#ey}set kzg(e){null==e?this.#ey=null:this.#ey=om(e)}constructor(){this.#en=null,this.#es=null,this.#ea=0,this.#eo=ol,this.#el=null,this.#eh=null,this.#eu=null,this.#t="0x",this.#ec=ol,this.#ed=ol,this.#ep=null,this.#ef=null,this.#em=null,this.#eg=null,this.#ey=null,this.#ev=null,this.#eb=null}get hash(){return null==this.signature?null:ta(this.#ew(!0,!1))}get unsignedHash(){return ta(this.unsignedSerialized)}get from(){return null==this.signature?null:oo(this.unsignedHash,this.signature)}get fromPublicKey(){return null==this.signature?null:a5.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}#ew(e,t){P(!e||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});let r=e?this.signature:null;switch(this.inferType()){case 0:return ox(this,r);case 1:return oR(this,r);case 2:return oD(this,r);case 3:return oO(this,r,t?this.blobs:null);case 4:return oL(this,r)}P(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#ew(!0,!0)}get unsignedSerialized(){return this.#ew(!1,!1)}inferType(){let e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){let e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,r=null!=this.accessList,i=null!=this.#em||this.#eg;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&P(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),P(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),P(0!==this.type||!r,"legacy transaction cannot have accessList","BAD_DATA",{value:this});let n=[];return null!=this.type?n.push(this.type):this.authorizationList&&this.authorizationList.length?n.push(4):t?n.push(2):e?(n.push(1),r||n.push(0)):r?(n.push(1),n.push(2)):(i&&this.to||(n.push(0),n.push(1),n.push(2)),n.push(3)),n.sort(),n}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return oF.from(this)}toJSON(){let e=e=>null==e?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(null==e)return new oF;if("string"==typeof e){let t=B(e);if(t[0]>=127)return oF.from(o_(t));switch(t[0]){case 1:return oF.from(oP(t));case 2:return oF.from(oI(t));case 3:return oF.from(oN(t));case 4:return oF.from(oM(t))}P(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}let t=new oF;return null!=e.type&&(t.type=e.type),null!=e.to&&(t.to=e.to),null!=e.nonce&&(t.nonce=e.nonce),null!=e.gasLimit&&(t.gasLimit=e.gasLimit),null!=e.gasPrice&&(t.gasPrice=e.gasPrice),null!=e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),null!=e.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null!=e.maxFeePerBlobGas&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),null!=e.data&&(t.data=e.data),null!=e.value&&(t.value=e.value),null!=e.chainId&&(t.chainId=e.chainId),null!=e.signature&&(t.signature=ie.from(e.signature)),null!=e.accessList&&(t.accessList=e.accessList),null!=e.authorizationList&&(t.authorizationList=e.authorizationList),null!=e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes),null!=e.kzg&&(t.kzg=e.kzg),null!=e.blobs&&(t.blobs=e.blobs),null!=e.hash&&(R(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),R(t.hash===e.hash,"hash mismatch","tx",e)),null!=e.from&&(R(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),R(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}let oB="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);let oU=BigInt(58);function oz(e){let t=B(e),r=es(t),i="";for(;r;)i=oB[Number(r%oU)]+i,r/=oU;for(let e=0;e<t.length&&!t[e];e++)i=oB[0]+i;return i}function oV(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):R(!1,"unsupported IPFS format","link",e),`https://gateway.ipfs.io/ipfs/${e}`}class oj{name;constructor(e){_(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw Error("unsupported coin")}async decodeAddress(e,t){throw Error("unsupported coin")}}let oG=RegExp("^(ipfs)://(.*)$","i"),oq=[RegExp("^(https)://(.*)$","i"),RegExp("^(data):(.*)$","i"),oG,RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];class oH{provider;address;name;#eE;#eS;constructor(e,t,r){_(this,{provider:e,address:t,name:r}),this.#eE=null,this.#eS=new nb(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e)}async supportsWildcard(){return null==this.#eE&&(this.#eE=(async()=>{try{return await this.#eS.supportsInterface("0x9061b923")}catch(e){if(k(e,"CALL_EXCEPTION"))return!1;throw this.#eE=null,e}})()),await this.#eE}async #eT(e,t){t=(t||[]).slice();let r=this.#eS.interface;t.unshift(sD(this.name));let i=null;await this.supportsWildcard()&&(P(i=r.getFunction(e),"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[sP(this.name,255),r.encodeFunctionData(i,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{let n=await this.#eS[e](...t);if(i)return r.decodeFunctionResult(i,n)[0];return n}catch(e){if(!k(e,"CALL_EXCEPTION"))throw e}return null}async getAddress(e){if(null==e&&(e=60),60===e)try{let e=await this.#eT("addr(bytes32)");if(null==e||e===ix)return null;return e}catch(e){if(k(e,"CALL_EXCEPTION"))return null;throw e}if(e>=0&&e<2147483648){let t=e+2147483648,r=await this.#eT("addr(bytes32,uint)",[t]);if(z(r,20))return tm(r)}let t=null;for(let r of this.provider.plugins)if(r instanceof oj&&r.supportsCoinType(e)){t=r;break}if(null==t)return null;let r=await this.#eT("addr(bytes32,uint)",[e]);if(null==r||"0x"===r)return null;let i=await t.decodeAddress(e,r);if(null!=i)return i;P(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:`getAddress(${e})`,info:{coinType:e,data:r}})}async getText(e){let t=await this.#eT("text(bytes32,string)",[e]);return null==t||"0x"===t?null:t}async getContentHash(){let e=await this.#eT("contenthash(bytes32)");if(null==e||"0x"===e)return null;let t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){let e="e3010170"===t[1]?"ipfs":"ipns",r=parseInt(t[4],16);if(t[5].length===2*r)return`${e}://${oz("0x"+t[2])}`}let r=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(r&&64===r[1].length)return`bzz://${r[1]}`;P(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){let e=[{type:"name",value:this.name}];try{let t=await this.getText("avatar");if(null==t)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:t});for(let r=0;r<oq.length;r++){let i=t.match(oq[r]);if(null==i)continue;let n=i[1].toLowerCase();switch(n){case"https":case"data":return e.push({type:"url",value:t}),{linkage:e,url:t};case"ipfs":{let r=oV(t);return e.push({type:"ipfs",value:t}),e.push({type:"url",value:r}),{linkage:e,url:r}}case"erc721":case"erc1155":{let r="erc721"===n?"tokenURI(uint256)":"uri(uint256)";e.push({type:n,value:t});let s=await this.getAddress();if(null==s)return e.push({type:"!owner",value:""}),{url:null,linkage:e};let a=(i[2]||"").split("/");if(2!==a.length)return e.push({type:`!${n}caip`,value:i[2]||""}),{url:null,linkage:e};let o=a[1],l=new nb(a[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===n){let t=await l.ownerOf(o);if(s!==t)return e.push({type:"!owner",value:t}),{url:null,linkage:e};e.push({type:"owner",value:t})}else if("erc1155"===n){let t=await l.balanceOf(s,o);if(!t)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:t.toString()})}let h=await l[r](o);if(null==h||"0x"===h)return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:h}),"erc1155"===n&&(h=h.replace("{id}",el(o,32).substring(2)),e.push({type:"metadata-url-expanded",value:h})),h.match(/^ipfs:/i)&&(h=oV(h)),e.push({type:"metadata-url",value:h});let u={},c=await new iS(h).send();c.assertOk();try{u=c.bodyJson}catch(t){try{e.push({type:"!metadata",value:c.bodyText})}catch(r){let t=c.body;t&&e.push({type:"!metadata",value:G(t)})}return{url:null,linkage:e}}if(!u)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(u)});let d=u.image;if("string"!=typeof d)return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(d.match(/^(https:\/\/|data:)/i));else{let t=d.match(oG);if(null==t)return e.push({type:"!imageUrl-ipfs",value:d}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:d}),d=oV(d)}return e.push({type:"url",value:d}),{linkage:e,url:d}}}}}catch(e){}return{linkage:e,url:null}}static async getEnsAddress(e){let t=await e.getNetwork(),r=t.getPlugin("org.ethers.plugins.network.Ens");return P(r,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),r.address}static async #eC(e,t){let r=await oH.getEnsAddress(e);try{let i=new nb(r,["function resolver(bytes32) view returns (address)"],e),n=await i.resolver(sD(t),{enableCcipRead:!0});if(n===ix)return null;return n}catch(e){throw e}return null}static async fromName(e,t){let r=t;for(;;){if(""===r||"."===r||"eth"!==t&&"eth"===r)return null;let i=await oH.#eC(e,r);if(null!=i){let n=new oH(e,i,t);if(r!==t&&!await n.supportsWildcard())return null;return n}r=r.split(".").slice(1).join(".")}}}function oW(e){let t=tm(e.from),r=er(e.nonce,"tx.nonce").toString(16);return tm(W(ta(os([t,r="0"===r?"0x":r.length%2?"0x0"+r:"0x"+r])),12))}let oK=BigInt(0);function oQ(e,t){return function(r){return null==r?t:e(r)}}function o$(e,t){return r=>{if(t&&null==r)return null;if(!Array.isArray(r))throw Error("not an array");return r.map(t=>e(t))}}function oJ(e,t){return r=>{let i={};for(let n in e){let s=n;if(t&&n in t&&!(s in r)){for(let e of t[n])if(e in r){s=e;break}}try{let t=e[n](r[s]);void 0!==t&&(i[n]=t)}catch(t){let e=t instanceof Error?t.message:"not-an-error";P(!1,`invalid value for value.${n} (${e})`,"BAD_DATA",{value:r})}}return i}}function oY(e){return R(z(e,!0),"invalid data","value",e),e}function oX(e){return R(z(e,32),"invalid hash","value",e),e}let oZ=oJ({address:tm,blockHash:oX,blockNumber:ea,data:oY,index:ea,removed:oQ(function(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}R(!1,`invalid boolean; ${JSON.stringify(e)}`,"value",e)},!1),topics:o$(oX),transactionHash:oX,transactionIndex:ea},{index:["logIndex"]});function o0(e){return oZ(e)}let o1=oJ({hash:oQ(oX),parentHash:oX,parentBeaconBlockRoot:oQ(oX,null),number:ea,timestamp:ea,nonce:oQ(oY),difficulty:er,gasLimit:er,gasUsed:er,stateRoot:oQ(oX,null),receiptsRoot:oQ(oX,null),blobGasUsed:oQ(er,null),excessBlobGas:oQ(er,null),miner:oQ(tm),prevRandao:oQ(oX,null),extraData:oY,baseFeePerGas:oQ(er)},{prevRandao:["mixHash"]});function o2(e){let t=o1(e);return t.transactions=e.transactions.map(e=>"string"==typeof e?e:o9(e)),t}let o3=oJ({transactionIndex:ea,blockNumber:ea,transactionHash:oX,address:tm,topics:o$(oX),data:oY,index:ea,blockHash:oX},{index:["logIndex"]});function o4(e){return o3(e)}let o6=oJ({to:oQ(tm,null),from:oQ(tm,null),contractAddress:oQ(tm,null),index:ea,root:oQ(G),gasUsed:er,blobGasUsed:oQ(er,null),logsBloom:oQ(oY),blockHash:oX,hash:oX,logs:o$(o4),blockNumber:ea,cumulativeGasUsed:er,effectiveGasPrice:oQ(er),blobGasPrice:oQ(er,null),status:oQ(ea),type:oQ(ea,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function o5(e){return o6(e)}function o9(e){e.to&&er(e.to)===oK&&(e.to="0x0000000000000000000000000000000000000000");let t=oJ({hash:oX,index:oQ(ea,void 0),type:e=>"0x"===e||null==e?0:ea(e),accessList:oQ(r0,null),blobVersionedHashes:oQ(o$(oX,!0),null),authorizationList:oQ(o$(e=>{let t;if(e.signature)t=e.signature;else{let r=e.yParity;"0x1b"===r?r=0:"0x1c"===r&&(r=1),t=Object.assign({},e,{yParity:r})}return{address:tm(e.address),chainId:er(e.chainId),nonce:er(e.nonce),signature:ie.from(t)}},!1),null),blockHash:oQ(oX,null),blockNumber:oQ(ea,null),transactionIndex:oQ(ea,null),from:tm,gasPrice:oQ(er),maxPriorityFeePerGas:oQ(er),maxFeePerGas:oQ(er),maxFeePerBlobGas:oQ(er,null),gasLimit:er,to:oQ(tm,null),value:er,nonce:ea,data:oY,creates:oQ(tm,null),chainId:oQ(er,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(e);if(null==t.to&&null==t.creates&&(t.creates=oW(t)),(1===e.type||2===e.type)&&null==e.accessList&&(t.accessList=[]),e.signature?t.signature=ie.from(e.signature):t.signature=ie.from(e),null==t.chainId){let e=t.signature.legacyChainId;null!=e&&(t.chainId=e)}return t.blockHash&&er(t.blockHash)===oK&&(t.blockHash=null),t}let o8="0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e";class o7{name;constructor(e){_(this,{name:e})}clone(){return new o7(this.name)}}class le extends o7{effectiveBlock;txBase;txCreate;txDataZero;txDataNonzero;txAccessListStorageKey;txAccessListAddress;constructor(e,t){null==e&&(e=0),super(`org.ethers.network.plugins.GasCost#${e||0}`);let r={effectiveBlock:e};function i(e,i){let n=(t||{})[e];null==n&&(n=i),R("number"==typeof n,`invalud value for ${e}`,"costs",t),r[e]=n}i("txBase",21e3),i("txCreate",32e3),i("txDataZero",4),i("txDataNonzero",16),i("txAccessListStorageKey",1900),i("txAccessListAddress",2400),_(this,r)}clone(){return new le(this.effectiveBlock,this)}}class lt extends o7{address;targetNetwork;constructor(e,t){super("org.ethers.plugins.network.Ens"),_(this,{address:e||o8,targetNetwork:null==t?1:t})}clone(){return new lt(this.address,this.targetNetwork)}}class lr extends o7{#D;#eA;get url(){return this.#D}get processFunc(){return this.#eA}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),this.#D=e,this.#eA=t}clone(){return this}}let li=new Map;class ln{#e_;#ed;#ex;constructor(e,t){this.#e_=e,this.#ed=er(t),this.#ex=new Map}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return this.#e_}set name(e){this.#e_=e}get chainId(){return this.#ed}set chainId(e){this.#ed=er(e,"chainId")}matches(e){if(null==e)return!1;if("string"==typeof e){try{return this.chainId===er(e)}catch(e){}return this.name===e}if("number"==typeof e||"bigint"==typeof e){try{return this.chainId===er(e)}catch(e){}return!1}if("object"==typeof e){if(null!=e.chainId){try{return this.chainId===er(e.chainId)}catch(e){}return!1}if(null!=e.name)return this.name===e.name}return!1}get plugins(){return Array.from(this.#ex.values())}attachPlugin(e){if(this.#ex.get(e.name))throw Error(`cannot replace existing plugin: ${e.name} `);return this.#ex.set(e.name,e.clone()),this}getPlugin(e){return this.#ex.get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){let e=new ln(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){let t=this.getPlugin("org.ethers.plugins.network.GasCost")||new le,r=t.txBase;if(null==e.to&&(r+=t.txCreate),e.data)for(let i=2;i<e.data.length;i+=2)"00"===e.data.substring(i,i+2)?r+=t.txDataZero:r+=t.txDataNonzero;if(e.accessList){let i=r0(e.accessList);for(let e in i)r+=t.txAccessListAddress+t.txAccessListStorageKey*i[e].storageKeys.length}return r}static from(e){if(ll(),null==e)return ln.from("mainnet");if("number"==typeof e&&(e=BigInt(e)),"string"==typeof e||"bigint"==typeof e){let t=li.get(e);if(t)return t();if("bigint"==typeof e)return new ln("unknown",e);R(!1,"unknown network","network",e)}if("function"==typeof e.clone)return e.clone();if("object"==typeof e){R("string"==typeof e.name&&"number"==typeof e.chainId,"invalid network object name or chainId","network",e);let t=new ln(e.name,e.chainId);return(e.ensAddress||null!=e.ensNetwork)&&t.attachPlugin(new lt(e.ensAddress,e.ensNetwork)),t}R(!1,"invalid network","network",e)}static register(e,t){"number"==typeof e&&(e=BigInt(e));let r=li.get(e);r&&R(!1,`conflicting network for ${JSON.stringify(r.name)}`,"nameOrChainId",e),li.set(e,t)}}function ls(e,t){let r=String(e);if(!r.match(/^[0-9.]+$/))throw Error(`invalid gwei value: ${e}`);let i=r.split(".");if(1===i.length&&i.push(""),2!==i.length)throw Error(`invalid gwei value: ${e}`);for(;i[1].length<t;)i[1]+="0";if(i[1].length>9){let e=BigInt(i[1].substring(0,9));!i[1].substring(9).match(/^0+$/)&&e++,i[1]=e.toString()}return BigInt(i[0]+i[1])}function la(e){return new lr(e,async(e,t,r)=>{let i;r.setHeader("User-Agent","ethers");try{let[t,n]=await Promise.all([r.send(),e()]),s=(i=t).bodyJson.standard;return{gasPrice:n.gasPrice,maxFeePerGas:ls(s.maxFee,9),maxPriorityFeePerGas:ls(s.maxPriorityFee,9)}}catch(e){P(!1,`error encountered with polygon gas station (${JSON.stringify(r.url)})`,"SERVER_ERROR",{request:r,response:i,error:e})}})}let lo=!1;function ll(){lo||(lo=!0,e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",11155111,{ensNetwork:11155111}),e("holesky",17e3,{ensNetwork:17e3}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("arbitrum-sepolia",421614,{}),e("base",8453,{ensNetwork:1}),e("base-goerli",84531,{}),e("base-sepolia",84532,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("linea-sepolia",59141,{}),e("matic",137,{ensNetwork:1,plugins:[la("https://gasstation.polygon.technology/v2")]}),e("matic-amoy",80002,{}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[la("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[]}),e("optimism-goerli",420,{}),e("optimism-sepolia",11155420,{}),e("xdai",100,{ensNetwork:1}));function e(e,t,r){let i=function(){let i=new ln(e,t);return null!=r.ensNetwork&&i.attachPlugin(new lt(null,r.ensNetwork)),i.attachPlugin(new le),(r.plugins||[]).forEach(e=>{i.attachPlugin(e)}),i};ln.register(e,i),ln.register(t,i),r.altNames&&r.altNames.forEach(e=>{ln.register(e,i)})}}function lh(e){return JSON.parse(JSON.stringify(e))}class lu{#ek;#eI;#eD;#eP;constructor(e){this.#ek=e,this.#eI=null,this.#eD=4e3,this.#eP=-2}get pollingInterval(){return this.#eD}set pollingInterval(e){this.#eD=e}async #eR(){try{let e=await this.#ek.getBlockNumber();if(-2===this.#eP){this.#eP=e;return}if(e!==this.#eP){for(let t=this.#eP+1;t<=e;t++){if(null==this.#eI)return;await this.#ek.emit("block",t)}this.#eP=e}}catch(e){}null!=this.#eI&&(this.#eI=this.#ek._setTimeout(this.#eR.bind(this),this.#eD))}start(){this.#eI||(this.#eI=this.#ek._setTimeout(this.#eR.bind(this),this.#eD),this.#eR())}stop(){this.#eI&&(this.#ek._clearTimeout(this.#eI),this.#eI=null)}pause(e){this.stop(),e&&(this.#eP=-2)}resume(){this.start()}}class lc{#ek;#eR;#eN;constructor(e){this.#ek=e,this.#eN=!1,this.#eR=e=>{this._poll(e,this.#ek)}}async _poll(e,t){throw Error("sub-classes must override this")}start(){this.#eN||(this.#eN=!0,this.#eR(-2),this.#ek.on("block",this.#eR))}stop(){this.#eN&&(this.#eN=!1,this.#ek.off("block",this.#eR))}pause(e){this.stop()}resume(){this.start()}}class ld extends lc{#eO;#eM;constructor(e,t){super(e),this.#eO=t,this.#eM=-2}pause(e){e&&(this.#eM=-2),super.pause(e)}async _poll(e,t){let r=await t.getBlock(this.#eO);null!=r&&(-2===this.#eM?this.#eM=r.number:r.number>this.#eM&&(t.emit(this.#eO,r.number),this.#eM=r.number))}}class lp extends lc{#er;constructor(e,t){super(e),this.#er=lh(t)}async _poll(e,t){throw Error("@TODO")}}class lf extends lc{#eL;constructor(e,t){super(e),this.#eL=t}async _poll(e,t){let r=await t.getTransactionReceipt(this.#eL);r&&t.emit(this.#eL,r)}}class lm{#ek;#er;#eI;#eN;#eP;constructor(e,t){this.#ek=e,this.#er=lh(t),this.#eI=this.#eR.bind(this),this.#eN=!1,this.#eP=-2}async #eR(e){if(-2===this.#eP)return;let t=lh(this.#er);t.fromBlock=this.#eP+1,t.toBlock=e;let r=await this.#ek.getLogs(t);if(0===r.length){this.#eP<e-60&&(this.#eP=e-60);return}for(let e of r)this.#ek.emit(this.#er,e),this.#eP=e.blockNumber}start(){this.#eN||(this.#eN=!0,-2===this.#eP&&this.#ek.getBlockNumber().then(e=>{this.#eP=e}),this.#ek.on("block",this.#eI))}stop(){this.#eN&&(this.#eN=!1,this.#ek.off("block",this.#eI))}pause(e){this.stop(),e&&(this.#eP=-2)}resume(){this.start()}}let lg=BigInt(2),ly=10;function lv(e){return e&&"function"==typeof e.then}function lb(e,t){return e+":"+JSON.stringify(t,(e,t)=>{if(null==t)return"null";if("bigint"==typeof t)return`bigint:${t.toString()}`;if("string"==typeof t)return t.toLowerCase();if("object"==typeof t&&!Array.isArray(t)){let e=Object.keys(t);return e.sort(),e.reduce((e,r)=>(e[r]=t[r],e),{})}return t})}class lw{name;constructor(e){_(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function lE(e){return JSON.parse(JSON.stringify(e))}function lS(e){return(e=Array.from(new Set(e).values())).sort(),e}async function lT(e,t){if(null==e)throw Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),"string"==typeof e)switch(e){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:e,tag:e}}if(z(e,32)){let t=e.toLowerCase();return{type:"transaction",tag:lb("tx",{hash:t}),hash:t}}if(e.orphan){let t=e;return{type:"orphan",tag:lb("orphan",t),filter:lE(t)}}if(e.address||e.topics){let r=e,i={topics:(r.topics||[]).map(e=>null==e?null:Array.isArray(e)?lS(e.map(e=>e.toLowerCase())):e.toLowerCase())};if(r.address){let e=[],n=[],s=r=>{z(r)?e.push(r):n.push((async()=>{e.push(await rL(r,t))})())};Array.isArray(r.address)?r.address.forEach(s):s(r.address),n.length&&await Promise.all(n),i.address=lS(e.map(e=>e.toLowerCase()))}return{filter:i,tag:lb("event",i),type:"event"}}R(!1,"unknown ProviderEvent","event",e)}function lC(){return new Date().getTime()}let lA={cacheTimeout:250,pollingInterval:4e3};class l_{#eF;#ex;#eB;#eU;#ez;#eV;#ej;#eG;#eq;#eH;#eW;#u;constructor(e,t){if(this.#u=Object.assign({},lA,t||{}),"any"===e)this.#eV=!0,this.#ez=null;else if(e){let t=ln.from(e);this.#eV=!1,this.#ez=Promise.resolve(t),setTimeout(()=>{this.emit("network",t,null)},0)}else this.#eV=!1,this.#ez=null;this.#eG=-1,this.#ej=new Map,this.#eF=new Map,this.#ex=new Map,this.#eB=null,this.#eU=!1,this.#eq=1,this.#eH=new Map,this.#eW=!1}get pollingInterval(){return this.#u.pollingInterval}get provider(){return this}get plugins(){return Array.from(this.#ex.values())}attachPlugin(e){if(this.#ex.get(e.name))throw Error(`cannot replace existing plugin: ${e.name} `);return this.#ex.set(e.name,e.connect(this)),this}getPlugin(e){return this.#ex.get(e)||null}get disableCcipRead(){return this.#eW}set disableCcipRead(e){this.#eW=!!e}async #eK(e){let t=this.#u.cacheTimeout;if(t<0)return await this._perform(e);let r=lb(e.method,e),i=this.#ej.get(r);return i||(i=this._perform(e),this.#ej.set(r,i),setTimeout(()=>{this.#ej.get(r)===i&&this.#ej.delete(r)},t)),await i}async ccipReadFetch(e,t,r){if(this.disableCcipRead||0===r.length||null==e.to)return null;let i=e.to.toLowerCase(),n=t.toLowerCase(),s=[];for(let t=0;t<r.length;t++){let a;let o=r[t],l=new iS(o.replace("{sender}",i).replace("{data}",n));-1===o.indexOf("{data}")&&(l.body={data:n,sender:i}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:l,index:t,urls:r});let h="unknown error";try{a=await l.send()}catch(e){s.push(e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:{error:e}});continue}try{let e=a.bodyJson;if(e.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:l,result:e}),e.data;e.message&&(h=e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:e})}catch(e){}P(a.statusCode<400||a.statusCode>=500,`response not found during CCIP fetch: ${h}`,"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:o,errorMessage:h}}),s.push(h)}P(!1,`error encountered during CCIP fetch: ${s.map(e=>JSON.stringify(e)).join(", ")}`,"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:r,errorMessages:s}})}_wrapBlock(e,t){return new iz(o2(e),this)}_wrapLog(e,t){return new iV(o0(e),this)}_wrapTransactionReceipt(e,t){return new ij(o5(e),this)}_wrapTransactionResponse(e,t){return new iG(o9(e),this)}_detectNetwork(){P(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){P(!1,`unsupported method: ${e.method}`,"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){let e=ea(await this.#eK({method:"getBlockNumber"}),"%response");return this.#eG>=0&&(this.#eG=e),e}_getAddress(e){return rL(e,this)}_getBlockTag(e){if(null==e)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}return z(e)?z(e,32)?e:eu(e):("bigint"==typeof e&&(e=ea(e,"blockTag")),"number"==typeof e)?e>=0?eu(e):this.#eG>=0?eu(this.#eG+e):this.getBlockNumber().then(t=>eu(t+e)):void R(!1,"invalid blockTag","blockTag",e)}_getFilter(e){let t,r;let i=(e.topics||[]).map(e=>null==e?null:Array.isArray(e)?lS(e.map(e=>e.toLowerCase())):e.toLowerCase()),n="blockHash"in e?e.blockHash:void 0,s=(e,t,r)=>{let s;switch(e.length){case 0:break;case 1:s=e[0];break;default:e.sort(),s=e}if(n&&(null!=t||null!=r))throw Error("invalid filter");let a={};return s&&(a.address=s),i.length&&(a.topics=i),t&&(a.fromBlock=t),r&&(a.toBlock=r),n&&(a.blockHash=n),a},a=[];if(e.address){if(Array.isArray(e.address))for(let t of e.address)a.push(this._getAddress(t));else a.push(this._getAddress(e.address))}return"fromBlock"in e&&(t=this._getBlockTag(e.fromBlock)),("toBlock"in e&&(r=this._getBlockTag(e.toBlock)),a.filter(e=>"string"!=typeof e).length||null!=t&&"string"!=typeof t||null!=r&&"string"!=typeof r)?Promise.all([Promise.all(a),t,r]).then(e=>s(e[0],e[1],e[2])):s(a,t,r)}_getTransactionRequest(e){let t=iU(e),r=[];if(["to","from"].forEach(e=>{if(null==t[e])return;let i=rL(t[e],this);lv(i)?r.push(async function(){t[e]=await i}()):t[e]=i}),null!=t.blockTag){let e=this._getBlockTag(t.blockTag);lv(e)?r.push(async function(){t.blockTag=await e}()):t.blockTag=e}return r.length?async function(){return await Promise.all(r),t}():t}async getNetwork(){if(null==this.#ez){let e=(async()=>{try{let e=await this._detectNetwork();return this.emit("network",e,null),e}catch(t){throw this.#ez===e&&(this.#ez=null),t}})();return this.#ez=e,(await e).clone()}let e=this.#ez,[t,r]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==r.chainId&&(this.#eV?(this.emit("network",r,t),this.#ez===e&&(this.#ez=Promise.resolve(r))):P(!1,`network changed: ${t.chainId} => ${r.chainId} `,"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){let e=await this.getNetwork(),t=async()=>{let{_block:t,gasPrice:r,priorityFee:i}=await A({_block:this.#eQ("latest",!1),gasPrice:(async()=>{try{let e=await this.#eK({method:"getGasPrice"});return er(e,"%response")}catch(e){}return null})(),priorityFee:(async()=>{try{let e=await this.#eK({method:"getPriorityFee"});return er(e,"%response")}catch(e){}return null})()}),n=null,s=null,a=this._wrapBlock(t,e);return a&&a.baseFeePerGas&&(s=null!=i?i:BigInt("1000000000"),n=a.baseFeePerGas*lg+s),new iB(r,n,s)},r=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(r){let e=new iS(r.url),i=await r.processFunc(t,this,e);return new iB(i.gasPrice,i.maxFeePerGas,i.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return lv(t)&&(t=await t),er(await this.#eK({method:"estimateGas",transaction:t}),"%response")}async #e$(e,t,r){P(r<ly,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});let i=iU(e);try{return G(await this._perform({method:"call",transaction:i,blockTag:t}))}catch(e){if(!this.disableCcipRead&&I(e)&&e.data&&r>=0&&"latest"===t&&null!=i.to&&"0x556f1830"===W(e.data,0,4)){let n;let s=e.data,a=await rL(i.to,this);try{n=lO(W(e.data,4))}catch(e){P(!1,e.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:i,info:{data:s}})}P(n.sender.toLowerCase()===a.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:s,reason:"OffchainLookup",transaction:i,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:n.errorArgs}});let o=await this.ccipReadFetch(i,n.calldata,n.urls);P(null!=o,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:i,info:{data:e.data,errorArgs:n.errorArgs}});let l={to:a,data:q([n.selector,lR([o,n.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:l});try{let e=await this.#e$(l,t,r+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},l),result:e}),e}catch(e){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},l),error:e}),e}}throw e}}async #eJ(e){let{value:t}=await A({network:this.getNetwork(),value:e});return t}async call(e){let{tx:t,blockTag:r}=await A({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await this.#eJ(this.#e$(t,r,e.enableCcipRead?0:-1))}async #eY(e,t,r){let i=this._getAddress(t),n=this._getBlockTag(r);return("string"!=typeof i||"string"!=typeof n)&&([i,n]=await Promise.all([i,n])),await this.#eJ(this.#eK(Object.assign(e,{address:i,blockTag:n})))}async getBalance(e,t){return er(await this.#eY({method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return ea(await this.#eY({method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return G(await this.#eY({method:"getCode"},e,t))}async getStorage(e,t,r){let i=er(t,"position");return G(await this.#eY({method:"getStorage",position:i},e,r))}async broadcastTransaction(e){let{blockNumber:t,hash:r,network:i}=await A({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),n=oF.from(e);if(n.hash!==r)throw Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(n,i).replaceableTransaction(t)}async #eQ(e,t){if(z(e,32))return await this.#eK({method:"getBlock",blockHash:e,includeTransactions:t});let r=this._getBlockTag(e);return"string"!=typeof r&&(r=await r),await this.#eK({method:"getBlock",blockTag:r,includeTransactions:t})}async getBlock(e,t){let{network:r,params:i}=await A({network:this.getNetwork(),params:this.#eQ(e,!!t)});return null==i?null:this._wrapBlock(i,r)}async getTransaction(e){let{network:t,params:r}=await A({network:this.getNetwork(),params:this.#eK({method:"getTransaction",hash:e})});return null==r?null:this._wrapTransactionResponse(r,t)}async getTransactionReceipt(e){let{network:t,params:r}=await A({network:this.getNetwork(),params:this.#eK({method:"getTransactionReceipt",hash:e})});if(null==r)return null;if(null==r.gasPrice&&null==r.effectiveGasPrice){let t=await this.#eK({method:"getTransaction",hash:e});if(null==t)throw Error("report this; could not find tx or effectiveGasPrice");r.effectiveGasPrice=t.gasPrice}return this._wrapTransactionReceipt(r,t)}async getTransactionResult(e){let{result:t}=await A({network:this.getNetwork(),result:this.#eK({method:"getTransactionResult",hash:e})});return null==t?null:G(t)}async getLogs(e){let t=this._getFilter(e);lv(t)&&(t=await t);let{network:r,params:i}=await A({network:this.getNetwork(),params:this.#eK({method:"getLogs",filter:t})});return i.map(e=>this._wrapLog(e,r))}_getProvider(e){P(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await oH.fromName(this,e)}async getAvatar(e){let t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){let t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){let t=sD((e=tm(e)).substring(2).toLowerCase()+".addr.reverse");try{let r=await oH.getEnsAddress(this),i=new nb(r,["function resolver(bytes32) view returns (address)"],this),n=await i.resolver(t);if(null==n||n===ix)return null;let s=new nb(n,["function name(bytes32) view returns (string)"],this),a=await s.name(t);if(await this.resolveName(a)!==e)return null;return a}catch(e){if(k(e,"BAD_DATA")&&"0x"===e.value||k(e,"CALL_EXCEPTION"))return null;throw e}return null}async waitForTransaction(e,t,r){let i=null!=t?t:1;return 0===i?this.getTransactionReceipt(e):new Promise(async(t,n)=>{let s=null,a=async r=>{try{let n=await this.getTransactionReceipt(e);if(null!=n&&r-n.blockNumber+1>=i){t(n),s&&(clearTimeout(s),s=null);return}}catch(e){console.log("EEE",e)}this.once("block",a)};null!=r&&(s=setTimeout(()=>{null!=s&&(s=null,this.off("block",a),n(D("timeout","TIMEOUT",{reason:"timeout"})))},r)),a(await this.getBlockNumber())})}async waitForBlock(e){P(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){let t=this.#eH.get(e);t&&(t.timer&&clearTimeout(t.timer),this.#eH.delete(e))}_setTimeout(e,t){null==t&&(t=0);let r=this.#eq++,i=()=>{this.#eH.delete(r),e()};if(this.paused)this.#eH.set(r,{timer:null,func:i,time:t});else{let e=setTimeout(i,t);this.#eH.set(r,{timer:e,func:i,time:lC()})}return r}_forEachSubscriber(e){for(let t of this.#eF.values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new lw(e.type);case"block":{let e=new lu(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new ld(this,e.type);case"event":return new lm(this,e.filter);case"transaction":return new lf(this,e.hash);case"orphan":return new lp(this,e.filter)}throw Error(`unsupported event: ${e.type}`)}_recoverSubscriber(e,t){for(let r of this.#eF.values())if(r.subscriber===e){r.started&&r.subscriber.stop(),r.subscriber=t,r.started&&t.start(),null!=this.#eB&&t.pause(this.#eB);break}}async #eX(e,t){let r=await lT(e,this);return"event"===r.type&&t&&t.length>0&&!0===t[0].removed&&(r=await lT({orphan:"drop-log",log:t[0]},this)),this.#eF.get(r.tag)||null}async #eZ(e){let t=await lT(e,this),r=t.tag,i=this.#eF.get(r);return!i&&(i={subscriber:this._getSubscriber(t),tag:r,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},this.#eF.set(r,i)),i}async on(e,t){let r=await this.#eZ(e);return r.listeners.push({listener:t,once:!1}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#eB&&r.subscriber.pause(this.#eB)),this}async once(e,t){let r=await this.#eZ(e);return r.listeners.push({listener:t,once:!0}),r.started||(r.subscriber.start(),r.started=!0,null!=this.#eB&&r.subscriber.pause(this.#eB)),this}async emit(e,...t){let r=await this.#eX(e,t);if(!r||0===r.listeners.length)return!1;let i=r.listeners.length;return r.listeners=r.listeners.filter(({listener:r,once:i})=>{let n=new iQ(this,i?null:r,e);try{r.call(this,...t,n)}catch(e){}return!i}),0===r.listeners.length&&(r.started&&r.subscriber.stop(),this.#eF.delete(r.tag)),i>0}async listenerCount(e){if(e){let t=await this.#eX(e);return t?t.listeners.length:0}let t=0;for(let{listeners:e}of this.#eF.values())t+=e.length;return t}async listeners(e){if(e){let t=await this.#eX(e);return t?t.listeners.map(({listener:e})=>e):[]}let t=[];for(let{listeners:e}of this.#eF.values())t=t.concat(e.map(({listener:e})=>e));return t}async off(e,t){let r=await this.#eX(e);if(!r)return this;if(t){let e=r.listeners.map(({listener:e})=>e).indexOf(t);e>=0&&r.listeners.splice(e,1)}return t&&0!==r.listeners.length||(r.started&&r.subscriber.stop(),this.#eF.delete(r.tag)),this}async removeAllListeners(e){if(e){let{tag:t,started:r,subscriber:i}=await this.#eZ(e);r&&i.stop(),this.#eF.delete(t)}else for(let[e,{started:t,subscriber:r}]of this.#eF)t&&r.stop(),this.#eF.delete(e);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return this.#eU}destroy(){for(let e of(this.removeAllListeners(),this.#eH.keys()))this._clearTimeout(e);this.#eU=!0}get paused(){return null!=this.#eB}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(this.#eG=-1,null!=this.#eB){if(!!e==this.#eB)return;P(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}for(let t of(this._forEachSubscriber(t=>t.pause(e)),this.#eB=!!e,this.#eH.values()))t.timer&&clearTimeout(t.timer),t.time=lC()-t.time}resume(){if(null!=this.#eB)for(let e of(this._forEachSubscriber(e=>e.resume()),this.#eB=null,this.#eH.values())){let t=e.time;t<0&&(t=0),e.time=lC(),setTimeout(e.func,t)}}}function lx(e,t){try{let r=lk(e,t);if(r)return tj(r)}catch(e){}return null}function lk(e,t){if("0x"===e)return null;try{let r=ea(W(e,t,t+32)),i=ea(W(e,r,r+32));return W(e,r+32,r+32+i)}catch(e){}return null}function lI(e){let t=eh(e);if(t.length>32)throw Error("internal; should not happen");let r=new Uint8Array(32);return r.set(t,32-t.length),r}function lD(e){if(e.length%32==0)return e;let t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}let lP=new Uint8Array([]);function lR(e){let t=[],r=0;for(let i=0;i<e.length;i++)t.push(lP),r+=32;for(let i=0;i<e.length;i++){let n=B(e[i]);t[i]=lI(r),t.push(lI(n.length)),t.push(lD(n)),r+=32+32*Math.ceil(n.length/32)}return q(t)}let lN="0x0000000000000000000000000000000000000000000000000000000000000000";function lO(e){let t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};P(H(e)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});let r=W(e,0,32);P(W(r,0,12)===W(lN,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=W(r,12);try{let r=[],i=ea(W(e,32,64)),n=ea(W(e,i,i+32)),s=W(e,i+32);for(let e=0;e<n;e++){let t=lx(s,32*e);if(null==t)throw Error("abort");r.push(t)}t.urls=r}catch(e){P(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{let r=lk(e,64);if(null==r)throw Error("abort");t.calldata=r}catch(e){P(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}P(W(e,100,128)===W(lN,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=W(e,96,100);try{let r=lk(e,128);if(null==r)throw Error("abort");t.extraData=r}catch(e){P(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(e=>t[e]),t}function lM(e,t){if(e.provider)return e.provider;P(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function lL(e,t){let r=iU(t);if(null!=r.to&&(r.to=rL(r.to,e)),null!=r.from){let t=r.from;r.from=Promise.all([e.getAddress(),rL(t,e)]).then(([e,t])=>(R(e.toLowerCase()===t.toLowerCase(),"transaction from mismatch","tx.from",t),e))}else r.from=e.getAddress();return await A(r)}class lF{provider;constructor(e){_(this,{provider:e||null})}async getNonce(e){return lM(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await lL(this,e)}async populateTransaction(e){let t=lM(this,"populateTransaction"),r=await lL(this,e);null==r.nonce&&(r.nonce=await this.getNonce("pending")),null==r.gasLimit&&(r.gasLimit=await this.estimateGas(r));let i=await this.provider.getNetwork();null!=r.chainId?R(er(r.chainId)===i.chainId,"transaction chainId mismatch","tx.chainId",e.chainId):r.chainId=i.chainId;let n=null!=r.maxFeePerGas||null!=r.maxPriorityFeePerGas;if(null!=r.gasPrice&&(2===r.type||n)?R(!1,"eip-1559 transaction do not support gasPrice","tx",e):(0===r.type||1===r.type)&&n&&R(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e),(2===r.type||null==r.type)&&null!=r.maxFeePerGas&&null!=r.maxPriorityFeePerGas)r.type=2;else if(0===r.type||1===r.type){let e=await t.getFeeData();P(null!=e.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==r.gasPrice&&(r.gasPrice=e.gasPrice)}else{let e=await t.getFeeData();if(null==r.type){if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas){if(r.authorizationList&&r.authorizationList.length?r.type=4:r.type=2,null!=r.gasPrice){let e=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=e,r.maxPriorityFeePerGas=e}else null==r.maxFeePerGas&&(r.maxFeePerGas=e.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas)}else null!=e.gasPrice?(P(!n,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==r.gasPrice&&(r.gasPrice=e.gasPrice),r.type=0):P(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"})}else(2===r.type||3===r.type||4===r.type)&&(null==r.maxFeePerGas&&(r.maxFeePerGas=e.maxFeePerGas),null==r.maxPriorityFeePerGas&&(r.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}return await A(r)}async populateAuthorization(e){let t=Object.assign({},e);return null==t.chainId&&(t.chainId=(await lM(this,"getNetwork").getNetwork()).chainId),null==t.nonce&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return lM(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return lM(this,"call").call(await this.populateCall(e))}async resolveName(e){let t=lM(this,"resolveName");return await t.resolveName(e)}async sendTransaction(e){let t=lM(this,"sendTransaction"),r=await this.populateTransaction(e);delete r.from;let i=oF.from(r);return await t.broadcastTransaction(await this.signTransaction(i))}authorize(e){P(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}function lB(e){return JSON.parse(JSON.stringify(e))}class lU{#ek;#e0;#eI;#eN;#e1;#e2;constructor(e){this.#ek=e,this.#e0=null,this.#eI=this.#eR.bind(this),this.#eN=!1,this.#e1=null,this.#e2=!1}_subscribe(e){throw Error("subclasses must override this")}_emitResults(e,t){throw Error("subclasses must override this")}_recover(e){throw Error("subclasses must override this")}async #eR(e){try{null==this.#e0&&(this.#e0=this._subscribe(this.#ek));let e=null;try{e=await this.#e0}catch(e){if(!k(e,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==e.operation)throw e}if(null==e){this.#e0=null,this.#ek._recoverSubscriber(this,this._recover(this.#ek));return}let t=await this.#ek.getNetwork();if(this.#e1||(this.#e1=t),this.#e1.chainId!==t.chainId)throw Error("chaid changed");if(this.#e2)return;let r=await this.#ek.send("eth_getFilterChanges",[e]);await this._emitResults(this.#ek,r)}catch(e){console.log("@TODO",e)}this.#ek.once("block",this.#eI)}#e3(){let e=this.#e0;e&&(this.#e0=null,e.then(e=>{this.#ek.destroyed||this.#ek.send("eth_uninstallFilter",[e])}))}start(){this.#eN||(this.#eN=!0,this.#eR(-2))}stop(){this.#eN&&(this.#eN=!1,this.#e2=!0,this.#e3(),this.#ek.off("block",this.#eI))}pause(e){e&&this.#e3(),this.#ek.off("block",this.#eI)}resume(){this.start()}}class lz extends lU{#e4;constructor(e,t){super(e),this.#e4=lB(t)}_recover(e){return new lm(e,this.#e4)}async _subscribe(e){return await e.send("eth_newFilter",[this.#e4])}async _emitResults(e,t){for(let r of t)e.emit(this.#e4,e._wrapLog(r,e._network))}}class lV extends lU{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(let r of t)e.emit("pending",r)}}let lj="bigint,boolean,function,number,string,symbol".split(/,/g);function lG(e){if(null==e||lj.indexOf(typeof e)>=0||"function"==typeof e.getAddress)return e;if(Array.isArray(e))return e.map(lG);if("object"==typeof e)return Object.keys(e).reduce((t,r)=>(t[r]=e[r],t),{});throw Error(`should not happen: ${e} (${typeof e})`)}function lq(e){return new Promise(t=>{setTimeout(t,e)})}function lH(e){return e?e.toLowerCase():e}function lW(e){return e&&"number"==typeof e.pollingInterval}let lK={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1048576,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class lQ extends lF{address;constructor(e,t){super(e),_(this,{address:t=tm(t)})}connect(e){P(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){let t=lG(e),r=[];if(t.from){let i=t.from;r.push((async()=>{let r=await rL(i,this.provider);R(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=r})())}else t.from=this.address;if(null==t.gasLimit&&r.push((async()=>{t.gasLimit=await this.provider.estimateGas({...t,from:this.address})})()),null!=t.to){let e=t.to;r.push((async()=>{t.to=await rL(e,this.provider)})())}r.length&&await Promise.all(r);let i=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[i])}async sendTransaction(e){let t=await this.provider.getBlockNumber(),r=await this.sendUncheckedTransaction(e);return await new Promise((e,i)=>{let n=[1e3,100],s=0,a=async()=>{try{let i=await this.provider.getTransaction(r);if(null!=i){e(i.replaceableTransaction(t));return}}catch(e){if(k(e,"CANCELLED")||k(e,"BAD_DATA")||k(e,"NETWORK_ERROR")||k(e,"UNSUPPORTED_OPERATION")){null==e.info&&(e.info={}),e.info.sendTransactionHash=r,i(e);return}if(k(e,"INVALID_ARGUMENT")&&(s++,null==e.info&&(e.info={}),e.info.sendTransactionHash=r,s>10)){i(e);return}this.provider.emit("error",D("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:e}))}this.provider._setTimeout(()=>{a()},n.pop()||4e3)};a()})}async signTransaction(e){let t=lG(e);if(t.from){let r=await rL(t.from,this.provider);R(null!=r&&r.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=r}else t.from=this.address;let r=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[r])}async signMessage(e){let t="string"==typeof e?tz(e):e;return await this.provider.send("personal_sign",[G(t),this.address.toLowerCase()])}async signTypedData(e,t,r){let i=lG(r),n=await rX.resolveNames(e,t,i,async e=>{let t=await rL(e);return R(null!=t,"TypedData does not support null address","value",e),t});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(rX.getPayload(n.domain,t,n.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){let t="string"==typeof e?tz(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),G(t)])}}class l$ extends l_{#u;#e6;#e5;#e9;#e8;#e1;#e7;#te(){if(this.#e9)return;let e=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");this.#e9=setTimeout(()=>{this.#e9=null;let e=this.#e5;for(this.#e5=[];e.length;){let t=[e.shift()];for(;e.length&&t.length!==this.#u.batchMaxCount;)if(t.push(e.shift()),JSON.stringify(t.map(e=>e.payload)).length>this.#u.batchMaxSize){e.unshift(t.pop());break}(async()=>{let e=1===t.length?t[0].payload:t.map(e=>e.payload);this.emit("debug",{action:"sendRpcPayload",payload:e});try{let r=await this._send(e);for(let{resolve:e,reject:i,payload:n}of(this.emit("debug",{action:"receiveRpcResult",result:r}),t)){if(this.destroyed){i(D("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:n.method}));continue}let t=r.filter(e=>e.id===n.id)[0];if(null==t){let e=D("missing response for request","BAD_DATA",{value:r,info:{payload:n}});this.emit("error",e),i(e);continue}if("error"in t){i(this.getRpcError(n,t));continue}e(t.result)}}catch(e){for(let{reject:r}of(this.emit("debug",{action:"receiveRpcError",error:e}),t))r(e)}})()}},e)}constructor(e,t){super(e,t),this.#e6=1,this.#u=Object.assign({},lK,t||{}),this.#e5=[],this.#e9=null,this.#e1=null,this.#e7=null;{let e=null,t=new Promise(t=>{e=t});this.#e8={promise:t,resolve:e}}let r=this._getOption("staticNetwork");"boolean"==typeof r?(R(!r||"any"!==e,"staticNetwork cannot be used on special network 'any'","options",t),r&&null!=e&&(this.#e1=ln.from(e))):r&&(R(null==e||r.matches(e),"staticNetwork MUST match network object","options",t),this.#e1=r)}_getOption(e){return this.#u[e]}get _network(){return P(this.#e1,"network is not available yet","NETWORK_ERROR"),this.#e1}async _perform(e){if("call"===e.method||"estimateGas"===e.method){let t=e.transaction;if(t&&null!=t.type&&er(t.type)&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){let r=await this.getFeeData();null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas&&(e=Object.assign({},e,{transaction:Object.assign({},t,{type:void 0})}))}}let t=this.getRpcRequest(e);return null!=t?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){let e=this._getOption("staticNetwork");if(e){if(!0!==e)return e;if(this.#e1)return this.#e1}return this.#e7||(this.ready?this.#e7=(async()=>{try{let e=ln.from(er(await this.send("eth_chainId",[])));return this.#e7=null,e}catch(e){throw this.#e7=null,e}})():this.#e7=(async()=>{let e;let t={id:this.#e6++,method:"eth_chainId",params:[],jsonrpc:"2.0"};this.emit("debug",{action:"sendRpcPayload",payload:t});try{e=(await this._send(t))[0],this.#e7=null}catch(e){throw this.#e7=null,this.emit("debug",{action:"receiveRpcError",error:e}),e}if(this.emit("debug",{action:"receiveRpcResult",result:e}),"result"in e)return ln.from(er(e.result));throw this.getRpcError(t,e)})()),await this.#e7}_start(){null!=this.#e8&&null!=this.#e8.resolve&&(this.#e8.resolve(),this.#e8=null,(async()=>{for(;null==this.#e1&&!this.destroyed;)try{this.#e1=await this._detectNetwork()}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",D("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await lq(1e3)}this.#te()})())}async _waitUntilReady(){if(null!=this.#e8)return await this.#e8.promise}_getSubscriber(e){return"pending"===e.type?new lV(this):"event"===e.type?this._getOption("polling")?new lm(this,e.filter):new lz(this,e.filter):"orphan"===e.type&&"drop-log"===e.filter.orphan?new lw("orphan"):super._getSubscriber(e)}get ready(){return null==this.#e8}getRpcTransaction(e){let t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(r=>{if(null==e[r])return;let i=r;"gasLimit"===r&&(i="gas"),t[i]=eu(er(e[r],`tx.${r}`))}),["from","to","data"].forEach(r=>{null!=e[r]&&(t[r]=G(e[r]))}),e.accessList&&(t.accessList=r0(e.accessList)),e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.map(e=>e.toLowerCase())),e.authorizationList&&(t.authorizationList=e.authorizationList.map(e=>{let t=it(e);return{address:t.address,nonce:eu(t.nonce),chainId:eu(t.chainId),yParity:eu(t.signature.yParity),r:eu(t.signature.r),s:eu(t.signature.s)}})),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[lH(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[lH(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[lH(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[lH(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&null!=e.filter.address&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(lH):e.filter.address=lH(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){let{method:r}=e,{error:i}=t;if("eth_estimateGas"===r&&i.message){let t=i.message;if(!t.match(/revert/i)&&t.match(/insufficient funds/i))return D("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:i}});if(t.match(/nonce/i)&&t.match(/too low/i))return D("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:i}})}if("eth_call"===r||"eth_estimateGas"===r){let t=lY(i),n=rN.getBuiltinCallException("eth_call"===r?"call":"estimateGas",e.params[0],t?t.data:null);return n.info={error:i,payload:e},n}let n=JSON.stringify(lZ(i));if("string"==typeof i.message&&i.message.match(/user denied|ethers-user-denied/i))return D("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[r]||"unknown",reason:"rejected",info:{payload:e,error:i}});if("eth_sendRawTransaction"===r||"eth_sendTransaction"===r){let t=e.params[0];if(n.match(/insufficient funds|base fee exceeds gas limit/i))return D("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t,info:{error:i}});if(n.match(/nonce/i)&&n.match(/too low/i))return D("nonce has already been used","NONCE_EXPIRED",{transaction:t,info:{error:i}});if(n.match(/replacement transaction/i)&&n.match(/underpriced/i))return D("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t,info:{error:i}});if(n.match(/only replay-protected/i))return D("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:r,info:{transaction:t,info:{error:i}}})}let s=!!n.match(/the method .* does not exist/i);return(!s&&i&&i.details&&i.details.startsWith("Unauthorized method:")&&(s=!0),s)?D("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:i,payload:e}}):D("could not coalesce error","UNKNOWN_ERROR",{error:i,payload:e})}send(e,t){if(this.destroyed)return Promise.reject(D("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));let r=this.#e6++,i=new Promise((i,n)=>{this.#e5.push({resolve:i,reject:n,payload:{method:e,params:t,id:r,jsonrpc:"2.0"}})});return this.#te(),i}async getSigner(e){null==e&&(e=0);let t=this.send("eth_accounts",[]);if("number"==typeof e){let r=await t;if(e>=r.length)throw Error("no such account");return new lQ(this,r[e])}let{accounts:r}=await A({network:this.getNetwork(),accounts:t});for(let t of(e=tm(e),r))if(tm(t)===e)return new lQ(this,e);throw Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(e=>new lQ(this,e))}destroy(){for(let{payload:e,reject:t}of(this.#e9&&(clearTimeout(this.#e9),this.#e9=null),this.#e5))t(D("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));this.#e5=[],super.destroy()}}class lJ extends l${#tt;constructor(e,t){super(e,t);let r=this._getOption("pollingInterval");null==r&&(r=lK.pollingInterval),this.#tt=r}_getSubscriber(e){let t=super._getSubscriber(e);return lW(t)&&(t.pollingInterval=this.#tt),t}get pollingInterval(){return this.#tt}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw Error("invalid interval");this.#tt=e,this._forEachSubscriber(e=>{lW(e)&&(e.pollingInterval=this.#tt)})}}function lY(e){if(null==e)return null;if("string"==typeof e.message&&e.message.match(/revert/i)&&z(e.data))return{message:e.message,data:e.data};if("object"==typeof e){for(let t in e){let r=lY(e[t]);if(r)return r}return null}if("string"==typeof e)try{return lY(JSON.parse(e))}catch(e){}return null}function lX(e,t){if(null!=e){if("string"==typeof e.message&&t.push(e.message),"object"==typeof e)for(let r in e)lX(e[r],t);if("string"==typeof e)try{return lX(JSON.parse(e),t)}catch(e){}}}function lZ(e){let t=[];return lX(e,t),t}class l0 extends lJ{#G;#tr;constructor(e,t,r){let i=Object.assign({},null!=r?r:{},{batchMaxCount:1});R(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,i),this.#tr=null,r&&r.providerInfo&&(this.#tr=r.providerInfo),this.#G=async(t,r)=>{let i={method:t,params:r};this.emit("debug",{action:"sendEip1193Request",payload:i});try{let t=await e.request(i);return this.emit("debug",{action:"receiveEip1193Result",result:t}),t}catch(t){let e=Error(t.message);throw e.code=t.code,e.data=t.data,e.payload=i,this.emit("debug",{action:"receiveEip1193Error",error:e}),e}}}get providerInfo(){return this.#tr}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){R(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{let t=await this.#G(e.method,e.params||[]);return[{id:e.id,result:t}]}catch(t){return[{id:e.id,error:{code:t.code,data:t.data,message:t.message}}]}}getRpcError(e,t){switch((t=JSON.parse(JSON.stringify(t))).error.code||-1){case 4001:t.error.message=`ethers-user-denied: ${t.error.message}`;break;case 4200:t.error.message=`ethers-unsupported: ${t.error.message}`}return super.getRpcError(e,t)}async hasSigner(e){null==e&&(e=0);let t=await this.send("eth_accounts",[]);return"number"==typeof e?t.length>e:(e=e.toLowerCase(),0!==t.filter(t=>t.toLowerCase()===e).length)}async getSigner(e){if(null==e&&(e=0),!await this.hasSigner(e))try{await this.#G("eth_requestAccounts",[])}catch(t){let e=t.payload;throw this.getRpcError(e,{id:e.id,error:t})}return await super.getSigner(e)}static async discover(e){if(null==e&&(e={}),e.provider)return new l0(e.provider);let t=e.window?e.window:"undefined"!=typeof window?window:null;if(null==t)return null;let r=e.anyProvider;if(r&&t.ethereum)return new l0(t.ethereum);if(!("addEventListener"in t&&"dispatchEvent"in t&&"removeEventListener"in t))return null;let i=e.timeout?e.timeout:300;return 0===i?null:await new Promise((n,s)=>{let a=[],o=e=>{a.push(e.detail),r&&l()},l=()=>{if(clearTimeout(h),a.length){if(e&&e.filter){let t=e.filter(a.map(e=>Object.assign({},e.info)));if(null==t)n(null);else if(t instanceof l0)n(t);else{let e=null;if(t.uuid&&(e=a.filter(e=>t.uuid===e.info.uuid)[0]),e){let{provider:t,info:r}=e;n(new l0(t,void 0,{providerInfo:r}))}else s(D("filter returned unknown info","UNSUPPORTED_OPERATION",{value:t}))}}else{let{provider:e,info:t}=a[0];n(new l0(e,void 0,{providerInfo:t}))}}else n(null);t.removeEventListener("eip6963:announceProvider",o)},h=setTimeout(()=>{l()},i);t.addEventListener("eip6963:announceProvider",o),t.dispatchEvent(new Event("eip6963:requestProvider"))})}}},2585:(e,t,r)=>{"use strict";r.d(t,{C6:()=>i.C6,ZF:()=>i.ZF});var i=r(3497),n="firebase",s="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(0,i.KN)(n,s,"app")},76:(e,t,r)=>{"use strict";r.d(t,{hJ:()=>fD,oe:()=>m8,AK:()=>gi,JU:()=>fP,QT:()=>m4,PL:()=>m5,ad:()=>fF,b9:()=>mA,IO:()=>mw,Bt:()=>gn,pl:()=>m9});var i,n,s,a,o=r(3497),l=r(7752),h=r(5036),u=r(3837),c=r(715),d="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},p={};(function(){function e(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function t(e,t,r){r||(r=0);var i=Array(16);if("string"==typeof t)for(var n=0;16>n;++n)i[n]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;else for(n=0;16>n;++n)i[n]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;t=e.g[0],r=e.g[1],n=e.g[2];var s=e.g[3],a=t+(s^r&(n^s))+i[0]+3614090360&4294967295;a=s+(n^(t=r+(a<<7&4294967295|a>>>25))&(r^n))+i[1]+3905402710&4294967295,a=n+(r^(s=t+(a<<12&4294967295|a>>>20))&(t^r))+i[2]+606105819&4294967295,a=r+(t^(n=s+(a<<17&4294967295|a>>>15))&(s^t))+i[3]+3250441966&4294967295,a=t+(s^(r=n+(a<<22&4294967295|a>>>10))&(n^s))+i[4]+4118548399&4294967295,a=s+(n^(t=r+(a<<7&4294967295|a>>>25))&(r^n))+i[5]+1200080426&4294967295,a=n+(r^(s=t+(a<<12&4294967295|a>>>20))&(t^r))+i[6]+2821735955&4294967295,a=r+(t^(n=s+(a<<17&4294967295|a>>>15))&(s^t))+i[7]+4249261313&4294967295,a=t+(s^(r=n+(a<<22&4294967295|a>>>10))&(n^s))+i[8]+1770035416&4294967295,a=s+(n^(t=r+(a<<7&4294967295|a>>>25))&(r^n))+i[9]+2336552879&4294967295,a=n+(r^(s=t+(a<<12&4294967295|a>>>20))&(t^r))+i[10]+4294925233&4294967295,a=r+(t^(n=s+(a<<17&4294967295|a>>>15))&(s^t))+i[11]+2304563134&4294967295,a=t+(s^(r=n+(a<<22&4294967295|a>>>10))&(n^s))+i[12]+1804603682&4294967295,a=s+(n^(t=r+(a<<7&4294967295|a>>>25))&(r^n))+i[13]+4254626195&4294967295,a=n+(r^(s=t+(a<<12&4294967295|a>>>20))&(t^r))+i[14]+2792965006&4294967295,a=r+(t^(n=s+(a<<17&4294967295|a>>>15))&(s^t))+i[15]+1236535329&4294967295,r=n+(a<<22&4294967295|a>>>10),a=t+(n^s&(r^n))+i[1]+4129170786&4294967295,t=r+(a<<5&4294967295|a>>>27),a=s+(r^n&(t^r))+i[6]+3225465664&4294967295,s=t+(a<<9&4294967295|a>>>23),a=n+(t^r&(s^t))+i[11]+643717713&4294967295,n=s+(a<<14&4294967295|a>>>18),a=r+(s^t&(n^s))+i[0]+3921069994&4294967295,r=n+(a<<20&4294967295|a>>>12),a=t+(n^s&(r^n))+i[5]+3593408605&4294967295,t=r+(a<<5&4294967295|a>>>27),a=s+(r^n&(t^r))+i[10]+38016083&4294967295,s=t+(a<<9&4294967295|a>>>23),a=n+(t^r&(s^t))+i[15]+3634488961&4294967295,n=s+(a<<14&4294967295|a>>>18),a=r+(s^t&(n^s))+i[4]+3889429448&4294967295,r=n+(a<<20&4294967295|a>>>12),a=t+(n^s&(r^n))+i[9]+568446438&4294967295,t=r+(a<<5&4294967295|a>>>27),a=s+(r^n&(t^r))+i[14]+3275163606&4294967295,s=t+(a<<9&4294967295|a>>>23),a=n+(t^r&(s^t))+i[3]+4107603335&4294967295,n=s+(a<<14&4294967295|a>>>18),a=r+(s^t&(n^s))+i[8]+1163531501&4294967295,r=n+(a<<20&4294967295|a>>>12),a=t+(n^s&(r^n))+i[13]+2850285829&4294967295,t=r+(a<<5&4294967295|a>>>27),a=s+(r^n&(t^r))+i[2]+4243563512&4294967295,s=t+(a<<9&4294967295|a>>>23),a=n+(t^r&(s^t))+i[7]+1735328473&4294967295,n=s+(a<<14&4294967295|a>>>18),a=r+(s^t&(n^s))+i[12]+2368359562&4294967295,a=t+((r=n+(a<<20&4294967295|a>>>12))^n^s)+i[5]+4294588738&4294967295,a=s+((t=r+(a<<4&4294967295|a>>>28))^r^n)+i[8]+2272392833&4294967295,a=n+((s=t+(a<<11&4294967295|a>>>21))^t^r)+i[11]+1839030562&4294967295,a=r+((n=s+(a<<16&4294967295|a>>>16))^s^t)+i[14]+4259657740&4294967295,a=t+((r=n+(a<<23&4294967295|a>>>9))^n^s)+i[1]+2763975236&4294967295,a=s+((t=r+(a<<4&4294967295|a>>>28))^r^n)+i[4]+1272893353&4294967295,a=n+((s=t+(a<<11&4294967295|a>>>21))^t^r)+i[7]+4139469664&4294967295,a=r+((n=s+(a<<16&4294967295|a>>>16))^s^t)+i[10]+3200236656&4294967295,a=t+((r=n+(a<<23&4294967295|a>>>9))^n^s)+i[13]+681279174&4294967295,a=s+((t=r+(a<<4&4294967295|a>>>28))^r^n)+i[0]+3936430074&4294967295,a=n+((s=t+(a<<11&4294967295|a>>>21))^t^r)+i[3]+3572445317&4294967295,a=r+((n=s+(a<<16&4294967295|a>>>16))^s^t)+i[6]+76029189&4294967295,a=t+((r=n+(a<<23&4294967295|a>>>9))^n^s)+i[9]+3654602809&4294967295,a=s+((t=r+(a<<4&4294967295|a>>>28))^r^n)+i[12]+3873151461&4294967295,a=n+((s=t+(a<<11&4294967295|a>>>21))^t^r)+i[15]+530742520&4294967295,a=r+((n=s+(a<<16&4294967295|a>>>16))^s^t)+i[2]+3299628645&4294967295,r=n+(a<<23&4294967295|a>>>9),a=t+(n^(r|~s))+i[0]+4096336452&4294967295,t=r+(a<<6&4294967295|a>>>26),a=s+(r^(t|~n))+i[7]+1126891415&4294967295,s=t+(a<<10&4294967295|a>>>22),a=n+(t^(s|~r))+i[14]+2878612391&4294967295,n=s+(a<<15&4294967295|a>>>17),a=r+(s^(n|~t))+i[5]+4237533241&4294967295,r=n+(a<<21&4294967295|a>>>11),a=t+(n^(r|~s))+i[12]+1700485571&4294967295,t=r+(a<<6&4294967295|a>>>26),a=s+(r^(t|~n))+i[3]+2399980690&4294967295,s=t+(a<<10&4294967295|a>>>22),a=n+(t^(s|~r))+i[10]+4293915773&4294967295,n=s+(a<<15&4294967295|a>>>17),a=r+(s^(n|~t))+i[1]+2240044497&4294967295,r=n+(a<<21&4294967295|a>>>11),a=t+(n^(r|~s))+i[8]+1873313359&4294967295,t=r+(a<<6&4294967295|a>>>26),a=s+(r^(t|~n))+i[15]+4264355552&4294967295,s=t+(a<<10&4294967295|a>>>22),a=n+(t^(s|~r))+i[6]+2734768916&4294967295,n=s+(a<<15&4294967295|a>>>17),a=r+(s^(n|~t))+i[13]+1309151649&4294967295,r=n+(a<<21&4294967295|a>>>11),a=t+(n^(r|~s))+i[4]+4149444226&4294967295,t=r+(a<<6&4294967295|a>>>26),a=s+(r^(t|~n))+i[11]+3174756917&4294967295,s=t+(a<<10&4294967295|a>>>22),a=n+(t^(s|~r))+i[2]+718787259&4294967295,n=s+(a<<15&4294967295|a>>>17),a=r+(s^(n|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(n+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+n&4294967295,e.g[3]=e.g[3]+s&4294967295}function r(e,t){var r=o;return Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=t(e)}function s(e,t){this.h=t;for(var r=[],i=!0,n=e.length-1;0<=n;n--){var s=0|e[n];i&&s==t||(r[n]=s,i=!1)}this.g=r}(function(e,t){function r(){}r.prototype=t.prototype,e.D=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.C=function(e,r,i){for(var n=Array(arguments.length-2),s=2;s<arguments.length;s++)n[s-2]=arguments[s];return t.prototype[r].apply(e,n)}})(e,function(){this.blockSize=-1}),e.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},e.prototype.u=function(e,r){void 0===r&&(r=e.length);for(var i=r-this.blockSize,n=this.B,s=this.h,a=0;a<r;){if(0==s)for(;a<=i;)t(this,e,a),a+=this.blockSize;if("string"==typeof e){for(;a<r;)if(n[s++]=e.charCodeAt(a++),s==this.blockSize){t(this,n),s=0;break}}else for(;a<r;)if(n[s++]=e[a++],s==this.blockSize){t(this,n),s=0;break}}this.h=s,this.o+=r},e.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var r=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&r,r/=256;for(this.u(e),e=Array(16),t=r=0;4>t;++t)for(var i=0;32>i;i+=8)e[r++]=this.g[t]>>>i&255;return e};var a,o={};function l(e){return -128<=e&&128>e?r(e,function(e){return new s([0|e],0>e?-1:0)}):new s([0|e],0>e?-1:0)}function h(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return y(h(-e));for(var t=[],r=1,i=0;e>=r;i++)t[i]=e/r|0,r*=4294967296;return new s(t,0)}function u(e,t){if(0==e.length)throw Error("number format error: empty string");if(2>(t=t||10)||36<t)throw Error("radix out of range: "+t);if("-"==e.charAt(0))return y(u(e.substring(1),t));if(0<=e.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=h(Math.pow(t,8)),i=c,n=0;n<e.length;n+=8){var s=Math.min(8,e.length-n),a=parseInt(e.substring(n,n+s),t);8>s?(s=h(Math.pow(t,s)),i=i.j(s).add(h(a))):i=(i=i.j(r)).add(h(a))}return i}var c=l(0),d=l(1),f=l(16777216);function m(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function g(e){return -1==e.h}function y(e){for(var t=e.g.length,r=[],i=0;i<t;i++)r[i]=~e.g[i];return new s(r,~e.h).add(d)}function v(e,t){return e.add(y(t))}function b(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function w(e,t){this.g=e,this.h=t}function E(e,t){if(m(t))throw Error("division by zero");if(m(e))return new w(c,c);if(g(e))return t=E(y(e),t),new w(y(t.g),y(t.h));if(g(t))return t=E(e,y(t)),new w(y(t.g),t.h);if(30<e.g.length){if(g(e)||g(t))throw Error("slowDivide_ only works with positive integers.");for(var r=d,i=t;0>=i.l(e);)r=S(r),i=S(i);var n=T(r,1),s=T(i,1);for(i=T(i,2),r=T(r,2);!m(i);){var a=s.add(i);0>=a.l(e)&&(n=n.add(r),s=a),i=T(i,1),r=T(r,1)}return t=v(e,n.j(t)),new w(n,t)}for(n=c;0<=e.l(t);){for(i=48>=(i=Math.ceil(Math.log(r=Math.max(1,Math.floor(e.m()/t.m())))/Math.LN2))?1:Math.pow(2,i-48),a=(s=h(r)).j(t);g(a)||0<a.l(e);)r-=i,a=(s=h(r)).j(t);m(s)&&(s=d),n=n.add(s),e=v(e,a)}return new w(n,e)}function S(e){for(var t=e.g.length+1,r=[],i=0;i<t;i++)r[i]=e.i(i)<<1|e.i(i-1)>>>31;return new s(r,e.h)}function T(e,t){var r=t>>5;t%=32;for(var i=e.g.length-r,n=[],a=0;a<i;a++)n[a]=0<t?e.i(a+r)>>>t|e.i(a+r+1)<<32-t:e.i(a+r);return new s(n,e.h)}(a=s.prototype).m=function(){if(g(this))return-y(this).m();for(var e=0,t=1,r=0;r<this.g.length;r++){var i=this.i(r);e+=(0<=i?i:4294967296+i)*t,t*=4294967296}return e},a.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(m(this))return"0";if(g(this))return"-"+y(this).toString(e);for(var t=h(Math.pow(e,6)),r=this,i="";;){var n=E(r,t).g,s=((0<(r=v(r,n.j(t))).g.length?r.g[0]:r.h)>>>0).toString(e);if(m(r=n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},a.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},a.l=function(e){return g(e=v(this,e))?-1:m(e)?0:1},a.abs=function(){return g(this)?y(this):this},a.add=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0,n=0;n<=t;n++){var a=i+(65535&this.i(n))+(65535&e.i(n)),o=(a>>>16)+(this.i(n)>>>16)+(e.i(n)>>>16);i=o>>>16,a&=65535,o&=65535,r[n]=o<<16|a}return new s(r,-2147483648&r[r.length-1]?-1:0)},a.j=function(e){if(m(this)||m(e))return c;if(g(this))return g(e)?y(this).j(y(e)):y(y(this).j(e));if(g(e))return y(this.j(y(e)));if(0>this.l(f)&&0>e.l(f))return h(this.m()*e.m());for(var t=this.g.length+e.g.length,r=[],i=0;i<2*t;i++)r[i]=0;for(i=0;i<this.g.length;i++)for(var n=0;n<e.g.length;n++){var a=this.i(i)>>>16,o=65535&this.i(i),l=e.i(n)>>>16,u=65535&e.i(n);r[2*i+2*n]+=o*u,b(r,2*i+2*n),r[2*i+2*n+1]+=a*u,b(r,2*i+2*n+1),r[2*i+2*n+1]+=o*l,b(r,2*i+2*n+1),r[2*i+2*n+2]+=a*l,b(r,2*i+2*n+2)}for(i=0;i<t;i++)r[i]=r[2*i+1]<<16|r[2*i];for(i=t;i<2*t;i++)r[i]=0;return new s(r,0)},a.A=function(e){return E(this,e).h},a.and=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)&e.i(i);return new s(r,this.h&e.h)},a.or=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)|e.i(i);return new s(r,this.h|e.h)},a.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),r=[],i=0;i<t;i++)r[i]=this.i(i)^e.i(i);return new s(r,this.h^e.h)},e.prototype.digest=e.prototype.v,e.prototype.reset=e.prototype.s,e.prototype.update=e.prototype.u,n=p.Md5=e,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=h,s.fromString=u,i=p.Integer=s}).apply(void 0!==d?d:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var f=r(6113),m=r(1968),g=r(3716);let y="@firebase/firestore",v="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}b.UNAUTHENTICATED=new b(null),b.GOOGLE_CREDENTIALS=new b("google-credentials-uid"),b.FIRST_PARTY=new b("first-party-uid"),b.MOCK_USER=new b("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w="11.10.0";function E(e){w=e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(e){return(0,u.inspect)(e,{depth:100})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let T=new h.Yd("@firebase/firestore");function C(){return T.logLevel}function A(e,...t){if(T.logLevel<=h.in.DEBUG){let r=t.map(k);T.debug(`Firestore (${w}): ${e}`,...r)}}function _(e,...t){if(T.logLevel<=h.in.ERROR){let r=t.map(k);T.error(`Firestore (${w}): ${e}`,...r)}}function x(e,...t){if(T.logLevel<=h.in.WARN){let r=t.map(k);T.warn(`Firestore (${w}): ${e}`,...r)}}function k(e){if("string"==typeof e)return e;try{return S(e)}catch(t){return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I(e,t,r){let i="Unexpected state";"string"==typeof t?i=t:r=t,D(e,i,r)}function D(e,t,r){let i=`FIRESTORE (${w}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==r)try{let e=JSON.stringify(r);i+=" CONTEXT: "+e}catch(e){i+=" CONTEXT: "+r}throw _(i),Error(i)}function P(e,t,r,i){let n="Unexpected state";"string"==typeof r?n=r:i=r,e||D(t,n,i)}function R(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class O extends c.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class F{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(b.UNAUTHENTICATED))}shutdown(){}}class B{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class U{constructor(e){this.authProvider=e,this.currentUser=b.UNAUTHENTICATED,this.tokenCounter=0,this.forceRefresh=!1,this.auth=null}start(e,t){P(void 0===this.tokenListener,42304);let r=this.tokenCounter,i=e=>this.tokenCounter!==r?(r=this.tokenCounter,t(e)):Promise.resolve(),n=new M;this.tokenListener=()=>{this.tokenCounter++,this.currentUser=this.getUser(),n.resolve(),n=new M,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let t=n;e.enqueueRetryable(async()=>{await t.promise,await i(this.currentUser)})},a=e=>{A("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.tokenListener&&(this.auth.addAuthTokenListener(this.tokenListener),s())};this.authProvider.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){let e=this.authProvider.getImmediate({optional:!0});e?a(e):(A("FirebaseAuthCredentialsProvider","Auth not yet detected"),n.resolve(),n=new M)}},0),s()}getToken(){let e=this.tokenCounter,t=this.forceRefresh;return(this.forceRefresh=!1,this.auth)?this.auth.getToken(t).then(t=>this.tokenCounter!==e?(A("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(P("string"==typeof t.accessToken,31837,{tokenData:t}),new L(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.tokenListener&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=void 0}getUser(){let e=this.auth&&this.auth.getUid();return P(null===e||"string"==typeof e,2055,{currentUid:e}),new b(e)}}class z{constructor(e,t,r){this.sessionIndex=e,this.iamToken=t,this.authTokenFactory=r,this.type="FirstParty",this.user=b.FIRST_PARTY,this._headers=new Map}getAuthToken(){return this.authTokenFactory?this.authTokenFactory():null}get headers(){this._headers.set("X-Goog-AuthUser",this.sessionIndex);let e=this.getAuthToken();return e&&this._headers.set("Authorization",e),this.iamToken&&this._headers.set("X-Goog-Iam-Authorization-Token",this.iamToken),this._headers}}class V{constructor(e,t,r){this.sessionIndex=e,this.iamToken=t,this.authTokenFactory=r}getToken(){return Promise.resolve(new z(this.sessionIndex,this.iamToken,this.authTokenFactory))}start(e,t){e.enqueueRetryable(()=>t(b.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class j{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class G{constructor(e,t){this.appCheckProvider=t,this.forceRefresh=!1,this.appCheck=null,this.latestAppCheckToken=null,this.serverAppAppCheckToken=null,(0,o.rh)(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken)}start(e,t){P(void 0===this.tokenListener,3512);let r=e=>{null!=e.error&&A("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let r=e.token!==this.latestAppCheckToken;return this.latestAppCheckToken=e.token,A("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?t(e.token):Promise.resolve()};this.tokenListener=t=>{e.enqueueRetryable(()=>r(t))};let i=e=>{A("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.tokenListener&&this.appCheck.addTokenListener(this.tokenListener)};this.appCheckProvider.onInit(e=>i(e)),setTimeout(()=>{if(!this.appCheck){let e=this.appCheckProvider.getImmediate({optional:!0});e?i(e):A("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.serverAppAppCheckToken)return Promise.resolve(new j(this.serverAppAppCheckToken));let e=this.forceRefresh;return(this.forceRefresh=!1,this.appCheck)?this.appCheck.getToken(e).then(e=>e?(P("string"==typeof e.token,44558,{tokenResult:e}),this.latestAppCheckToken=e.token,new j(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.tokenListener&&this.appCheck.removeTokenListener(this.tokenListener),this.tokenListener=void 0}}function q(e){if(!e)return new F;switch(e.type){case"firstParty":return new V(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new O(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(e){return(0,f.randomBytes)(e)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(){return new u.TextEncoder}function K(){return new TextDecoder("utf-8")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="",i=20;for(;r.length<i;){let n=H(40);for(let s=0;s<n.length;++s)r.length<i&&n[s]<t&&(r+=e.charAt(n[s]%e.length))}return r}}function $(e,t){return e<t?-1:e>t?1:0}function J(e,t){let r=0;for(;r<e.length&&r<t.length;){let i=e.codePointAt(r),n=t.codePointAt(r);if(i!==n){if(i<128&&n<128)return $(i,n);{let s=W(),a=X(s.encode(Y(e,r)),s.encode(Y(t,r)));if(0!==a)return a;return $(i,n)}}r+=i>65535?2:1}return $(e.length,t.length)}function Y(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function X(e,t){for(let r=0;r<e.length&&r<t.length;++r)if(e[r]!==t[r])return $(e[r],t[r]);return $(e.length,t.length)}function Z(e,t,r){return e.length===t.length&&e.every((e,i)=>r(e,t[i]))}function ee(e){return e+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let et="__name__";class er{constructor(e,t,r){void 0===t?t=0:t>e.length&&I(637,{offset:t,range:e.length}),void 0===r?r=e.length-t:r>e.length-t&&I(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===er.comparator(this,e)}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof er?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let r=er.compareSegments(e.get(i),t.get(i));if(0!==r)return r}return $(e.length,t.length)}static compareSegments(e,t){let r=er.isNumericId(e),i=er.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?er.extractNumericId(e).compare(er.extractNumericId(t)):J(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return i.fromString(e.substring(4,e.length-2))}}class ei extends er{construct(e,t,r){return new ei(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(e=>e.length>0))}return new ei(t)}static emptyPath(){return new ei([])}}let en=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class es extends er{construct(e,t,r){return new es(e,t,r)}static isValidIdentifier(e){return en.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),es.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===et}static keyField(){return new es([et])}static fromServerFormat(e){let t=[],r="",i=0,n=()=>{if(0===r.length)throw new O(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let t=e[i];if("\\"===t){if(i+1===e.length)throw new O(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let t=e[i+1];if(!("\\"===t||"."===t||"`"===t))throw new O(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=t,i+=2}else"`"===t?s=!s:"."!==t||s?r+=t:n(),i++}if(n(),s)throw new O(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new es(t)}static emptyPath(){return new es([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(e){this.path=e}static fromPath(e){return new ea(ei.fromString(e))}static fromName(e){return new ea(ei.fromString(e).popFirst(5))}static empty(){return new ea(ei.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ei.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ei.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ea(new ei(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eo(e,t,r){if(!r)throw new O(N.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function el(e,t,r,i){if(!0===t&&!0===i)throw new O(N.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)}function eh(e){if(!ea.isDocumentKey(e))throw new O(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function eu(e){if(ea.isDocumentKey(e))throw new O(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ec(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function ed(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{let t=ep(e);return t?`a custom ${t} object`:"an object"}}if("function"==typeof e)return"a function";return I(12329,{type:typeof e})}function ep(e){return e.constructor?e.constructor.name:null}function ef(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new O(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let r=ed(e);throw new O(N.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function em(e,t){if(t<=0)throw new O(N.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(e,t){let r={typeString:e};return t&&(r.value=t),r}function ey(e,t){let r;if(!ec(e))throw new O(N.INVALID_ARGUMENT,"JSON must be an object");for(let i in t)if(t[i]){let n=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){r=`JSON missing required field: '${i}'`;break}let a=e[i];if(n&&typeof a!==n){r=`JSON field '${i}' must be a ${n}.`;break}if(void 0!==s&&a!==s.value){r=`Expected '${i}' field to equal '${s.value}'`;break}}if(r)throw new O(N.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ev=-62135596800,eb=1e6;class ew{static now(){return ew.fromMillis(Date.now())}static fromDate(e){return ew.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*eb);return new ew(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new O(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ev||e>=253402300800)throw new O(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/eb}_compareTo(e){return this.seconds===e.seconds?$(this.nanoseconds,e.nanoseconds):$(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ew._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ey(e,ew._jsonSchema))return new ew(e.seconds,e.nanoseconds)}valueOf(){return String(this.seconds-ev).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ew._jsonSchemaVersion="firestore/timestamp/1.0",ew._jsonSchema={type:eg("string",ew._jsonSchemaVersion),seconds:eg("number"),nanoseconds:eg("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{static fromTimestamp(e){return new eE(e)}static min(){return new eE(new ew(0,0))}static max(){return new eE(new ew(253402300799,1e9-1))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eS=-1,eT=0;class eC{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function eA(e){return e.fields.find(e=>2===e.kind)}function e_(e){return e.fields.filter(e=>2!==e.kind)}function ex(e){let t=e_(e);return 0===t.length?0:t[t.length-1].kind}function ek(e,t){let r=$(e.collectionGroup,t.collectionGroup);if(0!==r)return r;for(let i=0;i<Math.min(e.fields.length,t.fields.length);++i)if(0!==(r=eP(e.fields[i],t.fields[i])))return r;return $(e.fields.length,t.fields.length)}function eI(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`}eC.UNKNOWN_ID=-1;class eD{constructor(e,t){this.fieldPath=e,this.kind=t}}function eP(e,t){let r=es.comparator(e.fieldPath,t.fieldPath);return 0!==r?r:$(e.kind,t.kind)}class eR{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new eR(eT,eM.min())}}function eN(e,t){let r=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1;return new eM(eE.fromTimestamp(1e9===i?new ew(r+1,0):new ew(r,i)),ea.empty(),t)}function eO(e){return new eM(e.readTime,e.key,eS)}class eM{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new eM(eE.min(),ea.empty(),eS)}static max(){return new eM(eE.max(),ea.empty(),eS)}}function eL(e,t){let r=e.readTime.compareTo(t.readTime);return 0!==r||0!==(r=ea.comparator(e.documentKey,t.documentKey))?r:$(e.largestBatchId,t.largestBatchId)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eB{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eU(e){if(e.code===N.FAILED_PRECONDITION&&e.message===eF)A("LocalStore","Unexpectedly lost primary lease");else throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ez{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return(this.callbackAttached&&I(59440),this.callbackAttached=!0,this.isDone)?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ez((r,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(r,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();if(t instanceof ez)return t;return ez.resolve(t)}catch(e){return ez.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ez.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ez.reject(t)}static resolve(e){return new ez((t,r)=>{t(e)})}static reject(e){return new ez((t,r)=>{r(e)})}static waitFor(e){return new ez((t,r)=>{let i=0,n=0,s=!1;e.forEach(e=>{++i,e.next(()=>{++n,s&&n===i&&t()},e=>r(e))}),s=!0,n===i&&t()})}static or(e){let t=ez.resolve(!1);for(let r of e)t=t.next(e=>e?ez.resolve(e):r());return t}static forEach(e,t){let r=[];return e.forEach((e,i)=>{r.push(t.call(this,e,i))}),this.waitFor(r)}static mapArray(e,t){return new ez((r,i)=>{let n=e.length,s=Array(n),a=0;for(let o=0;o<n;o++){let l=o;t(e[l]).next(e=>{s[l]=e,++a===n&&r(s)},e=>i(e))}})}static doWhile(e,t){return new ez((r,i)=>{let n=()=>{!0===e()?t().next(()=>{n()},i):r()};n()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eV="SimpleDb",ej=3;class eG{static open(e,t,r,i){try{return new eG(t,e.transaction(i,r))}catch(e){throw new eK(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.completionDeferred=new M,this.transaction.oncomplete=()=>{this.completionDeferred.resolve()},this.transaction.onabort=()=>{t.error?this.completionDeferred.reject(new eK(e,t.error)):this.completionDeferred.resolve()},this.transaction.onerror=t=>{let r=eX(t.target.error);this.completionDeferred.reject(new eK(e,r))}}get completionPromise(){return this.completionDeferred.promise}abort(e){e&&this.completionDeferred.reject(e),this.aborted||(A(eV,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}maybeCommit(){let e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){return new e$(this.transaction.objectStore(e))}}class eq{static delete(e){return A(eV,"Removing database:",e),eJ((0,c.Rd)().indexedDB.deleteDatabase(e)).toPromise()}static isAvailable(){if(!(0,c.hl)())return!1;if(eq.isMockPersistence())return!0;let e=(0,c.z$)(),t=eq.getIOSVersion(e),r=0<t&&t<10,i=eH(e),n=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0)&&!r&&!n}static isMockPersistence(){var e;return"undefined"!=typeof process&&(null===(e=process.env)||void 0===e?void 0:e.USE_MOCK_PERSISTENCE)==="YES"}static getStore(e,t){return e.store(t)}static getIOSVersion(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i);return Number(t?t[1].split("_").slice(0,2).join("."):"-1")}constructor(e,t,r){this.name=e,this.version=t,this.schemaConverter=r,this.lastClosedDbVersion=null,12.2===eq.getIOSVersion((0,c.z$)())&&_("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async ensureDb(e){return this.db||(A(eV,"Opening database:",this.name),this.db=await new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=e=>{t(e.target.result)},i.onblocked=()=>{r(new eK(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=t=>{let i=t.target.error;"VersionError"===i.name?r(new O(N.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?r(new O(N.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):r(new eK(e,i))},i.onupgradeneeded=e=>{A(eV,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);let t=e.target.result;if(null!==this.lastClosedDbVersion&&this.lastClosedDbVersion!==e.oldVersion)throw Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.lastClosedDbVersion}, event.oldVersion=${e.oldVersion}, event.newVersion=${e.newVersion}, db.version=${t.version}`);this.schemaConverter.createOrUpgrade(t,i.transaction,e.oldVersion,this.version).next(()=>{A(eV,"Database upgrade to version "+this.version+" complete")})}}),this.db.addEventListener("close",e=>{let t=e.target;this.lastClosedDbVersion=t.version},{passive:!0})),this.db.addEventListener("versionchange",e=>{var t;null===e.newVersion&&(x('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),null===(t=this.databaseDeletedListener)||void 0===t||t.call(this))},{passive:!0}),this.db}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}async runTransaction(e,t,r,i){let n="readonly"===t,s=0;for(;;){++s;try{this.db=await this.ensureDb(e);let t=eG.open(this.db,e,n?"readonly":"readwrite",r),s=i(t).next(e=>(t.maybeCommit(),e)).catch(e=>(t.abort(e),ez.reject(e))).toPromise();return s.catch(()=>{}),await t.completionPromise,s}catch(r){let e=r,t="FirebaseError"!==e.name&&s<ej;if(A(eV,"Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}function eH(e){let t=e.match(/Android ([\d.]+)/i);return Number(t?t[1].split(".").slice(0,2).join("."):"-1")}class eW{constructor(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}get isDone(){return this.shouldStop}get skipToKey(){return this.nextKey}set cursor(e){this.dbCursor=e}done(){this.shouldStop=!0}skip(e){this.nextKey=e}delete(){return eJ(this.dbCursor.delete())}}class eK extends O{constructor(e,t){super(N.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function eQ(e){return"IndexedDbTransactionError"===e.name}class e${constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(A(eV,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(A(eV,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),eJ(r)}add(e){return A(eV,"ADD",this.store.name,e,e),eJ(this.store.add(e))}get(e){return eJ(this.store.get(e)).next(t=>(void 0===t&&(t=null),A(eV,"GET",this.store.name,e,t),t))}delete(e){return A(eV,"DELETE",this.store.name,e),eJ(this.store.delete(e))}count(){return A(eV,"COUNT",this.store.name),eJ(this.store.count())}loadAll(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){let e=i.getAll(r.range);return new ez((t,r)=>{e.onerror=e=>{r(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{let e=this.cursor(r),t=[];return this.iterateCursor(e,(e,r)=>{t.push(r)}).next(()=>t)}}loadFirst(e,t){let r=this.store.getAll(e,null===t?void 0:t);return new ez((e,t)=>{r.onerror=e=>{t(e.target.error)},r.onsuccess=t=>{e(t.target.result)}})}deleteAll(e,t){A(eV,"DELETE ALL",this.store.name);let r=this.options(e,t);r.keysOnly=!1;let i=this.cursor(r);return this.iterateCursor(i,(e,t,r)=>r.delete())}iterate(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.iterateCursor(i,t)}iterateSerial(e){let t=this.cursor({});return new ez((r,i)=>{t.onerror=e=>{i(eX(e.target.error))},t.onsuccess=t=>{let i=t.target.result;if(!i){r();return}e(i.primaryKey,i.value).next(e=>{e?i.continue():r()})}})}iterateCursor(e,t){let r=[];return new ez((i,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{let n=e.target.result;if(!n){i();return}let s=new eW(n),a=t(n.primaryKey,n.value,s);if(a instanceof ez){let e=a.catch(e=>(s.done(),ez.reject(e)));r.push(e)}s.isDone?i():null===s.skipToKey?n.continue():n.continue(s.skipToKey)}}).next(()=>ez.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),!e.index)return this.store.openCursor(e.range,t);{let r=this.store.index(e.index);return e.keysOnly?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}}}function eJ(e){return new ez((t,r)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{r(eX(e.target.error))}})}let eY=!1;function eX(e){let t=eq.getIOSVersion((0,c.z$)());if(t>=12.2&&t<13){let t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){let e=new O("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return eY||(eY=!0,setTimeout(()=>{throw e},0)),e}}return e}let eZ="IndexBackfiller",e0=15e3,e1=6e4,e2=50;class e3{constructor(e,t){this.asyncQueue=e,this.backfiller=t,this.task=null}start(){this.schedule(e0)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}schedule(e){A(eZ,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{let e=await this.backfiller.backfill();A(eZ,`Documents written: ${e}`)}catch(e){eQ(e)?A(eZ,"Ignoring IndexedDB error during index backfill: ",e):await eU(e)}await this.schedule(e1)})}}class e4{constructor(e,t){this.localStore=e,this.persistence=t}async backfill(e=e2){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.writeIndexEntries(t,e))}writeIndexEntries(e,t){let r=new Set,i=t,n=!0;return ez.doWhile(()=>!0===n&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(!(null===t||r.has(t)))return A(eZ,`Processing collection: ${t}`),this.writeEntriesForCollectionGroup(e,t,i).next(e=>{i-=e,r.add(t)});n=!1})).next(()=>t-i)}writeEntriesForCollectionGroup(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(r=>{let n=r.changes;return this.localStore.indexManager.updateIndexEntries(e,n).next(()=>this.getNewOffset(i,r)).next(r=>(A(eZ,`Updating offset: ${r}`),this.localStore.indexManager.updateCollectionGroup(e,t,r))).next(()=>n.size)}))}getNewOffset(e,t){let r=e;return t.changes.forEach((e,t)=>{let i=eO(t);eL(i,r)>0&&(r=i)}),new eM(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.setPreviousValue(e),this.writeNewSequenceNumber=e=>t.writeSequenceNumber(e))}setPreviousValue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e}}e6.INVALID=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e5="\x01",e9="\x01",e8="\x10",e7="\x11";function te(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t=tr(t)),t=tt(e.get(r),t);return tr(t)}function tt(e,t){let r=t,i=e.length;for(let t=0;t<i;t++){let i=e.charAt(t);switch(i){case"\0":r+=e5+e8;break;case e5:r+=e5+e7;break;default:r+=i}}return r}function tr(e){return e+e5+e9}function ti(e){let t=e.length;if(P(t>=2,64408,{path:e}),2===t)return P(e.charAt(0)===e5&&e.charAt(1)===e9,56145,{path:e}),ei.emptyPath();let r=t-2,i=[],n="";for(let s=0;s<t;){let t=e.indexOf(e5,s);switch((t<0||t>r)&&I(50515,{path:e}),e.charAt(t+1)){case e9:let a;let o=e.substring(s,t);0===n.length?a=o:(n+=o,a=n,n=""),i.push(a);break;case e8:n+=e.substring(s,t)+"\0";break;case e7:n+=e.substring(s,t+1);break;default:I(61167,{path:e})}s=t+2}return new ei(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tn="remoteDocuments",ts="owner",ta="owner",to="mutationQueues",tl="userId",th="mutations",tu="batchId",tc="userMutationsIndex",td=["userId","batchId"];function tp(e){return[e]}function tf(e,t){return[e,te(t)]}function tm(e,t,r){return[e,te(t),r]}let tg={},ty="documentMutations",tv="remoteDocumentsV14",tb=["prefixPath","collectionGroup","readTime","documentId"],tw="documentKeyIndex",tE=["prefixPath","collectionGroup","documentId"],tS="collectionGroupIndex",tT=["collectionGroup","readTime","prefixPath","documentId"],tC="remoteDocumentGlobal",tA="remoteDocumentGlobalKey",t_="targets",tx="targetId",tk="queryTargetsIndex",tI=["canonicalId","targetId"],tD="targetDocuments",tP=["targetId","path"],tR="documentTargetsIndex",tN=["path","targetId"],tO="targetGlobalKey",tM="targetGlobal",tL="collectionParents",tF=["collectionId","parent"],tB="clientMetadata",tU="clientId",tz="bundles",tV="bundleId",tj="namedQueries",tG="name",tq="indexConfiguration",tH="indexId",tW="collectionGroupIndex",tK="collectionGroup",tQ="indexState",t$=["indexId","uid"],tJ="sequenceNumberIndex",tY=["uid","sequenceNumber"],tX="indexEntries",tZ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],t0="documentKeyIndex",t1=["indexId","uid","orderedDocumentKey"],t2="documentOverlays",t3=["userId","collectionPath","documentId"],t4="collectionPathOverlayIndex",t6=["userId","collectionPath","largestBatchId"],t5="collectionGroupOverlayIndex",t9=["userId","collectionGroup","largestBatchId"],t8="globals",t7="name",re=[to,th,ty,tn,t_,ts,tM,tD,tB,tC,tL,tz,tj],rt=[...re,t2],rr=[to,th,ty,tv,t_,ts,tM,tD,tB,tC,tL,tz,tj,t2],ri=rr,rn=[...ri,tq,tQ,tX],rs=rn,ra=[...rn,t8],ro=ra;function rl(e){return 18===e?ro:17===e?ra:16===e?rs:15===e?rn:14===e?ri:13===e?rr:12===e?rt:11===e?re:void I(60245)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh extends eB{constructor(e,t){super(),this.simpleDbTransaction=e,this.currentSequenceNumber=t}}function ru(e,t){let r=R(e);return eq.getStore(r.simpleDbTransaction,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function rd(e,t){for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function rp(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,t){this.comparator=e,this.root=t||rg.EMPTY}insert(e,t){return new rf(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,rg.BLACK,null,null))}remove(e){return new rf(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rg.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rm(this.root,e,this.comparator,!1)}getReverseIterator(){return new rm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rm(this.root,e,this.comparator,!0)}}class rm{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let n=1;for(;!e.isEmpty();)if(n=t?r(e.key,t):1,t&&i&&(n*=-1),n<0)e=this.isReverse?e.left:e.right;else if(0===n){this.nodeStack.push(e);break}else this.nodeStack.push(e),e=this.isReverse?e.right:e.left}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rg{constructor(e,t,r,i,n){this.key=e,this.value=t,this.color=null!=r?r:rg.RED,this.left=null!=i?i:rg.EMPTY,this.right=null!=n?n:rg.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,n){return new rg(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=n?n:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,n=r(e,i.key);return(i=n<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===n?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r))).fixUp()}removeMin(){if(this.left.isEmpty())return rg.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let r;let i=this;if(0>t(e,i.key))i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return rg.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,rg.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,rg.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw I(43730,{key:this.key,value:this.value});if(this.right.isRed())throw I(14113,{key:this.key,value:this.value});let e=this.left.check();if(e===this.right.check())return e+(this.isRed()?0:1);throw I(27949)}}rg.EMPTY=null,rg.RED=!0,rg.BLACK=!1;class ry{constructor(){this.size=0}get key(){throw I(57766)}get value(){throw I(16141)}get color(){throw I(16727)}get left(){throw I(29726)}get right(){throw I(36894)}copy(e,t,r,i,n){return this}insert(e,t,r){return new rg(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}}rg.EMPTY=new ry;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e){this.comparator=e,this.data=new rf(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rb(this.data.getIterator())}getIteratorFrom(e){return new rb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof rv)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let e=t.getNext().key,i=r.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new rv(this.comparator);return t.data=e,t}}class rb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function rw(e,t,r,i,n){let s=e.getIterator(),a=t.getIterator(),o=rE(s),l=rE(a);for(;o||l;){let e=!1,t=!1;if(o&&l){let i=r(o,l);i<0?t=!0:i>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(i(l),l=rE(a)):t?(n(o),o=rE(s)):(o=rE(s),l=rE(a))}}function rE(e){return e.hasNext()?e.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e){this.fields=e,e.sort(es.comparator)}static empty(){return new rS([])}unionWith(e){let t=new rv(es.comparator);for(let e of this.fields)t=t.add(e);for(let r of e)t=t.add(r);return new rS(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Z(this.fields,e.fields,(e,t)=>e.isEqual(t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(e){return Buffer.from(e,"base64").toString("binary")}function rC(e){return Buffer.from(e,"binary").toString("base64")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e){this.binaryString=e}static fromBase64String(e){return new rA(rT(e))}static fromUint8Array(e){return new rA(r_(e))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return rC(this.binaryString)}toUint8Array(){return rx(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}function r_(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t}function rx(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}rA.EMPTY_BYTE_STRING=new rA("");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rI(e){if(P(!!e,39018),"string"==typeof e){let t=0,r=rk.exec(e);if(P(!!r,46558,{timestamp:e}),r[1]){let e=r[1];t=Number(e=(e+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:t}}return{seconds:rD(e.seconds),nanos:rD(e.nanos)}}function rD(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function rP(e){return"string"==typeof e?rA.fromBase64String(e):rA.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rR="server_timestamp",rN="__type__",rO="__previous_value__",rM="__local_write_time__";function rL(e){var t,r;return(null===(r=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[rN])||void 0===r?void 0:r.stringValue)===rR}function rF(e,t){let r={fields:{[rN]:{stringValue:rR},[rM]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&rL(t)&&(t=rB(t)),t&&(r.fields[rO]=t),{mapValue:r}}function rB(e){let t=e.mapValue.fields[rO];return rL(t)?rB(t):t}function rU(e){let t=rI(e.mapValue.fields[rM].timestampValue);return new ew(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rz{constructor(e,t,r,i,n,s,a,o,l,h){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=n,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=h}}let rV="(default)";class rj{constructor(e,t){this.projectId=e,this.database=t||rV}static empty(){return new rj("","")}get isDefaultDatabase(){return this.database===rV}isEqual(e){return e instanceof rj&&e.projectId===this.projectId&&e.database===this.database}}function rG(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new O(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new rj(e.options.projectId,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rq=-1;function rH(e){return null==e}function rW(e){return 0===e&&1/e==-1/0}function rK(e){return"number"==typeof e&&Number.isInteger(e)&&!rW(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rQ="__type__",r$="__max__",rJ={mapValue:{fields:{__type__:{stringValue:r$}}}},rY="__vector__",rX="value",rZ={nullValue:"NULL_VALUE"};function r0(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?rL(e)?4:iD(e)?9007199254740991:ik(e)?10:11:I(28295,{value:e})}function r1(e,t){if(e===t)return!0;let r=r0(e);if(r!==r0(t))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return rU(e).isEqual(rU(t));case 3:return r2(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r4(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return r3(e,t);case 2:return r6(e,t);case 9:return Z(e.arrayValue.values||[],t.arrayValue.values||[],r1);case 10:case 11:return r5(e,t);default:return I(52216,{left:e})}}function r2(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let r=rI(e.timestampValue),i=rI(t.timestampValue);return r.seconds===i.seconds&&r.nanos===i.nanos}function r3(e,t){return rD(e.geoPointValue.latitude)===rD(t.geoPointValue.latitude)&&rD(e.geoPointValue.longitude)===rD(t.geoPointValue.longitude)}function r4(e,t){return rP(e.bytesValue).isEqual(rP(t.bytesValue))}function r6(e,t){if("integerValue"in e&&"integerValue"in t)return rD(e.integerValue)===rD(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let r=rD(e.doubleValue),i=rD(t.doubleValue);return r===i?rW(r)===rW(i):isNaN(r)&&isNaN(i)}return!1}function r5(e,t){let r=e.mapValue.fields||{},i=t.mapValue.fields||{};if(rc(r)!==rc(i))return!1;for(let e in r)if(r.hasOwnProperty(e)&&(void 0===i[e]||!r1(r[e],i[e])))return!1;return!0}function r9(e,t){return void 0!==(e.values||[]).find(e=>r1(e,t))}function r8(e,t){if(e===t)return 0;let r=r0(e),i=r0(t);if(r!==i)return $(r,i);switch(r){case 0:case 9007199254740991:return 0;case 1:return $(e.booleanValue,t.booleanValue);case 2:return r7(e,t);case 3:return ie(e.timestampValue,t.timestampValue);case 4:return ie(rU(e),rU(t));case 5:return J(e.stringValue,t.stringValue);case 6:return ii(e.bytesValue,t.bytesValue);case 7:return it(e.referenceValue,t.referenceValue);case 8:return ir(e.geoPointValue,t.geoPointValue);case 9:return is(e.arrayValue,t.arrayValue);case 10:return ia(e.mapValue,t.mapValue);case 11:return io(e.mapValue,t.mapValue);default:throw I(23264,{leftType:r})}}function r7(e,t){let r=rD(e.integerValue||e.doubleValue),i=rD(t.integerValue||t.doubleValue);return r<i?-1:r>i?1:r===i?0:isNaN(r)?isNaN(i)?0:-1:1}function ie(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return $(e,t);let r=rI(e),i=rI(t),n=$(r.seconds,i.seconds);return 0!==n?n:$(r.nanos,i.nanos)}function it(e,t){let r=e.split("/"),i=t.split("/");for(let e=0;e<r.length&&e<i.length;e++){let t=$(r[e],i[e]);if(0!==t)return t}return $(r.length,i.length)}function ir(e,t){let r=$(rD(e.latitude),rD(t.latitude));return 0!==r?r:$(rD(e.longitude),rD(t.longitude))}function ii(e,t){let r=rP(e),i=rP(t);return r.compareTo(i)}function is(e,t){let r=e.values||[],i=t.values||[];for(let e=0;e<r.length&&e<i.length;++e){let t=r8(r[e],i[e]);if(t)return t}return $(r.length,i.length)}function ia(e,t){var r,i,n,s;let a=e.fields||{},o=t.fields||{},l=null===(r=a[rX])||void 0===r?void 0:r.arrayValue,h=null===(i=o[rX])||void 0===i?void 0:i.arrayValue,u=$((null===(n=null==l?void 0:l.values)||void 0===n?void 0:n.length)||0,(null===(s=null==h?void 0:h.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:is(l,h)}function io(e,t){if(e===rJ.mapValue&&t===rJ.mapValue)return 0;if(e===rJ.mapValue)return 1;if(t===rJ.mapValue)return -1;let r=e.fields||{},i=Object.keys(r),n=t.fields||{},s=Object.keys(n);i.sort(),s.sort();for(let e=0;e<i.length&&e<s.length;++e){let t=J(i[e],s[e]);if(0!==t)return t;let a=r8(r[i[e]],n[s[e]]);if(0!==a)return a}return $(i.length,s.length)}function il(e){return ih(e)}function ih(e){if("nullValue"in e)return"null";if("booleanValue"in e)return""+e.booleanValue;if("integerValue"in e)return""+e.integerValue;if("doubleValue"in e)return""+e.doubleValue;if("timestampValue"in e)return ic(e.timestampValue);if("stringValue"in e)return e.stringValue;if("bytesValue"in e)return iu(e.bytesValue);else if("referenceValue"in e)return ip(e.referenceValue);else if("geoPointValue"in e)return id(e.geoPointValue);else if("arrayValue"in e)return ig(e.arrayValue);else if("mapValue"in e)return im(e.mapValue);else return I(61005,{value:e})}function iu(e){return rP(e).toBase64()}function ic(e){let t=rI(e);return`time(${t.seconds},${t.nanos})`}function id(e){return`geo(${e.latitude},${e.longitude})`}function ip(e){return ea.fromName(e).toString()}function im(e){let t=Object.keys(e.fields||{}).sort(),r="{",i=!0;for(let n of t)i?i=!1:r+=",",r+=`${n}:${ih(e.fields[n])}`;return r+"}"}function ig(e){let t="[",r=!0;for(let i of e.values||[])r?r=!1:t+=",",t+=ih(i);return t+"]"}function iy(e){switch(r0(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let t=rB(e);return t?16+iy(t):16;case 5:return 2*e.stringValue.length;case 6:return rP(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return ib(e.arrayValue);case 10:case 11:return iv(e.mapValue);default:throw I(13486,{value:e})}}function iv(e){let t=0;return rd(e.fields,(e,r)=>{t+=e.length+iy(r)}),t}function ib(e){return(e.values||[]).reduce((e,t)=>e+iy(t),0)}function iw(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function iE(e){return!!e&&"integerValue"in e}function iS(e){return!!e&&"doubleValue"in e}function iT(e){return iE(e)||iS(e)}function iC(e){return!!e&&"arrayValue"in e}function iA(e){return!!e&&"nullValue"in e}function i_(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ix(e){return!!e&&"mapValue"in e}function ik(e){var t,r;return(null===(r=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[rQ])||void 0===r?void 0:r.stringValue)===rY}function iI(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){let t={mapValue:{fields:{}}};return rd(e.mapValue.fields,(e,r)=>t.mapValue.fields[e]=iI(r)),t}{if(!e.arrayValue)return Object.assign({},e);let t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=iI(e.arrayValue.values[r]);return t}}function iD(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===r$}let iP={mapValue:{fields:{[rQ]:{stringValue:rY},[rX]:{arrayValue:{}}}}};function iR(e){if("nullValue"in e)return rZ;if("booleanValue"in e)return{booleanValue:!1};if("integerValue"in e||"doubleValue"in e)return{doubleValue:NaN};if("timestampValue"in e)return{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}};if("stringValue"in e)return{stringValue:""};if("bytesValue"in e)return{bytesValue:""};if("referenceValue"in e)return iw(rj.empty(),ea.empty());else if("geoPointValue"in e)return{geoPointValue:{latitude:-90,longitude:-180}};else if("arrayValue"in e)return{arrayValue:{}};else if(!("mapValue"in e))return I(35942,{value:e});else return ik(e)?iP:{mapValue:{}}}function iN(e){if("nullValue"in e)return{booleanValue:!1};if("booleanValue"in e)return{doubleValue:NaN};if("integerValue"in e||"doubleValue"in e)return{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}};if("timestampValue"in e)return{stringValue:""};if("stringValue"in e)return{bytesValue:""};if("bytesValue"in e)return iw(rj.empty(),ea.empty());if("referenceValue"in e)return{geoPointValue:{latitude:-90,longitude:-180}};else if("geoPointValue"in e)return{arrayValue:{}};else if("arrayValue"in e)return iP;else if(!("mapValue"in e))return I(61959,{value:e});else return ik(e)?{mapValue:{}}:rJ}function iO(e,t){let r=r8(e.value,t.value);return 0!==r?r:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function iM(e,t){let r=r8(e.value,t.value);return 0!==r?r:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e){this.value=e}static empty(){return new iL({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(!ix(t=(t.mapValue.fields||{})[e.get(r)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=iI(t)}setAll(e){let t=es.emptyPath(),r={},i=[];e.forEach((e,n)=>{if(!t.isImmediateParentOf(n)){let e=this.getFieldsMap(t);this.applyChanges(e,r,i),r={},i=[],t=n.popLast()}e?r[n.lastSegment()]=iI(e):i.push(n.lastSegment())});let n=this.getFieldsMap(t);this.applyChanges(n,r,i)}delete(e){let t=this.field(e.popLast());ix(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return r1(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ix(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){for(let i of(rd(t,(t,r)=>e[t]=r),r))delete e[i]}clone(){return new iL(iI(this.value))}}function iF(e){let t=[];return rd(e.fields,(e,r)=>{let i=new es([e]);if(ix(r)){let e=iF(r.mapValue).fields;if(0===e.length)t.push(i);else for(let r of e)t.push(i.child(r))}else t.push(i)}),new rS(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iB{constructor(e,t,r,i,n,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=n,this.data=s,this.documentState=a}static newInvalidDocument(e){return new iB(e,0,eE.min(),eE.min(),eE.min(),iL.empty(),0)}static newFoundDocument(e,t,r,i){return new iB(e,1,t,eE.min(),r,i,0)}static newNoDocument(e,t){return new iB(e,2,t,eE.min(),eE.min(),iL.empty(),0)}static newUnknownDocument(e,t){return new iB(e,3,t,eE.min(),eE.min(),iL.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(eE.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=iL.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=iL.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=eE.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof iB&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new iB(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}function iU(e,t,r){let i=t.data.field(e),n=r.data.field(e);return null!==i&&null!==n?r8(i,n):I(42886)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(e,t){this.position=e,this.inclusive=t}}function iV(e,t,r){let i=0;for(let n=0;n<e.position.length;n++){let s=t[n],a=e.position[n];if(i=s.field.isKeyField()?ea.comparator(ea.fromName(a.referenceValue),r.key):r8(a,r.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function ij(e,t,r){let i=iV(e,t,r);return e.inclusive?i>=0:i>0}function iG(e,t,r){let i=iV(e,t,r);return e.inclusive?i<=0:i<0}function iq(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!r1(e.position[r],t.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iH{constructor(e,t="asc"){this.field=e,this.dir=t}}function iW(e){return e.field.canonicalString()+e.dir}function iK(e){return`${e.field.canonicalString()} (${e.dir})`}function iQ(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i${}class iJ extends i${constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new ne(e,t,r):"array-contains"===t?new nn(e,r):"in"===t?new ns(e,r):"not-in"===t?new na(e,r):"array-contains-any"===t?new no(e,r):new iJ(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new nt(e,r):new nr(e,r)}matches(e){let t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(r8(t,this.value)):null!==t&&r0(this.value)===r0(t)&&this.matchesComparison(r8(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return I(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class iY extends i${constructor(e,t){super(),this.filters=e,this.op=t,this.memoizedFlattenedFilters=null}static create(e,t){return new iY(e,t)}matches(e){return iX(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.memoizedFlattenedFilters||(this.memoizedFlattenedFilters=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.memoizedFlattenedFilters}getFilters(){return Object.assign([],this.filters)}}function iX(e){return"and"===e.op}function iZ(e){return"or"===e.op}function i0(e){return i1(e)&&iX(e)}function i1(e){for(let t of e.filters)if(t instanceof iY)return!1;return!0}function i2(e){if(e instanceof iJ)return e.field.canonicalString()+e.op.toString()+il(e.value);if(i0(e))return e.filters.map(e=>i2(e)).join(",");{let t=e.filters.map(e=>i2(e)).join(",");return`${e.op}(${t})`}}function i3(e,t){return e instanceof iJ?i4(e,t):e instanceof iY?i6(e,t):void I(19439)}function i4(e,t){return t instanceof iJ&&e.op===t.op&&e.field.isEqual(t.field)&&r1(e.value,t.value)}function i6(e,t){return t instanceof iY&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,r,i)=>e&&i3(r,t.filters[i]),!0)}function i5(e,t){let r=e.filters.concat(t);return iY.create(r,e.op)}function i9(e){return e instanceof iJ?i7(e):e instanceof iY?i8(e):"Filter"}function i8(e){return e.op.toString()+" {"+e.getFilters().map(i9).join(" ,")+"}"}function i7(e){return`${e.field.canonicalString()} ${e.op} ${il(e.value)}`}class ne extends iJ{constructor(e,t,r){super(e,t,r),this.key=ea.fromName(r.referenceValue)}matches(e){let t=ea.comparator(e.key,this.key);return this.matchesComparison(t)}}class nt extends iJ{constructor(e,t){super(e,"in",t),this.keys=ni("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class nr extends iJ{constructor(e,t){super(e,"not-in",t),this.keys=ni("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function ni(e,t){var r;return((null===(r=t.arrayValue)||void 0===r?void 0:r.values)||[]).map(e=>ea.fromName(e.referenceValue))}class nn extends iJ{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return iC(t)&&r9(t.arrayValue,this.value)}}class ns extends iJ{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return null!==t&&r9(this.value.arrayValue,t)}}class na extends iJ{constructor(e,t){super(e,"not-in",t)}matches(e){if(r9(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!r9(this.value.arrayValue,t)}}class no extends iJ{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!!iC(t)&&!!t.arrayValue.values&&t.arrayValue.values.some(e=>r9(this.value.arrayValue,e))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,t=null,r=[],i=[],n=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=n,this.startAt=s,this.endAt=a,this.memoizedCanonicalId=null}}function nh(e,t=null,r=[],i=[],n=null,s=null,a=null){return new nl(e,t,r,i,n,s,a)}function nu(e){let t=R(e);if(null===t.memoizedCanonicalId){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:"+t.filters.map(e=>i2(e)).join(",")+"|ob:"+t.orderBy.map(e=>iW(e)).join(","),rH(t.limit)||(e+="|l:"+t.limit),t.startAt&&(e+="|lb:"+(t.startAt.inclusive?"b:":"a:")+t.startAt.position.map(e=>il(e)).join(",")),t.endAt&&(e+="|ub:"+(t.endAt.inclusive?"a:":"b:")+t.endAt.position.map(e=>il(e)).join(",")),t.memoizedCanonicalId=e}return t.memoizedCanonicalId}function nc(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>i9(e)).join(", ")}]`),rH(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>iK(e)).join(", ")}]`),e.startAt&&(t+=", startAt: "+(e.startAt.inclusive?"b:":"a:")+e.startAt.position.map(e=>il(e)).join(",")),e.endAt&&(t+=", endAt: "+(e.endAt.inclusive?"a:":"b:")+e.endAt.position.map(e=>il(e)).join(",")),`Target(${t})`}function nd(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let r=0;r<e.orderBy.length;r++)if(!iQ(e.orderBy[r],t.orderBy[r]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!i3(e.filters[r],t.filters[r]))return!1;return!!(e.collectionGroup===t.collectionGroup&&e.path.isEqual(t.path)&&iq(e.startAt,t.startAt))&&iq(e.endAt,t.endAt)}function np(e){return ea.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function nf(e,t){return e.filters.filter(e=>e instanceof iJ&&e.field.isEqual(t))}function nm(e,t){let r=eA(t);if(void 0===r)return null;for(let t of nf(e,r.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}function ng(e,t){let r=new Map;for(let i of e_(t))for(let t of nf(e,i.fieldPath))switch(t.op){case"==":case"in":r.set(i.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return r.set(i.fieldPath.canonicalString(),t.value),Array.from(r.values())}return null}function ny(e,t){let r=[],i=!0;for(let n of e_(t)){let t=0===n.kind?nb(e,n.fieldPath,e.startAt):nw(e,n.fieldPath,e.startAt);r.push(t.value),i&&(i=t.inclusive)}return new iz(r,i)}function nv(e,t){let r=[],i=!0;for(let n of e_(t)){let t=0===n.kind?nw(e,n.fieldPath,e.endAt):nb(e,n.fieldPath,e.endAt);r.push(t.value),i&&(i=t.inclusive)}return new iz(r,i)}function nb(e,t,r){let i=rZ,n=!0;for(let r of nf(e,t)){let e=rZ,t=!0;switch(r.op){case"<":case"<=":e=iR(r.value);break;case"==":case"in":case">=":e=r.value;break;case">":e=r.value,t=!1;break;case"!=":case"not-in":e=rZ}0>iO({value:i,inclusive:n},{value:e,inclusive:t})&&(i=e,n=t)}if(null!==r){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){let e=r.position[s];0>iO({value:i,inclusive:n},{value:e,inclusive:r.inclusive})&&(i=e,n=r.inclusive);break}}return{value:i,inclusive:n}}function nw(e,t,r){let i=rJ,n=!0;for(let r of nf(e,t)){let e=rJ,t=!0;switch(r.op){case">=":case">":e=iN(r.value),t=!1;break;case"==":case"in":case"<=":e=r.value;break;case"<":e=r.value,t=!1;break;case"!=":case"not-in":e=rJ}iM({value:i,inclusive:n},{value:e,inclusive:t})>0&&(i=e,n=t)}if(null!==r){for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){let e=r.position[s];iM({value:i,inclusive:n},{value:e,inclusive:r.inclusive})>0&&(i=e,n=r.inclusive);break}}return{value:i,inclusive:n}}function nE(e){let t=new rv(es.comparator),r=!1;for(let i of e.filters)for(let e of i.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?r=!0:t=t.add(e.field));for(let r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(r?1:0)}function nS(e){return null!==e.limit}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(e,t=null,r=[],i=[],n=null,s="F",a=null,o=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=n,this.limitType=s,this.startAt=a,this.endAt=o,this.memoizedNormalizedOrderBy=null,this.memoizedTarget=null,this.memoizedAggregateTarget=null,this.startAt,this.endAt}}function nC(e,t,r,i,n,s,a,o){return new nT(e,t,r,i,n,s,a,o)}function nA(e){return new nT(e)}function n_(e,t){return new nT(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}function nx(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function nk(e){let t=new rv(es.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}function nI(e){return ea.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function nD(e){return null!==e.collectionGroup}function nP(e){let t=R(e);if(null===t.memoizedNormalizedOrderBy){t.memoizedNormalizedOrderBy=[];let e=new Set;for(let r of t.explicitOrderBy)t.memoizedNormalizedOrderBy.push(r),e.add(r.field.canonicalString());let r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";nk(t).forEach(i=>{e.has(i.canonicalString())||i.isKeyField()||t.memoizedNormalizedOrderBy.push(new iH(i,r))}),e.has(es.keyField().canonicalString())||t.memoizedNormalizedOrderBy.push(new iH(es.keyField(),r))}return t.memoizedNormalizedOrderBy}function nR(e){let t=R(e);return t.memoizedTarget||(t.memoizedTarget=nO(t,nP(e))),t.memoizedTarget}function nN(e){let t=R(e);return t.memoizedAggregateTarget||(t.memoizedAggregateTarget=nO(t,e.explicitOrderBy)),t.memoizedAggregateTarget}function nO(e,t){if("F"===e.limitType)return nh(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{let t="desc"===e.dir?"asc":"desc";return new iH(e.field,t)});let r=e.endAt?new iz(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new iz(e.startAt.position,e.startAt.inclusive):null;return nh(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}}function nM(e,t){let r=e.filters.concat([t]);return new nT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function nL(e,t){let r=e.explicitOrderBy.concat([t]);return new nT(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}function nF(e,t,r){return new nT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function nB(e,t){return new nT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}function nU(e,t){return new nT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}function nz(e,t){return nd(nR(e),nR(t))&&e.limitType===t.limitType}function nV(e){return`${nu(nR(e))}|lt:${e.limitType}`}function nj(e){return`Query(target=${nc(nR(e))}; limitType=${e.limitType})`}function nG(e,t){return t.isFoundDocument()&&nq(e,t)&&nH(e,t)&&nW(e,t)&&nK(e,t)}function nq(e,t){let r=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(r):ea.isDocumentKey(e.path)?e.path.isEqual(r):e.path.isImmediateParentOf(r)}function nH(e,t){for(let r of nP(e))if(!r.field.isKeyField()&&null===t.data.field(r.field))return!1;return!0}function nW(e,t){for(let r of e.filters)if(!r.matches(t))return!1;return!0}function nK(e,t){return(!e.startAt||!!iG(e.startAt,nP(e),t))&&(!e.endAt||!!ij(e.endAt,nP(e),t))}function nQ(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function n$(e){return(t,r)=>{let i=!1;for(let n of nP(e)){let e=nJ(n,t,r);if(0!==e)return e;i=i||n.field.isKeyField()}return 0}}function nJ(e,t,r){let i=e.field.isKeyField()?ea.comparator(t.key,r.key):iU(e.field,t,r);switch(e.dir){case"asc":return i;case"desc":return -1*i;default:return I(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nY{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r){for(let[t,i]of r)if(this.equalsFn(t,e))return i}}has(e){return void 0!==this.get(e)}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i){this.inner[r]=[[e,t]],this.innerSize++;return}for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e)){i[r]=[e,t];return}i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){rd(this.inner,(t,r)=>{for(let[t,i]of r)e(t,i)})}isEmpty(){return rp(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nX=new rf(ea.comparator);function nZ(){return nX}let n0=new rf(ea.comparator);function n1(...e){let t=n0;for(let r of e)t=t.insert(r.key,r);return t}function n2(){return n5()}function n3(e){let t=n0;return e.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function n4(){return n5()}function n6(){return n5()}function n5(){return new nY(e=>e.toString(),(e,t)=>e.isEqual(t))}let n9=new rf(ea.comparator);function n8(){return n9}let n7=new rv(ea.comparator);function se(...e){let t=n7;for(let r of e)t=t.add(r);return t}let st=new rv($);function sr(){return st}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rW(t)?"-0":t}}function sn(e){return{integerValue:""+e}}function ss(e,t){return rK(t)?sn(t):si(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this._=void 0}}function so(e,t,r){return e instanceof sc?rF(r,t):e instanceof sd?sp(e,t):e instanceof sf?sm(e,t):sy(e,t)}function sl(e,t,r){return e instanceof sd?sp(e,t):e instanceof sf?sm(e,t):r}function sh(e,t){return e instanceof sg?iT(t)?t:{integerValue:0}:null}function su(e,t){return e instanceof sd&&t instanceof sd||e instanceof sf&&t instanceof sf?Z(e.elements,t.elements,r1):e instanceof sg&&t instanceof sg?r1(e.operand,t.operand):e instanceof sc&&t instanceof sc}class sc extends sa{}class sd extends sa{constructor(e){super(),this.elements=e}}function sp(e,t){let r=sb(t);for(let t of e.elements)r.some(e=>r1(e,t))||r.push(t);return{arrayValue:{values:r}}}class sf extends sa{constructor(e){super(),this.elements=e}}function sm(e,t){let r=sb(t);for(let t of e.elements)r=r.filter(e=>!r1(e,t));return{arrayValue:{values:r}}}class sg extends sa{constructor(e,t){super(),this.serializer=e,this.operand=t}}function sy(e,t){let r=sh(e,t),i=sv(r)+sv(e.operand);return iE(r)&&iE(e.operand)?sn(i):si(e.serializer,i)}function sv(e){return rD(e.integerValue||e.doubleValue)}function sb(e){return iC(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,t){this.field=e,this.transform=t}}function sE(e,t){return e.field.isEqual(t.field)&&su(e.transform,t.transform)}function sS(e,t){return void 0===e&&void 0===t||!!e&&!!t&&Z(e,t,(e,t)=>sE(e,t))}class sT{constructor(e,t){this.version=e,this.transformResults=t}}class sC{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new sC}static exists(e){return new sC(void 0,e)}static updateTime(e){return new sC(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sA(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class s_{}function sx(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new sV(e.key,sC.none()):new sR(e.key,e.data,sC.none());{let r=e.data,i=iL.empty(),n=new rv(es.comparator);for(let e of t.fields)if(!n.has(e)){let t=r.field(e);null===t&&e.length>1&&(e=e.popLast(),t=r.field(e)),null===t?i.delete(e):i.set(e,t),n=n.add(e)}return new sM(e.key,i,new rS(n.toArray()),sC.none())}}function sk(e,t,r){e instanceof sR?sN(e,t,r):e instanceof sM?sL(e,t,r):sj(e,t,r)}function sI(e,t,r,i){return e instanceof sR?sO(e,t,r,i):e instanceof sM?sF(e,t,r,i):sG(e,t,r)}function sD(e,t){let r=null;for(let i of e.fieldTransforms){let e=t.data.field(i.field),n=sh(i.transform,e||null);null!=n&&(null===r&&(r=iL.empty()),r.set(i.field,n))}return r||null}function sP(e,t){return!!(e.type===t.type&&e.key.isEqual(t.key)&&e.precondition.isEqual(t.precondition)&&sS(e.fieldTransforms,t.fieldTransforms))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class sR extends s_{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}function sN(e,t,r){let i=e.value.clone(),n=sU(e.fieldTransforms,t,r.transformResults);i.setAll(n),t.convertToFoundDocument(r.version,i).setHasCommittedMutations()}function sO(e,t,r,i){if(!sA(e.precondition,t))return r;let n=e.value.clone(),s=sz(e.fieldTransforms,i,t);return n.setAll(s),t.convertToFoundDocument(t.version,n).setHasLocalMutations(),null}class sM extends s_{constructor(e,t,r,i,n=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=n,this.type=1}getFieldMask(){return this.fieldMask}}function sL(e,t,r){if(!sA(e.precondition,t)){t.convertToUnknownDocument(r.version);return}let i=sU(e.fieldTransforms,t,r.transformResults),n=t.data;n.setAll(sB(e)),n.setAll(i),t.convertToFoundDocument(r.version,n).setHasCommittedMutations()}function sF(e,t,r,i){if(!sA(e.precondition,t))return r;let n=sz(e.fieldTransforms,i,t),s=t.data;return(s.setAll(sB(e)),s.setAll(n),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===r)?null:r.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}function sB(e){let t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){let i=e.data.field(r);t.set(r,i)}}),t}function sU(e,t,r){let i=new Map;P(e.length===r.length,32656,{serverTransformResultCount:r.length,fieldTransformCount:e.length});for(let n=0;n<r.length;n++){let s=e[n],a=s.transform,o=t.data.field(s.field);i.set(s.field,sl(a,o,r[n]))}return i}function sz(e,t,r){let i=new Map;for(let n of e){let e=n.transform,s=r.data.field(n.field);i.set(n.field,so(e,s,t))}return i}class sV extends s_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}function sj(e,t,r){t.convertToNoDocument(r.version).setHasCommittedMutations()}function sG(e,t,r){return sA(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):r}class sq extends s_{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sH{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let i=this.mutations[t];i.key.isEqual(e.key)&&sk(i,e,r[t])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=sI(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=sI(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=n6();return this.mutations.forEach(i=>{let n=e.get(i.key),s=n.overlayedDocument,a=this.applyToLocalView(s,n.mutatedFields),o=sx(s,a=t.has(i.key)?null:a);null!==o&&r.set(i.key,o),s.isValidDocument()||s.convertToNoDocument(eE.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),se())}isEqual(e){return this.batchId===e.batchId&&Z(this.mutations,e.mutations,(e,t)=>sP(e,t))&&Z(this.baseMutations,e.baseMutations,(e,t)=>sP(e,t))}}class sW{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){P(e.mutations.length===r.length,58842,{mutationsSent:e.mutations.length,resultsReceived:r.length});let i=n8(),n=e.mutations;for(let e=0;e<n.length;e++)i=i.insert(n[e].key,r[e].version);return new sW(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sK{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sQ{constructor(e,t){this.count=e,this.unchangedNames=t}}function s$(e){switch(e){case N.OK:return I(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return I(15467,{code:e})}}function sJ(e){return s$(e)&&e!==N.ABORTED}function sY(e){if(void 0===e)return _("GRPC error has no .code"),N.UNKNOWN;switch(e){case s.OK:return N.OK;case s.CANCELLED:return N.CANCELLED;case s.UNKNOWN:return N.UNKNOWN;case s.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case s.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case s.INTERNAL:return N.INTERNAL;case s.UNAVAILABLE:return N.UNAVAILABLE;case s.UNAUTHENTICATED:return N.UNAUTHENTICATED;case s.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case s.NOT_FOUND:return N.NOT_FOUND;case s.ALREADY_EXISTS:return N.ALREADY_EXISTS;case s.PERMISSION_DENIED:return N.PERMISSION_DENIED;case s.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case s.ABORTED:return N.ABORTED;case s.OUT_OF_RANGE:return N.OUT_OF_RANGE;case s.UNIMPLEMENTED:return N.UNIMPLEMENTED;case s.DATA_LOSS:return N.DATA_LOSS;default:return I(39323,{code:e})}}!function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS"}(s||(s={}));/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sX extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sZ=null,s0=new i([4294967295,4294967295],0);function s1(e){let t=W().encode(e),r=new n;return r.update(t),new Uint8Array(r.digest())}function s2(e){let t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),s=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new i([r,n],0),new i([s,a],0)]}class s3{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new s4(`Invalid padding: ${t}`);if(r<0||e.length>0&&0===this.hashCount)throw new s4(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new s4(`Invalid padding when bitmap length is 0: ${t}`);this.bitCount=8*e.length-t,this.bitCountInInteger=i.fromNumber(this.bitCount)}getBitIndex(e,t,r){let n=e.add(t.multiply(i.fromNumber(r)));return 1===n.compare(s0)&&(n=new i([n.getBits(0),n.getBits(1)],0)),n.modulo(this.bitCountInInteger).toNumber()}isBitSet(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(0===this.bitCount)return!1;let[t,r]=s2(s1(e));for(let e=0;e<this.hashCount;e++){let i=this.getBitIndex(t,r,e);if(!this.isBitSet(i))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,n=new s3(new Uint8Array(Math.ceil(e/8)),i,t);return r.forEach(e=>n.insert(e)),n}insert(e){if(0===this.bitCount)return;let[t,r]=s2(s1(e));for(let e=0;e<this.hashCount;e++){let i=this.getBitIndex(t,r,e);this.setBit(i)}}setBit(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class s4 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s6{constructor(e,t,r,i,n){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=n}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,s5.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new s6(eE.min(),i,new rf($),nZ(),se())}}class s5{constructor(e,t,r,i,n){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=n}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new s5(r,t,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(e,t,r,i){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=r,this.newDoc=i}}class s8{constructor(e,t){this.targetId=e,this.existenceFilter=t}}class s7{constructor(e,t,r=rA.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class ae{constructor(){this.pendingResponses=0,this.documentChanges=an(),this._resumeToken=rA.EMPTY_BYTE_STRING,this._current=!1,this._hasPendingChanges=!0}get current(){return this._current}get resumeToken(){return this._resumeToken}get isPending(){return 0!==this.pendingResponses}get hasPendingChanges(){return this._hasPendingChanges}updateResumeToken(e){e.approximateByteSize()>0&&(this._hasPendingChanges=!0,this._resumeToken=e)}toTargetChange(){let e=se(),t=se(),r=se();return this.documentChanges.forEach((i,n)=>{switch(n){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:I(38017,{changeType:n})}}),new s5(this._resumeToken,this._current,e,t,r)}clearPendingChanges(){this._hasPendingChanges=!1,this.documentChanges=an()}addDocumentChange(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)}removeDocumentChange(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)}recordPendingTargetRequest(){this.pendingResponses+=1}recordTargetResponse(){this.pendingResponses-=1,P(this.pendingResponses>=0,3241,{pendingResponses:this.pendingResponses})}markCurrent(){this._hasPendingChanges=!0,this._current=!0}}let at="WatchChangeAggregator";class ar{constructor(e){this.metadataProvider=e,this.targetStates=new Map,this.pendingDocumentUpdates=nZ(),this.pendingDocumentUpdatesByTarget=ai(),this.pendingDocumentTargetMapping=ai(),this.pendingTargetResets=new rf($)}handleDocumentChange(e){for(let t of e.updatedTargetIds)e.newDoc&&e.newDoc.isFoundDocument()?this.addDocumentToTarget(t,e.newDoc):this.removeDocumentFromTarget(t,e.key,e.newDoc);for(let t of e.removedTargetIds)this.removeDocumentFromTarget(t,e.key,e.newDoc)}handleTargetChange(e){this.forEachTarget(e,t=>{let r=this.ensureTargetState(t);switch(e.state){case 0:this.isActiveTarget(t)&&r.updateResumeToken(e.resumeToken);break;case 1:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(e.resumeToken);break;case 2:r.recordTargetResponse(),r.isPending||this.removeTarget(t);break;case 3:this.isActiveTarget(t)&&(r.markCurrent(),r.updateResumeToken(e.resumeToken));break;case 4:this.isActiveTarget(t)&&(this.resetTarget(t),r.updateResumeToken(e.resumeToken));break;default:I(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.targetStates.forEach((e,r)=>{this.isActiveTarget(r)&&t(r)})}handleExistenceFilter(e){let t=e.targetId,r=e.existenceFilter.count,i=this.targetDataForActiveTarget(t);if(i){let n=i.target;if(np(n)){if(0===r){let e=new ea(n.path);this.removeDocumentFromTarget(t,e,iB.newNoDocument(e,eE.min()))}else P(1===r,20013,{expectedCount:r})}else{let i=this.getCurrentDocumentCountForTarget(t);if(i!==r){let r=this.parseBloomFilter(e),n=r?this.applyBloomFilter(r,e,i):1;if(0!==n){this.resetTarget(t);let e=2===n?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.pendingTargetResets=this.pendingTargetResets.insert(t,e)}null==sZ||sZ.notifyOnExistenceFilterMismatch(as(i,e.existenceFilter,this.metadataProvider.getDatabaseId(),r,n))}}}}parseBloomFilter(e){let t,r;let i=e.existenceFilter.unchangedNames;if(!i||!i.bits)return null;let{bits:{bitmap:n="",padding:s=0},hashCount:a=0}=i;try{t=rP(n).toUint8Array()}catch(e){if(e instanceof sX)return x("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new s3(t,s,a)}catch(e){return e instanceof s4?x("BloomFilter error: ",e):x("Applying bloom filter failed: ",e),null}return 0===r.bitCount?null:r}applyBloomFilter(e,t,r){return t.existenceFilter.count===r-this.filterRemovedDocuments(e,t.targetId)?0:2}filterRemovedDocuments(e,t){let r=this.metadataProvider.getRemoteKeysForTarget(t),i=0;return r.forEach(r=>{let n=this.metadataProvider.getDatabaseId(),s=`projects/${n.projectId}/databases/${n.database}/documents/${r.path.canonicalString()}`;!e.mightContain(s)&&(this.removeDocumentFromTarget(t,r,null),i++)}),i}createRemoteEvent(e){let t=new Map;this.targetStates.forEach((r,i)=>{let n=this.targetDataForActiveTarget(i);if(n){if(r.current&&np(n.target)){let t=new ea(n.target.path);this.ensureDocumentUpdateByTarget(t).has(i)||this.targetContainsDocument(i,t)||this.removeDocumentFromTarget(i,t,iB.newNoDocument(t,e))}r.hasPendingChanges&&(t.set(i,r.toTargetChange()),r.clearPendingChanges())}});let r=se();this.pendingDocumentTargetMapping.forEach((e,t)=>{let i=!0;t.forEachWhile(e=>{let t=this.targetDataForActiveTarget(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(i=!1,!1)}),i&&(r=r.add(e))}),this.pendingDocumentUpdates.forEach((t,r)=>r.setReadTime(e));let i=new s6(e,t,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=nZ(),this.pendingDocumentUpdatesByTarget=ai(),this.pendingDocumentTargetMapping=ai(),this.pendingTargetResets=new rf($),i}addDocumentToTarget(e,t){if(!this.isActiveTarget(e))return;let r=this.targetContainsDocument(e,t.key)?2:0;this.ensureTargetState(e).addDocumentChange(t.key,r),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentUpdatesByTarget=this.pendingDocumentUpdatesByTarget.insert(t.key,this.ensureDocumentUpdateByTarget(t.key).add(e)),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}removeDocumentFromTarget(e,t,r){if(!this.isActiveTarget(e))return;let i=this.ensureTargetState(e);this.targetContainsDocument(e,t)?i.addDocumentChange(t,1):i.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).add(e)),r&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,r))}removeTarget(e){this.targetStates.delete(e)}getCurrentDocumentCountForTarget(e){let t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}recordPendingTargetRequest(e){this.ensureTargetState(e).recordPendingTargetRequest()}ensureTargetState(e){let t=this.targetStates.get(e);return t||(t=new ae,this.targetStates.set(e,t)),t}ensureDocumentTargetMapping(e){let t=this.pendingDocumentTargetMapping.get(e);return t||(t=new rv($),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t}ensureDocumentUpdateByTarget(e){let t=this.pendingDocumentUpdatesByTarget.get(e);return t||(t=new rv($),this.pendingDocumentUpdatesByTarget=this.pendingDocumentUpdatesByTarget.insert(e,t)),t}isActiveTarget(e){let t=null!==this.targetDataForActiveTarget(e);return t||A(at,"Detected inactive target",e),t}targetDataForActiveTarget(e){let t=this.targetStates.get(e);return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)}resetTarget(e){this.targetStates.set(e,new ae),this.metadataProvider.getRemoteKeysForTarget(e).forEach(t=>{this.removeDocumentFromTarget(e,t,null)})}targetContainsDocument(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)}}function ai(){return new rf(ea.comparator)}function an(){return new rf(ea.comparator)}function as(e,t,r,i,n){var s,a,o,l,h,u;let c={localCacheCount:e,existenceFilterCount:t.count,databaseId:r.database,projectId:r.projectId},d=t.unchangedNames;return d&&(c.bloomFilter={applied:0===n,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(a=null==d?void 0:d.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(h=null==d?void 0:d.bits)||void 0===h?void 0:h.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==i?void 0:i.mightContain(e))&&void 0!==t&&t}}),c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aa=(()=>{let e={};return e.asc="ASCENDING",e.desc="DESCENDING",e})(),ao=(()=>{let e={};return e["<"]="LESS_THAN",e["<="]="LESS_THAN_OR_EQUAL",e[">"]="GREATER_THAN",e[">="]="GREATER_THAN_OR_EQUAL",e["=="]="EQUAL",e["!="]="NOT_EQUAL",e["array-contains"]="ARRAY_CONTAINS",e.in="IN",e["not-in"]="NOT_IN",e["array-contains-any"]="ARRAY_CONTAINS_ANY",e})(),al=(()=>{let e={};return e.and="AND",e.or="OR",e})();class ah{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function au(e){return new O(void 0===e.code?N.UNKNOWN:sY(e.code),e.message||"")}function ac(e,t){return e.useProto3Json||rH(t)?t:{value:t}}function ad(e){let t;return rH(t="object"==typeof e?e.value:e)?null:t}function ap(e,t){if(!e.useProto3Json)return{seconds:""+t.seconds,nanos:t.nanoseconds};{let e=new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),r=("000000000"+t.nanoseconds).slice(-9);return`${e}.${r}Z`}}function af(e){let t=rI(e);return new ew(t.seconds,t.nanos)}function am(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ag(e,t){return e.useProto3Json?(P(void 0===t||"string"==typeof t,58123),rA.fromBase64String(t||"")):(P(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),rA.fromUint8Array(t||new Uint8Array))}function ay(e,t){return ap(e,t.toTimestamp())}function av(e){return P(!!e,49232),eE.fromTimestamp(af(e))}function ab(e,t){return aw(e,t).canonicalString()}function aw(e,t){let r=ax(e).child("documents");return void 0===t?r:r.child(t)}function aE(e){let t=ei.fromString(e);return P(ov(t),10190,{key:t.toString()}),t}function aS(e,t){return ab(e.databaseId,t.path)}function aT(e,t){let r=aE(t);if(r.get(1)!==e.databaseId.projectId)throw new O(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new O(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new ea(ak(r))}function aC(e,t){return ab(e.databaseId,t)}function aA(e){let t=aE(e);return 4===t.length?ei.emptyPath():ak(t)}function a_(e){return new ei(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function ax(e){return new ei(["projects",e.projectId,"databases",e.database])}function ak(e){return P(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function aI(e,t,r){return{name:aS(e,t),fields:r.value.mapValue.fields}}function aD(e,t){return{name:aS(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ap(e,t.version.toTimestamp()),createTime:ap(e,t.createTime.toTimestamp())}}function aP(e,t,r){let i=aT(e,t.name),n=av(t.updateTime),s=t.createTime?av(t.createTime):eE.min(),a=new iL({mapValue:{fields:t.fields}}),o=iB.newFoundDocument(i,n,s,a);return r&&o.setHasCommittedMutations(),r?o.setHasCommittedMutations():o}function aR(e,t){P(!!t.found,43571),t.found.name,t.found.updateTime;let r=aT(e,t.found.name),i=av(t.found.updateTime),n=t.found.createTime?av(t.found.createTime):eE.min(),s=new iL({mapValue:{fields:t.found.fields}});return iB.newFoundDocument(r,i,n,s)}function aN(e,t){P(!!t.missing,3894),P(!!t.readTime,22933);let r=aT(e,t.missing),i=av(t.readTime);return iB.newNoDocument(r,i)}function aO(e,t){return"found"in t?aR(e,t):"missing"in t?aN(e,t):I(7234,{result:t})}function aM(e,t){let r;if("targetChange"in t){t.targetChange;let i=aL(t.targetChange.targetChangeType||"NO_CHANGE"),n=t.targetChange.targetIds||[],s=ag(e,t.targetChange.resumeToken),a=t.targetChange.cause;r=new s7(i,n,s,a&&au(a)||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let n=aT(e,i.document.name),s=av(i.document.updateTime),a=i.document.createTime?av(i.document.createTime):eE.min(),o=new iL({mapValue:{fields:i.document.fields}}),l=iB.newFoundDocument(n,s,a,o);r=new s9(i.targetIds||[],i.removedTargetIds||[],l.key,l)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let n=aT(e,i.document),s=i.readTime?av(i.readTime):eE.min(),a=iB.newNoDocument(n,s);r=new s9([],i.removedTargetIds||[],a.key,a)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let n=aT(e,i.document);r=new s9([],i.removedTargetIds||[],n,null)}else{if(!("filter"in t))return I(11601,{change:t});t.filter;let e=t.filter;e.targetId;let{count:i=0,unchangedNames:n}=e,s=new sQ(i,n);r=new s8(e.targetId,s)}return r}function aL(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:I(39313,{state:e})}function aF(e){if(!("targetChange"in e))return eE.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length||!t.readTime?eE.min():av(t.readTime)}function aB(e,t){let r;if(t instanceof sR)r={update:aI(e,t.key,t.value)};else if(t instanceof sV)r={delete:aS(e,t.key)};else if(t instanceof sM)r={update:aI(e,t.key,t.data),updateMask:og(t.fieldMask)};else{if(!(t instanceof sq))return I(16599,{mutationType:t.type});r={verify:aS(e,t.key)}}return t.fieldTransforms.length>0&&(r.updateTransforms=t.fieldTransforms.map(t=>aq(e,t))),t.precondition.isNone||(r.currentDocument=az(e,t.precondition)),r}function aU(e,t){let r=t.currentDocument?aV(t.currentDocument):sC.none(),i=t.updateTransforms?t.updateTransforms.map(t=>aH(e,t)):[];if(t.update){t.update.name;let n=aT(e,t.update.name),s=new iL({mapValue:{fields:t.update.fields}});return t.updateMask?new sM(n,s,oy(t.updateMask),r,i):new sR(n,s,r,i)}return t.delete?new sV(aT(e,t.delete),r):t.verify?new sq(aT(e,t.verify),r):I(1463,{proto:t})}function az(e,t){return void 0!==t.updateTime?{updateTime:ay(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:I(27497)}function aV(e){return void 0!==e.updateTime?sC.updateTime(av(e.updateTime)):void 0!==e.exists?sC.exists(e.exists):sC.none()}function aj(e,t){let r=e.updateTime?av(e.updateTime):av(t);return r.isEqual(eE.min())&&(r=av(t)),new sT(r,e.transformResults||[])}function aG(e,t){return e&&e.length>0?(P(void 0!==t,14353),e.map(e=>aj(e,t))):[]}function aq(e,t){let r=t.transform;if(r instanceof sc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(r instanceof sd)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:r.elements}};if(r instanceof sf)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:r.elements}};if(r instanceof sg)return{fieldPath:t.field.canonicalString(),increment:r.operand};throw I(20930,{transform:t.transform})}function aH(e,t){let r=null;return"setToServerValue"in t?(P("REQUEST_TIME"===t.setToServerValue,16630,{proto:t}),r=new sc):"appendMissingElements"in t?r=new sd(t.appendMissingElements.values||[]):"removeAllFromArray"in t?r=new sf(t.removeAllFromArray.values||[]):"increment"in t?r=new sg(e,t.increment):I(16584,{proto:t}),new sw(es.fromServerFormat(t.fieldPath),r)}function aW(e,t){return{documents:[aC(e,t.path)]}}function aK(e){let t=e.documents.length;return P(1===t,1966,{count:t}),nR(nA(aA(e.documents[0])))}function aQ(e,t){let r;let i={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(r=n,i.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=n.popLast(),i.structuredQuery.from=[{collectionId:n.lastSegment()}]),i.parent=aC(e,r);let s=a1(t.filters);s&&(i.structuredQuery.where=s);let a=a4(t.orderBy);a&&(i.structuredQuery.orderBy=a);let o=ac(e,t.limit);return null!==o&&(i.structuredQuery.limit=o),t.startAt&&(i.structuredQuery.startAt=a5(t.startAt)),t.endAt&&(i.structuredQuery.endAt=a9(t.endAt)),{queryTarget:i,parent:r}}function a$(e,t,r,i){let{queryTarget:n,parent:s}=aQ(e,t),a={},o=[],l=0;return r.forEach(e=>{let t=i?e.alias:`aggregate_${l++}`;a[t]=e.alias,"count"===e.aggregateType?o.push({alias:t,count:{}}):"avg"===e.aggregateType?o.push({alias:t,avg:{field:oa(e.fieldPath)}}):"sum"===e.aggregateType&&o.push({alias:t,sum:{field:oa(e.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:n.structuredQuery},parent:n.parent},aliasMap:a,parent:s}}function aJ(e){let t=aA(e.parent),r=e.structuredQuery,i=r.from?r.from.length:0,n=null;if(i>0){P(1===i,65062);let e=r.from[0];e.allDescendants?n=e.collectionId:t=t.child(e.collectionId)}let s=[];r.where&&(s=a2(r.where));let a=[];r.orderBy&&(a=a6(r.orderBy));let o=null;r.limit&&(o=ad(r.limit));let l=null;r.startAt&&(l=a8(r.startAt));let h=null;return r.endAt&&(h=a7(r.endAt)),nC(t,n,a,s,o,"F",l,h)}function aY(e){return nR(aJ(e))}function aX(e,t){let r=aZ(t.purpose);return null==r?null:{"goog-listen-tags":r}}function aZ(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return I(28987,{purpose:e})}}function a0(e,t){let r;let i=t.target;if((r=np(i)?{documents:aW(e,i)}:{query:aQ(e,i).queryTarget}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){r.resumeToken=am(e,t.resumeToken);let i=ac(e,t.expectedCount);null!==i&&(r.expectedCount=i)}else if(t.snapshotVersion.compareTo(eE.min())>0){r.readTime=ap(e,t.snapshotVersion.toTimestamp());let i=ac(e,t.expectedCount);null!==i&&(r.expectedCount=i)}return r}function a1(e){if(0!==e.length)return ou(iY.create(e,"and"))}function a2(e){let t=a3(e);return t instanceof iY&&i0(t)?t.getFilters():[t]}function a3(e){return void 0!==e.unaryFilter?op(e):void 0!==e.fieldFilter?of(e):void 0!==e.compositeFilter?om(e):I(30097,{filter:e})}function a4(e){if(0!==e.length)return e.map(e=>ol(e))}function a6(e){return e.map(e=>oh(e))}function a5(e){return{before:e.inclusive,values:e.position}}function a9(e){return{before:!e.inclusive,values:e.position}}function a8(e){let t=!!e.before;return new iz(e.values||[],t)}function a7(e){let t=!e.before;return new iz(e.values||[],t)}function oe(e){return aa[e]}function ot(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}function or(e){return ao[e]}function oi(e){return al[e]}function on(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return I(58110);default:return I(50506)}}function os(e){switch(e){case"AND":return"and";case"OR":return"or";default:return I(1026)}}function oa(e){return{fieldPath:e.canonicalString()}}function oo(e){return es.fromServerFormat(e.fieldPath)}function ol(e){return{field:oa(e.field),direction:oe(e.dir)}}function oh(e){return new iH(oo(e.field),ot(e.direction))}function ou(e){return e instanceof iJ?od(e):e instanceof iY?oc(e):I(54877,{filter:e})}function oc(e){let t=e.getFilters().map(e=>ou(e));return 1===t.length?t[0]:{compositeFilter:{op:oi(e.op),filters:t}}}function od(e){if("=="===e.op){if(i_(e.value))return{unaryFilter:{field:oa(e.field),op:"IS_NAN"}};if(iA(e.value))return{unaryFilter:{field:oa(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(i_(e.value))return{unaryFilter:{field:oa(e.field),op:"IS_NOT_NAN"}};if(iA(e.value))return{unaryFilter:{field:oa(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oa(e.field),op:or(e.op),value:e.value}}}function op(e){switch(e.unaryFilter.op){case"IS_NAN":let t=oo(e.unaryFilter.field);return iJ.create(t,"==",{doubleValue:NaN});case"IS_NULL":let r=oo(e.unaryFilter.field);return iJ.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let i=oo(e.unaryFilter.field);return iJ.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let n=oo(e.unaryFilter.field);return iJ.create(n,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return I(61313);default:return I(60726)}}function of(e){return iJ.create(oo(e.fieldFilter.field),on(e.fieldFilter.op),e.fieldFilter.value)}function om(e){return iY.create(e.compositeFilter.filters.map(e=>a3(e)),os(e.compositeFilter.op))}function og(e){let t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function oy(e){return new rS((e.fieldPaths||[]).map(e=>es.fromServerFormat(e)))}function ov(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{constructor(e,t,r,i,n=eE.min(),s=eE.min(),a=rA.EMPTY_BYTE_STRING,o=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=n,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new ob(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ob(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ob(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ob(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e){this.remoteSerializer=e}}function oE(e,t){let r;if(t.document)r=aP(e.remoteSerializer,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let e=ea.fromSegments(t.noDocument.path),i=o_(t.noDocument.readTime);r=iB.newNoDocument(e,i),t.hasCommittedMutations&&r.setHasCommittedMutations()}else{if(!t.unknownDocument)return I(56709);let e=ea.fromSegments(t.unknownDocument.path),i=o_(t.unknownDocument.version);r=iB.newUnknownDocument(e,i)}return t.readTime&&r.setReadTime(oC(t.readTime)),r}function oS(e,t){let r=t.key,i={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:oT(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=aD(e.remoteSerializer,t);else if(t.isNoDocument())i.noDocument={path:r.path.toArray(),readTime:oA(t.version)};else{if(!t.isUnknownDocument())return I(57904,{document:t});i.unknownDocument={path:r.path.toArray(),version:oA(t.version)}}return i}function oT(e){let t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function oC(e){let t=new ew(e[0],e[1]);return eE.fromTimestamp(t)}function oA(e){let t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function o_(e){let t=new ew(e.seconds,e.nanoseconds);return eE.fromTimestamp(t)}function ox(e,t,r){let i=r.baseMutations.map(t=>aB(e.remoteSerializer,t)),n=r.mutations.map(t=>aB(e.remoteSerializer,t));return{userId:t,batchId:r.batchId,localWriteTimeMs:r.localWriteTime.toMillis(),baseMutations:i,mutations:n}}function ok(e,t){let r=(t.baseMutations||[]).map(t=>aU(e.remoteSerializer,t));for(let e=0;e<t.mutations.length-1;++e){let r=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){let i=t.mutations[e+1];r.updateTransforms=i.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}let i=t.mutations.map(t=>aU(e.remoteSerializer,t)),n=ew.fromMillis(t.localWriteTimeMs);return new sH(t.batchId,n,r,i)}function oI(e){let t;let r=o_(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?o_(e.lastLimboFreeSnapshotVersion):eE.min();return new ob(t=oP(e.query)?aK(e.query):aY(e.query),e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,r,i,rA.fromBase64String(e.resumeToken))}function oD(e,t){let r;let i=oA(t.snapshotVersion),n=oA(t.lastLimboFreeSnapshotVersion);r=np(t.target)?aW(e.remoteSerializer,t.target):aQ(e.remoteSerializer,t.target).queryTarget;let s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:nu(t.target),readTime:i,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:r}}function oP(e){return void 0!==e.documents}function oR(e){return{id:e.bundleId,createTime:o_(e.createTime),version:e.version}}function oN(e){return{bundleId:e.id,createTime:oA(av(e.createTime)),version:e.version}}function oO(e){return{name:e.name,query:oL(e.bundledQuery),readTime:o_(e.readTime)}}function oM(e){return{name:e.name,readTime:oA(av(e.readTime)),bundledQuery:e.bundledQuery}}function oL(e){let t=aJ({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?nF(t,t.limit,"L"):t}function oF(e){return{name:e.name,query:oL(e.bundledQuery),readTime:av(e.readTime)}}function oB(e){return{id:e.id,version:e.version,createTime:av(e.createTime)}}function oU(e,t){return new sK(t.largestBatchId,aU(e.remoteSerializer,t.overlayMutation))}function oz(e,t,r){let[i,n,s]=oV(t,r.mutation.key);return{userId:t,collectionPath:n,documentId:s,collectionGroup:r.mutation.key.getCollectionGroup(),largestBatchId:r.largestBatchId,overlayMutation:aB(e.remoteSerializer,r.mutation)}}function oV(e,t){let r=t.path.lastSegment();return[e,te(t.path.popLast()),r]}function oj(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}function oG(e,t){let r=t?new eR(t.sequenceNumber,new eM(o_(t.readTime),new ea(ti(t.documentKey)),t.largestBatchId)):eR.empty(),i=e.fields.map(([e,t])=>new eD(es.fromServerFormat(e),t));return new eC(e.indexId,e.collectionGroup,i,r)}function oq(e,t,r,i){return{indexId:e,uid:t,sequenceNumber:r,readTime:oA(i.readTime),documentKey:te(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oH{getBundleMetadata(e,t){return oW(e).get(t).next(e=>{if(e)return oR(e)})}saveBundleMetadata(e,t){return oW(e).put(oN(t))}getNamedQuery(e,t){return oK(e).get(t).next(e=>{if(e)return oO(e)})}saveNamedQuery(e,t){return oK(e).put(oM(t))}}function oW(e){return ru(e,tz)}function oK(e){return ru(e,tj)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oQ{constructor(e,t){this.serializer=e,this.userId=t}static forUser(e,t){return new oQ(e,t.uid||"")}getOverlay(e,t){return o$(e).get(oV(this.userId,t)).next(e=>e?oU(this.serializer,e):null)}getOverlays(e,t){let r=n4();return ez.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((r,n)=>{let s=new sK(t,n);i.push(this.saveOverlay(e,s))}),ez.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(e=>i.add(te(e.getCollectionPath())));let n=[];return i.forEach(t=>{let i=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,r+1],!1,!0);n.push(o$(e).deleteAll(t4,i))}),ez.waitFor(n)}getOverlaysForCollection(e,t,r){let i=n4(),n=te(t),s=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return o$(e).loadAll(t4,s).next(e=>{for(let t of e){let e=oU(this.serializer,t);i.set(e.getKey(),e)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let n;let s=n4(),a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return o$(e).iterate({index:t5,range:a},(e,t,r)=>{let a=oU(this.serializer,t);s.size()<i||a.largestBatchId===n?(s.set(a.getKey(),a),n=a.largestBatchId):r.done()}).next(()=>s)}saveOverlay(e,t){return o$(e).put(oz(this.serializer,this.userId,t))}}function o$(e){return ru(e,t2)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oJ{globalsStore(e){return ru(e,t8)}getSessionToken(e){return this.globalsStore(e).get("sessionToken").next(e=>{let t=null==e?void 0:e.value;return t?rA.fromUint8Array(t):rA.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.globalsStore(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oY=5,oX=10,oZ=13,o0=15,o1=20,o2=25,o3=30,o4=37,o6=45,o5=50,o9=53,o8=55,o7=60,le=2;class lt{constructor(){}writeIndexValue(e,t){this.writeIndexValueAux(e,t),t.writeInfinity()}writeIndexValueAux(e,t){if("nullValue"in e)this.writeValueTypeLabel(t,oY);else if("booleanValue"in e)this.writeValueTypeLabel(t,oX),t.writeNumber(e.booleanValue?1:0);else if("integerValue"in e)this.writeValueTypeLabel(t,o0),t.writeNumber(rD(e.integerValue));else if("doubleValue"in e){let r=rD(e.doubleValue);isNaN(r)?this.writeValueTypeLabel(t,oZ):(this.writeValueTypeLabel(t,o0),rW(r)?t.writeNumber(0):t.writeNumber(r))}else if("timestampValue"in e){let r=e.timestampValue;this.writeValueTypeLabel(t,o1),"string"==typeof r&&(r=rI(r)),t.writeString(`${r.seconds||""}`),t.writeNumber(r.nanos||0)}else if("stringValue"in e)this.writeIndexString(e.stringValue,t),this.writeTruncationMarker(t);else if("bytesValue"in e)this.writeValueTypeLabel(t,o3),t.writeBytes(rP(e.bytesValue)),this.writeTruncationMarker(t);else if("referenceValue"in e)this.writeIndexEntityRef(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.writeValueTypeLabel(t,o6),t.writeNumber(r.latitude||0),t.writeNumber(r.longitude||0)}else"mapValue"in e?iD(e)?this.writeValueTypeLabel(t,Number.MAX_SAFE_INTEGER):ik(e)?this.writeIndexVector(e.mapValue,t):(this.writeIndexMap(e.mapValue,t),this.writeTruncationMarker(t)):"arrayValue"in e?(this.writeIndexArray(e.arrayValue,t),this.writeTruncationMarker(t)):I(19022,{indexValue:e})}writeIndexString(e,t){this.writeValueTypeLabel(t,o2),this.writeUnlabeledIndexString(e,t)}writeUnlabeledIndexString(e,t){t.writeString(e)}writeIndexMap(e,t){let r=e.fields||{};for(let e of(this.writeValueTypeLabel(t,o8),Object.keys(r)))this.writeIndexString(e,t),this.writeIndexValueAux(r[e],t)}writeIndexVector(e,t){var r,i;let n=e.fields||{};this.writeValueTypeLabel(t,o9);let s=rX,a=(null===(i=null===(r=n[s].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.length)||0;this.writeValueTypeLabel(t,o0),t.writeNumber(rD(a)),this.writeIndexString(s,t),this.writeIndexValueAux(n[s],t)}writeIndexArray(e,t){let r=e.values||[];for(let e of(this.writeValueTypeLabel(t,o5),r))this.writeIndexValueAux(e,t)}writeIndexEntityRef(e,t){this.writeValueTypeLabel(t,o4),ea.fromName(e).path.forEach(e=>{this.writeValueTypeLabel(t,o7),this.writeUnlabeledIndexString(e,t)})}writeValueTypeLabel(e,t){e.writeNumber(t)}writeTruncationMarker(e){e.writeNumber(le)}}lt.INSTANCE=new lt;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lr="\uD800",li="\uDBFF",ln=0,ls=255,la=1,lo=255,ll=255,lh=0,lu=64,lc=8,ld=1024;function lp(e){let t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}function lf(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function lm(e){let t=0;for(let r=0;r<8;++r){let i=lf(255&e[r]);if(t+=i,8!==i)break}return t}function lg(e){return Math.ceil((lu-lm(e))/lc)}class ly{constructor(){this.buffer=new Uint8Array(ld),this.position=0}writeBytesAscending(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.writeByteAscending(r.value),r=t.next();this.writeSeparatorAscending()}writeBytesDescending(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.writeByteDescending(r.value),r=t.next();this.writeSeparatorDescending()}writeUtf8Ascending(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.writeByteAscending(e);else if(e<2048)this.writeByteAscending(960|e>>>6),this.writeByteAscending(128|63&e);else if(t<lr||li<t)this.writeByteAscending(480|e>>>12),this.writeByteAscending(128|63&e>>>6),this.writeByteAscending(128|63&e);else{let e=t.codePointAt(0);this.writeByteAscending(240|e>>>18),this.writeByteAscending(128|63&e>>>12),this.writeByteAscending(128|63&e>>>6),this.writeByteAscending(128|63&e)}}this.writeSeparatorAscending()}writeUtf8Descending(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.writeByteDescending(e);else if(e<2048)this.writeByteDescending(960|e>>>6),this.writeByteDescending(128|63&e);else if(t<lr||li<t)this.writeByteDescending(480|e>>>12),this.writeByteDescending(128|63&e>>>6),this.writeByteDescending(128|63&e);else{let e=t.codePointAt(0);this.writeByteDescending(240|e>>>18),this.writeByteDescending(128|63&e>>>12),this.writeByteDescending(128|63&e>>>6),this.writeByteDescending(128|63&e)}}this.writeSeparatorDescending()}writeNumberAscending(e){let t=this.toOrderedBits(e),r=lg(t);this.ensureAvailable(1+r),this.buffer[this.position++]=255&r;for(let e=t.length-r;e<t.length;++e)this.buffer[this.position++]=255&t[e]}writeNumberDescending(e){let t=this.toOrderedBits(e),r=lg(t);this.ensureAvailable(1+r),this.buffer[this.position++]=~(255&r);for(let e=t.length-r;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}writeInfinityAscending(){this.writeEscapedByteAscending(lo),this.writeEscapedByteAscending(ll)}writeInfinityDescending(){this.writeEscapedByteDescending(lo),this.writeEscapedByteDescending(ll)}reset(){this.position=0}seed(e){this.ensureAvailable(e.length),this.buffer.set(e,this.position),this.position+=e.length}encodedBytes(){return this.buffer.slice(0,this.position)}toOrderedBits(e){let t=lp(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let e=1;e<t.length;++e)t[e]^=r?255:0;return t}writeByteAscending(e){let t=255&e;t===ln?(this.writeEscapedByteAscending(ln),this.writeEscapedByteAscending(ls)):t===lo?(this.writeEscapedByteAscending(lo),this.writeEscapedByteAscending(lh)):this.writeEscapedByteAscending(t)}writeByteDescending(e){let t=255&e;t===ln?(this.writeEscapedByteDescending(ln),this.writeEscapedByteDescending(ls)):t===lo?(this.writeEscapedByteDescending(lo),this.writeEscapedByteDescending(lh)):this.writeEscapedByteDescending(e)}writeSeparatorAscending(){this.writeEscapedByteAscending(ln),this.writeEscapedByteAscending(la)}writeSeparatorDescending(){this.writeEscapedByteDescending(ln),this.writeEscapedByteDescending(la)}writeEscapedByteAscending(e){this.ensureAvailable(1),this.buffer[this.position++]=e}writeEscapedByteDescending(e){this.ensureAvailable(1),this.buffer[this.position++]=~e}ensureAvailable(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class lv{constructor(e){this.orderedCode=e}writeBytes(e){this.orderedCode.writeBytesAscending(e)}writeString(e){this.orderedCode.writeUtf8Ascending(e)}writeNumber(e){this.orderedCode.writeNumberAscending(e)}writeInfinity(){this.orderedCode.writeInfinityAscending()}}class lb{constructor(e){this.orderedCode=e}writeBytes(e){this.orderedCode.writeBytesDescending(e)}writeString(e){this.orderedCode.writeUtf8Descending(e)}writeNumber(e){this.orderedCode.writeNumberDescending(e)}writeInfinity(){this.orderedCode.writeInfinityDescending()}}class lw{constructor(){this.orderedCode=new ly,this.ascending=new lv(this.orderedCode),this.descending=new lb(this.orderedCode)}seed(e){this.orderedCode.seed(e)}forKind(e){return 0===e?this.ascending:this.descending}encodedBytes(){return this.orderedCode.encodedBytes()}reset(){this.orderedCode.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,t,r,i){this._indexId=e,this._documentKey=t,this._arrayValue=r,this._directionalValue=i}successor(){let e=this._directionalValue.length,t=0===e||255===this._directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this._directionalValue,0),t!==e?r.set([0],this._directionalValue.length):++r[r.length-1],new lE(this._indexId,this._documentKey,this._arrayValue,r)}dbIndexEntry(e,t,r){return{indexId:this._indexId,uid:e,arrayValue:lC(this._arrayValue),directionalValue:lC(this._directionalValue),orderedDocumentKey:lC(t),documentKey:r.path.toArray()}}dbIndexEntryKey(e,t,r){let i=this.dbIndexEntry(e,t,r);return[i.indexId,i.uid,i.arrayValue,i.directionalValue,i.orderedDocumentKey,i.documentKey]}}function lS(e,t){let r=e._indexId-t._indexId;return 0!==r||0!==(r=lT(e._arrayValue,t._arrayValue))||0!==(r=lT(e._directionalValue,t._directionalValue))?r:ea.comparator(e._documentKey,t._documentKey)}function lT(e,t){for(let r=0;r<e.length&&r<t.length;++r){let i=e[r]-t[r];if(0!==i)return i}return e.length-t.length}function lC(e){return(0,c.WO)()?l_(e):e}function lA(e){return"string"!=typeof e?e:lx(e)}function l_(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}function lx(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(e){for(let t of(this.inequalityFilters=new rv((e,t)=>es.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.orderBys=e.orderBy,this.equalityFilters=[],e.filters)){let e=t;e.isInequality()?this.inequalityFilters=this.inequalityFilters.add(e):this.equalityFilters.push(e)}}get hasMultipleInequality(){return this.inequalityFilters.size>1}servedByIndex(e){if(P(e.collectionGroup===this.collectionId,49279),this.hasMultipleInequality)return!1;let t=eA(e);if(void 0!==t&&!this.hasMatchingEqualityFilter(t))return!1;let r=e_(e),i=new Set,n=0,s=0;for(;n<r.length;++n)if(this.hasMatchingEqualityFilter(r[n]))i=i.add(r[n].fieldPath.canonicalString());else break;if(n===r.length)return!0;if(this.inequalityFilters.size>0){let e=this.inequalityFilters.getIterator().getNext();if(!i.has(e.field.canonicalString())){let t=r[n];if(!this.matchesFilter(e,t)||!this.matchesOrderBy(this.orderBys[s++],t))return!1}++n}for(;n<r.length;++n){let e=r[n];if(s>=this.orderBys.length||!this.matchesOrderBy(this.orderBys[s++],e))return!1}return!0}buildTargetIndex(){if(this.hasMultipleInequality)return null;let e=new rv(es.comparator),t=[];for(let r of this.equalityFilters)if(!r.field.isKeyField()){if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new eD(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new eD(r.field,0))}}for(let r of this.orderBys)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new eD(r.field,"asc"===r.dir?0:1)));return new eC(eC.UNKNOWN_ID,this.collectionId,t,eR.empty())}hasMatchingEqualityFilter(e){for(let t of this.equalityFilters)if(this.matchesFilter(t,e))return!0;return!1}matchesFilter(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;let r="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===r}matchesOrderBy(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(e){var t,r;if(P(e instanceof iJ||e instanceof iY,20012),e instanceof iJ){if(!(e instanceof ns))return e;{let i=(null===(r=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===r?void 0:r.map(t=>iJ.create(e.field,"==",t)))||[];return iY.create(i,"or")}}let i=e.filters.map(e=>lI(e));return iY.create(i,e.op)}function lD(e){if(0===e.getFilters().length)return[];let t=lM(lI(e));return(P(lN(t),7391),lP(t)||lR(t))?[t]:t.getFilters()}function lP(e){return e instanceof iJ}function lR(e){return e instanceof iY&&i0(e)}function lN(e){return lP(e)||lR(e)||lO(e)}function lO(e){if(e instanceof iY&&iZ(e)){for(let t of e.getFilters())if(!lP(t)&&!lR(t))return!1;return!0}return!1}function lM(e){if(P(e instanceof iJ||e instanceof iY,34018),e instanceof iJ)return e;if(1===e.filters.length)return lM(e.filters[0]);let t=e.filters.map(e=>lM(e)),r=iY.create(t,e.op);return lN(r=lz(r))?r:(P(r instanceof iY,64498),P(iX(r),40251),P(r.filters.length>1,57927),r.filters.reduce((e,t)=>lL(e,t)))}function lL(e,t){let r;return P(e instanceof iJ||e instanceof iY,38388),P(t instanceof iJ||t instanceof iY,25473),lz(r=e instanceof iJ?t instanceof iJ?lF(e,t):lU(e,t):t instanceof iJ?lU(t,e):lB(e,t))}function lF(e,t){return iY.create([e,t],"and")}function lB(e,t){if(P(e.filters.length>0&&t.filters.length>0,48005),iX(e)&&iX(t))return i5(e,t.getFilters());let r=iZ(e)?e:t,i=iZ(e)?t:e,n=r.filters.map(e=>lL(e,i));return iY.create(n,"or")}function lU(e,t){if(iX(t))return i5(t,e.getFilters());{let r=t.filters.map(t=>lL(e,t));return iY.create(r,"or")}}function lz(e){if(P(e instanceof iJ||e instanceof iY,11850),e instanceof iJ)return e;let t=e.getFilters();if(1===t.length)return lz(t[0]);if(i1(e))return e;let r=t.map(e=>lz(e)),i=[];return(r.forEach(t=>{t instanceof iJ?i.push(t):t instanceof iY&&(t.op===e.op?i.push(...t.filters):i.push(t))}),1===i.length)?i[0]:iY.create(i,e.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(){this.collectionParentIndex=new lj}addToCollectionParentIndex(e,t){return this.collectionParentIndex.add(t),ez.resolve()}getCollectionParents(e,t){return ez.resolve(this.collectionParentIndex.getEntries(t))}addFieldIndex(e,t){return ez.resolve()}deleteFieldIndex(e,t){return ez.resolve()}deleteAllFieldIndexes(e){return ez.resolve()}createTargetIndexes(e,t){return ez.resolve()}getDocumentsMatchingTarget(e,t){return ez.resolve(null)}getIndexType(e,t){return ez.resolve(0)}getFieldIndexes(e,t){return ez.resolve([])}getNextCollectionGroupToUpdate(e){return ez.resolve(null)}getMinOffset(e,t){return ez.resolve(eM.min())}getMinOffsetFromCollectionGroup(e,t){return ez.resolve(eM.min())}updateCollectionGroup(e,t,r){return ez.resolve()}updateIndexEntries(e,t){return ez.resolve()}}class lj{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new rv(ei.comparator),n=!i.has(r);return this.index[t]=i.add(r),n}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rv(ei.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lG="IndexedDbIndexManager",lq=new Uint8Array(0);class lH{constructor(e,t){this.databaseId=t,this.collectionParentsCache=new lj,this.targetToDnfSubTargets=new nY(e=>nu(e),(e,t)=>nd(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.collectionParentsCache.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.collectionParentsCache.add(t)});let n={collectionId:r,parent:te(i)};return lW(e).put(n)}return ez.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[ee(t),""],!1,!0);return lW(e).loadAll(i).next(e=>{for(let i of e){if(i.collectionId!==t)break;r.push(ti(i.parent))}return r})}addFieldIndex(e,t){let r=lQ(e),i=oj(t);delete i.indexId;let n=r.add(i);if(!t.indexState)return n.next();{let r=l$(e);return n.next(e=>{r.put(oq(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}}deleteFieldIndex(e,t){let r=lQ(e),i=l$(e),n=lK(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>n.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=lQ(e),r=lK(e),i=l$(e);return t.deleteAll().next(()=>r.deleteAll()).next(()=>i.deleteAll())}createTargetIndexes(e,t){return ez.forEach(this.getSubTargets(t),t=>this.getIndexType(e,t).next(r=>{if(0===r||1===r){let r=new lk(t).buildTargetIndex();if(null!=r)return this.addFieldIndex(e,r)}}))}getDocumentsMatchingTarget(e,t){let r=lK(e),i=!0,n=new Map;return ez.forEach(this.getSubTargets(t),t=>this.getFieldIndex(e,t).next(e=>{i&&(i=!!e),n.set(t,e)})).next(()=>{if(!i)return ez.resolve(null);{let e=se(),i=[];return ez.forEach(n,(n,s)=>{A(lG,`Using index ${eI(n)} to execute ${nu(t)}`);let a=nm(s,n),o=ng(s,n),l=ny(s,n),h=nv(s,n),u=this.encodeBound(n,s,l),c=this.encodeBound(n,s,h),d=this.encodeValues(n,s,o),p=this.generateIndexRanges(n.indexId,a,u,l.inclusive,c,h.inclusive,d);return ez.forEach(p,n=>r.loadFirst(n,t.limit).next(t=>{t.forEach(t=>{let r=ea.fromSegments(t.documentKey);e.has(r)||(e=e.add(r),i.push(r))})}))}).next(()=>i)}})}getSubTargets(e){let t=this.targetToDnfSubTargets.get(e);return t||(t=0===e.filters.length?[e]:lD(iY.create(e.filters,"and")).map(t=>nh(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.targetToDnfSubTargets.set(e,t)),t}generateIndexRanges(e,t,r,i,n,s,a){let o=(null!=t?t.length:1)*Math.max(r.length,n.length),l=o/(null!=t?t.length:1),h=[];for(let u=0;u<o;++u){let o=t?this.encodeSingleElement(t[u/l]):lq,c=this.generateLowerBound(e,o,r[u%l],i),d=this.generateUpperBound(e,o,n[u%l],s),p=a.map(t=>this.generateLowerBound(e,o,t,!0));h.push(...this.createRange(c,d,p))}return h}generateLowerBound(e,t,r,i){let n=new lE(e,ea.empty(),t,r);return i?n:n.successor()}generateUpperBound(e,t,r,i){let n=new lE(e,ea.empty(),t,r);return i?n.successor():n}getFieldIndex(e,t){let r=new lk(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(e=>{let t=null;for(let i of e)r.servedByIndex(i)&&(!t||i.fields.length>t.fields.length)&&(t=i);return t})}getIndexType(e,t){let r=2,i=this.getSubTargets(t);return ez.forEach(i,t=>this.getFieldIndex(e,t).next(e=>{e?0!==r&&e.fields.length<nE(t)&&(r=1):r=0})).next(()=>nS(t)&&i.length>1&&2===r?1:r)}encodeDirectionalElements(e,t){let r=new lw;for(let i of e_(e)){let e=t.data.field(i.fieldPath);if(null==e)return null;let n=r.forKind(i.kind);lt.INSTANCE.writeIndexValue(e,n)}return r.encodedBytes()}encodeSingleElement(e){let t=new lw;return lt.INSTANCE.writeIndexValue(e,t.forKind(0)),t.encodedBytes()}encodeDirectionalKey(e,t){let r=new lw;return lt.INSTANCE.writeIndexValue(iw(this.databaseId,t),r.forKind(ex(e))),r.encodedBytes()}encodeValues(e,t,r){if(null===r)return[];let i=[];i.push(new lw);let n=0;for(let s of e_(e)){let e=r[n++];for(let r of i)if(this.isInFilter(t,s.fieldPath)&&iC(e))i=this.expandIndexValues(i,s,e);else{let t=r.forKind(s.kind);lt.INSTANCE.writeIndexValue(e,t)}}return this.getEncodedBytes(i)}encodeBound(e,t,r){return this.encodeValues(e,t,r.position)}getEncodedBytes(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].encodedBytes();return t}expandIndexValues(e,t,r){let i=[...e],n=[];for(let e of r.arrayValue.values||[])for(let r of i){let i=new lw;i.seed(r.encodedBytes()),lt.INSTANCE.writeIndexValue(e,i.forKind(t.kind)),n.push(i)}return n}isInFilter(e,t){return!!e.filters.find(e=>e instanceof iJ&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){let r=lQ(e),i=l$(e);return(t?r.loadAll(tW,IDBKeyRange.bound(t,t)):r.loadAll()).next(e=>{let t=[];return ez.forEach(e,e=>i.get([e.indexId,this.uid]).next(r=>{t.push(oG(e,r))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{let r=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==r?r:$(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=lQ(e),n=l$(e);return this.getNextSequenceNumber(e).next(e=>i.loadAll(tW,IDBKeyRange.bound(t,t)).next(t=>ez.forEach(t,t=>n.put(oq(t.indexId,this.uid,e,r)))))}updateIndexEntries(e,t){let r=new Map;return ez.forEach(t,(t,i)=>{let n=r.get(t.collectionGroup);return(n?ez.resolve(n):this.getFieldIndexes(e,t.collectionGroup)).next(n=>(r.set(t.collectionGroup,n),ez.forEach(n,r=>this.getExistingIndexEntries(e,t,r).next(t=>{let n=this.computeIndexEntries(i,r);return t.isEqual(n)?ez.resolve():this.updateEntries(e,i,r,t,n)}))))})}addIndexEntry(e,t,r,i){return lK(e).put(i.dbIndexEntry(this.uid,this.encodeDirectionalKey(r,t.key),t.key))}deleteIndexEntry(e,t,r,i){return lK(e).delete(i.dbIndexEntryKey(this.uid,this.encodeDirectionalKey(r,t.key),t.key))}getExistingIndexEntries(e,t,r){let i=lK(e),n=new rv(lS);return i.iterate({index:t0,range:IDBKeyRange.only([r.indexId,this.uid,lC(this.encodeDirectionalKey(r,t))])},(e,i)=>{n=n.add(new lE(r.indexId,t,lA(i.arrayValue),lA(i.directionalValue)))}).next(()=>n)}computeIndexEntries(e,t){let r=new rv(lS),i=this.encodeDirectionalElements(t,e);if(null==i)return r;let n=eA(t);if(null!=n){let s=e.data.field(n.fieldPath);if(iC(s))for(let n of s.arrayValue.values||[])r=r.add(new lE(t.indexId,e.key,this.encodeSingleElement(n),i))}else r=r.add(new lE(t.indexId,e.key,lq,i));return r}updateEntries(e,t,r,i,n){A(lG,"Updating index entries for document '%s'",t.key);let s=[];return rw(i,n,lS,i=>{s.push(this.addIndexEntry(e,t,r,i))},i=>{s.push(this.deleteIndexEntry(e,t,r,i))}),ez.waitFor(s)}getNextSequenceNumber(e){let t=1;return l$(e).iterate({index:tJ,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,r,i)=>{i.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((e,t)=>lS(e,t)).filter((e,t,r)=>!t||0!==lS(e,r[t-1]));let i=[];for(let n of(i.push(e),r)){let r=lS(n,e),s=lS(n,t);if(0===r)i[0]=e.successor();else if(r>0&&s<0)i.push(n),i.push(n.successor());else if(s>0)break}i.push(t);let n=[];for(let e=0;e<i.length;e+=2){if(this.isRangeMatchable(i[e],i[e+1]))return[];let t=i[e].dbIndexEntryKey(this.uid,lq,ea.empty()),r=i[e+1].dbIndexEntryKey(this.uid,lq,ea.empty());n.push(IDBKeyRange.bound(t,r))}return n}isRangeMatchable(e,t){return lS(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(lJ)}getMinOffset(e,t){return ez.mapArray(this.getSubTargets(t),t=>this.getFieldIndex(e,t).next(e=>e||I(44426))).next(lJ)}}function lW(e){return ru(e,tL)}function lK(e){return ru(e,tX)}function lQ(e){return ru(e,tq)}function l$(e){return ru(e,tQ)}function lJ(e){P(0!==e.length,28825);let t=e[0].indexState.offset,r=t.largestBatchId;for(let i=1;i<e.length;i++){let n=e[i].indexState.offset;0>eL(n,t)&&(t=n),r<n.largestBatchId&&(r=n.largestBatchId)}return new eM(t.readTime,t.documentKey,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lY(e,t,r){let i=e.store(th),n=e.store(ty),s=[],a=IDBKeyRange.only(r.batchId),o=0,l=i.iterate({range:a},(e,t,r)=>(o++,r.delete()));s.push(l.next(()=>{P(1===o,47070,{batchId:r.batchId})}));let h=[];for(let e of r.mutations){let i=tm(t,e.key.path,r.batchId);s.push(n.delete(i)),h.push(e.key)}return ez.waitFor(s).next(()=>h)}function lX(e){let t;if(!e)return 0;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else if(e.noDocument)t=e.noDocument;else throw I(14731);return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lZ{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.documentKeysByBatchId={}}static forUser(e,t,r,i){return P(""!==e.uid,64387),new lZ(e.isAuthenticated()?e.uid:"",t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return l2(e).iterate({index:tc,range:r},(e,r,i)=>{t=!1,i.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let n=l3(e),s=l2(e);return s.add({}).next(a=>{P("number"==typeof a,49019);let o=new sH(a,t,r,i),l=ox(this.serializer,this.userId,o),h=[],u=new rv((e,t)=>$(e.canonicalString(),t.canonicalString()));for(let e of i){let t=tm(this.userId,e.key.path,a);u=u.add(e.key.path.popLast()),h.push(s.put(l)),h.push(n.put(t,tg))}return u.forEach(t=>{h.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.documentKeysByBatchId[a]=o.keys()}),ez.waitFor(h).next(()=>o)})}lookupMutationBatch(e,t){return l2(e).get(t).next(e=>e?(P(e.userId===this.userId,48,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),ok(this.serializer,e)):null)}lookupMutationKeys(e,t){return this.documentKeysByBatchId[t]?ez.resolve(this.documentKeysByBatchId[t]):this.lookupMutationBatch(e,t).next(e=>{if(!e)return null;{let r=e.keys();return this.documentKeysByBatchId[t]=r,r}})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),n=null;return l2(e).iterate({index:tc,range:i},(e,t,i)=>{t.userId===this.userId&&(P(t.batchId>=r,47524,{nextBatchId:r}),n=ok(this.serializer,t)),i.done()}).next(()=>n)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=rq;return l2(e).iterate({index:tc,range:t,reverse:!0},(e,t,i)=>{r=t.batchId,i.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,rq],[this.userId,Number.POSITIVE_INFINITY]);return l2(e).loadAll(tc,t).next(e=>e.map(e=>ok(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=tf(this.userId,t.path),i=IDBKeyRange.lowerBound(r),n=[];return l3(e).iterate({range:i},(r,i,s)=>{let[a,o,l]=r,h=ti(o);if(a!==this.userId||!t.path.isEqual(h)){s.done();return}return l2(e).get(l).next(e=>{if(!e)throw I(61480,{indexKey:r,batchId:l});P(e.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:e.userId,batchId:l}),n.push(ok(this.serializer,e))})}).next(()=>n)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rv($),i=[];return t.forEach(t=>{let n=tf(this.userId,t.path),s=IDBKeyRange.lowerBound(n),a=l3(e).iterate({range:s},(e,i,n)=>{let[s,a,o]=e,l=ti(a);if(s!==this.userId||!t.path.isEqual(l)){n.done();return}r=r.add(o)});i.push(a)}),ez.waitFor(i).next(()=>this.lookupMutationBatches(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,n=tf(this.userId,r),s=IDBKeyRange.lowerBound(n),a=new rv($);return l3(e).iterate({range:s},(e,t,n)=>{let[s,o,l]=e,h=ti(o);if(s!==this.userId||!r.isPrefixOf(h)){n.done();return}h.length===i&&(a=a.add(l))}).next(()=>this.lookupMutationBatches(e,a))}lookupMutationBatches(e,t){let r=[],i=[];return t.forEach(t=>{i.push(l2(e).get(t).next(e=>{if(null===e)throw I(35274,{batchId:t});P(e.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),r.push(ok(this.serializer,e))}))}),ez.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return lY(e.simpleDbTransaction,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.removeCachedMutationKeys(t.batchId)}),ez.forEach(r,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}removeCachedMutationKeys(e){delete this.documentKeysByBatchId[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ez.resolve();let r=IDBKeyRange.lowerBound(tp(this.userId)),i=[];return l3(e).iterate({range:r},(e,t,r)=>{if(e[0]!==this.userId){r.done();return}{let t=ti(e[1]);i.push(t)}}).next(()=>{P(0===i.length,56720,{danglingKeys:i.map(e=>e.canonicalString())})})})}containsKey(e,t){return l0(e,this.userId,t)}getMutationQueueMetadata(e){return l4(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:rq,lastStreamToken:""})}}function l0(e,t,r){let i=tf(t,r.path),n=i[1],s=IDBKeyRange.lowerBound(i),a=!1;return l3(e).iterate({range:s,keysOnly:!0},(e,r,i)=>{let[s,o,l]=e;s===t&&o===n&&(a=!0),i.done()}).next(()=>a)}function l1(e,t){let r=!1;return l4(e).iterateSerial(i=>l0(e,i,t).next(e=>(e&&(r=!0),ez.resolve(!e)))).next(()=>r)}function l2(e){return ru(e,th)}function l3(e){return ru(e,ty)}function l4(e){return ru(e,to)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l6=2;class l5{constructor(e){this.lastId=e}next(){return this.lastId+=l6,this.lastId}static forTargetCache(){return new l5(2-l6)}static forSyncEngine(){return new l5(1-l6)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.retrieveMetadata(e).next(t=>{let r=new l5(t.highestTargetId);return t.highestTargetId=r.next(),this.saveMetadata(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.retrieveMetadata(e).next(e=>eE.fromTimestamp(new ew(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.retrieveMetadata(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.retrieveMetadata(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.saveMetadata(e,i)))}addTargetData(e,t){return this.saveTargetData(e,t).next(()=>this.retrieveMetadata(e).next(r=>(r.targetCount+=1,this.updateMetadataFromTargetData(t,r),this.saveMetadata(e,r))))}updateTargetData(e,t){return this.saveTargetData(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>l8(e).delete(t.targetId)).next(()=>this.retrieveMetadata(e)).next(t=>(P(t.targetCount>0,8065),t.targetCount-=1,this.saveMetadata(e,t)))}removeTargets(e,t,r){let i=0,n=[];return l8(e).iterate((s,a)=>{let o=oI(a);o.sequenceNumber<=t&&null===r.get(o.targetId)&&(i++,n.push(this.removeTargetData(e,o)))}).next(()=>ez.waitFor(n)).next(()=>i)}forEachTarget(e,t){return l8(e).iterate((e,r)=>{t(oI(r))})}retrieveMetadata(e){return l7(e).get(tO).next(e=>(P(null!==e,2888),e))}saveMetadata(e,t){return l7(e).put(tO,t)}saveTargetData(e,t){return l8(e).put(oD(this.serializer,t))}updateMetadataFromTargetData(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.retrieveMetadata(e).next(e=>e.targetCount)}getTargetData(e,t){let r=nu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),n=null;return l8(e).iterate({range:i,index:tk},(e,r,i)=>{let s=oI(r);nd(t,s.target)&&(n=s,i.done())}).next(()=>n)}addMatchingKeys(e,t,r){let i=[],n=he(e);return t.forEach(t=>{let s=te(t.path);i.push(n.put({targetId:r,path:s})),i.push(this.referenceDelegate.addReference(e,r,t))}),ez.waitFor(i)}removeMatchingKeys(e,t,r){let i=he(e);return ez.forEach(t,t=>{let n=te(t.path);return ez.waitFor([i.delete([r,n]),this.referenceDelegate.removeReference(e,r,t)])})}removeMatchingKeysForTargetId(e,t){let r=he(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=he(e),n=se();return i.iterate({range:r,keysOnly:!0},(e,t,r)=>{let i=new ea(ti(e[1]));n=n.add(i)}).next(()=>n)}containsKey(e,t){let r=te(t.path),i=IDBKeyRange.bound([r],[ee(r)],!1,!0),n=0;return he(e).iterate({index:tR,keysOnly:!0,range:i},([e,t],r,i)=>{0!==e&&(n++,i.done())}).next(()=>n>0)}getTargetDataForTarget(e,t){return l8(e).get(t).next(e=>e?oI(e):null)}}function l8(e){return ru(e,t_)}function l7(e){return ru(e,tM)}function he(e){return ru(e,tD)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ht={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},hr=-1,hi=41943040;class hn{static withCacheSize(e){return new hn(e,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}hn.DEFAULT_COLLECTION_PERCENTILE=10,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,hn.DEFAULT=new hn(hi,hn.DEFAULT_COLLECTION_PERCENTILE,hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),hn.DISABLED=new hn(hr,0,0);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hs="LruGarbageCollector",ha=1048576,ho=6e4,hl=3e5;function hh([e,t],[r,i]){let n=$(e,r);return 0===n?$(t,i):n}class hu{constructor(e){this.maxElements=e,this.buffer=new rv(hh),this.previousIndex=0}nextIndex(){return++this.previousIndex}addElement(e){let t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();0>hh(t,e)&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class hc{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.gcTask=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==hr&&this.scheduleGC(ho)}stop(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)}get started(){return null!==this.gcTask}scheduleGC(e){A(hs,`Garbage collection scheduled in ${e}ms`),this.gcTask=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.gcTask=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){eQ(e)?A(hs,"Ignoring IndexedDB error during garbage collection: ",e):await eU(e)}await this.scheduleGC(hl)})}}class hd{constructor(e,t){this.delegate=e,this.params=t}calculateTargetCount(e,t){return this.delegate.getSequenceNumberCount(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return ez.resolve(e6.INVALID);let r=new hu(t);return this.delegate.forEachTarget(e,e=>r.addElement(e.sequenceNumber)).next(()=>this.delegate.forEachOrphanedDocumentSequenceNumber(e,e=>r.addElement(e))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.delegate.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.delegate.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===hr?(A("LruGarbageCollector","Garbage collection skipped; disabled"),ez.resolve(ht)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(A("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ht):this.runGarbageCollection(e,t))}getCacheSize(e){return this.delegate.getCacheSize(e)}runGarbageCollection(e,t){let r,i,n,s,a,o,l;let u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(A("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),i=this.params.maximumSequenceNumbersToCollect):i=t,s=Date.now(),this.nthSequenceNumber(e,i))).next(i=>(r=i,a=Date.now(),this.removeTargets(e,r,t))).next(t=>(n=t,o=Date.now(),this.removeOrphanedDocuments(e,r))).next(e=>(l=Date.now(),C()<=h.in.DEBUG&&A("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-u}ms
	Determined least recently used ${i} in ${a-s}ms
	Removed ${n} targets in ${o-a}ms
	Removed ${e} documents in ${l-o}ms
Total Duration: ${l-u}ms`),ez.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:n,documentsRemoved:e})))}}function hp(e,t){return new hd(e,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t){this.db=e,this.garbageCollector=hp(this,t)}getSequenceNumberCount(e){let t=this.orphanedDocumentCount(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}orphanedDocumentCount(e){let t=0;return this.forEachOrphanedDocumentSequenceNumber(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}forEachOrphanedDocumentSequenceNumber(e,t){return this.forEachOrphanedDocument(e,(e,r)=>t(r))}addReference(e,t,r){return hy(e,r)}removeReference(e,t,r){return hy(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return hy(e,t)}isPinned(e,t){return l1(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],n=0;return this.forEachOrphanedDocument(e,(s,a)=>{if(a<=t){let t=this.isPinned(e,s).next(t=>{if(!t)return n++,r.getEntry(e,s).next(()=>(r.removeEntry(s,eE.min()),he(e).delete(hm(s))))});i.push(t)}}).next(()=>ez.waitFor(i)).next(()=>r.apply(e)).next(()=>n)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return hy(e,t)}forEachOrphanedDocument(e,t){let r;let i=he(e),n=e6.INVALID;return i.iterate({index:tR},([e,i],{path:s,sequenceNumber:a})=>{0===e?(n!==e6.INVALID&&t(new ea(ti(r)),n),n=a,r=s):n=e6.INVALID}).next(()=>{n!==e6.INVALID&&t(new ea(ti(r)),n)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function hm(e){return[0,te(e.path)]}function hg(e,t){return{targetId:0,path:te(e.path),sequenceNumber:t}}function hy(e,t){return he(e).put(hg(t,e.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(){this.changes=new nY(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,iB.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return void 0!==r?ez.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return hT(e).put(r)}removeEntry(e,t,r){return hT(e).delete(hA(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.setMetadata(e,r)))}getEntry(e,t){let r=iB.newInvalidDocument(t);return hT(e).iterate({index:tw,range:IDBKeyRange.only(hC(t))},(e,i)=>{r=this.maybeDecodeDocument(t,i)}).next(()=>r)}getSizedEntry(e,t){let r={size:0,document:iB.newInvalidDocument(t)};return hT(e).iterate({index:tw,range:IDBKeyRange.only(hC(t))},(e,i)=>{r={document:this.maybeDecodeDocument(t,i),size:lX(i)}}).next(()=>r)}getEntries(e,t){let r=nZ();return this.forEachDbEntry(e,t,(e,t)=>{let i=this.maybeDecodeDocument(e,t);r=r.insert(e,i)}).next(()=>r)}getSizedEntries(e,t){let r=nZ(),i=new rf(ea.comparator);return this.forEachDbEntry(e,t,(e,t)=>{let n=this.maybeDecodeDocument(e,t);r=r.insert(e,n),i=i.insert(e,lX(t))}).next(()=>({documents:r,sizeMap:i}))}forEachDbEntry(e,t,r){if(t.isEmpty())return ez.resolve();let i=new rv(hx);t.forEach(e=>i=i.add(e));let n=IDBKeyRange.bound(hC(i.first()),hC(i.last())),s=i.getIterator(),a=s.getNext();return hT(e).iterate({index:tw,range:n},(e,t,i)=>{let n=ea.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&0>hx(a,n);)r(a,null),a=s.getNext();a&&a.isEqual(n)&&(r(a,t),a=s.hasNext()?s.getNext():null),a?i.skip(hC(a)):i.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,n){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),oT(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],o=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return hT(e).loadAll(IDBKeyRange.bound(a,o,!0)).next(e=>{null==n||n.incrementDocumentReadCount(e.length);let r=nZ();for(let n of e){let e=this.maybeDecodeDocument(ea.fromSegments(n.prefixPath.concat(n.collectionGroup,n.documentId)),n);e.isFoundDocument()&&(nG(t,e)||i.has(e.key))&&(r=r.insert(e.key,e))}return r})}getAllFromCollectionGroup(e,t,r,i){let n=nZ(),s=h_(t,r),a=h_(t,eM.max());return hT(e).iterate({index:tS,range:IDBKeyRange.bound(s,a,!0)},(e,t,r)=>{let s=this.maybeDecodeDocument(ea.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(n=n.insert(s.key,s)).size===i&&r.done()}).next(()=>n)}newChangeBuffer(e){return new hE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return hS(e).get(tA).next(e=>(P(!!e,20021),e))}setMetadata(e,t){return hS(e).put(tA,t)}maybeDecodeDocument(e,t){if(t){let e=oE(this.serializer,t);if(!(e.isNoDocument()&&e.version.isEqual(eE.min())))return e}return iB.newInvalidDocument(e)}}function hw(e){return new hb(e)}class hE extends hv{constructor(e,t){super(),this.documentCache=e,this.trackRemovals=t,this.documentStates=new nY(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){let t=[],r=0,i=new rv((e,t)=>$(e.canonicalString(),t.canonicalString()));return this.changes.forEach((n,s)=>{let a=this.documentStates.get(n);if(t.push(this.documentCache.removeEntry(e,n,a.readTime)),s.isValidDocument()){let o=oS(this.documentCache.serializer,s);i=i.add(n.path.popLast());let l=lX(o);r+=l-a.size,t.push(this.documentCache.addEntry(e,n,o))}else if(r-=a.size,this.trackRemovals){let r=oS(this.documentCache.serializer,s.convertToNoDocument(eE.min()));t.push(this.documentCache.addEntry(e,n,r))}}),i.forEach(r=>{t.push(this.documentCache.indexManager.addToCollectionParentIndex(e,r))}),t.push(this.documentCache.updateMetadata(e,r)),ez.waitFor(t)}getFromCache(e,t){return this.documentCache.getSizedEntry(e,t).next(e=>(this.documentStates.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.documentCache.getSizedEntries(e,t).next(({documents:e,sizeMap:t})=>(t.forEach((t,r)=>{this.documentStates.set(t,{size:r,readTime:e.get(t).readTime})}),e))}}function hS(e){return ru(e,tC)}function hT(e){return ru(e,tv)}function hC(e){let t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function hA(e,t){let r=e.path.toArray();return[r.slice(0,r.length-2),r[r.length-2],oT(t),r[r.length-1]]}function h_(e,t){let r=t.documentKey.path.toArray();return[e,oT(t.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function hx(e,t){let r=e.path.toArray(),i=t.path.toArray(),n=0;for(let e=0;e<r.length-2&&e<i.length-2;++e)if(n=$(r[e],i[e]))return n;return(n=$(r.length,i.length))||(n=$(r[r.length-2],i[i.length-2]))?n:$(r[r.length-1],i[i.length-1])}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hk=18;/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==r&&sI(r.mutation,e,rS.empty(),ew.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,se()).next(()=>t))}getLocalViewOfDocuments(e,t,r=se()){let i=n4();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(e=>{let t=n1();return e.forEach((e,r)=>{t=t.insert(e,r.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){let r=n4();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,se()))}populateOverlays(e,t,r){let i=[];return r.forEach(e=>{t.has(e)||i.push(e)}),this.documentOverlayCache.getOverlays(e,i).next(e=>{e.forEach((e,r)=>{t.set(e,r)})})}computeViews(e,t,r,i){let n=nZ(),s=n5(),a=n2();return t.forEach((e,t)=>{let a=r.get(t.key);i.has(t.key)&&(void 0===a||a.mutation instanceof sM)?n=n.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),sI(a.mutation,t,a.mutation.getFieldMask(),ew.now())):s.set(t.key,rS.empty())}),this.recalculateAndSaveOverlays(e,n).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var r;return a.set(e,new hI(t,null!==(r=s.get(e))&&void 0!==r?r:null))}),a))}recalculateAndSaveOverlays(e,t){let r=n5(),i=new rf((e,t)=>e-t),n=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(let n of e)n.keys().forEach(e=>{let s=t.get(e);if(null===s)return;let a=r.get(e)||rS.empty();a=n.applyToLocalView(s,a),r.set(e,a);let o=(i.get(n.batchId)||se()).add(e);i=i.insert(n.batchId,o)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let i=a.getNext(),o=i.key,l=i.value,h=n6();l.forEach(e=>{if(!n.has(e)){let i=sx(t.get(e),r.get(e));null!==i&&h.set(e,i),n=n.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,h))}return ez.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,r,i){return nI(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):nD(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(n=>{let s=i-n.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-n.size):ez.resolve(n4()),a=eS,o=n;return s.next(t=>ez.forEach(t,(t,r)=>(a<r.largestBatchId&&(a=r.largestBatchId),n.get(t))?ez.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)})).next(()=>this.populateOverlays(e,t,n)).next(()=>this.computeViews(e,o,t,se())).next(e=>({batchId:a,changes:n3(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ea(t)).next(e=>{let t=n1();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let n=t.collectionGroup,s=n1();return this.indexManager.getCollectionParents(e,n).next(a=>ez.forEach(a,a=>{let o=n_(t,a.child(n));return this.getDocumentsMatchingCollectionQuery(e,o,r,i).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let n;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(n=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,n,i))).next(e=>{n.forEach((t,r)=>{let i=r.getKey();null===e.get(i)&&(e=e.insert(i,iB.newInvalidDocument(i)))});let r=n1();return e.forEach((e,i)=>{let s=n.get(e);void 0!==s&&sI(s.mutation,i,rS.empty(),ew.now()),nG(t,i)&&(r=r.insert(e,i))}),r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e){this.serializer=e,this.bundles=new Map,this.namedQueries=new Map}getBundleMetadata(e,t){return ez.resolve(this.bundles.get(t))}saveBundleMetadata(e,t){return this.bundles.set(t.id,oB(t)),ez.resolve()}getNamedQuery(e,t){return ez.resolve(this.namedQueries.get(t))}saveNamedQuery(e,t){return this.namedQueries.set(t.name,oF(t)),ez.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(){this.overlays=new rf(ea.comparator),this.overlayByBatchId=new Map}getOverlay(e,t){return ez.resolve(this.overlays.get(t))}getOverlays(e,t){let r=n4();return ez.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((r,i)=>{this.saveOverlay(e,t,i)}),ez.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.overlayByBatchId.get(r);return void 0!==i&&(i.forEach(e=>this.overlays=this.overlays.remove(e)),this.overlayByBatchId.delete(r)),ez.resolve()}getOverlaysForCollection(e,t,r){let i=n4(),n=t.length+1,s=new ea(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===n&&e.largestBatchId>r&&i.set(e.getKey(),e)}return ez.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let n=new rf((e,t)=>e-t),s=this.overlays.getIterator();for(;s.hasNext();){let e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>r){let t=n.get(e.largestBatchId);null===t&&(t=n4(),n=n.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let a=n4(),o=n.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=i)););return ez.resolve(a)}saveOverlay(e,t,r){let i=this.overlays.get(r.key);if(null!==i){let e=this.overlayByBatchId.get(i.largestBatchId).delete(r.key);this.overlayByBatchId.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(r.key,new sK(t,r));let n=this.overlayByBatchId.get(t);void 0===n&&(n=se(),this.overlayByBatchId.set(t,n)),this.overlayByBatchId.set(t,n.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hN{constructor(){this.sessionToken=rA.EMPTY_BYTE_STRING}getSessionToken(e){return ez.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ez.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(){this.refsByKey=new rv(hM.compareByKey),this.refsByTarget=new rv(hM.compareByTargetId)}isEmpty(){return this.refsByKey.isEmpty()}addReference(e,t){let r=new hM(e,t);this.refsByKey=this.refsByKey.add(r),this.refsByTarget=this.refsByTarget.add(r)}addReferences(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.removeRef(new hM(e,t))}removeReferences(e,t){e.forEach(e=>this.removeReference(e,t))}removeReferencesForId(e){let t=new ea(new ei([])),r=new hM(t,e),i=new hM(t,e+1),n=[];return this.refsByTarget.forEachInRange([r,i],e=>{this.removeRef(e),n.push(e.key)}),n}removeAllReferences(){this.refsByKey.forEach(e=>this.removeRef(e))}removeRef(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)}referencesForId(e){let t=new ea(new ei([])),r=new hM(t,e),i=new hM(t,e+1),n=se();return this.refsByTarget.forEachInRange([r,i],e=>{n=n.add(e.key)}),n}containsKey(e){let t=new hM(e,0),r=this.refsByKey.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class hM{constructor(e,t){this.key=e,this.targetOrBatchId=t}static compareByKey(e,t){return ea.comparator(e.key,t.key)||$(e.targetOrBatchId,t.targetOrBatchId)}static compareByTargetId(e,t){return $(e.targetOrBatchId,t.targetOrBatchId)||ea.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.batchesByDocumentKey=new rv(hM.compareByKey)}checkEmpty(e){return ez.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){let n=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new sH(n,t,r,i);for(let t of(this.mutationQueue.push(s),i))this.batchesByDocumentKey=this.batchesByDocumentKey.add(new hM(t.key,n)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return ez.resolve(s)}lookupMutationBatch(e,t){return ez.resolve(this.findMutationBatch(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.indexOfBatchId(r),n=i<0?0:i;return ez.resolve(this.mutationQueue.length>n?this.mutationQueue[n]:null)}getHighestUnacknowledgedBatchId(){return ez.resolve(0===this.mutationQueue.length?rq:this.nextBatchId-1)}getAllMutationBatches(e){return ez.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new hM(t,0),i=new hM(t,Number.POSITIVE_INFINITY),n=[];return this.batchesByDocumentKey.forEachInRange([r,i],e=>{let t=this.findMutationBatch(e.targetOrBatchId);n.push(t)}),ez.resolve(n)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rv($);return t.forEach(e=>{let t=new hM(e,0),i=new hM(e,Number.POSITIVE_INFINITY);this.batchesByDocumentKey.forEachInRange([t,i],e=>{r=r.add(e.targetOrBatchId)})}),ez.resolve(this.findMutationBatches(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,n=r;ea.isDocumentKey(n)||(n=n.child(""));let s=new hM(new ea(n),0),a=new rv($);return this.batchesByDocumentKey.forEachWhile(e=>{let t=e.key.path;return!!r.isPrefixOf(t)&&(t.length===i&&(a=a.add(e.targetOrBatchId)),!0)},s),ez.resolve(this.findMutationBatches(a))}findMutationBatches(e){let t=[];return e.forEach(e=>{let r=this.findMutationBatch(e);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){P(0===this.indexOfExistingBatchId(t.batchId,"removed"),55003),this.mutationQueue.shift();let r=this.batchesByDocumentKey;return ez.forEach(t.mutations,i=>{let n=new hM(i.key,t.batchId);return r=r.delete(n),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.batchesByDocumentKey=r})}removeCachedMutationKeys(e){}containsKey(e,t){let r=new hM(t,0),i=this.batchesByDocumentKey.firstAfterOrEqual(r);return ez.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ez.resolve()}indexOfExistingBatchId(e,t){return this.indexOfBatchId(e)}indexOfBatchId(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}findMutationBatch(e){let t=this.indexOfBatchId(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hF="-9223372036854775808";function hB(){return new rf(ea.comparator)}class hU{constructor(e){this.sizer=e,this.docs=hB(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),n=i?i.size:0,s=this.sizer(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-n,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return ez.resolve(r?r.document.mutableCopy():iB.newInvalidDocument(t))}getEntries(e,t){let r=nZ();return t.forEach(e=>{let t=this.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():iB.newInvalidDocument(e))}),ez.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let n=nZ(),s=t.path,a=new ea(s.child("__id"+hF+"__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){let{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;!(e.path.length>s.length+1||0>=eL(eO(a),r))&&(i.has(a.key)||nG(t,a))&&(n=n.insert(a.key,a.mutableCopy()))}return ez.resolve(n)}getAllFromCollectionGroup(e,t,r,i){I(9500)}forEachDocumentKey(e,t){return ez.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new hV(this)}getSize(e){return ez.resolve(this.size)}}function hz(e){return new hU(e)}class hV extends hv{constructor(e){super(),this.documentCache=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.documentCache.addEntry(e,i)):this.documentCache.removeEntry(r)}),ez.waitFor(t)}getFromCache(e,t){return this.documentCache.getEntry(e,t)}getAllFromCache(e,t){return this.documentCache.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e){this.persistence=e,this.targets=new nY(e=>nu(e),nd),this.lastRemoteSnapshotVersion=eE.min(),this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new hO,this.targetCount=0,this.targetIdGenerator=l5.forTargetCache()}forEachTarget(e,t){return this.targets.forEach((e,r)=>t(r)),ez.resolve()}getLastRemoteSnapshotVersion(e){return ez.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ez.resolve(this.highestSequenceNumber)}allocateTargetId(e){return this.highestTargetId=this.targetIdGenerator.next(),ez.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),ez.resolve()}saveTargetData(e){this.targets.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.targetIdGenerator=new l5(t),this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)}addTargetData(e,t){return this.saveTargetData(t),this.targetCount+=1,ez.resolve()}updateTargetData(e,t){return this.saveTargetData(t),ez.resolve()}removeTargetData(e,t){return this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,ez.resolve()}removeTargets(e,t,r){let i=0,n=[];return this.targets.forEach((s,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.targets.delete(s),n.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),ez.waitFor(n).next(()=>i)}getTargetCount(e){return ez.resolve(this.targetCount)}getTargetData(e,t){let r=this.targets.get(t)||null;return ez.resolve(r)}addMatchingKeys(e,t,r){return this.references.addReferences(t,r),ez.resolve()}removeMatchingKeys(e,t,r){this.references.removeReferences(t,r);let i=this.persistence.referenceDelegate,n=[];return i&&t.forEach(t=>{n.push(i.markPotentiallyOrphaned(e,t))}),ez.waitFor(n)}removeMatchingKeysForTargetId(e,t){return this.references.removeReferencesForId(t),ez.resolve()}getMatchingKeysForTargetId(e,t){let r=this.references.referencesForId(t);return ez.resolve(r)}containsKey(e,t){return ez.resolve(this.references.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hG="MemoryPersistence";class hq{constructor(e,t){this.mutationQueues={},this.overlays={},this.listenSequence=new e6(0),this._started=!1,this._started=!0,this.globalsCache=new hN,this.referenceDelegate=e(this),this.targetCache=new hj(this);let r=e=>this.referenceDelegate.documentSize(e);this.indexManager=new lV,this.remoteDocumentCache=hz(r),this.serializer=new ow(t),this.bundleCache=new hP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this._started=!1,Promise.resolve()}get started(){return this._started}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new hR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.mutationQueues[e.toKey()];return r||(r=new hL(t,this.referenceDelegate),this.mutationQueues[e.toKey()]=r),r}getGlobalsCache(){return this.globalsCache}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.bundleCache}runTransaction(e,t,r){A(hG,"Starting transaction:",e);let i=new hH(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),r(i).next(e=>this.referenceDelegate.onTransactionCommitted(i).next(()=>e)).toPromise().then(e=>(i.raiseOnCommittedEvent(),e))}mutationQueuesContainKey(e,t){return ez.or(Object.values(this.mutationQueues).map(r=>()=>r.containsKey(e,t)))}}class hH extends eB{constructor(e){super(),this.currentSequenceNumber=e}}class hW{constructor(e){this.persistence=e,this.localViewReferences=new hO,this._orphanedDocuments=null}static factory(e){return new hW(e)}get orphanedDocuments(){if(this._orphanedDocuments)return this._orphanedDocuments;throw I(60996)}addReference(e,t,r){return this.localViewReferences.addReference(r,t),this.orphanedDocuments.delete(r.toString()),ez.resolve()}removeReference(e,t,r){return this.localViewReferences.removeReference(r,t),this.orphanedDocuments.add(r.toString()),ez.resolve()}markPotentiallyOrphaned(e,t){return this.orphanedDocuments.add(t.toString()),ez.resolve()}removeTarget(e,t){this.localViewReferences.removeReferencesForId(t.targetId).forEach(e=>this.orphanedDocuments.add(e.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.orphanedDocuments.add(e.toString()))}).next(()=>r.removeTargetData(e,t))}onTransactionStarted(){this._orphanedDocuments=new Set}onTransactionCommitted(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ez.forEach(this.orphanedDocuments,r=>{let i=ea.fromPath(r);return this.isReferenced(e,i).next(e=>{e||t.removeEntry(i,eE.min())})}).next(()=>(this._orphanedDocuments=null,t.apply(e)))}updateLimboDocument(e,t){return this.isReferenced(e,t).next(e=>{e?this.orphanedDocuments.delete(t.toString()):this.orphanedDocuments.add(t.toString())})}documentSize(e){return 0}isReferenced(e,t){return ez.or([()=>ez.resolve(this.localViewReferences.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.mutationQueuesContainKey(e,t)])}}class hK{constructor(e,t){this.persistence=e,this.orphanedSequenceNumbers=new nY(e=>te(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=hp(this,t)}static factory(e,t){return new hK(e,t)}onTransactionStarted(){}onTransactionCommitted(e){return ez.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}getSequenceNumberCount(e){let t=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}orphanedDocumentCount(e){let t=0;return this.forEachOrphanedDocumentSequenceNumber(e,e=>{t++}).next(()=>t)}forEachOrphanedDocumentSequenceNumber(e,t){return ez.forEach(this.orphanedSequenceNumbers,(r,i)=>this.isPinned(e,r,i).next(e=>e?ez.resolve():t(i)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,i=this.persistence.getRemoteDocumentCache(),n=i.newChangeBuffer();return i.forEachDocumentKey(e,i=>this.isPinned(e,i,t).next(e=>{e||(r++,n.removeEntry(i,eE.min()))})).next(()=>n.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),ez.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.orphanedSequenceNumbers.set(r,e.currentSequenceNumber),ez.resolve()}removeReference(e,t,r){return this.orphanedSequenceNumbers.set(r,e.currentSequenceNumber),ez.resolve()}updateLimboDocument(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),ez.resolve()}documentSize(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=iy(e.data.value)),t}isPinned(e,t,r){return ez.or([()=>this.persistence.mutationQueuesContainKey(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.orphanedSequenceNumbers.get(t);return ez.resolve(void 0!==e&&e>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hQ{constructor(e){this.serializer=e}createOrUpgrade(e,t,r,i){let n=new eG("createOrUpgrade",t);r<1&&i>=1&&(hJ(e),hY(e),h2(e),hZ(e));let s=ez.resolve();return r<3&&i>=3&&(0!==r&&(h3(e),h2(e)),s=s.next(()=>h6(n))),r<4&&i>=4&&(0!==r&&(s=s.next(()=>hX(e,n))),s=s.next(()=>{h5(e)})),r<5&&i>=5&&(s=s.next(()=>this.removeAcknowledgedMutations(n))),r<6&&i>=6&&(s=s.next(()=>(h1(e),this.addDocumentGlobal(n)))),r<7&&i>=7&&(s=s.next(()=>this.ensureSequenceNumbers(n))),r<8&&i>=8&&(s=s.next(()=>this.createCollectionParentIndex(e,n))),r<9&&i>=9&&(s=s.next(()=>{h4(e)})),r<10&&i>=10&&(s=s.next(()=>this.rewriteCanonicalIds(n))),r<11&&i>=11&&(s=s.next(()=>{h9(e),h8(e)})),r<12&&i>=12&&(s=s.next(()=>{ue(e)})),r<13&&i>=13&&(s=s.next(()=>h0(e)).next(()=>this.rewriteRemoteDocumentCache(e,n)).next(()=>e.deleteObjectStore(tn))),r<14&&i>=14&&(s=s.next(()=>this.runOverlayMigration(e,n))),r<15&&i>=15&&(s=s.next(()=>h7(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore(tQ).clear()}).next(()=>{t.objectStore(tX).clear()})),r<17&&i>=17&&(s=s.next(()=>{ut(e)})),r<18&&i>=18&&(0,c.WO)()&&(s=s.next(()=>{t.objectStore(tQ).clear()}).next(()=>{t.objectStore(tX).clear()})),s}addDocumentGlobal(e){let t=0;return e.store(tn).iterate((e,r)=>{t+=lX(r)}).next(()=>{let r={byteSize:t};return e.store(tC).put(tA,r)})}removeAcknowledgedMutations(e){let t=e.store(to),r=e.store(th);return t.loadAll().next(t=>ez.forEach(t,t=>{let i=IDBKeyRange.bound([t.userId,rq],[t.userId,t.lastAcknowledgedBatchId]);return r.loadAll(tc,i).next(r=>ez.forEach(r,r=>{P(r.userId===t.userId,18650,"Cannot process batch from unexpected user",{batchId:r.batchId});let i=ok(this.serializer,r);return lY(e,t.userId,i).next(()=>{})}))}))}ensureSequenceNumbers(e){let t=e.store(tD),r=e.store(tn);return e.store(tM).get(tO).next(e=>{let i=r=>t.put({targetId:0,path:te(r),sequenceNumber:e.highestListenSequenceNumber}),n=[];return r.iterate((e,r)=>{let s=new ei(e),a=h$(s);n.push(t.get(a).next(e=>e?ez.resolve():i(s)))}).next(()=>ez.waitFor(n))})}createCollectionParentIndex(e,t){e.createObjectStore(tL,{keyPath:tF});let r=t.store(tL),i=new lj,n=e=>{if(i.add(e)){let t=e.lastSegment(),i=e.popLast();return r.put({collectionId:t,parent:te(i)})}};return t.store(tn).iterate({keysOnly:!0},(e,t)=>n(new ei(e).popLast())).next(()=>t.store(ty).iterate({keysOnly:!0},([e,t,r],i)=>n(ti(t).popLast())))}rewriteCanonicalIds(e){let t=e.store(t_);return t.iterate((e,r)=>{let i=oI(r),n=oD(this.serializer,i);return t.put(n)})}rewriteRemoteDocumentCache(e,t){let r=t.store(tn),i=[];return r.iterate((e,r)=>{let n=t.store(tv),s=ur(r).path.toArray(),a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:r.readTime||[0,0],unknownDocument:r.unknownDocument,noDocument:r.noDocument,document:r.document,hasCommittedMutations:!!r.hasCommittedMutations};i.push(n.put(a))}).next(()=>ez.waitFor(i))}runOverlayMigration(e,t){let r=t.store(th),i=hw(this.serializer),n=new hq(hW.factory,this.serializer.remoteSerializer);return r.loadAll().next(e=>{let r=new Map;return e.forEach(e=>{var t;let i=null!==(t=r.get(e.userId))&&void 0!==t?t:se();ok(this.serializer,e).keys().forEach(e=>i=i.add(e)),r.set(e.userId,i)}),ez.forEach(r,(e,r)=>{let s=new b(r),a=oQ.forUser(this.serializer,s),o=n.getIndexManager(s);return new hD(i,lZ.forUser(s,this.serializer,o,n.referenceDelegate),a,o).recalculateAndSaveOverlaysForDocumentKeys(new rh(t,e6.INVALID),e).next()})})}}function h$(e){return[0,te(e)]}function hJ(e){e.createObjectStore(ts)}function hY(e){e.createObjectStore(to,{keyPath:tl}),e.createObjectStore(th,{keyPath:tu,autoIncrement:!0}).createIndex(tc,td,{unique:!0}),e.createObjectStore(ty)}function hX(e,t){return t.store(th).loadAll().next(r=>{e.deleteObjectStore(th),e.createObjectStore(th,{keyPath:tu,autoIncrement:!0}).createIndex(tc,td,{unique:!0});let i=t.store(th),n=r.map(e=>i.put(e));return ez.waitFor(n)})}function hZ(e){e.createObjectStore(tn)}function h0(e){let t=e.createObjectStore(tv,{keyPath:tb});t.createIndex(tw,tE),t.createIndex(tS,tT)}function h1(e){e.createObjectStore(tC)}function h2(e){e.createObjectStore(tD,{keyPath:tP}).createIndex(tR,tN,{unique:!0}),e.createObjectStore(t_,{keyPath:tx}).createIndex(tk,tI,{unique:!0}),e.createObjectStore(tM)}function h3(e){e.deleteObjectStore(tD),e.deleteObjectStore(t_),e.deleteObjectStore(tM)}function h4(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}function h6(e){let t=e.store(tM),r={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:eE.min().toTimestamp(),targetCount:0};return t.put(tO,r)}function h5(e){e.createObjectStore(tB,{keyPath:tU})}function h9(e){e.createObjectStore(tz,{keyPath:tV})}function h8(e){e.createObjectStore(tj,{keyPath:tG})}function h7(e){e.createObjectStore(tq,{keyPath:tH,autoIncrement:!0}).createIndex(tW,tK,{unique:!1}),e.createObjectStore(tQ,{keyPath:t$}).createIndex(tJ,tY,{unique:!1}),e.createObjectStore(tX,{keyPath:tZ}).createIndex(t0,t1,{unique:!1})}function ue(e){let t=e.createObjectStore(t2,{keyPath:t3});t.createIndex(t4,t6,{unique:!1}),t.createIndex(t5,t9,{unique:!1})}function ut(e){e.createObjectStore(t8,{keyPath:t7})}function ur(e){return e.document?new ea(ei.fromString(e.document.name).popFirst(5)):e.noDocument?ea.fromSegments(e.noDocument.path):e.unknownDocument?ea.fromSegments(e.unknownDocument.path):I(36783)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ui="IndexedDbPersistence",un=18e5,us=5e3,ua=4e3,uo="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ul="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",uh="firestore_zombie",uu="main";class uc{constructor(e,t,r,i,n,s,a,o,l,h,u=hk){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.queue=n,this.window=s,this.document=a,this.sequenceNumberSyncer=l,this.forceOwningTab=h,this.schemaVersion=u,this.listenSequence=null,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=e=>Promise.resolve(),!uc.isAvailable())throw new O(N.UNIMPLEMENTED,ul);this.referenceDelegate=new hf(this,i),this.dbName=t+uu,this.serializer=new ow(o),this.simpleDb=new eq(this.dbName,this.schemaVersion,new hQ(this.serializer)),this.globalsCache=new oJ,this.targetCache=new l9(this.referenceDelegate,this.serializer),this.remoteDocumentCache=hw(this.serializer),this.bundleCache=new oH,this.window&&this.window.localStorage?this.webStorage=this.window.localStorage:(this.webStorage=null,!1===h&&_(ui,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.updateClientMetadataAndTryBecomePrimary().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new O(N.FAILED_PRECONDITION,uo);return this.attachVisibilityHandler(),this.attachWindowUnloadHook(),this.scheduleClientMetadataAndPrimaryLeaseRefreshes(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.targetCache.getHighestSequenceNumber(e))}).then(e=>{this.listenSequence=new e6(e,this.sequenceNumberSyncer)}).then(()=>{this._started=!0}).catch(e=>(this.simpleDb&&this.simpleDb.close(),Promise.reject(e)))}setPrimaryStateListener(e){return this.primaryStateListener=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.simpleDb.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(async()=>{this.started&&await this.updateClientMetadataAndTryBecomePrimary()}))}updateClientMetadataAndTryBecomePrimary(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>up(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.verifyPrimaryLease(e).next(e=>{e||(this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)))})}).next(()=>this.canActAsPrimary(e)).next(t=>this.isPrimary&&!t?this.releasePrimaryLeaseIfHeld(e).next(()=>!1):!!t&&this.acquireOrExtendPrimaryLease(e).next(()=>!0))).catch(e=>{if(eQ(e))return A(ui,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return A(ui,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.queue.enqueueRetryable(()=>this.primaryStateListener(e)),this.isPrimary=e})}verifyPrimaryLease(e){return ud(e).get(ta).next(e=>ez.resolve(this.isLocalClient(e)))}removeClientMetadata(e){return up(e).delete(this.clientId)}async maybeGarbageCollectMultiClientState(){if(this.isPrimary&&!this.isWithinAge(this.lastGarbageCollectionTime,un)){this.lastGarbageCollectionTime=Date.now();let e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{let t=ru(e,tB);return t.loadAll().next(e=>{let r=this.filterActiveClients(e,un),i=e.filter(e=>-1===r.indexOf(e));return ez.forEach(i,e=>t.delete(e.clientId)).next(()=>i)})}).catch(()=>[]);if(this.webStorage)for(let t of e)this.webStorage.removeItem(this.zombiedClientLocalStorageKey(t.clientId))}}scheduleClientMetadataAndPrimaryLeaseRefreshes(){this.clientMetadataRefresher=this.queue.enqueueAfterDelay("client_metadata_refresh",ua,()=>this.updateClientMetadataAndTryBecomePrimary().then(()=>this.maybeGarbageCollectMultiClientState()).then(()=>this.scheduleClientMetadataAndPrimaryLeaseRefreshes()))}isLocalClient(e){return!!e&&e.ownerId===this.clientId}canActAsPrimary(e){return this.forceOwningTab?ez.resolve(!0):ud(e).get(ta).next(t=>{if(null!==t&&this.isWithinAge(t.leaseTimestampMs,us)&&!this.isClientZombied(t.ownerId)){if(this.isLocalClient(t)&&this.networkEnabled)return!0;if(!this.isLocalClient(t)){if(!t.allowTabSynchronization)throw new O(N.FAILED_PRECONDITION,uo);return!1}}return!!this.networkEnabled&&!!this.inForeground||up(e).loadAll().next(e=>void 0===this.filterActiveClients(e,us).find(e=>{if(this.clientId!==e.clientId){let t=!this.networkEnabled&&e.networkEnabled,r=!this.inForeground&&e.inForeground,i=this.networkEnabled===e.networkEnabled;if(t||r&&i)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&A(ui,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),await this.simpleDb.runTransaction("shutdown","readwrite",[ts,tB],e=>{let t=new rh(e,e6.INVALID);return this.releasePrimaryLeaseIfHeld(t).next(()=>this.removeClientMetadata(t))}),this.simpleDb.close(),this.removeClientZombiedEntry()}filterActiveClients(e,t){return e.filter(e=>this.isWithinAge(e.updateTimeMs,t)&&!this.isClientZombied(e.clientId))}getActiveClients(){return this.runTransaction("getActiveClients","readonly",e=>up(e).loadAll().next(e=>this.filterActiveClients(e,un).map(e=>e.clientId)))}get started(){return this._started}getGlobalsCache(){return this.globalsCache}getMutationQueue(e,t){return lZ.forUser(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new lH(e,this.serializer.remoteSerializer.databaseId)}getDocumentOverlayCache(e){return oQ.forUser(this.serializer,e)}getBundleCache(){return this.bundleCache}runTransaction(e,t,r){let i;A(ui,"Starting transaction:",e);let n="readonly"===t?"readonly":"readwrite",s=rl(this.schemaVersion);return this.simpleDb.runTransaction(e,n,s,n=>(i=new rh(n,this.listenSequence?this.listenSequence.next():e6.INVALID),"readwrite-primary"===t)?this.verifyPrimaryLease(i).next(e=>!!e||this.canActAsPrimary(i)).next(t=>{if(!t)throw _(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)),new O(N.FAILED_PRECONDITION,eF);return r(i)}).next(e=>this.acquireOrExtendPrimaryLease(i).next(()=>e)):this.verifyAllowTabSynchronization(i).next(()=>r(i))).then(e=>(i.raiseOnCommittedEvent(),e))}verifyAllowTabSynchronization(e){return ud(e).get(ta).next(e=>{if(null!==e&&this.isWithinAge(e.leaseTimestampMs,us)&&!this.isClientZombied(e.ownerId)&&!this.isLocalClient(e)&&!this.forceOwningTab&&(!this.allowTabSynchronization||!e.allowTabSynchronization))throw new O(N.FAILED_PRECONDITION,uo)})}acquireOrExtendPrimaryLease(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ud(e).put(ta,t)}static isAvailable(){return eq.isAvailable()}releasePrimaryLeaseIfHeld(e){let t=ud(e);return t.get(ta).next(e=>this.isLocalClient(e)?(A(ui,"Releasing primary lease."),t.delete(ta)):ez.resolve())}isWithinAge(e,t){let r=Date.now(),i=r-t,n=r;return!(e<i)&&(!(e>n)||(_(`Detected an update time that is in the future: ${e} > ${n}`),!1))}attachVisibilityHandler(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=()=>{this.queue.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.updateClientMetadataAndTryBecomePrimary()))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)}detachVisibilityHandler(){this.documentVisibilityHandler&&(this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)}attachWindowUnloadHook(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.windowUnloadHandler=()=>{this.markClientZombied();let e=/(?:Version|Mobile)\/1[456]/;(0,c.G6)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.queue.enterRestrictedMode(!0),this.queue.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.windowUnloadHandler))}detachWindowUnloadHook(){this.windowUnloadHandler&&(this.window.removeEventListener("pagehide",this.windowUnloadHandler),this.windowUnloadHandler=null)}isClientZombied(e){var t;try{let r=(null===(t=this.webStorage)||void 0===t?void 0:t.getItem(this.zombiedClientLocalStorageKey(e)))!==null;return A(ui,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(e){return _(ui,"Failed to get zombied client id.",e),!1}}markClientZombied(){if(this.webStorage)try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){_("Failed to set zombie client id.",e)}}removeClientZombiedEntry(){if(this.webStorage)try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}}zombiedClientLocalStorageKey(e){return`${uh}_${this.persistenceKey}_${e}`}}function ud(e){return ru(e,ts)}function up(e){return ru(e,tB)}function uf(e,t){let r=e.projectId;return e.isDefaultDatabase||(r+="."+e.database),"firestore/"+t+"/"+r+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function um(e,t,r,i,n){t=[...t],(e=[...e]).sort(r),t.sort(r);let s=e.length,a=t.length,o=0,l=0;for(;o<a&&l<s;){let s=r(e[l],t[o]);s<0?n(e[l++]):s>0?i(t[o++]):(o++,l++)}for(;o<a;)i(t[o++]);for(;l<s;)n(e[l++])}function ug(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uy="LocalStore",uv=3e8;class ub{constructor(e,t,r,i){this.persistence=e,this.queryEngine=t,this.serializer=i,this.targetDataByTarget=new rf($),this.targetIdByTarget=new nY(e=>nu(e),nd),this.collectionGroupReadTime=new Map,this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.bundleCache=e.getBundleCache(),this.initializeUserComponents(r)}initializeUserComponents(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hD(this.remoteDocuments,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.remoteDocuments.setIndexManager(this.indexManager),this.queryEngine.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.targetDataByTarget))}}function uw(e,t,r,i){return new ub(e,t,r,i)}async function uE(e,t){let r=R(e);return await r.persistence.runTransaction("Handle user change","readonly",e=>{let i;return r.mutationQueue.getAllMutationBatches(e).next(n=>(i=n,r.initializeUserComponents(t),r.mutationQueue.getAllMutationBatches(e))).next(t=>{let n=[],s=[],a=se();for(let e of i)for(let t of(n.push(e.batchId),e.mutations))a=a.add(t.key);for(let e of t)for(let t of(s.push(e.batchId),e.mutations))a=a.add(t.key);return r.localDocuments.getDocuments(e,a).next(e=>({affectedDocuments:e,removedBatchIds:n,addedBatchIds:s}))})})}function uS(e,t){let r,i;let n=R(e),s=ew.now(),a=t.reduce((e,t)=>e.add(t.key),se());return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=nZ(),l=se();return n.remoteDocuments.getEntries(e,a).next(e=>{(o=e).forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{r=i;let a=[];for(let e of t){let t=sD(e,r.get(e.key).overlayedDocument);null!=t&&a.push(new sM(e.key,t,iF(t.value.mapValue),sC.exists(!0)))}return n.mutationQueue.addMutationBatch(e,s,a,t)}).next(t=>{i=t;let s=t.applyToLocalDocumentSet(r,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,s)})}).then(()=>({batchId:i.batchId,changes:n3(r)}))}function uT(e,t){let r=R(e);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{let i=t.batch.keys(),n=r.remoteDocuments.newChangeBuffer({trackRemovals:!0});return uB(r,e,t,n).next(()=>n.apply(e)).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,i,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,uC(t))).next(()=>r.localDocuments.getDocuments(e,i))})}function uC(e){let t=se();for(let r=0;r<e.mutationResults.length;++r)e.mutationResults[r].transformResults.length>0&&(t=t.add(e.batch.mutations[r].key));return t}function uA(e,t){let r=R(e);return r.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let i;return r.mutationQueue.lookupMutationBatch(e,t).next(t=>(P(null!==t,37113),i=t.keys(),r.mutationQueue.removeMutationBatch(e,t))).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,i,t)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i)).next(()=>r.localDocuments.getDocuments(e,i))})}function u_(e){let t=R(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e))}function ux(e){let t=R(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.targetCache.getLastRemoteSnapshotVersion(e))}function uk(e,t){let r=R(e),i=t.snapshotVersion,n=r.targetDataByTarget;return r.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{let s=r.remoteDocuments.newChangeBuffer({trackRemovals:!0});n=r.targetDataByTarget;let a=[];t.targetChanges.forEach((s,o)=>{let l=n.get(o);if(!l)return;a.push(r.targetCache.removeMatchingKeys(e,s.removedDocuments,o).next(()=>r.targetCache.addMatchingKeys(e,s.addedDocuments,o)));let h=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?h=h.withResumeToken(rA.EMPTY_BYTE_STRING,eE.min()).withLastLimboFreeSnapshotVersion(eE.min()):s.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(s.resumeToken,i)),n=n.insert(o,h),uD(l,h,s)&&a.push(r.targetCache.updateTargetData(e,h))});let o=nZ(),l=se();if(t.documentUpdates.forEach(i=>{t.resolvedLimboDocuments.has(i)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(e,i))}),a.push(uI(e,s,t.documentUpdates).next(e=>{o=e.changedDocuments,l=e.existenceChangedKeys})),!i.isEqual(eE.min())){let t=r.targetCache.getLastRemoteSnapshotVersion(e).next(t=>r.targetCache.setTargetsMetadata(e,e.currentSequenceNumber,i));a.push(t)}return ez.waitFor(a).next(()=>s.apply(e)).next(()=>r.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(r.targetDataByTarget=n,e))}function uI(e,t,r){let i=se(),n=se();return r.forEach(e=>i=i.add(e)),t.getEntries(e,i).next(e=>{let i=nZ();return r.forEach((r,s)=>{let a=e.get(r);s.isFoundDocument()!==a.isFoundDocument()&&(n=n.add(r)),s.isNoDocument()&&s.version.isEqual(eE.min())?(t.removeEntry(r,s.readTime),i=i.insert(r,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),i=i.insert(r,s)):A(uy,"Ignoring outdated watch update for ",r,". Current version:",a.version," Watch version:",s.version)}),{changedDocuments:i,existenceChangedKeys:n}})}function uD(e,t,r){return!!(0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=uv)||r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size>0}async function uP(e,t){let r=R(e);try{await r.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ez.forEach(t,t=>ez.forEach(t.addedKeys,i=>r.persistence.referenceDelegate.addReference(e,t.targetId,i)).next(()=>ez.forEach(t.removedKeys,i=>r.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))}catch(e){if(eQ(e))A(uy,"Failed to update sequence numbers: "+e);else throw e}for(let e of t){let t=e.targetId;if(!e.fromCache){let e=r.targetDataByTarget.get(t),i=e.snapshotVersion,n=e.withLastLimboFreeSnapshotVersion(i);r.targetDataByTarget=r.targetDataByTarget.insert(t,n)}}}function uR(e,t){let r=R(e);return r.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=rq),r.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function uN(e,t){let r=R(e);return r.persistence.runTransaction("read document","readonly",e=>r.localDocuments.getDocument(e,t))}function uO(e,t){let r=R(e);return r.persistence.runTransaction("Allocate target","readwrite",e=>{let i;return r.targetCache.getTargetData(e,t).next(n=>n?(i=n,ez.resolve(i)):r.targetCache.allocateTargetId(e).next(n=>(i=new ob(t,n,"TargetPurposeListen",e.currentSequenceNumber),r.targetCache.addTargetData(e,i).next(()=>i))))}).then(e=>{let i=r.targetDataByTarget.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(r.targetDataByTarget=r.targetDataByTarget.insert(e.targetId,e),r.targetIdByTarget.set(t,e.targetId)),e})}function uM(e,t,r){let i=R(e),n=i.targetIdByTarget.get(r);return void 0!==n?ez.resolve(i.targetDataByTarget.get(n)):i.targetCache.getTargetData(t,r)}async function uL(e,t,r){let i=R(e),n=i.targetDataByTarget.get(t),s=r?"readwrite":"readwrite-primary";try{r||await i.persistence.runTransaction("Release target",s,e=>i.persistence.referenceDelegate.removeTarget(e,n))}catch(e){if(eQ(e))A(uy,`Failed to update sequence numbers for target ${t}: ${e}`);else throw e}i.targetDataByTarget=i.targetDataByTarget.remove(t),i.targetIdByTarget.delete(n.target)}function uF(e,t,r){let i=R(e),n=eE.min(),s=se();return i.persistence.runTransaction("Execute query","readwrite",e=>uM(i,e,nR(t)).next(t=>{if(t)return n=t.lastLimboFreeSnapshotVersion,i.targetCache.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>i.queryEngine.getDocumentsMatchingQuery(e,t,r?n:eE.min(),r?s:se())).next(e=>(uq(i,nQ(t),e),{documents:e,remoteKeys:s})))}function uB(e,t,r,i){let n=r.batch,s=n.keys(),a=ez.resolve();return s.forEach(e=>{a=a.next(()=>i.getEntry(t,e)).next(t=>{let s=r.docVersions.get(e);P(null!==s,48541),0>t.version.compareTo(s)&&(n.applyToRemoteDocument(t,r),t.isValidDocument()&&(t.setReadTime(r.commitVersion),i.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,n))}function uU(e,t){let r=R(e),i=R(r.mutationQueue);return r.persistence.runTransaction("Lookup mutation documents","readonly",e=>i.lookupMutationKeys(e,t).next(t=>t?r.localDocuments.getDocuments(e,t):ez.resolve(null)))}function uz(e,t){R(R(e,ub).mutationQueue).removeCachedMutationKeys(t)}function uV(e){return R(R(e,ub).persistence).getActiveClients()}function uj(e,t){let r=R(e),i=R(r.targetCache),n=r.targetDataByTarget.get(t);return n?Promise.resolve(n.target):r.persistence.runTransaction("Get target data","readonly",e=>i.getTargetDataForTarget(e,t).next(e=>e?e.target:null))}function uG(e,t){let r=R(e),i=r.collectionGroupReadTime.get(t)||eE.min();return r.persistence.runTransaction("Get new document changes","readonly",e=>r.remoteDocuments.getAllFromCollectionGroup(e,t,eN(i,eS),Number.MAX_SAFE_INTEGER)).then(e=>(uq(r,t,e),e))}function uq(e,t,r){let i=e.collectionGroupReadTime.get(t)||eE.min();r.forEach((e,t)=>{t.readTime.compareTo(i)>0&&(i=t.readTime)}),e.collectionGroupReadTime.set(t,i)}function uH(e){return nR(nA(ei.fromString(`__bundle__/docs/${e}`)))}async function uW(e,t,r,i){let n=R(e),s=se(),a=nZ();for(let e of r){let r=t.toDocumentKey(e.metadata.name);e.document&&(s=s.add(r));let i=t.toMutableDocument(e);i.setReadTime(t.toSnapshotVersion(e.metadata.readTime)),a=a.insert(r,i)}let o=n.remoteDocuments.newChangeBuffer({trackRemovals:!0}),l=await uO(n,uH(i));return n.persistence.runTransaction("Apply bundle documents","readwrite",e=>uI(e,o,a).next(t=>(o.apply(e),t)).next(t=>n.targetCache.removeMatchingKeysForTargetId(e,l.targetId).next(()=>n.targetCache.addMatchingKeys(e,s,l.targetId)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,t.changedDocuments,t.existenceChangedKeys)).next(()=>t.changedDocuments)))}function uK(e,t){let r=R(e),i=av(t.createTime);return r.persistence.runTransaction("hasNewerBundle","readonly",e=>r.bundleCache.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(i)>=0)}function uQ(e,t){let r=R(e);return r.persistence.runTransaction("Save bundle","readwrite",e=>r.bundleCache.saveBundleMetadata(e,t))}function u$(e,t){let r=R(e);return r.persistence.runTransaction("Get named query","readonly",e=>r.bundleCache.getNamedQuery(e,t))}async function uJ(e,t,r=se()){let i=await uO(e,nR(oL(t.bundledQuery))),n=R(e);return n.persistence.runTransaction("Save named query","readwrite",e=>{let s=av(t.readTime);if(i.snapshotVersion.compareTo(s)>=0)return n.bundleCache.saveNamedQuery(e,t);let a=i.withResumeToken(rA.EMPTY_BYTE_STRING,s);return n.targetDataByTarget=n.targetDataByTarget.insert(a.targetId,a),n.targetCache.updateTargetData(e,a).next(()=>n.targetCache.removeMatchingKeysForTargetId(e,i.targetId)).next(()=>n.targetCache.addMatchingKeys(e,r,i.targetId)).next(()=>n.bundleCache.saveNamedQuery(e,t))})}function uY(e,t){R(e).queryEngine.indexAutoCreationEnabled=t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uX{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uZ=100;function u0(){return(0,c.G6)()?8:eH((0,c.z$)())>0?6:4}class u1{constructor(){this.initialized=!1,this.indexAutoCreationEnabled=!1,this.indexAutoCreationMinCollectionSize=uZ,this.relativeIndexReadCostPerDocument=u0()}initialize(e,t){this.localDocumentsView=e,this.indexManager=t,this.initialized=!0}getDocumentsMatchingQuery(e,t,r,i){let n={result:null};return this.performQueryUsingIndex(e,t).next(e=>{n.result=e}).next(()=>{if(!n.result)return this.performQueryUsingRemoteKeys(e,t,i,r).next(e=>{n.result=e})}).next(()=>{if(n.result)return;let r=new uX;return this.executeFullCollectionScan(e,t,r).next(i=>{if(n.result=i,this.indexAutoCreationEnabled)return this.createCacheIndexes(e,t,r,i.size)})}).next(()=>n.result)}createCacheIndexes(e,t,r,i){return r.documentReadCount<this.indexAutoCreationMinCollectionSize?(C()<=h.in.DEBUG&&A("QueryEngine","SDK will not create cache indexes for query:",nj(t),"since it only creates cache indexes for collection contains","more than or equal to",this.indexAutoCreationMinCollectionSize,"documents"),ez.resolve()):(C()<=h.in.DEBUG&&A("QueryEngine","Query:",nj(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.relativeIndexReadCostPerDocument*i)?(C()<=h.in.DEBUG&&A("QueryEngine","The SDK decides to create cache indexes for query:",nj(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,nR(t))):ez.resolve()}performQueryUsingIndex(e,t){if(nx(t))return ez.resolve(null);let r=nR(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(r=nR(t=nF(t,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{let n=se(...i);return this.localDocumentsView.getDocuments(e,n).next(i=>this.indexManager.getMinOffset(e,r).next(r=>{let s=this.applyQuery(t,i);return this.needsRefill(t,s,n,r.readTime)?this.performQueryUsingIndex(e,nF(t,null,"F")):this.appendRemainingResults(e,s,t,r)}))})))}performQueryUsingRemoteKeys(e,t,r,i){return nx(t)||i.isEqual(eE.min())?ez.resolve(null):this.localDocumentsView.getDocuments(e,r).next(n=>{let s=this.applyQuery(t,n);return this.needsRefill(t,s,r,i)?ez.resolve(null):(C()<=h.in.DEBUG&&A("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),nj(t)),this.appendRemainingResults(e,s,t,eN(i,eS)).next(e=>e))})}applyQuery(e,t){let r=new rv(n$(e));return t.forEach((t,i)=>{nG(e,i)&&(r=r.add(i))}),r}needsRefill(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;let n="F"===e.limitType?t.last():t.first();return!!n&&(n.hasPendingWrites||n.version.compareTo(i)>0)}executeFullCollectionScan(e,t,r){return C()<=h.in.DEBUG&&A("QueryEngine","Using full collection scan to execute query:",nj(t)),this.localDocumentsView.getDocumentsMatchingQuery(e,t,eM.min(),r)}appendRemainingResults(e,t,r,i){return this.localDocumentsView.getDocumentsMatchingQuery(e,r,i).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let u2="firestore_clients";function u3(e,t){return`${u2}_${e}_${t}`}let u4="firestore_mutations";function u6(e,t,r){let i=`${u4}_${e}_${r}`;return t.isAuthenticated()&&(i+=`_${t.uid}`),i}let u5="firestore_targets";function u9(e,t){return`${u5}_${e}_${t}`}let u8="firestore_online_state";function u7(e){return`${u8}_${e}`}let ce="firestore_bundle_loaded_v2";function ct(e){return`${ce}_${e}`}let cr="firestore_sequence_number";function ci(e){return`${cr}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cn="SharedClientState";class cs{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static fromWebStorageEntry(e,t,r){let i;let n=JSON.parse(r),s="object"==typeof n&&-1!==["pending","acknowledged","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return(s&&n.error&&(s="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new O(n.error.code,n.error.message)),s)?new cs(e,t,n.state,i):(_(cn,`Failed to parse mutation state for ID '${t}': ${r}`),null)}toWebStorageJSON(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ca{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static fromWebStorageEntry(e,t){let r;let i=JSON.parse(t),n="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return(n&&i.error&&(n="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new O(i.error.code,i.error.message)),n)?new ca(e,i.state,r):(_(cn,`Failed to parse target state for ID '${e}': ${t}`),null)}toWebStorageJSON(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class co{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static fromWebStorageEntry(e,t){let r=JSON.parse(t),i="object"==typeof r&&r.activeTargetIds instanceof Array,n=sr();for(let e=0;i&&e<r.activeTargetIds.length;++e)i=rK(r.activeTargetIds[e]),n=n.add(r.activeTargetIds[e]);return i?new co(e,n):(_(cn,`Failed to parse client data for instance '${e}': ${t}`),null)}}class cl{constructor(e,t){this.clientId=e,this.onlineState=t}static fromWebStorageEntry(e){let t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new cl(t.clientId,t.onlineState):(_(cn,`Failed to parse online state: ${e}`),null)}}class ch{constructor(){this.activeTargetIds=sr()}addQueryTarget(e){this.activeTargetIds=this.activeTargetIds.add(e)}removeQueryTarget(e){this.activeTargetIds=this.activeTargetIds.delete(e)}toWebStorageJSON(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class cu{constructor(e,t,r,i,n){this.window=e,this.queue=t,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.storageListener=this.handleWebStorageEvent.bind(this),this.activeClients=new rf($),this.started=!1,this.earlyEvents=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=n,this.localClientStorageKey=u3(this.persistenceKey,this.localClientId),this.sequenceNumberKey=ci(this.persistenceKey),this.activeClients=this.activeClients.insert(this.localClientId,new ch),this.clientStateKeyRe=RegExp(`^${u2}_${s}_([^_]*)$`),this.mutationBatchKeyRe=RegExp(`^${u4}_${s}_(\\d+)(?:_(.*))?$`),this.queryTargetKeyRe=RegExp(`^${u5}_${s}_(\\d+)$`),this.onlineStateKey=u7(this.persistenceKey),this.bundleLoadedKey=ct(this.persistenceKey),this.window.addEventListener("storage",this.storageListener)}static isAvailable(e){return!!(e&&e.localStorage)}async start(){for(let e of(await this.syncEngine.getActiveClients())){if(e===this.localClientId)continue;let t=this.getItem(u3(this.persistenceKey,e));if(t){let r=co.fromWebStorageEntry(e,t);r&&(this.activeClients=this.activeClients.insert(r.clientId,r))}}this.persistClientState();let e=this.storage.getItem(this.onlineStateKey);if(e){let t=this.fromWebStorageOnlineState(e);t&&this.handleOnlineStateEvent(t)}for(let e of this.earlyEvents)this.handleWebStorageEvent(e);this.earlyEvents=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))}getAllActiveQueryTargets(){return this.extractActiveQueryTargets(this.activeClients)}isActiveQueryTarget(e){let t=!1;return this.activeClients.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.persistMutationState(e,"pending")}updateMutationState(e,t,r){this.persistMutationState(e,t,r),this.removeMutationState(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let t=this.storage.getItem(u9(this.persistenceKey,e));if(t){let i=ca.fromWebStorageEntry(e,t);i&&(r=i.state)}}return t&&this.localClientState.addQueryTarget(e),this.persistClientState(),r}removeLocalQueryTarget(e){this.localClientState.removeQueryTarget(e),this.persistClientState()}isLocalQueryTarget(e){return this.localClientState.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(u9(this.persistenceKey,e))}updateQueryState(e,t,r){this.persistQueryTargetState(e,t,r)}handleUserChange(e,t,r){t.forEach(e=>{this.removeMutationState(e)}),this.currentUser=e,r.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.persistOnlineState(e)}notifyBundleLoaded(e){this.persistBundleLoadedState(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return A(cn,"READ",e,t),t}setItem(e,t){A(cn,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){A(cn,"REMOVE",e),this.storage.removeItem(e)}handleWebStorageEvent(e){let t=e;if(t.storageArea===this.storage){if(A(cn,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey){_("Received WebStorage notification for local change. Another client might have garbage-collected our state");return}this.queue.enqueueRetryable(async()=>{if(!this.started){this.earlyEvents.push(t);return}if(null!==t.key){if(this.clientStateKeyRe.test(t.key)){if(null!=t.newValue){let e=this.fromWebStorageClientState(t.key,t.newValue);if(e)return this.handleClientStateEvent(e.clientId,e)}else{let e=this.fromWebStorageClientStateKey(t.key);return this.handleClientStateEvent(e,null)}}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue){let e=this.fromWebStorageMutationMetadata(t.key,t.newValue);if(e)return this.handleMutationBatchEvent(e)}}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue){let e=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue);if(e)return this.handleQueryTargetEvent(e)}}else if(t.key===this.onlineStateKey){if(null!==t.newValue){let e=this.fromWebStorageOnlineState(t.newValue);if(e)return this.handleOnlineStateEvent(e)}}else if(t.key===this.sequenceNumberKey){let e=cc(t.newValue);e!==e6.INVALID&&this.sequenceNumberHandler(e)}else if(t.key===this.bundleLoadedKey){let e=this.fromWebStoreBundleLoadedState(t.newValue);await Promise.all(e.map(e=>this.syncEngine.synchronizeWithChangedDocuments(e)))}}})}}get localClientState(){return this.activeClients.get(this.localClientId)}persistClientState(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())}persistMutationState(e,t,r){let i=new cs(this.currentUser,e,t,r),n=u6(this.persistenceKey,this.currentUser,e);this.setItem(n,i.toWebStorageJSON())}removeMutationState(e){let t=u6(this.persistenceKey,this.currentUser,e);this.removeItem(t)}persistOnlineState(e){let t={clientId:this.localClientId,onlineState:e};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))}persistQueryTargetState(e,t,r){let i=u9(this.persistenceKey,e),n=new ca(e,t,r);this.setItem(i,n.toWebStorageJSON())}persistBundleLoadedState(e){let t=JSON.stringify(Array.from(e));this.setItem(this.bundleLoadedKey,t)}fromWebStorageClientStateKey(e){let t=this.clientStateKeyRe.exec(e);return t?t[1]:null}fromWebStorageClientState(e,t){let r=this.fromWebStorageClientStateKey(e);return co.fromWebStorageEntry(r,t)}fromWebStorageMutationMetadata(e,t){let r=this.mutationBatchKeyRe.exec(e),i=Number(r[1]),n=void 0!==r[2]?r[2]:null;return cs.fromWebStorageEntry(new b(n),i,t)}fromWebStorageQueryTargetMetadata(e,t){let r=Number(this.queryTargetKeyRe.exec(e)[1]);return ca.fromWebStorageEntry(r,t)}fromWebStorageOnlineState(e){return cl.fromWebStorageEntry(e)}fromWebStoreBundleLoadedState(e){return JSON.parse(e)}async handleMutationBatchEvent(e){if(e.user.uid!==this.currentUser.uid){A(cn,`Ignoring mutation for non-active user ${e.user.uid}`);return}return this.syncEngine.applyBatchState(e.batchId,e.state,e.error)}handleQueryTargetEvent(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)}handleClientStateEvent(e,t){let r=t?this.activeClients.insert(e,t):this.activeClients.remove(e),i=this.extractActiveQueryTargets(this.activeClients),n=this.extractActiveQueryTargets(r),s=[],a=[];return n.forEach(e=>{i.has(e)||s.push(e)}),i.forEach(e=>{n.has(e)||a.push(e)}),this.syncEngine.applyActiveTargetsChange(s,a).then(()=>{this.activeClients=r})}handleOnlineStateEvent(e){this.activeClients.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}extractActiveQueryTargets(e){let t=sr();return e.forEach((e,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}function cc(e){let t=e6.INVALID;if(null!=e)try{let r=JSON.parse(e);P("number"==typeof r,30636,{seqString:e}),t=r}catch(e){_(cn,"Failed to read sequence number from WebStorage",e)}return t}class cd{constructor(){this.localState=new ch,this.queryState={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.localState.addQueryTarget(e),this.queryState[e]||"not-current"}updateQueryState(e,t,r){this.queryState[e]=t}removeLocalQueryTarget(e){this.localState.removeQueryTarget(e)}isLocalQueryTarget(e){return this.localState.activeTargetIds.has(e)}clearQueryState(e){delete this.queryState[e]}getAllActiveQueryTargets(){return this.localState.activeTargetIds}isActiveQueryTarget(e){return this.localState.activeTargetIds.has(e)}start(){return this.localState=new ch,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{addCallback(e){}shutdown(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}onConnected(e){this.wrappedOnConnected=e}onOpen(e){this.wrappedOnOpen=e}onClose(e){this.wrappedOnClose=e}onMessage(e){this.wrappedOnMessage=e}close(){this.closeFn()}send(e){this.sendFn(e)}callOnConnected(){this.wrappedOnConnected()}callOnOpen(){this.wrappedOnOpen()}callOnClose(e){this.wrappedOnClose(e)}callOnMessage(e){this.wrappedOnMessage(e)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cm=null;function cg(){return 268435456+Math.round(2147483648*Math.random())}function cy(){return null===cm?cm=cg():cm++,"0x"+cm.toString(16)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(e){return new Promise((t,r)=>{e((e,i)=>{e?r(e):t(i)})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cb="1.9.15",cw="GrpcConnection",cE=`gl-node/${process.versions.node} fire/${w} grpc/${cb}`;function cS(e,t,r,i){P(null===t||"OAuth"===t.type,36936);let n=new m.SF;return t&&t.headers.forEach((e,t)=>n.set(t,e)),r&&r.headers.forEach((e,t)=>n.set(t,e)),i&&n.set("X-Firebase-GMPID",i),n.set("X-Goog-Api-Client",cE),n.set("Google-Cloud-Resource-Prefix",e),n.set("x-goog-request-params",e),n}class cT{get shouldResourcePathBeIncludedInRequest(){return!0}constructor(e,t){this.databaseInfo=t,this.cachedStub=null,this.firestore=e.google.firestore.v1,this.databasePath=`projects/${t.databaseId.projectId}/databases/${t.databaseId.database}`}ensureActiveStub(){if(!this.cachedStub){A(cw,"Creating Firestore stub.");let e=this.databaseInfo.ssl?m.K9.createSsl():m.K9.createInsecure();this.cachedStub=new this.firestore.Firestore(this.databaseInfo.host,e)}return this.cachedStub}invokeRPC(e,t,r,i,n){let s=cy(),a=this.ensureActiveStub(),o=cS(this.databasePath,i,n,this.databaseInfo.appId),l=Object.assign({database:this.databasePath},r);return cv(t=>(A(cw,`RPC '${e}' ${s} invoked with request:`,r),a[e](l,o,(r,i)=>{r?(A(cw,`RPC '${e}' ${s} failed with error:`,r),t(new O(sY(r.code),r.message))):(A(cw,`RPC '${e}' ${s} completed with response:`,i),t(void 0,i))})))}invokeStreamingRPC(e,t,r,i,n,s){let a=cy(),o=[],l=new M;A(cw,`RPC '${e}' ${a} invoked (streaming) with request:`,r);let h=this.ensureActiveStub(),u=cS(this.databasePath,i,n,this.databaseInfo.appId),c=Object.assign(Object.assign({},r),{database:this.databasePath}),d=h[e](c,u),p=!1;return d.on("data",t=>{A(cw,`RPC ${e} ${a} received result:`,t),o.push(t),void 0!==s&&o.length===s&&(p=!0,l.resolve(o))}),d.on("end",()=>{A(cw,`RPC '${e}' ${a} completed.`),p||(p=!0,l.resolve(o))}),d.on("error",t=>{A(cw,`RPC '${e}' ${a} failed with error:`,t);let r=sY(t.code);l.reject(new O(r,t.message))}),l.promise}openStream(e,t,r){let i=cy(),n=this.ensureActiveStub(),s=cS(this.databasePath,t,r,this.databaseInfo.appId),a=n[e](s),o=!1,l=e=>{o||(o=!0,h.callOnClose(e),a.end())},h=new cf({sendFn:t=>{if(o)A(cw,`RPC '${e}' stream ${i} not sending because gRPC stream is closed:`,t);else{A(cw,`RPC '${e}' stream ${i} sending:`,t);try{a.write(t)}catch(e){throw _("Failure sending:",t),_("Error:",e),e}}},closeFn:()=>{A(cw,`RPC '${e}' stream ${i} closed locally via close().`),l()}}),u=!1;return a.on("data",t=>{o||(A(cw,`RPC '${e}' stream ${i} received:`,t),u||(h.callOnConnected(),u=!0),h.callOnMessage(t))}),a.on("end",()=>{A(cw,`RPC '${e}' stream ${i} ended.`),l()}),a.on("error",t=>{o||(x(cw,`RPC '${e}' stream ${i} error. Code:`,t.code,"Message:",t.message),l(new O(sY(t.code),t.message)))}),A(cw,`Opening RPC '${e}' stream ${i} to ${this.databaseInfo.host}`),setTimeout(()=>{h.callOnOpen()},0),h}terminate(){this.cachedStub&&(this.cachedStub.close(),this.cachedStub=void 0)}}let cC={google:{nested:{protobuf:{options:{csharp_namespace:"Google.Protobuf.WellKnownTypes",go_package:"github.com/golang/protobuf/ptypes/wrappers",java_package:"com.google.protobuf",java_outer_classname:"WrappersProto",java_multiple_files:!0,objc_class_prefix:"GPB",cc_enable_arenas:!0,optimize_for:"SPEED"},nested:{Timestamp:{fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}},FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}},Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},Empty:{fields:{}},DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}},Any:{fields:{typeUrl:{type:"string",id:1},value:{type:"bytes",id:2}}}}},firestore:{nested:{v1:{options:{csharp_namespace:"Google.Cloud.Firestore.V1",go_package:"google.golang.org/genproto/googleapis/firestore/v1;firestore",java_multiple_files:!0,java_outer_classname:"WriteProto",java_package:"com.google.firestore.v1",objc_class_prefix:"GCFS",php_namespace:"Google\\Cloud\\Firestore\\V1",ruby_package:"Google::Cloud::Firestore::V1"},nested:{AggregationResult:{fields:{aggregateFields:{keyType:"string",type:"Value",id:2}}},BitSequence:{fields:{bitmap:{type:"bytes",id:1},padding:{type:"int32",id:2}}},BloomFilter:{fields:{bits:{type:"BitSequence",id:1},hashCount:{type:"int32",id:2}}},DocumentMask:{fields:{fieldPaths:{rule:"repeated",type:"string",id:1}}},Precondition:{oneofs:{conditionType:{oneof:["exists","updateTime"]}},fields:{exists:{type:"bool",id:1},updateTime:{type:"google.protobuf.Timestamp",id:2}}},TransactionOptions:{oneofs:{mode:{oneof:["readOnly","readWrite"]}},fields:{readOnly:{type:"ReadOnly",id:2},readWrite:{type:"ReadWrite",id:3}},nested:{ReadWrite:{fields:{retryTransaction:{type:"bytes",id:1}}},ReadOnly:{oneofs:{consistencySelector:{oneof:["readTime"]}},fields:{readTime:{type:"google.protobuf.Timestamp",id:2}}}}},Document:{fields:{name:{type:"string",id:1},fields:{keyType:"string",type:"Value",id:2},createTime:{type:"google.protobuf.Timestamp",id:3},updateTime:{type:"google.protobuf.Timestamp",id:4}}},Value:{oneofs:{valueType:{oneof:["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},fields:{nullValue:{type:"google.protobuf.NullValue",id:11},booleanValue:{type:"bool",id:1},integerValue:{type:"int64",id:2},doubleValue:{type:"double",id:3},timestampValue:{type:"google.protobuf.Timestamp",id:10},stringValue:{type:"string",id:17},bytesValue:{type:"bytes",id:18},referenceValue:{type:"string",id:5},geoPointValue:{type:"google.type.LatLng",id:8},arrayValue:{type:"ArrayValue",id:9},mapValue:{type:"MapValue",id:6}}},ArrayValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},MapValue:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Firestore:{options:{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},methods:{GetDocument:{requestType:"GetDocumentRequest",responseType:"Document",options:{"(google.api.http).get":"/v1/{name=projects/*/databases/*/documents/*/**}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{name=projects/*/databases/*/documents/*/**}"}}]},ListDocuments:{requestType:"ListDocumentsRequest",responseType:"ListDocumentsResponse",options:{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"}}]},UpdateDocument:{requestType:"UpdateDocumentRequest",responseType:"Document",options:{"(google.api.http).patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},parsedOptions:[{"(google.api.http)":{patch:"/v1/{document.name=projects/*/databases/*/documents/*/**}",body:"document"}},{"(google.api.method_signature)":"document,update_mask"}]},DeleteDocument:{requestType:"DeleteDocumentRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},parsedOptions:[{"(google.api.http)":{delete:"/v1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},BatchGetDocuments:{requestType:"BatchGetDocumentsRequest",responseType:"BatchGetDocumentsResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchGet",body:"*"}}]},BeginTransaction:{requestType:"BeginTransactionRequest",responseType:"BeginTransactionResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:beginTransaction",body:"*"}},{"(google.api.method_signature)":"database"}]},Commit:{requestType:"CommitRequest",responseType:"CommitResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:commit",body:"*"}},{"(google.api.method_signature)":"database,writes"}]},Rollback:{requestType:"RollbackRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:rollback",body:"*"}},{"(google.api.method_signature)":"database,transaction"}]},RunQuery:{requestType:"RunQueryRequest",responseType:"RunQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery",body:"*"}}}]},RunAggregationQuery:{requestType:"RunAggregationQueryRequest",responseType:"RunAggregationQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery",body:"*"}}}]},PartitionQuery:{requestType:"PartitionQueryRequest",responseType:"PartitionQueryResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:partitionQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery",body:"*"}}}]},Write:{requestType:"WriteRequest",requestStream:!0,responseType:"WriteResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:write",body:"*"}}]},Listen:{requestType:"ListenRequest",requestStream:!0,responseType:"ListenResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:listen",body:"*"}}]},ListCollectionIds:{requestType:"ListCollectionIdsRequest",responseType:"ListCollectionIdsResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds",body:"*"}}},{"(google.api.method_signature)":"parent"}]},BatchWrite:{requestType:"BatchWriteRequest",responseType:"BatchWriteResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchWrite",body:"*"}}]},CreateDocument:{requestType:"CreateDocumentRequest",responseType:"Document",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}",body:"document"}}]}}},GetDocumentRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:5}}},ListDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:3},pageToken:{type:"string",id:4},orderBy:{type:"string",id:6},mask:{type:"DocumentMask",id:7},transaction:{type:"bytes",id:8},readTime:{type:"google.protobuf.Timestamp",id:10},showMissing:{type:"bool",id:12}}},ListDocumentsResponse:{fields:{documents:{rule:"repeated",type:"Document",id:1},nextPageToken:{type:"string",id:2}}},CreateDocumentRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},documentId:{type:"string",id:3},document:{type:"Document",id:4,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:5}}},UpdateDocumentRequest:{fields:{document:{type:"Document",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},updateMask:{type:"DocumentMask",id:2},mask:{type:"DocumentMask",id:3},currentDocument:{type:"Precondition",id:4}}},DeleteDocumentRequest:{fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},currentDocument:{type:"Precondition",id:2}}},BatchGetDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},documents:{rule:"repeated",type:"string",id:2},mask:{type:"DocumentMask",id:3},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:7}}},BatchGetDocumentsResponse:{oneofs:{result:{oneof:["found","missing"]}},fields:{found:{type:"Document",id:1},missing:{type:"string",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:4}}},BeginTransactionRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},options:{type:"TransactionOptions",id:2}}},BeginTransactionResponse:{fields:{transaction:{type:"bytes",id:1}}},CommitRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},transaction:{type:"bytes",id:3}}},CommitResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},commitTime:{type:"google.protobuf.Timestamp",id:2}}},RollbackRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},transaction:{type:"bytes",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}}}},RunQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},transaction:{type:"bytes",id:5},newTransaction:{type:"TransactionOptions",id:6},readTime:{type:"google.protobuf.Timestamp",id:7}}},RunQueryResponse:{fields:{transaction:{type:"bytes",id:2},document:{type:"Document",id:1},readTime:{type:"google.protobuf.Timestamp",id:3},skippedResults:{type:"int32",id:4}}},RunAggregationQueryRequest:{oneofs:{queryType:{oneof:["structuredAggregationQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredAggregationQuery:{type:"StructuredAggregationQuery",id:2},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:6}}},RunAggregationQueryResponse:{fields:{result:{type:"AggregationResult",id:1},transaction:{type:"bytes",id:2},readTime:{type:"google.protobuf.Timestamp",id:3}}},PartitionQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},partitionCount:{type:"int64",id:3},pageToken:{type:"string",id:4},pageSize:{type:"int32",id:5}}},PartitionQueryResponse:{fields:{partitions:{rule:"repeated",type:"Cursor",id:1},nextPageToken:{type:"string",id:2}}},WriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},streamId:{type:"string",id:2},writes:{rule:"repeated",type:"Write",id:3},streamToken:{type:"bytes",id:4},labels:{keyType:"string",type:"string",id:5}}},WriteResponse:{fields:{streamId:{type:"string",id:1},streamToken:{type:"bytes",id:2},writeResults:{rule:"repeated",type:"WriteResult",id:3},commitTime:{type:"google.protobuf.Timestamp",id:4}}},ListenRequest:{oneofs:{targetChange:{oneof:["addTarget","removeTarget"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},addTarget:{type:"Target",id:2},removeTarget:{type:"int32",id:3},labels:{keyType:"string",type:"string",id:4}}},ListenResponse:{oneofs:{responseType:{oneof:["targetChange","documentChange","documentDelete","documentRemove","filter"]}},fields:{targetChange:{type:"TargetChange",id:2},documentChange:{type:"DocumentChange",id:3},documentDelete:{type:"DocumentDelete",id:4},documentRemove:{type:"DocumentRemove",id:6},filter:{type:"ExistenceFilter",id:5}}},Target:{oneofs:{targetType:{oneof:["query","documents"]},resumeType:{oneof:["resumeToken","readTime"]}},fields:{query:{type:"QueryTarget",id:2},documents:{type:"DocumentsTarget",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:11},targetId:{type:"int32",id:5},once:{type:"bool",id:6},expectedCount:{type:"google.protobuf.Int32Value",id:12}},nested:{DocumentsTarget:{fields:{documents:{rule:"repeated",type:"string",id:2}}},QueryTarget:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1},structuredQuery:{type:"StructuredQuery",id:2}}}}},TargetChange:{fields:{targetChangeType:{type:"TargetChangeType",id:1},targetIds:{rule:"repeated",type:"int32",id:2},cause:{type:"google.rpc.Status",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:6}},nested:{TargetChangeType:{values:{NO_CHANGE:0,ADD:1,REMOVE:2,CURRENT:3,RESET:4}}}},ListCollectionIdsRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:2},pageToken:{type:"string",id:3}}},ListCollectionIdsResponse:{fields:{collectionIds:{rule:"repeated",type:"string",id:1},nextPageToken:{type:"string",id:2}}},BatchWriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},labels:{keyType:"string",type:"string",id:3}}},BatchWriteResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},status:{rule:"repeated",type:"google.rpc.Status",id:2}}},StructuredQuery:{fields:{select:{type:"Projection",id:1},from:{rule:"repeated",type:"CollectionSelector",id:2},where:{type:"Filter",id:3},orderBy:{rule:"repeated",type:"Order",id:4},startAt:{type:"Cursor",id:7},endAt:{type:"Cursor",id:8},offset:{type:"int32",id:6},limit:{type:"google.protobuf.Int32Value",id:5}},nested:{CollectionSelector:{fields:{collectionId:{type:"string",id:2},allDescendants:{type:"bool",id:3}}},Filter:{oneofs:{filterType:{oneof:["compositeFilter","fieldFilter","unaryFilter"]}},fields:{compositeFilter:{type:"CompositeFilter",id:1},fieldFilter:{type:"FieldFilter",id:2},unaryFilter:{type:"UnaryFilter",id:3}}},CompositeFilter:{fields:{op:{type:"Operator",id:1},filters:{rule:"repeated",type:"Filter",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,AND:1,OR:2}}}},FieldFilter:{fields:{field:{type:"FieldReference",id:1},op:{type:"Operator",id:2},value:{type:"Value",id:3}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,LESS_THAN:1,LESS_THAN_OR_EQUAL:2,GREATER_THAN:3,GREATER_THAN_OR_EQUAL:4,EQUAL:5,NOT_EQUAL:6,ARRAY_CONTAINS:7,IN:8,ARRAY_CONTAINS_ANY:9,NOT_IN:10}}}},UnaryFilter:{oneofs:{operandType:{oneof:["field"]}},fields:{op:{type:"Operator",id:1},field:{type:"FieldReference",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,IS_NAN:2,IS_NULL:3,IS_NOT_NAN:4,IS_NOT_NULL:5}}}},Order:{fields:{field:{type:"FieldReference",id:1},direction:{type:"Direction",id:2}}},FieldReference:{fields:{fieldPath:{type:"string",id:2}}},Projection:{fields:{fields:{rule:"repeated",type:"FieldReference",id:2}}},Direction:{values:{DIRECTION_UNSPECIFIED:0,ASCENDING:1,DESCENDING:2}}}},StructuredAggregationQuery:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{structuredQuery:{type:"StructuredQuery",id:1},aggregations:{rule:"repeated",type:"Aggregation",id:3}},nested:{Aggregation:{oneofs:{operator:{oneof:["count","sum","avg"]}},fields:{count:{type:"Count",id:1},sum:{type:"Sum",id:2},avg:{type:"Avg",id:3},alias:{type:"string",id:7}},nested:{Count:{fields:{upTo:{type:"google.protobuf.Int64Value",id:1}}},Sum:{fields:{field:{type:"FieldReference",id:1}}},Avg:{fields:{field:{type:"FieldReference",id:1}}}}}}},Cursor:{fields:{values:{rule:"repeated",type:"Value",id:1},before:{type:"bool",id:2}}},Write:{oneofs:{operation:{oneof:["update","delete","verify","transform"]}},fields:{update:{type:"Document",id:1},delete:{type:"string",id:2},verify:{type:"string",id:5},transform:{type:"DocumentTransform",id:6},updateMask:{type:"DocumentMask",id:3},updateTransforms:{rule:"repeated",type:"DocumentTransform.FieldTransform",id:7},currentDocument:{type:"Precondition",id:4}}},DocumentTransform:{fields:{document:{type:"string",id:1},fieldTransforms:{rule:"repeated",type:"FieldTransform",id:2}},nested:{FieldTransform:{oneofs:{transformType:{oneof:["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},fields:{fieldPath:{type:"string",id:1},setToServerValue:{type:"ServerValue",id:2},increment:{type:"Value",id:3},maximum:{type:"Value",id:4},minimum:{type:"Value",id:5},appendMissingElements:{type:"ArrayValue",id:6},removeAllFromArray:{type:"ArrayValue",id:7}},nested:{ServerValue:{values:{SERVER_VALUE_UNSPECIFIED:0,REQUEST_TIME:1}}}}}},WriteResult:{fields:{updateTime:{type:"google.protobuf.Timestamp",id:1},transformResults:{rule:"repeated",type:"Value",id:2}}},DocumentChange:{fields:{document:{type:"Document",id:1},targetIds:{rule:"repeated",type:"int32",id:5},removedTargetIds:{rule:"repeated",type:"int32",id:6}}},DocumentDelete:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:6},readTime:{type:"google.protobuf.Timestamp",id:4}}},DocumentRemove:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:2},readTime:{type:"google.protobuf.Timestamp",id:4}}},ExistenceFilter:{fields:{targetId:{type:"int32",id:1},count:{type:"int32",id:2},unchangedNames:{type:"BloomFilter",id:3}}}}}}},api:{options:{go_package:"google.golang.org/genproto/googleapis/api/annotations;annotations",java_multiple_files:!0,java_outer_classname:"HttpProto",java_package:"com.google.api",objc_class_prefix:"GAPI",cc_enable_arenas:!0},nested:{http:{type:"HttpRule",id:72295728,extend:"google.protobuf.MethodOptions"},Http:{fields:{rules:{rule:"repeated",type:"HttpRule",id:1}}},HttpRule:{oneofs:{pattern:{oneof:["get","put","post","delete","patch","custom"]}},fields:{get:{type:"string",id:2},put:{type:"string",id:3},post:{type:"string",id:4},delete:{type:"string",id:5},patch:{type:"string",id:6},custom:{type:"CustomHttpPattern",id:8},selector:{type:"string",id:1},body:{type:"string",id:7},additionalBindings:{rule:"repeated",type:"HttpRule",id:11}}},CustomHttpPattern:{fields:{kind:{type:"string",id:1},path:{type:"string",id:2}}},methodSignature:{rule:"repeated",type:"string",id:1051,extend:"google.protobuf.MethodOptions"},defaultHost:{type:"string",id:1049,extend:"google.protobuf.ServiceOptions"},oauthScopes:{type:"string",id:1050,extend:"google.protobuf.ServiceOptions"},fieldBehavior:{rule:"repeated",type:"google.api.FieldBehavior",id:1052,extend:"google.protobuf.FieldOptions"},FieldBehavior:{values:{FIELD_BEHAVIOR_UNSPECIFIED:0,OPTIONAL:1,REQUIRED:2,OUTPUT_ONLY:3,INPUT_ONLY:4,IMMUTABLE:5,UNORDERED_LIST:6,NON_EMPTY_DEFAULT:7}}}},type:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/type/latlng;latlng",java_multiple_files:!0,java_outer_classname:"LatLngProto",java_package:"com.google.type",objc_class_prefix:"GTP"},nested:{LatLng:{fields:{latitude:{type:"double",id:1},longitude:{type:"double",id:2}}}}},rpc:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/rpc/status;status",java_multiple_files:!0,java_outer_classname:"StatusProto",java_package:"com.google.rpc",objc_class_prefix:"RPC"},nested:{Status:{fields:{code:{type:"int32",id:1},message:{type:"string",id:2},details:{rule:"repeated",type:"google.protobuf.Any",id:3}}}}}}}};var cA={nested:cC},c_=Object.freeze({__proto__:null,nested:cC,default:cA});/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cx={longs:String,enums:String,defaults:!0,oneofs:!1};function ck(){let e=g.im(c_,cx);return m.Rz(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cI(e){return new cT(ck(),e)}function cD(){return new cp}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cP(){return"YES"===process.env.USE_MOCK_PERSISTENCE?window:null}function cR(){return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(e){return new ah(e,!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cO="ExponentialBackoff",cM=1e3,cL=1.5,cF=6e4;class cB{constructor(e,t,r=cM,i=cL,n=cF){this.queue=e,this.timerId=t,this.initialDelayMs=r,this.backoffFactor=i,this.maxDelayMs=n,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}reset(){this.currentBaseMs=0}resetToMax(){this.currentBaseMs=this.maxDelayMs}backoffAndRun(e){this.cancel();let t=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,t-r);i>0&&A(cO,`Backing off for ${i} ms (base delay: ${this.currentBaseMs} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,()=>(this.lastAttemptTime=Date.now(),e())),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)}skipBackoff(){null!==this.timerPromise&&(this.timerPromise.skipDelay(),this.timerPromise=null)}cancel(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)}jitterDelayMs(){return(Math.random()-.5)*this.currentBaseMs}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cU="PersistentStream",cz=6e4,cV=1e4;class cj{constructor(e,t,r,i,n,s,a,o){this.queue=e,this.idleTimerId=r,this.healthTimerId=i,this.connection=n,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.closeCount=0,this.idleTimer=null,this.healthCheck=null,this.stream=null,this.responseCount=0,this.backoff=new cB(e,t)}isStarted(){return 1===this.state||5===this.state||this.isOpen()}isOpen(){return 2===this.state||3===this.state}start(){if(this.responseCount=0,4===this.state){this.performBackoff();return}this.auth()}async stop(){this.isStarted()&&await this.close(0)}inhibitBackoff(){this.state=0,this.backoff.reset()}markIdle(){this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,cz,()=>this.handleIdleCloseTimer()))}sendRequest(e){this.cancelIdleCheck(),this.stream.send(e)}async handleIdleCloseTimer(){if(this.isOpen())return this.close(0)}cancelIdleCheck(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)}cancelHealthCheck(){this.healthCheck&&(this.healthCheck.cancel(),this.healthCheck=null)}async close(e,t){this.cancelIdleCheck(),this.cancelHealthCheck(),this.backoff.cancel(),this.closeCount++,4!==e?this.backoff.reset():t&&t.code===N.RESOURCE_EXHAUSTED?(_(t.toString()),_("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):t&&t.code===N.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=e,await this.listener.onClose(t)}tearDown(){}auth(){this.state=1;let e=this.getCloseGuardedDispatcher(this.closeCount),t=this.closeCount;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,r])=>{this.closeCount===t&&this.startStream(e,r)},t=>{e(()=>{let e=new O(N.UNKNOWN,"Fetching auth token failed: "+t.message);return this.handleStreamClose(e)})})}startStream(e,t){let r=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e,t),this.stream.onConnected(()=>{r(()=>this.listener.onConnected())}),this.stream.onOpen(()=>{r(()=>(this.state=2,this.healthCheck=this.queue.enqueueAfterDelay(this.healthTimerId,cV,()=>(this.isOpen()&&(this.state=3),Promise.resolve())),this.listener.onOpen()))}),this.stream.onClose(e=>{r(()=>this.handleStreamClose(e))}),this.stream.onMessage(e=>{r(()=>1==++this.responseCount?this.onFirst(e):this.onNext(e))})}performBackoff(){this.state=5,this.backoff.backoffAndRun(async()=>{this.state=0,this.start()})}handleStreamClose(e){return A(cU,`close with error: ${e}`),this.stream=null,this.close(4,e)}getCloseGuardedDispatcher(e){return t=>{this.queue.enqueueAndForget(()=>this.closeCount===e?t():(A(cU,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cG extends cj{constructor(e,t,r,i,n,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=n}startRpc(e,t){return this.connection.openStream("Listen",e,t)}onFirst(e){return this.onNext(e)}onNext(e){this.backoff.reset();let t=aM(this.serializer,e),r=aF(e);return this.listener.onWatchChange(t,r)}watch(e){let t={};t.database=a_(this.serializer),t.addTarget=a0(this.serializer,e);let r=aX(this.serializer,e);r&&(t.labels=r),this.sendRequest(t)}unwatch(e){let t={};t.database=a_(this.serializer),t.removeTarget=e,this.sendRequest(t)}}class cq extends cj{constructor(e,t,r,i,n,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=n}get handshakeComplete(){return this.responseCount>0}start(){this.lastStreamToken=void 0,super.start()}tearDown(){this.handshakeComplete&&this.writeMutations([])}startRpc(e,t){return this.connection.openStream("Write",e,t)}onFirst(e){return P(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,P(!e.writeResults||0===e.writeResults.length,55816),this.listener.onHandshakeComplete()}onNext(e){P(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.backoff.reset();let t=aG(e.writeResults,e.commitTime),r=av(e.commitTime);return this.listener.onMutationResult(r,t)}writeHandshake(){let e={};e.database=a_(this.serializer),this.sendRequest(e)}writeMutations(e){let t={streamToken:this.lastStreamToken,writes:e.map(e=>aB(this.serializer,e))};this.sendRequest(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cH{}class cW extends cH{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.terminated=!1}verifyInitialized(){if(this.terminated)throw new O(N.FAILED_PRECONDITION,"The client has already been terminated.")}invokeRPC(e,t,r,i){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([n,s])=>this.connection.invokeRPC(e,aw(t,r),i,n,s)).catch(e=>{if("FirebaseError"===e.name)throw e.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e;throw new O(N.UNKNOWN,e.toString())})}invokeStreamingRPC(e,t,r,i,n){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.invokeStreamingRPC(e,aw(t,r),i,s,a,n)).catch(e=>{if("FirebaseError"===e.name)throw e.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e;throw new O(N.UNKNOWN,e.toString())})}terminate(){this.terminated=!0,this.connection.terminate()}}function cK(e,t,r,i){return new cW(e,t,r,i)}async function cQ(e,t){let r=R(e),i={writes:t.map(e=>aB(r.serializer,e))};await r.invokeRPC("Commit",r.serializer.databaseId,ei.emptyPath(),i)}async function c$(e,t){let r=R(e),i={documents:t.map(e=>aS(r.serializer,e))},n=await r.invokeStreamingRPC("BatchGetDocuments",r.serializer.databaseId,ei.emptyPath(),i,t.length),s=new Map;n.forEach(e=>{let t=aO(r.serializer,e);s.set(t.key.toString(),t)});let a=[];return t.forEach(e=>{let t=s.get(e.toString());P(!!t,55234,{key:e}),a.push(t)}),a}async function cJ(e,t,r){var i;let n=R(e),{request:s,aliasMap:a,parent:o}=a$(n.serializer,nN(t),r);n.connection.shouldResourcePathBeIncludedInRequest||delete s.parent;let l=(await n.invokeStreamingRPC("RunAggregationQuery",n.serializer.databaseId,o,s,1)).filter(e=>!!e.result);P(1===l.length,64727);let h=null===(i=l[0].result)||void 0===i?void 0:i.aggregateFields;return Object.keys(h).reduce((e,t)=>(e[a[t]]=h[t],e),{})}function cY(e,t,r){let i=R(e);return i.verifyInitialized(),new cq(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}function cX(e,t,r){let i=R(e);return i.verifyInitialized(),new cG(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cZ="OnlineStateTracker",c0=1,c1=1e4;class c2{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}handleWatchStreamStart(){0===this.watchStreamFailures&&(this.setAndBroadcast("Unknown"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay("online_state_timeout",c1,()=>(this.onlineStateTimer=null,this.logClientOfflineWarningIfNecessary(`Backend didn't respond within ${c1/1e3} seconds.`),this.setAndBroadcast("Offline"),Promise.resolve())))}handleWatchStreamFailure(e){"Online"===this.state?this.setAndBroadcast("Unknown"):(this.watchStreamFailures++,this.watchStreamFailures>=c0&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary(`Connection failed ${c0} times. Most recent error: ${e.toString()}`),this.setAndBroadcast("Offline")))}set(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,"Online"===e&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)}setAndBroadcast(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}logClientOfflineWarningIfNecessary(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.shouldWarnClientIsOffline?(_(t),this.shouldWarnClientIsOffline=!1):A(cZ,t)}clearOnlineStateTimer(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let c3="RemoteStore",c4=10;class c6{constructor(e,t,r,i,n){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.writePipeline=[],this.listenTargets=new Map,this.offlineCauses=new Set,this.onNetworkStatusChange=[],this.connectivityMonitor=n,this.connectivityMonitor.addCallback(e=>{r.enqueueAndForget(async()=>{da(this)&&(A(c3,"Restarting streams for network reachability change."),await dx(this))})}),this.onlineStateTracker=new c2(r,i)}}function c5(e,t,r,i,n){return new c6(e,t,r,i,n)}async function c9(e){if(da(e))for(let t of e.onNetworkStatusChange)await t(!0)}async function c8(e){for(let t of e.onNetworkStatusChange)await t(!1)}async function c7(e){let t=R(e);A(c3,"RemoteStore shutting down."),t.offlineCauses.add(5),await c8(t),t.connectivityMonitor.shutdown(),t.onlineStateTracker.set("Unknown")}function de(e,t){let r=R(e);!r.listenTargets.has(t.targetId)&&(r.listenTargets.set(t.targetId,t),ds(r)?dn(r):dD(r).isOpen()&&dr(r,t))}function dt(e,t){let r=R(e),i=dD(r);r.listenTargets.delete(t),i.isOpen()&&di(r,t),0===r.listenTargets.size&&(i.isOpen()?i.markIdle():da(r)&&r.onlineStateTracker.set("Unknown"))}function dr(e,t){if(e.watchChangeAggregator.recordPendingTargetRequest(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(eE.min())>0){let r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}dD(e).watch(t)}function di(e,t){e.watchChangeAggregator.recordPendingTargetRequest(t),dD(e).unwatch(t)}function dn(e){e.watchChangeAggregator=new ar({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),getTargetDataForTarget:t=>e.listenTargets.get(t)||null,getDatabaseId:()=>e.datastore.serializer.databaseId}),dD(e).start(),e.onlineStateTracker.handleWatchStreamStart()}function ds(e){return da(e)&&!dD(e).isStarted()&&e.listenTargets.size>0}function da(e){return 0===R(e).offlineCauses.size}function dl(e){e.watchChangeAggregator=void 0}async function dh(e){e.onlineStateTracker.set("Online")}async function du(e){e.listenTargets.forEach((t,r)=>{dr(e,t)})}async function dc(e,t){dl(e),ds(e)?(e.onlineStateTracker.handleWatchStreamFailure(t),dn(e)):e.onlineStateTracker.set("Unknown")}async function dd(e,t,r){if(e.onlineStateTracker.set("Online"),t instanceof s7&&2===t.state&&t.cause){try{await dg(e,t)}catch(r){A(c3,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await dp(e,r)}return}if(t instanceof s9?e.watchChangeAggregator.handleDocumentChange(t):t instanceof s8?e.watchChangeAggregator.handleExistenceFilter(t):e.watchChangeAggregator.handleTargetChange(t),!r.isEqual(eE.min()))try{let t=await ux(e.localStore);r.compareTo(t)>=0&&await dm(e,r)}catch(t){A(c3,"Failed to raise snapshot:",t),await dp(e,t)}}async function dp(e,t,r){if(eQ(t))e.offlineCauses.add(1),await c8(e),e.onlineStateTracker.set("Offline"),r||(r=()=>ux(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{A(c3,"Retrying IndexedDB access"),await r(),e.offlineCauses.delete(1),await c9(e)});else throw t}function df(e,t){return t().catch(r=>dp(e,r,t))}function dm(e,t){let r=e.watchChangeAggregator.createRemoteEvent(t);return r.targetChanges.forEach((r,i)=>{if(r.resumeToken.approximateByteSize()>0){let n=e.listenTargets.get(i);n&&e.listenTargets.set(i,n.withResumeToken(r.resumeToken,t))}}),r.targetMismatches.forEach((t,r)=>{let i=e.listenTargets.get(t);i&&(e.listenTargets.set(t,i.withResumeToken(rA.EMPTY_BYTE_STRING,i.snapshotVersion)),di(e,t),dr(e,new ob(i.target,t,r,i.sequenceNumber)))}),e.remoteSyncer.applyRemoteEvent(r)}async function dg(e,t){let r=t.cause;for(let i of t.targetIds)e.listenTargets.has(i)&&(await e.remoteSyncer.rejectListen(i,r),e.listenTargets.delete(i),e.watchChangeAggregator.removeTarget(i))}async function dy(e){let t=R(e),r=dP(t),i=t.writePipeline.length>0?t.writePipeline[t.writePipeline.length-1].batchId:rq;for(;dv(t);)try{let e=await uR(t.localStore,i);if(null===e){0===t.writePipeline.length&&r.markIdle();break}i=e.batchId,db(t,e)}catch(e){await dp(t,e)}dw(t)&&dE(t)}function dv(e){return da(e)&&e.writePipeline.length<c4}function db(e,t){e.writePipeline.push(t);let r=dP(e);r.isOpen()&&r.handshakeComplete&&r.writeMutations(t.mutations)}function dw(e){return da(e)&&!dP(e).isStarted()&&e.writePipeline.length>0}function dE(e){dP(e).start()}async function dS(e){dP(e).writeHandshake()}async function dT(e){let t=dP(e);for(let r of e.writePipeline)t.writeMutations(r.mutations)}async function dC(e,t,r){let i=e.writePipeline.shift(),n=sW.from(i,t,r);await df(e,()=>e.remoteSyncer.applySuccessfulWrite(n)),await dy(e)}async function dA(e,t){t&&dP(e).handshakeComplete&&await d_(e,t),dw(e)&&dE(e)}async function d_(e,t){if(sJ(t.code)){let r=e.writePipeline.shift();dP(e).inhibitBackoff(),await df(e,()=>e.remoteSyncer.rejectFailedWrite(r.batchId,t)),await dy(e)}}async function dx(e){let t=R(e);t.offlineCauses.add(4),await c8(t),t.onlineStateTracker.set("Unknown"),t.offlineCauses.delete(4),await c9(t)}async function dk(e,t){let r=R(e);r.asyncQueue.verifyOperationInProgress(),A(c3,"RemoteStore received new credentials");let i=da(r);r.offlineCauses.add(3),await c8(r),i&&r.onlineStateTracker.set("Unknown"),await r.remoteSyncer.handleCredentialChange(t),r.offlineCauses.delete(3),await c9(r)}async function dI(e,t){let r=R(e);t?(r.offlineCauses.delete(2),await c9(r)):t||(r.offlineCauses.add(2),await c8(r),r.onlineStateTracker.set("Unknown"))}function dD(e){return e.watchStream||(e.watchStream=cX(e.datastore,e.asyncQueue,{onConnected:dh.bind(null,e),onOpen:du.bind(null,e),onClose:dc.bind(null,e),onWatchChange:dd.bind(null,e)}),e.onNetworkStatusChange.push(async t=>{t?(e.watchStream.inhibitBackoff(),ds(e)?dn(e):e.onlineStateTracker.set("Unknown")):(await e.watchStream.stop(),dl(e))})),e.watchStream}function dP(e){return e.writeStream||(e.writeStream=cY(e.datastore,e.asyncQueue,{onConnected:()=>Promise.resolve(),onOpen:dS.bind(null,e),onClose:dA.bind(null,e),onHandshakeComplete:dT.bind(null,e),onMutationResult:dC.bind(null,e)}),e.onNetworkStatusChange.push(async t=>{t?(e.writeStream.inhibitBackoff(),await dy(e)):(await e.writeStream.stop(),e.writePipeline.length>0&&(A(c3,`Stopping write stream with ${e.writePipeline.length} pending writes`),e.writePipeline=[]))})),e.writeStream}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dR="AsyncQueue";class dN{constructor(e,t,r,i,n){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=n,this.deferred=new M,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,n){let s=new dN(e,t,Date.now()+r,i,n);return s.start(r),s}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new O(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dO(e,t){if(_(dR,`${t}: ${e}`),eQ(e))return new O(N.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{static emptySet(e){return new dM(e.comparator)}constructor(e){e?this.comparator=(t,r)=>e(t,r)||ea.comparator(t.key,r.key):this.comparator=(e,t)=>ea.comparator(e.key,t.key),this.keyedMap=n1(),this.sortedSet=new rf(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof dM)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let e=t.getNext().key,i=r.getNext().key;if(!e.isEqual(i))return!1}return!0}toString(){let e=[];return(this.forEach(t=>{e.push(t.toString())}),0===e.length)?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){let r=new dM;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(){this.changeMap=new rf(ea.comparator)}track(e){let t=e.doc.key,r=this.changeMap.get(t);if(!r){this.changeMap=this.changeMap.insert(t,e);return}0!==e.type&&3===r.type?this.changeMap=this.changeMap.insert(t,e):3===e.type&&1!==r.type?this.changeMap=this.changeMap.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.changeMap=this.changeMap.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.changeMap=this.changeMap.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.changeMap=this.changeMap.remove(t):1===e.type&&2===r.type?this.changeMap=this.changeMap.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.changeMap=this.changeMap.insert(t,{type:2,doc:e.doc}):I(63341,{change:e,oldChange:r})}getChanges(){let e=[];return this.changeMap.inorderTraversal((t,r)=>{e.push(r)}),e}}class dF{constructor(e,t,r,i,n,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=n,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,n){let s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new dF(e,t,dM.emptySet(t),s,r,i,!0,!1,n)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(this.fromCache!==e.fromCache||this.hasCachedResults!==e.hasCachedResults||this.syncStateChanged!==e.syncStateChanged||!this.mutatedKeys.isEqual(e.mutatedKeys)||!nz(this.query,e.query)||!this.docs.isEqual(e.docs)||!this.oldDocs.isEqual(e.oldDocs))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==r[e].type||!t[e].doc.isEqual(r[e].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dB{constructor(){this.viewSnap=void 0,this.listeners=[]}hasRemoteListeners(){return this.listeners.some(e=>e.listensToRemoteStore())}}function dU(){return new dz}class dz{constructor(){this.queries=dV(),this.onlineState="Unknown",this.snapshotsInSyncListeners=new Set}terminate(){dK(this,new O(N.ABORTED,"Firestore shutting down"))}}function dV(){return new nY(e=>nV(e),nz)}async function dj(e,t){let r=R(e),i=3,n=t.query,s=r.queries.get(n);s?!s.hasRemoteListeners()&&t.listensToRemoteStore()&&(i=2):(s=new dB,i=t.listensToRemoteStore()?0:1);try{switch(i){case 0:s.viewSnap=await r.onListen(n,!0);break;case 1:s.viewSnap=await r.onListen(n,!1);break;case 2:await r.onFirstRemoteStoreListen(n)}}catch(r){let e=dO(r,`Initialization of query '${nj(t.query)}' failed`);t.onError(e);return}r.queries.set(n,s),s.listeners.push(t),t.applyOnlineStateChange(r.onlineState),s.viewSnap&&t.onViewSnapshot(s.viewSnap)&&dQ(r)}async function dG(e,t){let r=R(e),i=t.query,n=3,s=r.queries.get(i);if(s){let e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),0===s.listeners.length?n=t.listensToRemoteStore()?0:1:!s.hasRemoteListeners()&&t.listensToRemoteStore()&&(n=2))}switch(n){case 0:return r.queries.delete(i),r.onUnlisten(i,!0);case 1:return r.queries.delete(i),r.onUnlisten(i,!1);case 2:return r.onLastRemoteStoreUnlisten(i);default:return}}function dq(e,t){let r=R(e),i=!1;for(let e of t){let t=e.query,n=r.queries.get(t);if(n){for(let t of n.listeners)t.onViewSnapshot(e)&&(i=!0);n.viewSnap=e}}i&&dQ(r)}function dH(e,t,r){let i=R(e),n=i.queries.get(t);if(n)for(let e of n.listeners)e.onError(r);i.queries.delete(t)}function dW(e,t){let r=R(e);r.onlineState=t;let i=!1;r.queries.forEach((e,r)=>{for(let e of r.listeners)e.applyOnlineStateChange(t)&&(i=!0)}),i&&dQ(r)}function dK(e,t){let r=R(e),i=r.queries;r.queries=dV(),i.forEach((e,r)=>{for(let e of r.listeners)e.onError(t)})}function dQ(e){e.snapshotsInSyncListeners.forEach(e=>{e.next()})}!function(e){e.Default="default",e.Cache="cache"}(a||(a={}));class d${constructor(e,t,r){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState="Unknown",this.options=r||{}}onViewSnapshot(e){if(!this.options.includeMetadataChanges){let t=[];for(let r of e.docChanges)3!==r.type&&t.push(r);e=new dF(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),t=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),t=!0),this.snap=e,t}onError(e){this.queryObserver.error(e)}applyOnlineStateChange(e){this.onlineState=e;let t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t}shouldRaiseInitialEvent(e,t){if(!e.fromCache||!this.listensToRemoteStore())return!0;let r="Offline"!==t;return(!this.options.waitForSyncWhenOnline||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}shouldRaiseEvent(e){if(e.docChanges.length>0)return!0;let t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return(!!e.syncStateChanged||!!t)&&!0===this.options.includeMetadataChanges}raiseInitialEvent(e){e=dF.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.raisedInitialEvent=!0,this.queryObserver.next(e)}listensToRemoteStore(){return this.options.source!==a.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dJ{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.addedKeys=r,this.removedKeys=i}static fromSnapshot(e,t){let r=se(),i=se();for(let e of t.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:i=i.add(e.doc.key)}return new dJ(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dY{constructor(e){this.serializer=e}toDocumentKey(e){return aT(this.serializer,e)}toMutableDocument(e){return e.metadata.exists?aP(this.serializer,e.document,!1):iB.newNoDocument(this.toDocumentKey(e.metadata.name),this.toSnapshotVersion(e.metadata.readTime))}toSnapshotVersion(e){return av(e)}}class dX{constructor(e,t){this.bundleMetadata=e,this.serializer=t,this._queries=[],this._documents=[],this.collectionGroups=new Set,this.progress=dZ(e)}get queries(){return this._queries}get documents(){return this._documents}addSizedElement(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this._queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this._documents.push({metadata:e.payload.documentMetadata}),!e.payload.documentMetadata.exists&&++t;let r=ei.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this._documents[this._documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}getQueryDocumentMapping(e){let t=new Map,r=new dY(this.serializer);for(let i of e)if(i.metadata.queries){let e=r.toDocumentKey(i.metadata.name);for(let r of i.metadata.queries){let i=(t.get(r)||se()).add(e);t.set(r,i)}}return t}async completeAndStoreAsync(e){let t=await uW(e,new dY(this.serializer),this._documents,this.bundleMetadata.id),r=this.getQueryDocumentMapping(this.documents);for(let t of this._queries)await uJ(e,t,r.get(t.name));return this.progress.taskState="Success",{progress:this.progress,changedCollectionGroups:this.collectionGroups,changedDocs:t}}}function dZ(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}function d0(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this.key=e}}class d2{constructor(e){this.key=e}}class d3{constructor(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.hasCachedResults=!1,this.current=!1,this.limboDocuments=se(),this.mutatedKeys=se(),this.docComparator=n$(e),this.documentSet=new dM(this.docComparator)}get syncedDocuments(){return this._syncedDocuments}computeDocChanges(e,t){let r=t?t.changeSet:new dL,i=t?t.documentSet:this.documentSet,n=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,o="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((e,t)=>{let h=i.get(e),u=nG(this.query,t)?t:null,c=!!h&&this.mutatedKeys.has(h.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations),p=!1;h&&u?h.data.isEqual(u.data)?c!==d&&(r.track({type:3,doc:u}),p=!0):!this.shouldWaitForSyncedDocument(h,u)&&(r.track({type:2,doc:u}),p=!0,(o&&this.docComparator(u,o)>0||l&&0>this.docComparator(u,l))&&(a=!0)):!h&&u?(r.track({type:0,doc:u}),p=!0):h&&!u&&(r.track({type:1,doc:h}),p=!0,(o||l)&&(a=!0)),p&&(u?(s=s.add(u),n=d?n.add(e):n.delete(e)):(s=s.delete(e),n=n.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){let e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),n=n.delete(e.key),r.track({type:1,doc:e})}return{documentSet:s,changeSet:r,needsRefill:a,mutatedKeys:n}}shouldWaitForSyncedDocument(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let n=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;let s=e.changeSet.getChanges();s.sort((e,t)=>d4(e.type,t.type)||this.docComparator(e.doc,t.doc)),this.applyTargetChange(r),i=null!=i&&i;let a=t&&!i?this.updateLimboDocuments():[],o=0===this.limboDocuments.size&&this.current&&!i?1:0,l=o!==this.syncState;return(this.syncState=o,0!==s.length||l)?{snapshot:new dF(this.query,e.documentSet,n,s,e.mutatedKeys,0===o,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),limboChanges:a}:{limboChanges:a}}applyOnlineStateChange(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new dL,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}}shouldBeInLimbo(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations}applyTargetChange(e){e&&(e.addedDocuments.forEach(e=>this._syncedDocuments=this._syncedDocuments.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this._syncedDocuments=this._syncedDocuments.delete(e)),this.current=e.current)}updateLimboDocuments(){if(!this.current)return[];let e=this.limboDocuments;this.limboDocuments=se(),this.documentSet.forEach(e=>{this.shouldBeInLimbo(e.key)&&(this.limboDocuments=this.limboDocuments.add(e.key))});let t=[];return e.forEach(e=>{this.limboDocuments.has(e)||t.push(new d2(e))}),this.limboDocuments.forEach(r=>{e.has(r)||t.push(new d1(r))}),t}synchronizeWithPersistedState(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=se();let t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)}computeInitialSnapshot(){return dF.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,0===this.syncState,this.hasCachedResults)}}function d4(e,t){let r=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return I(20277,{change:e})}};return r(e)-r(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let d6="SyncEngine";class d5{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class d9{constructor(e){this.key=e,this.receivedDocument=!1}}class d8{constructor(e,t,r,i,n,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=n,this.maxConcurrentLimboResolutions=s,this.syncEngineListener={},this.queryViewsByQuery=new nY(e=>nV(e),nz),this.queriesByTarget=new Map,this.enqueuedLimboResolutions=new Set,this.activeLimboTargetsByKey=new rf(ea.comparator),this.activeLimboResolutionsByTarget=new Map,this.limboDocumentRefs=new hO,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=l5.forSyncEngine(),this.onlineState="Unknown",this._isPrimaryClient=void 0}get isPrimaryClient(){return!0===this._isPrimaryClient}}function d7(e,t,r,i,n,s,a){let o=new d8(e,t,r,i,n,s);return a&&(o._isPrimaryClient=!0),o}async function pe(e,t,r=!0){let i;let n=pM(e),s=n.queryViewsByQuery.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.computeInitialSnapshot()):i=await pr(n,t,r,!0),i}async function pt(e,t){let r=pM(e);await pr(r,t,!0,!1)}async function pr(e,t,r,i){let n;let s=await uO(e.localStore,nR(t)),a=s.targetId,o=e.sharedClientState.addLocalQueryTarget(a,r);return i&&(n=await pi(e,t,a,"current"===o,s.resumeToken)),e.isPrimaryClient&&r&&de(e.remoteStore,s),n}async function pi(e,t,r,i,n){e.applyDocChanges=(t,r,i)=>pS(e,t,r,i);let s=await uF(e.localStore,t,!0),a=new d3(t,s.remoteKeys),o=a.computeDocChanges(s.documents),l=s5.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==e.onlineState,n),h=a.applyChanges(o,e.isPrimaryClient,l);pv(e,r,h.limboChanges);let u=new d5(t,r,a);return e.queryViewsByQuery.set(t,u),e.queriesByTarget.has(r)?e.queriesByTarget.get(r).push(t):e.queriesByTarget.set(r,[t]),h.snapshot}async function pn(e,t,r){let i=R(e),n=i.queryViewsByQuery.get(t),s=i.queriesByTarget.get(n.targetId);if(s.length>1){i.queriesByTarget.set(n.targetId,s.filter(e=>!nz(e,t))),i.queryViewsByQuery.delete(t);return}i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(n.targetId),i.sharedClientState.isActiveQueryTarget(n.targetId)||await uL(i.localStore,n.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(n.targetId),r&&dt(i.remoteStore,n.targetId),pg(i,n.targetId)}).catch(eU)):(pg(i,n.targetId),await uL(i.localStore,n.targetId,!0))}async function ps(e,t){let r=R(e),i=r.queryViewsByQuery.get(t),n=r.queriesByTarget.get(i.targetId);r.isPrimaryClient&&1===n.length&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),dt(r.remoteStore,i.targetId))}async function pa(e,t,r){let i=pL(e);try{let e=await uS(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),pf(i,e.batchId,r),await pE(i,e.changes),await dy(i.remoteStore)}catch(t){let e=dO(t,"Failed to persist write");r.reject(e)}}async function po(e,t){let r=R(e);try{let e=await uk(r.localStore,t);t.targetChanges.forEach((e,t)=>{let i=r.activeLimboResolutionsByTarget.get(t);i&&(P(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?i.receivedDocument=!0:e.modifiedDocuments.size>0?P(i.receivedDocument,14607):e.removedDocuments.size>0&&(P(i.receivedDocument,42227),i.receivedDocument=!1))}),await pE(r,e,t)}catch(e){await eU(e)}}function pl(e,t,r){let i=R(e);if(i.isPrimaryClient&&0===r||!i.isPrimaryClient&&1===r){let e=[];i.queryViewsByQuery.forEach((r,i)=>{let n=i.view.applyOnlineStateChange(t);n.snapshot&&e.push(n.snapshot)}),dW(i.eventManager,t),e.length&&i.syncEngineListener.onWatchChange(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function ph(e,t,r){let i=R(e);i.sharedClientState.updateQueryState(t,"rejected",r);let n=i.activeLimboResolutionsByTarget.get(t),s=n&&n.key;if(s){let e=new rf(ea.comparator);e=e.insert(s,iB.newNoDocument(s,eE.min()));let r=se().add(s),n=new s6(eE.min(),new Map,new rf($),e,r);await po(i,n),i.activeLimboTargetsByKey=i.activeLimboTargetsByKey.remove(s),i.activeLimboResolutionsByTarget.delete(t),pw(i)}else await uL(i.localStore,t,!1).then(()=>pg(i,t,r)).catch(eU)}async function pu(e,t){let r=R(e),i=t.batch.batchId;try{let e=await uT(r.localStore,t);pm(r,i,null),pd(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),await pE(r,e)}catch(e){await eU(e)}}async function pc(e,t,r){let i=R(e);try{let e=await uA(i.localStore,t);pm(i,t,r),pd(i,t),i.sharedClientState.updateMutationState(t,"rejected",r),await pE(i,e)}catch(e){await eU(e)}}function pd(e,t){(e.pendingWritesCallbacks.get(t)||[]).forEach(e=>{e.resolve()}),e.pendingWritesCallbacks.delete(t)}function pp(e,t){e.pendingWritesCallbacks.forEach(e=>{e.forEach(e=>{e.reject(new O(N.CANCELLED,t))})}),e.pendingWritesCallbacks.clear()}function pf(e,t,r){let i=e.mutationUserCallbacks[e.currentUser.toKey()];i||(i=new rf($)),i=i.insert(t,r),e.mutationUserCallbacks[e.currentUser.toKey()]=i}function pm(e,t,r){let i=R(e),n=i.mutationUserCallbacks[i.currentUser.toKey()];if(n){let e=n.get(t);e&&(r?e.reject(r):e.resolve(),n=n.remove(t)),i.mutationUserCallbacks[i.currentUser.toKey()]=n}}function pg(e,t,r=null){for(let i of(e.sharedClientState.removeLocalQueryTarget(t),e.queriesByTarget.get(t)))e.queryViewsByQuery.delete(i),r&&e.syncEngineListener.onWatchError(i,r);e.queriesByTarget.delete(t),e.isPrimaryClient&&e.limboDocumentRefs.removeReferencesForId(t).forEach(t=>{e.limboDocumentRefs.containsKey(t)||py(e,t)})}function py(e,t){e.enqueuedLimboResolutions.delete(t.path.canonicalString());let r=e.activeLimboTargetsByKey.get(t);null!==r&&(dt(e.remoteStore,r),e.activeLimboTargetsByKey=e.activeLimboTargetsByKey.remove(t),e.activeLimboResolutionsByTarget.delete(r),pw(e))}function pv(e,t,r){for(let i of r)i instanceof d1?(e.limboDocumentRefs.addReference(i.key,t),pb(e,i)):i instanceof d2?(A(d6,"Document no longer in limbo: "+i.key),e.limboDocumentRefs.removeReference(i.key,t),e.limboDocumentRefs.containsKey(i.key)||py(e,i.key)):I(19791,{limboChange:i})}function pb(e,t){let r=t.key,i=r.path.canonicalString();e.activeLimboTargetsByKey.get(r)||e.enqueuedLimboResolutions.has(i)||(A(d6,"New document in limbo: "+r),e.enqueuedLimboResolutions.add(i),pw(e))}function pw(e){for(;e.enqueuedLimboResolutions.size>0&&e.activeLimboTargetsByKey.size<e.maxConcurrentLimboResolutions;){let t=e.enqueuedLimboResolutions.values().next().value;e.enqueuedLimboResolutions.delete(t);let r=new ea(ei.fromString(t)),i=e.limboTargetIdGenerator.next();e.activeLimboResolutionsByTarget.set(i,new d9(r)),e.activeLimboTargetsByKey=e.activeLimboTargetsByKey.insert(r,i),de(e.remoteStore,new ob(nR(nA(r.path)),i,"TargetPurposeLimboResolution",e6.INVALID))}}async function pE(e,t,r){let i=R(e),n=[],s=[],a=[];i.queryViewsByQuery.isEmpty()||(i.queryViewsByQuery.forEach((e,o)=>{a.push(i.applyDocChanges(o,t,r).then(e=>{var t;if((e||r)&&i.isPrimaryClient){let n=e?!e.fromCache:null===(t=null==r?void 0:r.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;i.sharedClientState.updateQueryState(o.targetId,n?"current":"not-current")}if(e){n.push(e);let t=dJ.fromSnapshot(o.targetId,e);s.push(t)}}))}),await Promise.all(a),i.syncEngineListener.onWatchChange(n),await uP(i.localStore,s))}async function pS(e,t,r,i){let n=t.view.computeDocChanges(r);n.needsRefill&&(n=await uF(e.localStore,t.query,!1).then(({documents:e})=>t.view.computeDocChanges(e,n)));let s=i&&i.targetChanges.get(t.targetId),a=i&&null!=i.targetMismatches.get(t.targetId),o=t.view.applyChanges(n,e.isPrimaryClient,s,a);return pv(e,t.targetId,o.limboChanges),o.snapshot}async function pT(e,t){let r=R(e);if(!r.currentUser.isEqual(t)){A(d6,"User change. New user:",t.toKey());let e=await uE(r.localStore,t);r.currentUser=t,pp(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await pE(r,e.affectedDocuments)}}function pC(e,t){let r=R(e),i=r.activeLimboResolutionsByTarget.get(t);if(i&&i.receivedDocument)return se().add(i.key);{let e=se(),i=r.queriesByTarget.get(t);if(!i)return e;for(let t of i){let i=r.queryViewsByQuery.get(t);e=e.unionWith(i.view.syncedDocuments)}return e}}async function pA(e,t){let r=R(e),i=await uF(r.localStore,t.query,!0),n=t.view.synchronizeWithPersistedState(i);return r.isPrimaryClient&&pv(r,t.targetId,n.limboChanges),n}async function p_(e,t){let r=R(e);return uG(r.localStore,t).then(e=>pE(r,e))}async function px(e,t,r,i){let n=R(e),s=await uU(n.localStore,t);if(null===s){A(d6,"Cannot apply mutation batch with id: "+t);return}"pending"===r?await dy(n.remoteStore):"acknowledged"===r||"rejected"===r?(pm(n,t,i||null),pd(n,t),uz(n.localStore,t)):I(6720,"Unknown batchState",{batchState:r}),await pE(n,s)}async function pk(e,t){let r=R(e);if(pM(r),pL(r),!0===t&&!0!==r._isPrimaryClient){let e=r.sharedClientState.getAllActiveQueryTargets(),t=await pD(r,e.toArray());for(let e of(r._isPrimaryClient=!0,await dI(r.remoteStore,!0),t))de(r.remoteStore,e)}else if(!1===t&&!1!==r._isPrimaryClient){let e=[],t=Promise.resolve();r.queriesByTarget.forEach((i,n)=>{r.sharedClientState.isLocalQueryTarget(n)?e.push(n):t=t.then(()=>(pg(r,n),uL(r.localStore,n,!0))),dt(r.remoteStore,n)}),await t,await pD(r,e),pI(r),r._isPrimaryClient=!1,await dI(r.remoteStore,!1)}}function pI(e){let t=R(e);t.activeLimboResolutionsByTarget.forEach((e,r)=>{dt(t.remoteStore,r)}),t.limboDocumentRefs.removeAllReferences(),t.activeLimboResolutionsByTarget=new Map,t.activeLimboTargetsByKey=new rf(ea.comparator)}async function pD(e,t,r){let i=R(e),n=[],s=[];for(let e of t){let t;let r=i.queriesByTarget.get(e);if(r&&0!==r.length)for(let e of(t=await uO(i.localStore,nR(r[0])),r)){let t=i.queryViewsByQuery.get(e),r=await pA(i,t);r.snapshot&&s.push(r.snapshot)}else{let r=await uj(i.localStore,e);t=await uO(i.localStore,r),await pi(i,pP(r),e,!1,t.resumeToken)}n.push(t)}return i.syncEngineListener.onWatchChange(s),n}function pP(e){return nC(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function pR(e){return uV(R(e).localStore)}async function pN(e,t,r,i){let n=R(e);if(n._isPrimaryClient){A(d6,"Ignoring unexpected query state notification.");return}let s=n.queriesByTarget.get(t);if(s&&s.length>0)switch(r){case"current":case"not-current":{let e=await uG(n.localStore,nQ(s[0])),i=s6.createSynthesizedRemoteEventForCurrentChange(t,"current"===r,rA.EMPTY_BYTE_STRING);await pE(n,e,i);break}case"rejected":await uL(n.localStore,t,!0),pg(n,t,i);break;default:I(64155,r)}}async function pO(e,t,r){let i=pM(e);if(i._isPrimaryClient){for(let e of t){if(i.queriesByTarget.has(e)&&i.sharedClientState.isActiveQueryTarget(e)){A(d6,"Adding an already active target "+e);continue}let t=await uj(i.localStore,e),r=await uO(i.localStore,t);await pi(i,pP(t),r.targetId,!1,r.resumeToken),de(i.remoteStore,r)}for(let e of r)i.queriesByTarget.has(e)&&await uL(i.localStore,e,!1).then(()=>{dt(i.remoteStore,e),pg(i,e)}).catch(eU)}}function pM(e){let t=R(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=po.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=pC.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ph.bind(null,t),t.syncEngineListener.onWatchChange=dq.bind(null,t.eventManager),t.syncEngineListener.onWatchError=dH.bind(null,t.eventManager),t}function pL(e){let t=R(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pu.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=pc.bind(null,t),t}function pF(e,t,r){let i=R(e);pB(i,t,r).then(e=>{i.sharedClientState.notifyBundleLoaded(e)})}async function pB(e,t,r){try{let i=await t.getMetadata();if(await uK(e.localStore,i))return await t.close(),r._completeWith(d0(i)),Promise.resolve(new Set);r._updateProgress(dZ(i));let n=new dX(i,t.serializer),s=await t.nextElement();for(;s;){let e=await n.addSizedElement(s);e&&r._updateProgress(e),s=await t.nextElement()}let a=await n.completeAndStoreAsync(e.localStore);return await pE(e,a.changedDocs,void 0),await uQ(e.localStore,i),r._completeWith(a.progress),Promise.resolve(a.changedCollectionGroups)}catch(e){return x(d6,`Loading bundle failed with ${e}`),r._failWith(e),Promise.resolve(new Set)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pU{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cN(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return uw(this.persistence,new u1,e.initialUser,this.serializer)}createPersistence(e){return new hq(hW.factory,this.serializer)}createSharedClientState(e){return new cd}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}pU.provider={build:()=>new pU};class pz extends pU{constructor(e){super(),this.cacheSizeBytes=e}createGarbageCollectionScheduler(e,t){return P(this.persistence.referenceDelegate instanceof hK,46915),new hc(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createPersistence(e){let t=void 0!==this.cacheSizeBytes?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new hq(e=>hK.factory(e,t),this.serializer)}}class pV extends pU{constructor(e,t,r){super(),this.onlineComponentProvider=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.onlineComponentProvider.initialize(this,e),await pL(this.onlineComponentProvider.syncEngine),await dy(this.onlineComponentProvider.remoteStore),await this.persistence.setPrimaryStateListener(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return uw(this.persistence,new u1,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new hc(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){let r=new e4(t,this.persistence);return new e3(e.asyncQueue,r)}createPersistence(e){let t=uf(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?hn.withCacheSize(this.cacheSizeBytes):hn.DEFAULT;return new uc(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,cP(),cR(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new cd}}class pj{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>pl(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=pT.bind(null,this.syncEngine),await dI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return dU()}createDatastore(e){let t=cN(e.databaseInfo.databaseId),r=cI(e.databaseInfo);return cK(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return c5(this.localStore,this.datastore,e.asyncQueue,e=>pl(this.syncEngine,e,0),cD())}createSyncEngine(e,t){return d7(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await c7(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}pj.provider={build:()=>new pj};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pG=10240;function pq(e,t=pG){let r=0;return{async read(){if(r<e.byteLength){let i={value:e.slice(r,r+t),done:!1};return r+=t,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pH(e,t){if(!(e instanceof Uint8Array))throw new O(N.INVALID_ARGUMENT,`NodePlatform.toByteStreamReader expects source to be Uint8Array, got ${ed(e)}`);return pq(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pW{constructor(e){this.observer=e,this.muted=!1}next(e){!this.muted&&this.observer.next&&this.scheduleEvent(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.scheduleEvent(this.observer.error,e):_("Uncaught Error in snapshot listener:",e.toString()))}mute(){this.muted=!0}scheduleEvent(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pK{constructor(e,t){this.payload=e,this.byteLength=t}isBundleMetadata(){return"metadata"in this.payload}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pQ{constructor(e,t){this.reader=e,this.serializer=t,this.metadata=new M,this.buffer=new Uint8Array,this.textDecoder=K(),this.nextElementImpl().then(e=>{e&&e.isBundleMetadata()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.reader.cancel()}async getMetadata(){return this.metadata.promise}async nextElement(){return await this.getMetadata(),this.nextElementImpl()}async nextElementImpl(){let e=await this.readLength();if(null===e)return null;let t=this.textDecoder.decode(e),r=Number(t);return isNaN(r)&&this.raiseError(`length string (${t}) is not valid number`),new pK(JSON.parse(await this.readJsonString(r)),e.length+r)}indexOfOpenBracket(){return this.buffer.findIndex(e=>123===e)}async readLength(){for(;0>this.indexOfOpenBracket()&&!await this.pullMoreDataToBuffer(););if(0===this.buffer.length)return null;let e=this.indexOfOpenBracket();e<0&&this.raiseError("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async readJsonString(e){for(;this.buffer.length<e;)await this.pullMoreDataToBuffer()&&this.raiseError("Reached the end of bundle when more is expected.");let t=this.textDecoder.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}raiseError(e){throw this.reader.cancel(),Error(`Invalid bundle format: ${e}`)}async pullMoreDataToBuffer(){let e=await this.reader.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}function p$(e,t){return new pQ(e,t)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pJ{constructor(e,t){this.bundleData=e,this.serializer=t,this.cursor=0,this.elements=[];let r=this.nextElement();if(r&&r.isBundleMetadata())this.metadata=r;else throw Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(null==r?void 0:r.payload)}`);do null!==(r=this.nextElement())&&this.elements.push(r);while(null!==r)}getMetadata(){return this.metadata}getElements(){return this.elements}nextElement(){if(this.cursor===this.bundleData.length)return null;let e=this.readLength();return new pK(JSON.parse(this.readJsonString(e)),e)}readJsonString(e){if(this.cursor+e>this.bundleData.length)throw new O(N.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}readLength(){let e=this.cursor,t=this.cursor;for(;t<this.bundleData.length;){if("{"===this.bundleData[t]){if(t===e)throw Error("First character is a bracket and not a number");return this.cursor=t,Number(this.bundleData.slice(e,t))}t++}throw Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pY{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new O(N.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=await c$(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new sV(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{let r=ea.fromPath(t);this.mutations.push(new sq(r,this.precondition(r)))}),await cQ(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else if(e.isNoDocument())t=eE.min();else throw I(50498,{documentName:e.constructor.name});let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new O(N.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return this.writtenDocs.has(e.toString())||!t?sC.none():t.isEqual(eE.min())?sC.exists(!1):sC.updateTime(t)}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(this.writtenDocs.has(e.toString())||!t)return sC.exists(!0);if(t.isEqual(eE.min()))throw new O(N.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return sC.updateTime(t)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pX="FirestoreClient",pZ=100,p0=11,p1=20,p2=22;class p3{constructor(e,t,r,i,n){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=b.UNAUTHENTICATED,this.clientId=Q.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=n,this.authCredentials.start(r,async e=>{A(pX,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(r,e=>(A(pX,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:pZ}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new M;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){let t=dO(r,"Failed to shutdown persistence");e.reject(t)}}),e.promise}}async function p4(e,t){e.asyncQueue.verifyOperationInProgress(),A(pX,"Initializing OfflineComponentProvider");let r=e.configuration;await t.initialize(r);let i=r.initialUser;e.setCredentialChangeListener(async e=>{i.isEqual(e)||(await uE(t.localStore,e),i=e)}),t.persistence.setDatabaseDeletedListener(()=>{x("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{A("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(e=>{x("Terminating Firestore due to IndexedDb database deletion failed",e)})}),e._offlineComponents=t}async function p6(e,t){e.asyncQueue.verifyOperationInProgress();let r=await p9(e);A(pX,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(e=>dk(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,r)=>dk(t.remoteStore,r)),e._onlineComponents=t}function p5(e){return"FirebaseError"===e.name?e.code===N.FAILED_PRECONDITION||e.code===N.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||e.code===p2||e.code===p1||e.code===p0}async function p9(e){if(!e._offlineComponents){if(e._uninitializedComponentsProvider){A(pX,"Using user provided OfflineComponentProvider");try{await p4(e,e._uninitializedComponentsProvider._offline)}catch(r){let t=r;if(!p5(t))throw t;x("Error using user provided cache. Falling back to memory cache: "+t),await p4(e,new pU)}}else A(pX,"Using default OfflineComponentProvider"),await p4(e,new pz(void 0))}return e._offlineComponents}async function p8(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(A(pX,"Using user provided OnlineComponentProvider"),await p6(e,e._uninitializedComponentsProvider._online)):(A(pX,"Using default OnlineComponentProvider"),await p6(e,new pj))),e._onlineComponents}function p7(e){return p9(e).then(e=>e.localStore)}function fe(e){return p8(e).then(e=>e.syncEngine)}function ft(e){return p8(e).then(e=>e.datastore)}async function fr(e){let t=await p8(e),r=t.eventManager;return r.onListen=pe.bind(null,t.syncEngine),r.onUnlisten=pn.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=pt.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=ps.bind(null,t.syncEngine),r}function fi(e,t,r,i){let n=new pW(i),s=new d$(t,n,r);return e.asyncQueue.enqueueAndForget(async()=>dj(await fr(e),s)),()=>{n.mute(),e.asyncQueue.enqueueAndForget(async()=>dG(await fr(e),s))}}function fn(e,t,r={}){let i=new M;return e.asyncQueue.enqueueAndForget(async()=>fo(await fr(e),e.asyncQueue,t,r,i)),i.promise}function fs(e,t,r={}){let i=new M;return e.asyncQueue.enqueueAndForget(async()=>fl(await fr(e),e.asyncQueue,t,r,i)),i.promise}function fa(e,t){let r=new M;return e.asyncQueue.enqueueAndForget(async()=>pa(await fe(e),t,r)),r.promise}function fo(e,t,r,i,n){let s=new pW({next:o=>{s.mute(),t.enqueueAndForget(()=>dG(e,a));let l=o.docs.has(r);!l&&o.fromCache?n.reject(new O(N.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&i&&"server"===i.source?n.reject(new O(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):n.resolve(o)},error:e=>n.reject(e)}),a=new d$(nA(r.path),s,{includeMetadataChanges:!0,waitForSyncWhenOnline:!0});return dj(e,a)}function fl(e,t,r,i,n){let s=new pW({next:r=>{s.mute(),t.enqueueAndForget(()=>dG(e,a)),r.fromCache&&"server"===i.source?n.reject(new O(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):n.resolve(r)},error:e=>n.reject(e)}),a=new d$(r,s,{includeMetadataChanges:!0,waitForSyncWhenOnline:!0});return dj(e,a)}function fh(e,t,r,i){let n=fc(r,cN(t));e.asyncQueue.enqueueAndForget(async()=>{pF(await fe(e),n,i)})}function fu(e,t){return e.asyncQueue.enqueue(async()=>u$(await p7(e),t))}function fc(e,t){let r;return p$(pH(r="string"==typeof e?W().encode(e):e),t)}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(e,t){return e.timeoutSeconds===t.timeoutSeconds}function fp(e){let t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ff="ComponentProvider",fm=new Map;function fg(e){let t=fm.get(e);t&&(A(ff,"Removing Datastore"),fm.delete(e),t.terminate())}function fy(e,t,r,i){return new rz(e,t,r,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,fp(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fv="firestore.googleapis.com",fb=!0,fw=5,fE=30,fS=!0;class fT{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new O(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fv,this.ssl=fb}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:fb;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=hi;else{if(e.cacheSizeBytes!==hr&&e.cacheSizeBytes<ha)throw new O(N.INVALID_ARGUMENT,`cacheSizeBytes must be at least ${ha}`);this.cacheSizeBytes=e.cacheSizeBytes}el("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=fS:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fp(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),fC(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&fd(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}function fC(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<fw)throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is ${fw})`);if(e.timeoutSeconds>fE)throw new O(N.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is ${fE})`)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new O(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fT(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=q(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return fg(this),Promise.resolve()}}function f_(e,t,r,i={}){var n;e=ef(e,fA);let s=(0,c.Xx)(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),l=`${t}:${r}`;s&&((0,c.Uo)(`https://${l}`),(0,c.dp)("Firestore",!0)),a.host!==fv&&a.host!==l&&x("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let h=Object.assign(Object.assign({},a),{host:l,ssl:s,emulatorOptions:i});if(!(0,c.vZ)(h,o)&&(e._setSettings(h),i.mockUserToken)){let t,r;if("string"==typeof i.mockUserToken)t=i.mockUserToken,r=b.MOCK_USER;else{t=(0,c.Sg)(i.mockUserToken,null===(n=e._app)||void 0===n?void 0:n.options.projectId);let s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new O(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");r=new b(s)}e._authCredentials=new B(new L(t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fx(this.firestore,e,this._query)}}class fk{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fI(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new fk(this.firestore,e,this._key)}toJSON(){return{type:fk._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(ey(t,fk._jsonSchema))return new fk(e,r||null,new ea(ei.fromString(t.referencePath)))}}fk._jsonSchemaVersion="firestore/documentReference/1.0",fk._jsonSchema={type:eg("string",fk._jsonSchemaVersion),referencePath:eg("string")};class fI extends fx{constructor(e,t,r){super(e,t,nA(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new fk(this.firestore,null,new ea(e))}withConverter(e){return new fI(this.firestore,e,this._path)}}function fD(e,t,...r){if(e=(0,c.m9)(e),eo("collection","path",t),e instanceof fA){let i=ei.fromString(t,...r);return eu(i),new fI(e,null,i)}{if(!(e instanceof fk)&&!(e instanceof fI))throw new O(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=e._path.child(ei.fromString(t,...r));return eu(i),new fI(e.firestore,null,i)}}function fP(e,t,...r){if(e=(0,c.m9)(e),1==arguments.length&&(t=Q.newId()),eo("doc","path",t),e instanceof fA){let i=ei.fromString(t,...r);return eh(i),new fk(e,null,new ea(i))}{if(!(e instanceof fk)&&!(e instanceof fI))throw new O(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=e._path.child(ei.fromString(t,...r));return eh(i),new fk(e.firestore,e instanceof fI?e.converter:null,new ea(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fR="AsyncQueue";class fN{constructor(e=Promise.resolve()){this.retryableOps=[],this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.skipNonRestrictedTasks=!1,this.timerIdsToSkip=[],this.backoff=new cB(this,"async_queue_retry"),this.visibilityHandler=()=>{this.backoff.skipBackoff()},this.tail=e}get isShuttingDown(){return this._isShuttingDown}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.verifyNotFailed(),this.enqueueInternal(e)}enterRestrictedMode(e){this._isShuttingDown||(this._isShuttingDown=!0,this.skipNonRestrictedTasks=e||!1)}enqueue(e){if(this.verifyNotFailed(),this._isShuttingDown)return new Promise(()=>{});let t=new M;return this.enqueueInternal(()=>this._isShuttingDown&&this.skipNonRestrictedTasks?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.retryableOps.push(e),this.retryNextOp()))}async retryNextOp(){if(0!==this.retryableOps.length){try{await this.retryableOps[0](),this.retryableOps.shift(),this.backoff.reset()}catch(e){if(eQ(e))A(fR,"Operation failed with retryable error: "+e);else throw e}this.retryableOps.length>0&&this.backoff.backoffAndRun(()=>this.retryNextOp())}}enqueueInternal(e){let t=this.tail.then(()=>(this.operationInProgress=!0,e().catch(e=>{throw this.failure=e,this.operationInProgress=!1,_("INTERNAL UNHANDLED ERROR: ",fO(e)),e}).then(e=>(this.operationInProgress=!1,e))));return this.tail=t,t}enqueueAfterDelay(e,t,r){this.verifyNotFailed(),this.timerIdsToSkip.indexOf(e)>-1&&(t=0);let i=dN.createAndSchedule(this,e,t,r,e=>this.removeDelayedOperation(e));return this.delayedOperations.push(i),i}verifyNotFailed(){this.failure&&I(47125,{messageOrStack:fO(this.failure)})}verifyOperationInProgress(){}async drain(){let e;do e=this.tail,await e;while(e!==this.tail)}containsDelayedOperation(e){for(let t of this.delayedOperations)if(t.timerId===e)return!0;return!1}runAllDelayedOperationsUntil(e){return this.drain().then(()=>{for(let t of(this.delayedOperations.sort((e,t)=>e.targetTimeMs-t.targetTimeMs),this.delayedOperations))if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.drain()})}skipDelaysForTimerId(e){this.timerIdsToSkip.push(e)}removeDelayedOperation(e){let t=this.delayedOperations.indexOf(e);this.delayedOperations.splice(t,1)}}function fO(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fM{constructor(){this._progressObserver={},this._taskCompletionResolver=new M,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class fL extends fA{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new fN,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new fN(e),this._firestoreClient=void 0,await e}}}function fF(e,t){let r="object"==typeof e?e:(0,o.Mq)(),i="string"==typeof e?e:t||rV,n=(0,o.qX)(r,"firestore").getImmediate({identifier:i});if(!n._initialized){let e=(0,c.P0)("firestore");e&&f_(n,...e)}return n}function fB(e){if(e._terminated)throw new O(N.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||fU(e),e._firestoreClient}function fU(e){var t,r,i;let n=e._freezeSettings(),s=fy(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);!e._componentsProvider&&(null===(r=n.localCache)||void 0===r?void 0:r._offlineComponentProvider)&&(null===(i=n.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(e._componentsProvider={_offline:n.localCache._offlineComponentProvider,_online:n.localCache._onlineComponentProvider}),e._firestoreClient=new p3(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&fz(e._componentsProvider))}function fz(e){let t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(e,t=!0){E(o.Jn),(0,o.Xd)(new l.wA("firestore",(e,{instanceIdentifier:r,options:i})=>{let n=e.getProvider("app").getImmediate(),s=new fL(new U(e.getProvider("auth-internal")),new G(n,e.getProvider("app-check-internal")),rG(n,r),n);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s},"PUBLIC").setMultipleInstances(!0)),(0,o.KN)(y,v,e),(0,o.KN)(y,v,"esm2017")}class fj{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fG{constructor(e){this._byteString=e}static fromBase64String(e){try{return new fG(rA.fromBase64String(e))}catch(e){throw new O(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new fG(rA.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:fG._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ey(e,fG._jsonSchema))return fG.fromBase64String(e.bytes)}}fG._jsonSchemaVersion="firestore/bytes/1.0",fG._jsonSchema={type:eg("string",fG._jsonSchemaVersion),bytes:eg("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fq{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new O(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new es(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fH{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fW{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return $(this._lat,e._lat)||$(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fW._jsonSchemaVersion}}static fromJSON(e){if(ey(e,fW._jsonSchema))return new fW(e.latitude,e.longitude)}}fW._jsonSchemaVersion="firestore/geoPoint/1.0",fW._jsonSchema={type:eg("string",fW._jsonSchemaVersion),latitude:eg("number"),longitude:eg("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fK{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return ug(this._values,e._values)}toJSON(){return{type:fK._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ey(e,fK._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new fK(e.vectorValues);throw new O(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}fK._jsonSchemaVersion="firestore/vectorValue/1.0",fK._jsonSchema={type:eg("string",fK._jsonSchemaVersion),vectorValues:eg("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fQ=/^__.*__$/;class f${constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new sM(e,this.data,this.fieldMask,t,this.fieldTransforms):new sR(e,this.data,t,this.fieldTransforms)}}class fJ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new sM(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fY(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw I(40011,{dataSource:e})}}class fX{constructor(e,t,r,i,n,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===n&&this.validatePath(),this.fieldTransforms=n||[],this.fieldMask=s||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new fX(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var t;let r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var t;let r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.contextWith({path:r,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return md(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(fY(this.dataSource)&&fQ.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class fZ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||cN(e)}createContext(e,t,r,i=!1){return new fX({dataSource:e,methodName:t,targetDoc:r,path:es.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function f0(e){let t=e._freezeSettings(),r=cN(e._databaseId);return new fZ(e._databaseId,!!t.ignoreUndefinedProperties,r)}function f1(e,t,r,i,n,s={}){let a,o;let l=e.createContext(s.merge||s.mergeFields?2:0,t,r,n);ml("Data must be an object, but it was:",l,i);let h=mr(i,l);if(s.merge)a=new rS(l.fieldMask),o=l.fieldTransforms;else if(s.mergeFields){let e=[];for(let i of s.mergeFields){let n=mh(t,i,r);if(!l.contains(n))throw new O(N.INVALID_ARGUMENT,`Field '${n}' is specified in your field mask but missing from your input data.`);mp(e,n)||e.push(n)}a=new rS(e),o=l.fieldTransforms.filter(e=>a.covers(e.field))}else a=null,o=l.fieldTransforms;return new f$(new iL(h),a,o)}class f2 extends fH{_toFieldTransform(e){if(2===e.dataSource)e.fieldMask.push(e.path);else if(1===e.dataSource)throw e.createError(`${this._methodName}() can only appear at the top level of your update data`);else throw e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return null}isEqual(e){return e instanceof f2}}function f3(e,t,r){return new fX({dataSource:3,targetDoc:t.settings.targetDoc,methodName:e._methodName,arrayElement:r},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class f4 extends fH{_toFieldTransform(e){return new sw(e.path,new sc)}isEqual(e){return e instanceof f4}}class f6 extends fH{constructor(e,t){super(e),this._elements=t}_toFieldTransform(e){let t=f3(this,e,!0),r=new sd(this._elements.map(e=>mt(e,t)));return new sw(e.path,r)}isEqual(e){return e instanceof f6&&(0,c.vZ)(this._elements,e._elements)}}class f5 extends fH{constructor(e,t){super(e),this._elements=t}_toFieldTransform(e){let t=f3(this,e,!0),r=new sf(this._elements.map(e=>mt(e,t)));return new sw(e.path,r)}isEqual(e){return e instanceof f5&&(0,c.vZ)(this._elements,e._elements)}}class f9 extends fH{constructor(e,t){super(e),this._operand=t}_toFieldTransform(e){let t=new sg(e.serializer,ss(e.serializer,this._operand));return new sw(e.path,t)}isEqual(e){return e instanceof f9&&this._operand===e._operand}}function f8(e,t,r,i){let n=e.createContext(1,t,r);ml("Data must be an object, but it was:",n,i);let s=[],a=iL.empty();return rd(i,(e,i)=>{let o=mc(t,e,r);i=(0,c.m9)(i);let l=n.childContextForFieldPath(o);if(i instanceof f2)s.push(o);else{let e=mt(i,l);null!=e&&(s.push(o),a.set(o,e))}}),new fJ(a,new rS(s),n.fieldTransforms)}function f7(e,t,r,i,n,s){let a=e.createContext(1,t,r),o=[mh(t,i,r)],l=[n];if(s.length%2!=0)throw new O(N.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)o.push(mh(t,s[e])),l.push(s[e+1]);let h=[],u=iL.empty();for(let e=o.length-1;e>=0;--e)if(!mp(h,o[e])){let t=o[e],r=l[e];r=(0,c.m9)(r);let i=a.childContextForFieldPath(t);if(r instanceof f2)h.push(t);else{let e=mt(r,i);null!=e&&(h.push(t),u.set(t,e))}}return new fJ(u,new rS(h),a.fieldTransforms)}function me(e,t,r,i=!1){return mt(r,e.createContext(i?4:3,t))}function mt(e,t){if(mo(e=(0,c.m9)(e)))return ml("Unsupported field value:",t,e),mr(e,t);if(e instanceof fH)return mn(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),!(e instanceof Array))return ms(e,t);if(t.settings.arrayElement&&4!==t.dataSource)throw t.createError("Nested arrays are not supported");return mi(e,t)}function mr(e,t){let r={};return rp(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):rd(e,(e,i)=>{let n=mt(i,t.childContextForField(e));null!=n&&(r[e]=n)}),{mapValue:{fields:r}}}function mi(e,t){let r=[],i=0;for(let n of e){let e=mt(n,t.childContextForArray(i));null==e&&(e={nullValue:"NULL_VALUE"}),r.push(e),i++}return{arrayValue:{values:r}}}function mn(e,t){if(!fY(t.dataSource))throw t.createError(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.createError(`${e._methodName}() is not currently supported inside arrays`);let r=e._toFieldTransform(t);r&&t.fieldTransforms.push(r)}function ms(e,t){if(null===(e=(0,c.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ss(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){let r=ew.fromDate(e);return{timestampValue:ap(t.serializer,r)}}if(e instanceof ew){let r=new ew(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ap(t.serializer,r)}}if(e instanceof fW)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};else if(e instanceof fG)return{bytesValue:am(t.serializer,e._byteString)};else if(e instanceof fk){let r=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(r))throw t.createError(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:ab(e.firestore._databaseId||t.databaseId,e._key.path)}}else if(e instanceof fK)return ma(e,t);else throw t.createError(`Unsupported field value: ${ed(e)}`)}function ma(e,t){return{mapValue:{fields:{[rQ]:{stringValue:rY},[rX]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.createError("VectorValues must only contain numeric values.");return si(t.serializer,e)})}}}}}}function mo(e){return"object"==typeof e&&null!==e&&!(e instanceof Array)&&!(e instanceof Date)&&!(e instanceof ew)&&!(e instanceof fW)&&!(e instanceof fG)&&!(e instanceof fk)&&!(e instanceof fH)&&!(e instanceof fK)}function ml(e,t,r){if(!mo(r)||!ec(r)){let i=ed(r);if("an object"===i)throw t.createError(e+" a custom object");throw t.createError(e+" "+i)}}function mh(e,t,r){if((t=(0,c.m9)(t))instanceof fq)return t._internalPath;if("string"==typeof t)return mc(e,t);throw md("Field path arguments must be of type string or ",e,!1,void 0,r)}let mu=RegExp("[~\\*/\\[\\]]");function mc(e,t,r){if(t.search(mu)>=0)throw md(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new fq(...t.split("."))._internalPath}catch(i){throw md(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function md(e,t,r,i,n){let s=i&&!i.isEmpty(),a=void 0!==n,o=`Function ${t}() called with invalid data`;r&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=` in field ${i}`),a&&(l+=` in document ${n}`),l+=")"),new O(N.INVALID_ARGUMENT,o+e+l)}function mp(e,t){return e.some(e=>e.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,t,r,i,n){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=n}get id(){return this._key.path.lastSegment()}get ref(){return new fk(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(!this._converter)return this._userDataWriter.convertValue(this._document.data.value);{let e=new mm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}}}get(e){if(this._document){let t=this._document.data.field(mg("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class mm extends mf{data(){return super.data()}}function mg(e,t){return"string"==typeof t?mc(e,t):t instanceof fq?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new O(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mv{}class mb extends mv{}function mw(e,t,...r){let i=[];for(let n of(t instanceof mv&&i.push(t),mU(i=i.concat(r)),i))e=n._apply(e);return e}class mE extends mb{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new mE(e,t,r)}_apply(e){let t=this._parse(e);return mL(e._query,t),new fx(e.firestore,e.converter,nM(e._query,t))}_parse(e){let t=f0(e.firestore);return mI(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class mS extends mv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new mS(e,t)}_parse(e){let t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:iY.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return 0===t.getFilters().length?e:(mF(e._query,t),new fx(e.firestore,e.converter,nM(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class mT extends mb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new mT(e,t)}_apply(e){let t=mD(e._query,this._field,this._direction);return new fx(e.firestore,e.converter,nL(e._query,t))}}class mC extends mb{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new mC(e,t,r)}_apply(e){return new fx(e.firestore,e.converter,nF(e._query,this._limit,this._limitType))}}function mA(e){return em("limit",e),mC._create("limit",e,"F")}class m_ extends mb{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new m_(e,t,r)}_apply(e){let t=mk(e,this.type,this._docOrFields,this._inclusive);return new fx(e.firestore,e.converter,nB(e._query,t))}}class mx extends mb{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new mx(e,t,r)}_apply(e){let t=mk(e,this.type,this._docOrFields,this._inclusive);return new fx(e.firestore,e.converter,nU(e._query,t))}}function mk(e,t,r,i){if(r[0]=(0,c.m9)(r[0]),r[0]instanceof mf)return mP(e._query,e.firestore._databaseId,t,r[0]._document,i);{let n=f0(e.firestore);return mR(e._query,e.firestore._databaseId,n,t,r,i)}}function mI(e,t,r,i,n,s,a){let o;if(n.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new O(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){mO(a,s);let t=[];for(let r of a)t.push(mN(i,e,r));o={arrayValue:{values:t}}}else o=mN(i,e,a)}else("in"===s||"not-in"===s||"array-contains-any"===s)&&mO(a,s),o=me(r,t,a,"in"===s||"not-in"===s);return iJ.create(n,s,o)}function mD(e,t,r){if(null!==e.startAt)throw new O(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new O(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new iH(t,r)}function mP(e,t,r,i,n){if(!i)throw new O(N.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${r}().`);let s=[];for(let r of nP(e))if(r.field.isKeyField())s.push(iw(t,i.key));else{let e=i.data.field(r.field);if(rL(e))throw new O(N.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+r.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null!==e)s.push(e);else{let e=r.field.canonicalString();throw new O(N.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}}return new iz(s,n)}function mR(e,t,r,i,n,s){let a=e.explicitOrderBy;if(n.length>a.length)throw new O(N.INVALID_ARGUMENT,`Too many arguments provided to ${i}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let o=[];for(let s=0;s<n.length;s++){let l=n[s];if(a[s].field.isKeyField()){if("string"!=typeof l)throw new O(N.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${i}(), but got a ${typeof l}`);if(!nD(e)&&-1!==l.indexOf("/"))throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${i}() must be a plain document ID, but '${l}' contains a slash.`);let r=e.path.child(ei.fromString(l));if(!ea.isDocumentKey(r))throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${i}() must result in a valid document path, but '${r}' is not because it contains an odd number of segments.`);let n=new ea(r);o.push(iw(t,n))}else{let e=me(r,i,l);o.push(e)}}return new iz(o,s)}function mN(e,t,r){if("string"==typeof(r=(0,c.m9)(r))){if(""===r)throw new O(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nD(t)&&-1!==r.indexOf("/"))throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);let i=t.path.child(ei.fromString(r));if(!ea.isDocumentKey(i))throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return iw(e,new ea(i))}if(r instanceof fk)return iw(e,r._key);throw new O(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ed(r)}.`)}function mO(e,t){if(!Array.isArray(e)||0===e.length)throw new O(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function mM(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}function mL(e,t){let r=mB(e.filters,mM(t.op));if(null!==r){if(r===t.op)throw new O(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`);throw new O(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}}function mF(e,t){let r=e;for(let e of t.getFlattenedFilters())mL(r,e),r=nM(r,e)}function mB(e,t){for(let r of e)for(let e of r.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}function mU(e){let t=e.filter(e=>e instanceof mS).length,r=e.filter(e=>e instanceof mE).length;if(t>1||t>0&&r>0)throw new O(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{convertValue(e,t="none"){switch(r0(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rD(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rP(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw I(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return rd(e,(e,i)=>{r[e]=this.convertValue(i,t)}),r}convertVectorValue(e){var t,r,i;return new fK(null===(i=null===(r=null===(t=e.fields)||void 0===t?void 0:t[rX].arrayValue)||void 0===r?void 0:r.values)||void 0===i?void 0:i.map(e=>rD(e.doubleValue)))}convertGeoPoint(e){return new fW(rD(e.latitude),rD(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=rB(e);if(null==r)return null;return this.convertValue(r,t);case"estimate":return this.convertTimestamp(rU(e));default:return null}}convertTimestamp(e){let t=rI(e);return new ew(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=ei.fromString(e);P(ov(r),9688,{name:e});let i=new rj(r.get(1),r.get(3)),n=new ea(r.popFirst(5));return i.isEqual(t)||_(`Document ${n} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),n}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mV(e,t,r){return e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t}class mj extends mz{constructor(e){super(),this.firestore=e}convertBytes(e){return new fG(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new fk(this.firestore,null,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mG(e){return mq(e,["next","error","complete"])}function mq(e,t){if("object"!=typeof e||null===e)return!1;let r=e;for(let e of t)if(e in r&&"function"==typeof r[e])return!0;return!1}let mH=W();function mW(e){let t=JSON.stringify(e),r=mH.encode(t).byteLength;return`${r}${t}`}mW({metadata:{id:"test-bundle",createTime:{seconds:1577836805,nanos:6},version:1,totalDocuments:1,totalBytes:416}}),mW({documentMetadata:{name:"projects/test-project/databases/(default)/documents/collectionId/doc1",readTime:{seconds:5,nanos:6},exists:!0}}),mW({document:{name:"projects/test-project/databases/(default)/documents/collectionId/doc1",createTime:{seconds:1,nanos:2e6},updateTime:{seconds:3,nanos:4e3},fields:{foo:{stringValue:"value"},bar:{integerValue:-42}}}}),mW({documentMetadata:{name:"projects/test-project/databases/(default)/documents/collectionId/doc2",readTime:{seconds:5,nanos:6},exists:!0}}),mW({document:{name:"projects/test-project/databases/(default)/documents/collectionId/doc2",createTime:{seconds:1,nanos:2e6},updateTime:{seconds:3,nanos:4e3},fields:{foo:{stringValue:"value1"},bar:{integerValue:42},emptyArray:{arrayValue:{}},emptyMap:{mapValue:{}}}}}),mW({documentMetadata:{name:"projects/test-project/databases/(default)/documents/collectionId/nodoc",readTime:{seconds:5,nanos:6},exists:!1}}),mW({namedQuery:{name:"limitQuery",bundledQuery:{parent:"projects/fireeats-97d5e/databases/(default)/documents",structuredQuery:{from:[{collectionId:"node_3.7.5_7Li7XoCjutvNxwD0tpo9"}],orderBy:[{field:{fieldPath:"sort"},direction:"DESCENDING"}],limit:{value:1}},limitType:"FIRST"},readTime:{seconds:1590011379,nanos:191164e3}}}),mW({namedQuery:{name:"limitToLastQuery",bundledQuery:{parent:"projects/fireeats-97d5e/databases/(default)/documents",structuredQuery:{from:[{collectionId:"node_3.7.5_7Li7XoCjutvNxwD0tpo9"}],orderBy:[{field:{fieldPath:"sort"},direction:"ASCENDING"}],limit:{value:1}},limitType:"LAST"},readTime:{seconds:1590011379,nanos:543063e3}}});/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mK=1;class mQ{constructor(e,t){this.firestore=e,this.bundleId=t,this.documents=new Map,this.namedQueries=new Map,this.latestReadTime=new ew(0,0),this.databaseId=e._databaseId,this.serializer=new ah(this.databaseId,!0),this.userDataReader=new fZ(this.databaseId,!0,this.serializer)}addBundleDocument(e,t){let r=this.documents.get(e.documentPath),i=null==r?void 0:r.metadata.queries,n=e.readTime,s=(null==r?void 0:r.metadata.readTime)?af(r.metadata.readTime):null,a=!n&&null==s,o=void 0!==n&&(null==s||s<n);if((a||o)&&this.documents.set(e.documentPath,{document:this.toBundleDocument(e),metadata:{name:aS(this.serializer,e.documentKey),readTime:n?ap(this.serializer,n):void 0,exists:e.documentExists}}),n&&n>this.latestReadTime&&(this.latestReadTime=n),t){let r=this.documents.get(e.documentPath);r.metadata.queries=i||[],r.metadata.queries.push(t)}}addBundleQuery(e){if(this.namedQueries.has(e.name))throw Error(`Query name conflict: ${name} has already been added.`);let t=new ew(0,0);for(let r of e.docBundleDataArray)this.addBundleDocument(r,e.name),r.readTime&&r.readTime>t&&(t=r.readTime);let r=aQ(this.serializer,nR(e.query)),i={parent:e.parent,structuredQuery:r.queryTarget.structuredQuery};this.namedQueries.set(e.name,{name:e.name,bundledQuery:i,readTime:ap(this.serializer,t)})}toBundleDocument(e){let t=this.userDataReader.createContext(4,"internal toBundledDocument"),r=mr(e.documentData,t);return{name:aS(this.serializer,e.documentKey),fields:r.mapValue.fields,updateTime:ap(this.serializer,e.versionTime),createTime:ap(this.serializer,e.createdTime)}}lengthPrefixedString(e){let t=JSON.stringify(e),r=mH.encode(t).byteLength;return`${r}${t}`}build(){let e="";for(let t of this.namedQueries.values())e+=this.lengthPrefixedString({namedQuery:t});for(let t of this.documents.values()){let r=t.metadata;e+=this.lengthPrefixedString({documentMetadata:r});let i=t.document;i&&(e+=this.lengthPrefixedString({document:i}))}let t={id:this.bundleId,createTime:ap(this.serializer,this.latestReadTime),version:mK,totalDocuments:this.documents.size,totalBytes:mH.encode(e).length};return this.lengthPrefixedString({metadata:t})+e}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m$(e,t,r,i){let n=new mQ(e,Q.newId());return n.addBundleDocument(mY(i,r,t)),n.build()}function mJ(e,t,r,i,n,s,a){let o=[];for(let e=0;e<s.length;e++)o.push(mY(n[e],a[e],s[e]));let l={name:r,query:t,parent:i,docBundleDataArray:o},h=new mQ(e,r);return h.addBundleQuery(l),h.build()}function mY(e,t,r){return{documentData:t,documentKey:r.mutableCopy().key,documentPath:e,documentExists:!0,createdTime:r.createTime.toTimestamp(),readTime:r.readTime.toTimestamp(),versionTime:r.version.toTimestamp()}}class mX{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mZ extends mf{constructor(e,t,r,i,n,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=n}exists(){return super.exists()}data(e={}){if(this._document){if(!this._converter)return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps);{let t=new m0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}}}get(e,t={}){if(this._document){let r=this._document.data.field(mg("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new O(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};if(t.type=mZ._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument())return t;let r=this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous");return t.bundle=m$(this._firestore,e,r,this.ref.path),t}}mZ._jsonSchemaVersion="firestore/documentSnapshot/1.0",mZ._jsonSchema={type:eg("string",mZ._jsonSchemaVersion),bundleSource:eg("string","DocumentSnapshot"),bundleName:eg("string"),bundle:eg("string")};class m0 extends mZ{data(e={}){return super.data(e)}}class m1{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new mX(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new m0(this._firestore,this._userDataWriter,r.key,r,new mX(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new O(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=m2(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new O(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=m1._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Q.newId();let t=this._firestore._databaseId.database,r=this._firestore._databaseId.projectId,i=`projects/${r}/databases/${t}/documents`,n=[],s=[],a=[];return this.docs.forEach(e=>{null!==e._document&&(n.push(e._document),s.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),a.push(e.ref.path))}),e.bundle=mJ(this._firestore,this.query._query,e.bundleName,i,a,n,s),e}}function m2(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(r=>{let i=new m0(e._firestore,e._userDataWriter,r.doc.key,r.doc,new mX(e._snapshot.mutatedKeys.has(r.doc.key),e._snapshot.fromCache),e.query.converter);return r.doc,{type:"added",doc:i,oldIndex:-1,newIndex:t++}})}{let r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{let i=new m0(e._firestore,e._userDataWriter,t.doc.key,t.doc,new mX(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),n=-1,s=-1;return 0!==t.type&&(n=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(s=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:m3(t.type),doc:i,oldIndex:n,newIndex:s}})}}function m3(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return I(61501,{type:e})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m4(e){e=ef(e,fk);let t=ef(e.firestore,fL);return fn(fB(t),e._key).then(r=>ge(t,e,r))}m1._jsonSchemaVersion="firestore/querySnapshot/1.0",m1._jsonSchema={type:eg("string",m1._jsonSchemaVersion),bundleSource:eg("string","QuerySnapshot"),bundleName:eg("string"),bundle:eg("string")};class m6 extends mz{constructor(e){super(),this.firestore=e}convertBytes(e){return new fG(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new fk(this.firestore,null,t)}}function m5(e){e=ef(e,fx);let t=ef(e.firestore,fL),r=fB(t),i=new m6(t);return my(e._query),fs(r,e._query).then(r=>new m1(t,i,e,r))}function m9(e,t,r){e=ef(e,fk);let i=ef(e.firestore,fL),n=mV(e.converter,t,r),s=f1(f0(i),"setDoc",e._key,n,null!==e.converter,r).toMutation(e._key,sC.none());return m7(i,[s])}function m8(e){return m7(ef(e.firestore,fL),[new sV(e._key,sC.none())])}function m7(e,t){return fa(fB(e),t)}function ge(e,t,r){let i=r.docs.get(t._key),n=new m6(e);return new mZ(e,n,t._key,i,new mX(r.hasPendingWrites,r.fromCache),t.converter)}class gt{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=pj.provider,this._offlineComponentProvider={build:t=>new pV(t,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}}function gr(e,t){if((e=(0,c.m9)(e)).firestore===t)return e;throw new O(N.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gi(){return new f2("deleteField")}function gn(){return new f4("serverTimestamp")}new WeakMap,/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fV("node")},1552:(e,t,r)=>{"use strict";r.d(t,{Jt:()=>tg,cF:()=>tv,iH:()=>ty,KV:()=>tm});var i,n,s=r(3497),a=r(715),o=r(7752);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l="firebasestorage.googleapis.com",h="storageBucket",u=12e4,c=6e5,d=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p extends a.ZR{constructor(e,t,r=0){super(f(e),`Firebase Storage: ${t} (${f(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,p.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return f(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function f(e){return"storage/"+e}function m(){let e="An unknown error occurred, please check the error payload for server response.";return new p(i.UNKNOWN,e)}function g(e){return new p(i.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function y(e){return new p(i.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function v(){let e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new p(i.UNAUTHENTICATED,e)}function b(){return new p(i.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function w(e){return new p(i.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function E(){return new p(i.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function S(){return new p(i.CANCELED,"User canceled the upload/download.")}function T(e){return new p(i.INVALID_URL,"Invalid URL '"+e+"'.")}function C(e){return new p(i.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function A(){return new p(i.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+h+"' property when initializing the app?")}function _(){return new p(i.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function x(){return new p(i.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function k(){return new p(i.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function I(e){return new p(i.INVALID_ARGUMENT,e)}function D(){return new p(i.APP_DELETED,"The Firebase app was deleted.")}function P(e){return new p(i.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function R(e,t){return new p(i.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function N(e){throw new p(i.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(i||(i={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=O.makeFromUrl(e,t)}catch(t){return new O(e,"")}if(""===r.path)return r;throw C(e)}static makeFromUrl(e,t){let r=null,i="([A-Za-z0-9.\\-_]+)";function n(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}let s=RegExp("^gs://"+i+"(/(.*))?$","i"),a={bucket:1,path:3};function o(e){e.path_=decodeURIComponent(e.path)}let h="v[A-Za-z0-9_]+",u=t.replace(/[.]/g,"\\."),c="(/([^?#]*).*)?$",d=RegExp(`^https?://${u}/${h}/b/${i}/o${c}`,"i"),p=t===l?"(?:storage.googleapis.com|storage.cloud.google.com)":t,f="([^?#]*)",m=[{regex:s,indices:a,postModify:n},{regex:d,indices:{bucket:1,path:3},postModify:o},{regex:RegExp(`^https?://${p}/${i}/${f}`,"i"),indices:{bucket:1,path:2},postModify:o}];for(let t=0;t<m.length;t++){let i=m[t],n=i.regex.exec(e);if(n){let e=n[i.indices.bucket],t=n[i.indices.path];t||(t=""),r=new O(e,t),i.postModify(r);break}}if(null==r)throw T(e);return r}}class M{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L(e,t,r){let i=1,n=null,s=null,a=!1,o=0;function l(){return 2===o}let h=!1;function u(...e){h||(h=!0,t.apply(null,e))}function c(t){n=setTimeout(()=>{n=null,e(p,l())},t)}function d(){s&&clearTimeout(s)}function p(e,...t){let r;if(h){d();return}if(e||l()||a){d(),u.call(null,e,...t);return}i<64&&(i*=2),1===o?(o=2,r=0):r=(i+Math.random())*1e3,c(r)}let f=!1;function m(e){!f&&(f=!0,d(),!h&&(null!==n?(e||(o=2),clearTimeout(n),c(0)):e||(o=1)))}return c(0),s=setTimeout(()=>{a=!0,m(!0)},r),m}function F(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B(e){return void 0!==e}function U(e){return"function"==typeof e}function z(e){return"object"==typeof e&&!Array.isArray(e)}function V(e){return"string"==typeof e||e instanceof String}function j(e){return G()&&e instanceof Blob}function G(){return"undefined"!=typeof Blob}function q(e,t,r,i){if(i<t)throw I(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>r)throw I(`Invalid value for '${e}'. Expected ${r} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H(e,t,r){let i=t;return null==r&&(i=`https://${t}`),`${r}://${i}/v0${e}`}function W(e){let t=encodeURIComponent,r="?";for(let i in e)e.hasOwnProperty(i)&&(r=r+(t(i)+"=")+t(e[i])+"&");return r.slice(0,-1)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(e,t){let r=e>=500&&e<600,i=-1!==[408,429].indexOf(e),n=-1!==t.indexOf(e);return r||i||n}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(n||(n={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e,t,r,i,n,s,a,o,l,h,u,c=!0,d=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=n,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=o,this.timeout_=l,this.progressCallback_=h,this.connectionFactory_=u,this.retry=c,this.isUsingEmulator=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){let e=(e,t)=>{if(t){e(!1,new $(!1,null,!0));return}let r=this.connectionFactory_();this.pendingConnection_=r;let i=e=>{let t=e.loaded,r=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,r)};null!==this.progressCallback_&&r.addUploadProgressListener(i),r.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&r.removeUploadProgressListener(i),this.pendingConnection_=null;let t=r.getErrorCode()===n.NO_ERROR,s=r.getStatus();if(!t||K(s,this.additionalRetryCodes_)&&this.retry){e(!1,new $(!1,null,r.getErrorCode()===n.ABORT));return}e(!0,new $(-1!==this.successCodes_.indexOf(s),r))})},t=(e,t)=>{let r=this.resolve_,i=this.reject_,n=t.connection;if(t.wasSuccessCode)try{let e=this.callback_(n,n.getResponse());B(e)?r(e):r()}catch(e){i(e)}else if(null!==n){let e=m();e.serverResponse=n.getErrorText(),i(this.errorCallback_?this.errorCallback_(n,e):e)}else i(t.canceled?this.appDelete_?D():S():E())};this.canceled_?t(!1,new $(!1,null,!0)):this.backoffId_=L(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&F(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class ${constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function J(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function Y(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}function X(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Z(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function ee(e,t,r,i,n,s,a=!0,o=!1){let l=W(e.urlParams),h=e.url+l,u=Object.assign({},e.headers);return X(u,t),J(u,r),Y(u,s),Z(u,i),new Q(h,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function er(...e){let t=et();if(void 0!==t){let r=new t;for(let t=0;t<e.length;t++)r.append(e[t]);return r.getBlob()}if(G())return new Blob(e);throw new p(i.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function ei(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(e){if(/[^-A-Za-z0-9+/=]/.test(e))throw R("base64","Invalid character found");return Buffer.from(e,"base64").toString("binary")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let es={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ea{constructor(e,t){this.data=e,this.contentType=t||null}}function eo(e,t){switch(e){case es.RAW:return new ea(el(t));case es.BASE64:case es.BASE64URL:return new ea(eu(e,t));case es.DATA_URL:return new ea(ed(t),ep(t))}throw m()}function el(e){let t=[];for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<=127?t.push(i):i<=2047?t.push(192|i>>6,128|63&i):(64512&i)==55296?r<e.length-1&&(64512&e.charCodeAt(r+1))==56320?(i=65536|(1023&i)<<10|1023&e.charCodeAt(++r),t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):t.push(239,191,189):(64512&i)==56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(t)}function eh(e){let t;try{t=decodeURIComponent(e)}catch(e){throw R(es.DATA_URL,"Malformed data URL.")}return el(t)}function eu(e,t){let r;switch(e){case es.BASE64:{let r=-1!==t.indexOf("-"),i=-1!==t.indexOf("_");if(r||i)throw R(e,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case es.BASE64URL:{let r=-1!==t.indexOf("+"),i=-1!==t.indexOf("/");if(r||i)throw R(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}}try{r=en(t)}catch(t){if(t.message.includes("polyfill"))throw t;throw R(e,"Invalid character found")}let i=new Uint8Array(r.length);for(let e=0;e<r.length;e++)i[e]=r.charCodeAt(e);return i}class ec{constructor(e){this.base64=!1,this.contentType=null;let t=e.match(/^data:([^,]+)?,/);if(null===t)throw R(es.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=t[1]||null;null!=r&&(this.base64=ef(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function ed(e){let t=new ec(e);return t.base64?eu(es.BASE64,t.rest):eh(t.rest)}function ep(e){return new ec(e).contentType}function ef(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,t){let r=0,i="";j(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(!j(this.data_))return new em(new Uint8Array(this.data_.buffer,e,t-e),!0);{let r=ei(this.data_,e,t);return null===r?null:new em(r)}}static getBlob(...e){if(G()){let t=e.map(e=>e instanceof em?e.data_:e);return new em(er.apply(null,t))}{let t=e.map(e=>V(e)?eo(es.RAW,e).data:e.data_),r=0;t.forEach(e=>{r+=e.byteLength});let i=new Uint8Array(r),n=0;return t.forEach(e=>{for(let t=0;t<e.length;t++)i[n++]=e[t]}),new em(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(e){let t;try{t=JSON.parse(e)}catch(e){return null}return z(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(e){if(0===e.length)return null;let t=e.lastIndexOf("/");return -1===t?"":e.slice(0,t)}function ev(e,t){let r=t.split("/").filter(e=>e.length>0).join("/");return 0===e.length?r:e+"/"+r}function eb(e){let t=e.lastIndexOf("/",e.length-2);return -1===t?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ew(e,t){return t}class eE{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||ew}}let eS=null;function eT(e){return!V(e)||e.length<2?e:eb(e)}function eC(){if(eS)return eS;let e=[];function t(e,t){return eT(t)}e.push(new eE("bucket")),e.push(new eE("generation")),e.push(new eE("metageneration")),e.push(new eE("name","fullPath",!0));let r=new eE("name");function i(e,t){return void 0!==t?Number(t):t}r.xform=t,e.push(r);let n=new eE("size");return n.xform=i,e.push(n),e.push(new eE("timeCreated")),e.push(new eE("updated")),e.push(new eE("md5Hash",null,!0)),e.push(new eE("cacheControl",null,!0)),e.push(new eE("contentDisposition",null,!0)),e.push(new eE("contentEncoding",null,!0)),e.push(new eE("contentLanguage",null,!0)),e.push(new eE("contentType",null,!0)),e.push(new eE("metadata","customMetadata",!0)),eS=e}function eA(e,t){function r(){let r=new O(e.bucket,e.fullPath);return t._makeStorageReference(r)}Object.defineProperty(e,"ref",{get:r})}function e_(e,t,r){let i={};i.type="file";let n=r.length;for(let e=0;e<n;e++){let n=r[e];i[n.local]=n.xform(i,t[n.server])}return eA(i,e),i}function ex(e,t,r){let i=eg(t);return null===i?null:e_(e,i,r)}function ek(e,t,r,i){let n=eg(t);if(null===n||!V(n.downloadTokens))return null;let s=n.downloadTokens;if(0===s.length)return null;let a=encodeURIComponent;return s.split(",").map(t=>{let n=e.bucket,s=e.fullPath;return H("/b/"+a(n)+"/o/"+a(s),r,i)+W({alt:"media",token:t})})[0]}function eI(e,t){let r={},i=t.length;for(let n=0;n<i;n++){let i=t[n];i.writable&&(r[i.server]=e[i.local])}return JSON.stringify(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eD="prefixes",eP="items";function eR(e,t,r){let i={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[eD])for(let n of r[eD]){let r=n.replace(/\/$/,""),s=e._makeStorageReference(new O(t,r));i.prefixes.push(s)}if(r[eP])for(let n of r[eP]){let r=e._makeStorageReference(new O(t,n.name));i.items.push(r)}return i}function eN(e,t,r){let i=eg(r);return null===i?null:eR(e,t,i)}class eO{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(e){if(!e)throw m()}function eL(e,t){return function(r,i){let n=ex(e,i,t);return eM(null!==n),n}}function eF(e,t){return function(r,i){let n=eN(e,t,i);return eM(null!==n),n}}function eB(e,t){return function(r,i){let n=ex(e,i,t);return eM(null!==n),ek(n,i,e.host,e._protocol)}}function eU(e){return function(t,r){let i;return(i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?b():v():402===t.getStatus()?y(e.bucket):403===t.getStatus()?w(e.path):r).status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function ez(e){let t=eU(e);return function(r,i){let n=t(r,i);return 404===r.getStatus()&&(n=g(e.path)),n.serverResponse=i.serverResponse,n}}function eV(e,t,r){let i=H(t.fullServerUrl(),e.host,e._protocol),n="GET",s=e.maxOperationRetryTime,a=new eO(i,n,eL(e,r),s);return a.errorHandler=ez(t),a}function ej(e,t,r,i,n){let s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",r&&r.length>0&&(s.delimiter=r),i&&(s.pageToken=i),n&&(s.maxResults=n);let a=H(t.bucketOnlyServerUrl(),e.host,e._protocol),o="GET",l=e.maxOperationRetryTime,h=new eO(a,o,eF(e,t.bucket),l);return h.urlParams=s,h.errorHandler=eU(t),h}function eG(e,t,r){let i=H(t.fullServerUrl(),e.host,e._protocol),n="GET",s=e.maxOperationRetryTime,a=new eO(i,n,eB(e,r),s);return a.errorHandler=ez(t),a}function eq(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function eH(e,t,r){let i=Object.assign({},r);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=eq(null,t)),i}function eW(e,t,r,i,n){let s=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},o=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+o;let l=eH(t,i,n),h="--"+o+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+eI(l,r)+"\r\n--"+o+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+o+"--",c=em.getBlob(h,i,u);if(null===c)throw _();let d={name:l.fullPath},p=H(s,e.host,e._protocol),f="POST",m=e.maxUploadRetryTime,g=new eO(p,f,eL(e,r),m);return g.urlParams=d,g.headers=a,g.body=c.uploadData(),g.errorHandler=eU(t),g}class eK{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function eQ(e,t){let r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){eM(!1)}let i=t||["active"];return eM(!!r&&-1!==i.indexOf(r)),r}function e$(e,t,r,i,n){let s=t.bucketOnlyServerUrl(),a=eH(t,i,n),o={name:a.fullPath},l=H(s,e.host,e._protocol),h="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},c=eI(a,r),d=new eO(l,h,function(e){let t;eQ(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){eM(!1)}return eM(V(t)),t},e.maxUploadRetryTime);return d.urlParams=o,d.headers=u,d.body=c,d.errorHandler=eU(t),d}function eJ(e,t,r,i){let n={"X-Goog-Upload-Command":"query"},s=new eO(r,"POST",function(e){let t=eQ(e,["active","final"]),r=null;try{r=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){eM(!1)}r||eM(!1);let n=Number(r);return eM(!isNaN(n)),new eK(n,i.size(),"final"===t)},e.maxUploadRetryTime);return s.headers=n,s.errorHandler=eU(t),s}let eY=null;function eX(e,t,r,i,n,s,a,o){let l=new eK(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=i.size()),i.size()!==l.total)throw x();let h=l.total-l.current,u=h;n>0&&(u=Math.min(u,n));let c=l.current,d=c+u,p="",f={"X-Goog-Upload-Command":p=0===u?"finalize":h===u?"upload, finalize":"upload","X-Goog-Upload-Offset":`${l.current}`},m=i.slice(c,d);if(null===m)throw _();let g=new eO(r,"POST",function(e,r){let n;let a=eQ(e,["active","final"]),o=l.current+u,h=i.size();return n="final"===a?eL(t,s)(e,r):null,new eK(o,h,"final"===a,n)},t.maxUploadRetryTime);return g.headers=f,g.body=m.uploadData(),g.progressCallback=o||null,g.errorHandler=eU(e),g}let eZ={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function e0(e){switch(e){case"running":case"pausing":case"canceling":return eZ.RUNNING;case"paused":return eZ.PAUSED;case"success":return eZ.SUCCESS;case"canceled":return eZ.CANCELED;default:return eZ.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,t,r){if(U(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{let t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let e3=null;class e4{constructor(){this.errorText_="",this.sent_=!1,this.errorCode_=n.NO_ERROR}async send(e,t,r,i,s){if(this.sent_)throw N("cannot .send() more than once");this.sent_=!0;try{let a=await e7(e,t,r,s,i);this.headers_=a.headers,this.statusCode_=a.status,this.errorCode_=n.NO_ERROR,this.body_=await a.arrayBuffer()}catch(e){this.errorText_=null==e?void 0:e.message,this.statusCode_=0,this.errorCode_=n.NETWORK_ERROR}}getErrorCode(){if(void 0===this.errorCode_)throw N("cannot .getErrorCode() before receiving response");return this.errorCode_}getStatus(){if(void 0===this.statusCode_)throw N("cannot .getStatus() before receiving response");return this.statusCode_}getErrorText(){return this.errorText_}abort(){}getResponseHeader(e){if(!this.headers_)throw N("cannot .getResponseHeader() before receiving response");return this.headers_.get(e)}addUploadProgressListener(e){}removeUploadProgressListener(e){}}class e6 extends e4{getResponse(){if(!this.body_)throw N("cannot .getResponse() before receiving response");return Buffer.from(this.body_).toString("utf-8")}}function e5(){return e3?e3():new e6}class e9 extends null{getResponse(){if(!this.body_)throw N("cannot .getResponse() before sending");return this.body_}}class e8 extends e4{constructor(){super(...arguments),this.stream_=null}async send(e,t,r,i,s){if(this.sent_)throw N("cannot .send() more than once");this.sent_=!0;try{let a=await e7(e,t,r,s,i);this.headers_=a.headers,this.statusCode_=a.status,this.errorCode_=n.NO_ERROR,this.stream_=a.body}catch(e){this.errorText_=null==e?void 0:e.message,this.statusCode_=0,this.errorCode_=n.NETWORK_ERROR}}getResponse(){if(!this.stream_)throw N("cannot .getResponse() before sending");return this.stream_}}function e7(e,t,r,i,n){let s={method:t,headers:i||{},body:n};return(0,a.Xx)(e)&&r&&(s.credentials="include"),fetch(e,s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e,t){this._service=e,t instanceof O?this._location=t:this._location=O.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new te(e,t)}get root(){let e=new O(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return eb(this._location.path)}get storage(){return this._service}get parent(){let e=ey(this._location.path);if(null===e)return null;let t=new O(this._location.bucket,e);return new te(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw P(e)}}function tt(e,t,r){e._throwIfRoot("uploadBytes");let i=eW(e.storage,e._location,eC(),new em(t,!0),r);return e.storage.makeRequestWithTokens(i,e5).then(t=>({metadata:t,ref:e}))}function tr(e,t){null!=t&&"number"==typeof t.maxResults&&q("options.maxResults",1,1e3,t.maxResults);let r=t||{},i=ej(e.storage,e._location,"/",r.pageToken,r.maxResults);return e.storage.makeRequestWithTokens(i,e5)}function ti(e){e._throwIfRoot("getDownloadURL");let t=eG(e.storage,e._location,eC());return e.storage.makeRequestWithTokens(t,e5).then(e=>{if(null===e)throw k();return e})}function tn(e,t){let r=ev(e._location.path,t),i=new O(e._location.bucket,r);return new te(e.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(e){return/^[A-Za-z]+:\/\//.test(e)}function ta(e,t){return new te(e,t)}function to(e,t){if(e instanceof tc){let r=e;if(null==r._bucket)throw A();let i=new te(r,r._bucket);return null!=t?to(i,t):i}return void 0!==t?tn(e,t):e}function tl(e,t){if(!(t&&ts(t)))return to(e,t);if(e instanceof tc)return ta(e,t);throw I("To use ref(service, url), the first argument must be a Storage instance.")}function th(e,t){let r=null==t?void 0:t[h];return null==r?null:O.makeFromBucketSpec(r,e)}function tu(e,t,r,i={}){e.host=`${t}:${r}`;let n=(0,a.Xx)(t);n&&((0,a.Uo)(`https://${e.host}/b`),(0,a.dp)("Storage",!0)),e._isUsingEmulator=!0,e._protocol=n?"https":"http";let{mockUserToken:s}=i;s&&(e._overrideAuthToken="string"==typeof s?s:(0,a.Sg)(s,e.app.options.projectId))}class tc{constructor(e,t,r,i,n,s=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=n,this._isUsingEmulator=s,this._bucket=null,this._host=l,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=u,this._maxUploadRetryTime=c,this._requests=new Set,null!=i?this._bucket=O.makeFromBucketSpec(i,this._host):this._bucket=th(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=O.makeFromBucketSpec(this._url,e):this._bucket=th(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){q("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){q("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if((0,s.rh)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;let e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new te(this,e)}_makeRequest(e,t,r,i,n=!0){if(this._deleted)return new M(D());{let s=ee(e,this._appId,r,i,t,this._firebaseVersion,n,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){let[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}let td="@firebase/storage",tp="0.13.14",tf="storage";function tm(e,t,r){return tt(e=(0,a.m9)(e),t,r)}function tg(e){return ti(e=(0,a.m9)(e))}function ty(e,t){return tl(e=(0,a.m9)(e),t)}function tv(e=(0,s.Mq)(),t){e=(0,a.m9)(e);let r=(0,s.qX)(e,tf).getImmediate({identifier:t}),i=(0,a.P0)("storage");return i&&tb(r,...i),r}function tb(e,t,r,i={}){tu(e,t,r,i)}function tw(e,{instanceIdentifier:t}){return new tc(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t,s.Jn)}(function(){(0,s.Xd)(new o.wA(tf,tw,"PUBLIC").setMultipleInstances(!0)),(0,s.KN)(td,tp)})()},2750:(e,t,r)=>{"use strict";r.d(t,{n:()=>J});var i,n=Symbol.for("immer-nothing"),s=Symbol.for("immer-draftable"),a=Symbol.for("immer-state");function o(e,...t){throw Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var l=Object.getPrototypeOf;function h(e){return!!e&&!!e[a]}function u(e){return!!e&&(d(e)||Array.isArray(e)||!!e[s]||!!e.constructor?.[s]||v(e)||b(e))}var c=Object.prototype.constructor.toString();function d(e){if(!e||"object"!=typeof e)return!1;let t=l(e);if(null===t)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object||"function"==typeof r&&Function.toString.call(r)===c}function p(e,t){0===f(e)?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,i)=>t(i,r,e))}function f(e){let t=e[a];return t?t.type_:Array.isArray(e)?1:v(e)?2:b(e)?3:0}function m(e,t){return 2===f(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function g(e,t,r){let i=f(e);2===i?e.set(t,r):3===i?e.add(r):e[t]=r}function y(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function v(e){return e instanceof Map}function b(e){return e instanceof Set}function w(e){return e.copy_||e.base_}function E(e,t){if(v(e))return new Map(e);if(b(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=d(e);if(!0!==t&&("class_only"!==t||r)){let t=l(e);return null!==t&&r?{...e}:Object.assign(Object.create(t),e)}{let t=Object.getOwnPropertyDescriptors(e);delete t[a];let r=Reflect.ownKeys(t);for(let i=0;i<r.length;i++){let n=r[i],s=t[n];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[n]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[n]})}return Object.create(l(e),t)}}function S(e,t=!1){return C(e)||h(e)||!u(e)||(f(e)>1&&Object.defineProperties(e,{set:{value:T},add:{value:T},clear:{value:T},delete:{value:T}}),Object.freeze(e),t&&Object.values(e).forEach(e=>S(e,!0))),e}function T(){o(2)}function C(e){return Object.isFrozen(e)}var A={};function _(e){let t=A[e];return t||o(0,e),t}function x(){return i}function k(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function I(e,t){t&&(_("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function D(e){P(e),e.drafts_.forEach(N),e.drafts_=null}function P(e){e===i&&(i=e.parent_)}function R(e){return i=k(i,e)}function N(e){let t=e[a];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function O(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return void 0!==e&&e!==r?(r[a].modified_&&(D(t),o(4)),u(e)&&(e=M(t,e),t.parent_||F(t,e)),t.patches_&&_("Patches").generateReplacementPatches_(r[a].base_,e,t.patches_,t.inversePatches_)):e=M(t,r,[]),D(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==n?e:void 0}function M(e,t,r){if(C(t))return t;let i=t[a];if(!i)return p(t,(n,s)=>L(e,i,t,n,s,r)),t;if(i.scope_!==e)return t;if(!i.modified_)return F(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;let t=i.copy_,n=t,s=!1;3===i.type_&&(n=new Set(t),t.clear(),s=!0),p(n,(n,a)=>L(e,i,t,n,a,r,s)),F(e,t,!1),r&&e.patches_&&_("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function L(e,t,r,i,n,s,a){if(h(n)){let a=M(e,n,s&&t&&3!==t.type_&&!m(t.assigned_,i)?s.concat(i):void 0);if(g(r,i,a),!h(a))return;e.canAutoFreeze_=!1}else a&&r.add(n);if(u(n)&&!C(n)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;M(e,n),(!t||!t.scope_.parent_)&&"symbol"!=typeof i&&(v(r)?r.has(i):Object.prototype.propertyIsEnumerable.call(r,i))&&F(e,n)}}function F(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&S(t,r)}function B(e,t){let r=Array.isArray(e),i={type_:r?1:0,scope_:t?t.scope_:x(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},n=i,s=U;r&&(n=[i],s=z);let{revoke:a,proxy:o}=Proxy.revocable(n,s);return i.draft_=o,i.revoke_=a,o}var U={get(e,t){if(t===a)return e;let r=w(e);if(!m(r,t))return j(e,r,t);let i=r[t];return e.finalized_||!u(i)?i:i===V(e.base_,t)?(H(e),e.copy_[t]=W(i,e)):i},has:(e,t)=>t in w(e),ownKeys:e=>Reflect.ownKeys(w(e)),set(e,t,r){let i=G(w(e),t);if(i?.set)return i.set.call(e.draft_,r),!0;if(!e.modified_){let i=V(w(e),t),n=i?.[a];if(n&&n.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(y(r,i)&&(void 0!==r||m(e.base_,t)))return!0;H(e),q(e)}return!!(e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t]))||(e.copy_[t]=r,e.assigned_[t]=!0,!0)},deleteProperty:(e,t)=>(void 0!==V(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,H(e),q(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){let r=w(e),i=Reflect.getOwnPropertyDescriptor(r,t);return i?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:i.enumerable,value:r[t]}:i},defineProperty(){o(11)},getPrototypeOf:e=>l(e.base_),setPrototypeOf(){o(12)}},z={};function V(e,t){let r=e[a];return(r?w(r):e)[t]}function j(e,t,r){let i=G(t,r);return i?"value"in i?i.value:i.get?.call(e.draft_):void 0}function G(e,t){if(!(t in e))return;let r=l(e);for(;r;){let e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=l(r)}}function q(e){!e.modified_&&(e.modified_=!0,e.parent_&&q(e.parent_))}function H(e){e.copy_||(e.copy_=E(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function W(e,t){let r=v(e)?_("MapSet").proxyMap_(e,t):b(e)?_("MapSet").proxySet_(e,t):B(e,t);return(t?t.scope_:x()).drafts_.push(r),r}function K(e){return h(e)||o(10,e),Q(e)}function Q(e){let t;if(!u(e)||C(e))return e;let r=e[a];if(r){if(!r.modified_)return r.base_;r.finalized_=!0,t=E(e,r.scope_.immer_.useStrictShallowCopy_)}else t=E(e,!0);return p(t,(e,r)=>{g(t,e,Q(r))}),r&&(r.finalized_=!1),t}p(U,(e,t)=>{z[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),z.deleteProperty=function(e,t){return z.set.call(this,e,t,void 0)},z.set=function(e,t,r){return U.set.call(this,e[0],t,r,e[0])};var $=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,r)=>{let i;if("function"==typeof e&&"function"!=typeof t){let r=t;t=e;let i=this;return function(e=r,...n){return i.produce(e,e=>t.call(this,e,...n))}}if("function"!=typeof t&&o(6),void 0!==r&&"function"!=typeof r&&o(7),u(e)){let n=R(this),s=W(e,void 0),a=!0;try{i=t(s),a=!1}finally{a?D(n):P(n)}return I(n,r),O(i,n)}if(e&&"object"==typeof e)o(1,e);else{if(void 0===(i=t(e))&&(i=e),i===n&&(i=void 0),this.autoFreeze_&&S(i,!0),r){let t=[],n=[];_("Patches").generateReplacementPatches_(e,i,t,n),r(t,n)}return i}},this.produceWithPatches=(e,t)=>{let r,i;return"function"==typeof e?(t,...r)=>this.produceWithPatches(t,t=>e(t,...r)):[this.produce(e,t,(e,t)=>{r=e,i=t}),r,i]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){u(e)||o(8),h(e)&&(e=K(e));let t=R(this),r=W(e,void 0);return r[a].isManual_=!0,P(t),r}finishDraft(e,t){let r=e&&e[a];r&&r.isManual_||o(9);let{scope_:i}=r;return I(i,t),O(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let i=t[r];if(0===i.path.length&&"replace"===i.op){e=i.value;break}}r>-1&&(t=t.slice(r+1));let i=_("Patches").applyPatches_;return h(e)?i(e,t):this.produce(e,e=>i(e,t))}}().produce;let J=e=>(t,r,i)=>(i.setState=(e,r,...i)=>t("function"==typeof e?$(e):e,r,...i),e(i.setState,r,i))},8408:(e,t,r)=>{"use strict";r.d(t,{U:()=>h});var i=r(7577);let n=e=>{let t;let r=new Set,i=(e,i)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=i?i:"object"!=typeof n||null===n)?n:Object.assign({},t,n),r.forEach(r=>r(t,e))}},n=()=>t,s={setState:i,getState:n,getInitialState:()=>a,subscribe:e=>(r.add(e),()=>r.delete(e))},a=t=e(i,n,s);return s},s=e=>e?n(e):n,a=e=>e;function o(e,t=a){let r=i.useSyncExternalStore(e.subscribe,i.useCallback(()=>t(e.getState()),[e,t]),i.useCallback(()=>t(e.getInitialState()),[e,t]));return i.useDebugValue(r),r}let l=e=>{let t=s(e),r=e=>o(t,e);return Object.assign(r,t),r},h=e=>e?l(e):l},1513:e=>{"use strict";e.exports={i8:"1.9.15"}},6541:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Api":{"fields":{"name":{"type":"string","id":1},"methods":{"rule":"repeated","type":"Method","id":2},"options":{"rule":"repeated","type":"Option","id":3},"version":{"type":"string","id":4},"sourceContext":{"type":"SourceContext","id":5},"mixins":{"rule":"repeated","type":"Mixin","id":6},"syntax":{"type":"Syntax","id":7}}},"Method":{"fields":{"name":{"type":"string","id":1},"requestTypeUrl":{"type":"string","id":2},"requestStreaming":{"type":"bool","id":3},"responseTypeUrl":{"type":"string","id":4},"responseStreaming":{"type":"bool","id":5},"options":{"rule":"repeated","type":"Option","id":6},"syntax":{"type":"Syntax","id":7}}},"Mixin":{"fields":{"name":{"type":"string","id":1},"root":{"type":"string","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}}}}}}}}')},9987:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"options":{"go_package":"google.golang.org/protobuf/types/descriptorpb","java_package":"com.google.protobuf","java_outer_classname":"DescriptorProtos","csharp_namespace":"Google.Protobuf.Reflection","objc_class_prefix":"GPB","cc_enable_arenas":true,"optimize_for":"SPEED"},"nested":{"FileDescriptorSet":{"edition":"proto2","fields":{"file":{"rule":"repeated","type":"FileDescriptorProto","id":1}},"extensions":[[536000000,536000000]]},"Edition":{"edition":"proto2","values":{"EDITION_UNKNOWN":0,"EDITION_LEGACY":900,"EDITION_PROTO2":998,"EDITION_PROTO3":999,"EDITION_2023":1000,"EDITION_2024":1001,"EDITION_1_TEST_ONLY":1,"EDITION_2_TEST_ONLY":2,"EDITION_99997_TEST_ONLY":99997,"EDITION_99998_TEST_ONLY":99998,"EDITION_99999_TEST_ONLY":99999,"EDITION_MAX":2147483647}},"FileDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"package":{"type":"string","id":2},"dependency":{"rule":"repeated","type":"string","id":3},"publicDependency":{"rule":"repeated","type":"int32","id":10},"weakDependency":{"rule":"repeated","type":"int32","id":11},"optionDependency":{"rule":"repeated","type":"string","id":15},"messageType":{"rule":"repeated","type":"DescriptorProto","id":4},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":5},"service":{"rule":"repeated","type":"ServiceDescriptorProto","id":6},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":7},"options":{"type":"FileOptions","id":8},"sourceCodeInfo":{"type":"SourceCodeInfo","id":9},"syntax":{"type":"string","id":12},"edition":{"type":"Edition","id":14}}},"DescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"field":{"rule":"repeated","type":"FieldDescriptorProto","id":2},"extension":{"rule":"repeated","type":"FieldDescriptorProto","id":6},"nestedType":{"rule":"repeated","type":"DescriptorProto","id":3},"enumType":{"rule":"repeated","type":"EnumDescriptorProto","id":4},"extensionRange":{"rule":"repeated","type":"ExtensionRange","id":5},"oneofDecl":{"rule":"repeated","type":"OneofDescriptorProto","id":8},"options":{"type":"MessageOptions","id":7},"reservedRange":{"rule":"repeated","type":"ReservedRange","id":9},"reservedName":{"rule":"repeated","type":"string","id":10},"visibility":{"type":"SymbolVisibility","id":11}},"nested":{"ExtensionRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2},"options":{"type":"ExtensionRangeOptions","id":3}}},"ReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"ExtensionRangeOptions":{"edition":"proto2","fields":{"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999},"declaration":{"rule":"repeated","type":"Declaration","id":2,"options":{"retention":"RETENTION_SOURCE"}},"features":{"type":"FeatureSet","id":50},"verification":{"type":"VerificationState","id":3,"options":{"default":"UNVERIFIED","retention":"RETENTION_SOURCE"}}},"extensions":[[1000,536870911]],"nested":{"Declaration":{"fields":{"number":{"type":"int32","id":1},"fullName":{"type":"string","id":2},"type":{"type":"string","id":3},"reserved":{"type":"bool","id":5},"repeated":{"type":"bool","id":6}},"reserved":[[4,4]]},"VerificationState":{"values":{"DECLARATION":0,"UNVERIFIED":1}}}},"FieldDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":3},"label":{"type":"Label","id":4},"type":{"type":"Type","id":5},"typeName":{"type":"string","id":6},"extendee":{"type":"string","id":2},"defaultValue":{"type":"string","id":7},"oneofIndex":{"type":"int32","id":9},"jsonName":{"type":"string","id":10},"options":{"type":"FieldOptions","id":8},"proto3Optional":{"type":"bool","id":17}},"nested":{"Type":{"values":{"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Label":{"values":{"LABEL_OPTIONAL":1,"LABEL_REPEATED":3,"LABEL_REQUIRED":2}}}},"OneofDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"options":{"type":"OneofOptions","id":2}}},"EnumDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"value":{"rule":"repeated","type":"EnumValueDescriptorProto","id":2},"options":{"type":"EnumOptions","id":3},"reservedRange":{"rule":"repeated","type":"EnumReservedRange","id":4},"reservedName":{"rule":"repeated","type":"string","id":5},"visibility":{"type":"SymbolVisibility","id":6}},"nested":{"EnumReservedRange":{"fields":{"start":{"type":"int32","id":1},"end":{"type":"int32","id":2}}}}},"EnumValueDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"type":"EnumValueOptions","id":3}}},"ServiceDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"method":{"rule":"repeated","type":"MethodDescriptorProto","id":2},"options":{"type":"ServiceOptions","id":3}}},"MethodDescriptorProto":{"edition":"proto2","fields":{"name":{"type":"string","id":1},"inputType":{"type":"string","id":2},"outputType":{"type":"string","id":3},"options":{"type":"MethodOptions","id":4},"clientStreaming":{"type":"bool","id":5},"serverStreaming":{"type":"bool","id":6}}},"FileOptions":{"edition":"proto2","fields":{"javaPackage":{"type":"string","id":1},"javaOuterClassname":{"type":"string","id":8},"javaMultipleFiles":{"type":"bool","id":10},"javaGenerateEqualsAndHash":{"type":"bool","id":20,"options":{"deprecated":true}},"javaStringCheckUtf8":{"type":"bool","id":27},"optimizeFor":{"type":"OptimizeMode","id":9,"options":{"default":"SPEED"}},"goPackage":{"type":"string","id":11},"ccGenericServices":{"type":"bool","id":16},"javaGenericServices":{"type":"bool","id":17},"pyGenericServices":{"type":"bool","id":18},"deprecated":{"type":"bool","id":23},"ccEnableArenas":{"type":"bool","id":31,"options":{"default":true}},"objcClassPrefix":{"type":"string","id":36},"csharpNamespace":{"type":"string","id":37},"swiftPrefix":{"type":"string","id":39},"phpClassPrefix":{"type":"string","id":40},"phpNamespace":{"type":"string","id":41},"phpMetadataNamespace":{"type":"string","id":44},"rubyPackage":{"type":"string","id":45},"features":{"type":"FeatureSet","id":50},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[42,42],[38,38],"php_generic_services"],"nested":{"OptimizeMode":{"values":{"SPEED":1,"CODE_SIZE":2,"LITE_RUNTIME":3}}}},"MessageOptions":{"edition":"proto2","fields":{"messageSetWireFormat":{"type":"bool","id":1},"noStandardDescriptorAccessor":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"mapEntry":{"type":"bool","id":7},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":11,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":12},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[5,5],[6,6],[8,8],[9,9]]},"FieldOptions":{"edition":"proto2","fields":{"ctype":{"type":"CType","id":1,"options":{"default":"STRING"}},"packed":{"type":"bool","id":2},"jstype":{"type":"JSType","id":6,"options":{"default":"JS_NORMAL"}},"lazy":{"type":"bool","id":5},"unverifiedLazy":{"type":"bool","id":15},"deprecated":{"type":"bool","id":3},"weak":{"type":"bool","id":10,"options":{"deprecated":true}},"debugRedact":{"type":"bool","id":16},"retention":{"type":"OptionRetention","id":17},"targets":{"rule":"repeated","type":"OptionTargetType","id":19},"editionDefaults":{"rule":"repeated","type":"EditionDefault","id":20},"features":{"type":"FeatureSet","id":21},"featureSupport":{"type":"FeatureSupport","id":22},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[4,4],[18,18]],"nested":{"CType":{"values":{"STRING":0,"CORD":1,"STRING_PIECE":2}},"JSType":{"values":{"JS_NORMAL":0,"JS_STRING":1,"JS_NUMBER":2}},"OptionRetention":{"values":{"RETENTION_UNKNOWN":0,"RETENTION_RUNTIME":1,"RETENTION_SOURCE":2}},"OptionTargetType":{"values":{"TARGET_TYPE_UNKNOWN":0,"TARGET_TYPE_FILE":1,"TARGET_TYPE_EXTENSION_RANGE":2,"TARGET_TYPE_MESSAGE":3,"TARGET_TYPE_FIELD":4,"TARGET_TYPE_ONEOF":5,"TARGET_TYPE_ENUM":6,"TARGET_TYPE_ENUM_ENTRY":7,"TARGET_TYPE_SERVICE":8,"TARGET_TYPE_METHOD":9}},"EditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"value":{"type":"string","id":2}}},"FeatureSupport":{"fields":{"editionIntroduced":{"type":"Edition","id":1},"editionDeprecated":{"type":"Edition","id":2},"deprecationWarning":{"type":"string","id":3},"editionRemoved":{"type":"Edition","id":4}}}}},"OneofOptions":{"edition":"proto2","fields":{"features":{"type":"FeatureSet","id":1},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"EnumOptions":{"edition":"proto2","fields":{"allowAlias":{"type":"bool","id":2},"deprecated":{"type":"bool","id":3},"deprecatedLegacyJsonFieldConflicts":{"type":"bool","id":6,"options":{"deprecated":true}},"features":{"type":"FeatureSet","id":7},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"reserved":[[5,5]]},"EnumValueOptions":{"edition":"proto2","fields":{"deprecated":{"type":"bool","id":1},"features":{"type":"FeatureSet","id":2},"debugRedact":{"type":"bool","id":3},"featureSupport":{"type":"FieldOptions.FeatureSupport","id":4},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"ServiceOptions":{"edition":"proto2","fields":{"features":{"type":"FeatureSet","id":34},"deprecated":{"type":"bool","id":33},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]]},"MethodOptions":{"edition":"proto2","fields":{"deprecated":{"type":"bool","id":33},"idempotencyLevel":{"type":"IdempotencyLevel","id":34,"options":{"default":"IDEMPOTENCY_UNKNOWN"}},"features":{"type":"FeatureSet","id":35},"uninterpretedOption":{"rule":"repeated","type":"UninterpretedOption","id":999}},"extensions":[[1000,536870911]],"nested":{"IdempotencyLevel":{"values":{"IDEMPOTENCY_UNKNOWN":0,"NO_SIDE_EFFECTS":1,"IDEMPOTENT":2}}}},"UninterpretedOption":{"edition":"proto2","fields":{"name":{"rule":"repeated","type":"NamePart","id":2},"identifierValue":{"type":"string","id":3},"positiveIntValue":{"type":"uint64","id":4},"negativeIntValue":{"type":"int64","id":5},"doubleValue":{"type":"double","id":6},"stringValue":{"type":"bytes","id":7},"aggregateValue":{"type":"string","id":8}},"nested":{"NamePart":{"fields":{"namePart":{"rule":"required","type":"string","id":1},"isExtension":{"rule":"required","type":"bool","id":2}}}}},"FeatureSet":{"edition":"proto2","fields":{"fieldPresence":{"type":"FieldPresence","id":1,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_2023","edition_defaults.value":"EXPLICIT"}},"enumType":{"type":"EnumType","id":2,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"OPEN"}},"repeatedFieldEncoding":{"type":"RepeatedFieldEncoding","id":3,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"PACKED"}},"utf8Validation":{"type":"Utf8Validation","id":4,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"VERIFY"}},"messageEncoding":{"type":"MessageEncoding","id":5,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_LEGACY","edition_defaults.value":"LENGTH_PREFIXED"}},"jsonFormat":{"type":"JsonFormat","id":6,"options":{"retention":"RETENTION_RUNTIME","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2023","edition_defaults.edition":"EDITION_PROTO3","edition_defaults.value":"ALLOW"}},"enforceNamingStyle":{"type":"EnforceNamingStyle","id":7,"options":{"retention":"RETENTION_SOURCE","targets":"TARGET_TYPE_METHOD","feature_support.edition_introduced":"EDITION_2024","edition_defaults.edition":"EDITION_2024","edition_defaults.value":"STYLE2024"}},"defaultSymbolVisibility":{"type":"VisibilityFeature.DefaultSymbolVisibility","id":8,"options":{"retention":"RETENTION_SOURCE","targets":"TARGET_TYPE_FILE","feature_support.edition_introduced":"EDITION_2024","edition_defaults.edition":"EDITION_2024","edition_defaults.value":"EXPORT_TOP_LEVEL"}}},"extensions":[[1000,9994],[9995,9999],[10000,10000]],"reserved":[[999,999]],"nested":{"FieldPresence":{"values":{"FIELD_PRESENCE_UNKNOWN":0,"EXPLICIT":1,"IMPLICIT":2,"LEGACY_REQUIRED":3}},"EnumType":{"values":{"ENUM_TYPE_UNKNOWN":0,"OPEN":1,"CLOSED":2}},"RepeatedFieldEncoding":{"values":{"REPEATED_FIELD_ENCODING_UNKNOWN":0,"PACKED":1,"EXPANDED":2}},"Utf8Validation":{"values":{"UTF8_VALIDATION_UNKNOWN":0,"VERIFY":2,"NONE":3}},"MessageEncoding":{"values":{"MESSAGE_ENCODING_UNKNOWN":0,"LENGTH_PREFIXED":1,"DELIMITED":2}},"JsonFormat":{"values":{"JSON_FORMAT_UNKNOWN":0,"ALLOW":1,"LEGACY_BEST_EFFORT":2}},"EnforceNamingStyle":{"values":{"ENFORCE_NAMING_STYLE_UNKNOWN":0,"STYLE2024":1,"STYLE_LEGACY":2}},"VisibilityFeature":{"fields":{},"reserved":[[1,536870911]],"nested":{"DefaultSymbolVisibility":{"values":{"DEFAULT_SYMBOL_VISIBILITY_UNKNOWN":0,"EXPORT_ALL":1,"EXPORT_TOP_LEVEL":2,"LOCAL_ALL":3,"STRICT":4}}}}}},"FeatureSetDefaults":{"edition":"proto2","fields":{"defaults":{"rule":"repeated","type":"FeatureSetEditionDefault","id":1},"minimumEdition":{"type":"Edition","id":4},"maximumEdition":{"type":"Edition","id":5}},"nested":{"FeatureSetEditionDefault":{"fields":{"edition":{"type":"Edition","id":3},"overridableFeatures":{"type":"FeatureSet","id":4},"fixedFeatures":{"type":"FeatureSet","id":5}},"reserved":[[1,1],[2,2],"features"]}}},"SourceCodeInfo":{"edition":"proto2","fields":{"location":{"rule":"repeated","type":"Location","id":1}},"extensions":[[536000000,536000000]],"nested":{"Location":{"fields":{"path":{"rule":"repeated","type":"int32","id":1,"options":{"packed":true}},"span":{"rule":"repeated","type":"int32","id":2,"options":{"packed":true}},"leadingComments":{"type":"string","id":3},"trailingComments":{"type":"string","id":4},"leadingDetachedComments":{"rule":"repeated","type":"string","id":6}}}}},"GeneratedCodeInfo":{"edition":"proto2","fields":{"annotation":{"rule":"repeated","type":"Annotation","id":1}},"nested":{"Annotation":{"fields":{"path":{"rule":"repeated","type":"int32","id":1,"options":{"packed":true}},"sourceFile":{"type":"string","id":2},"begin":{"type":"int32","id":3},"end":{"type":"int32","id":4},"semantic":{"type":"Semantic","id":5}},"nested":{"Semantic":{"values":{"NONE":0,"SET":1,"ALIAS":2}}}}}},"SymbolVisibility":{"edition":"proto2","values":{"VISIBILITY_UNSET":0,"VISIBILITY_LOCAL":1,"VISIBILITY_EXPORT":2}}}}}}}}')},7674:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')},3795:e=>{"use strict";e.exports=JSON.parse('{"nested":{"google":{"nested":{"protobuf":{"nested":{"Type":{"fields":{"name":{"type":"string","id":1},"fields":{"rule":"repeated","type":"Field","id":2},"oneofs":{"rule":"repeated","type":"string","id":3},"options":{"rule":"repeated","type":"Option","id":4},"sourceContext":{"type":"SourceContext","id":5},"syntax":{"type":"Syntax","id":6}}},"Field":{"fields":{"kind":{"type":"Kind","id":1},"cardinality":{"type":"Cardinality","id":2},"number":{"type":"int32","id":3},"name":{"type":"string","id":4},"typeUrl":{"type":"string","id":6},"oneofIndex":{"type":"int32","id":7},"packed":{"type":"bool","id":8},"options":{"rule":"repeated","type":"Option","id":9},"jsonName":{"type":"string","id":10},"defaultValue":{"type":"string","id":11}},"nested":{"Kind":{"values":{"TYPE_UNKNOWN":0,"TYPE_DOUBLE":1,"TYPE_FLOAT":2,"TYPE_INT64":3,"TYPE_UINT64":4,"TYPE_INT32":5,"TYPE_FIXED64":6,"TYPE_FIXED32":7,"TYPE_BOOL":8,"TYPE_STRING":9,"TYPE_GROUP":10,"TYPE_MESSAGE":11,"TYPE_BYTES":12,"TYPE_UINT32":13,"TYPE_ENUM":14,"TYPE_SFIXED32":15,"TYPE_SFIXED64":16,"TYPE_SINT32":17,"TYPE_SINT64":18}},"Cardinality":{"values":{"CARDINALITY_UNKNOWN":0,"CARDINALITY_OPTIONAL":1,"CARDINALITY_REQUIRED":2,"CARDINALITY_REPEATED":3}}}},"Enum":{"fields":{"name":{"type":"string","id":1},"enumvalue":{"rule":"repeated","type":"EnumValue","id":2},"options":{"rule":"repeated","type":"Option","id":3},"sourceContext":{"type":"SourceContext","id":4},"syntax":{"type":"Syntax","id":5}}},"EnumValue":{"fields":{"name":{"type":"string","id":1},"number":{"type":"int32","id":2},"options":{"rule":"repeated","type":"Option","id":3}}},"Option":{"fields":{"name":{"type":"string","id":1},"value":{"type":"Any","id":2}}},"Syntax":{"values":{"SYNTAX_PROTO2":0,"SYNTAX_PROTO3":1}},"Any":{"fields":{"type_url":{"type":"string","id":1},"value":{"type":"bytes","id":2}}},"SourceContext":{"fields":{"fileName":{"type":"string","id":1}}}}}}}}}')}};